import{r as e,j as s,t as a,w as l,Y as t,y as i,m as r,co as c,cu as n,cv as d,c0 as m,cw as x,o,F as h,v as j,q as u,aQ as p,aU as v,W as g,s as N,cx as f,cy as y,aT as w,bG as b,bH as S,cz as A,cA as R,aB as E,b5 as T,cs as C,bE as M}from"./react-vendor-SE0pM8Ra.js";import{C as _,o as U,B as F,I as L,A as k,E as D,G as I,H as P,K as O,u as $,v as V,a1 as Y,Y as G,$ as z,h as W,D as H,a as Q,b as B,aj as q,a5 as J,d as K,q as X,r as Z,s as ee,t as se,z as ae,ak as le,ac as te,ad as ie,k as re,af as ce,l as ne,m as de,n as me,ag as xe,L as oe,M as he,y as je,ab as ue}from"./ai-services-C7T4cFUa.js";import{u as pe,r as ve,P as ge,a as Ne,T as fe}from"./usePermissions-DsXjDr-p.js";import{J as ye}from"./vendor-CrSvAuNw.js";import{f as we}from"./utilities-CJeqyZZO.js";import"./ui-components-ByoYm48K.js";import"./data-fetching-De8LKKym.js";import"./ocr-worker-Ehk6BbiK.js";import"./pdf-worker-CdhgQTyu.js";import"./supabase-Cfql4b7O.js";import"./forms-Mu2Tem6y.js";const be=[{value:"user",label:"User",color:"bg-gray-100 text-gray-800"},{value:"moderator",label:"Moderator",color:"bg-blue-100 text-blue-800"},{value:"admin",label:"Admin",color:"bg-purple-100 text-purple-800"},{value:"super_admin",label:"Super Admin",color:"bg-red-100 text-red-800"}],Se=({className:x=""})=>{const[o,h]=e.useState([]),[j,u]=e.useState([]),[p,v]=e.useState(!0),[g,N]=e.useState(""),[f,y]=e.useState("all"),[w,b]=e.useState([]),[S,A]=e.useState(""),{hasPermission:R}=pe();e.useEffect(()=>{E()},[]),e.useEffect(()=>{T()},[o,g,f]);const E=async()=>{try{v(!0);const e=await ve.getUsers();h(e)}catch(e){ye.error("Failed to load users")}finally{v(!1)}},T=()=>{let e=[...o];if(g.trim()){const s=g.toLowerCase();e=e.filter(e=>e.full_name?.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))}"all"!==f&&(e=e.filter(e=>e.role===f)),u(e)},C=async(e,s)=>{try{await ve.updateUserRole(e,s),ye.success("User role updated successfully"),E()}catch(a){ye.error("Failed to update user role")}};return R(ge.USERS_READ)?s.jsxs("div",{className:`space-y-6 ${x}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage user accounts, roles, and permissions"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(F,{variant:"outline",onClick:()=>{const e=[["Name","Email","Role","Created At"].join(","),...j.map(e=>[e.full_name||"",e.email,e.role,new Date(e.created_at).toLocaleDateString()].join(","))].join("\n"),s=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`users_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},children:[s.jsx(l,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(F,{variant:"outline",onClick:E,children:[s.jsx(t,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:be.map(e=>{const a=o.filter(s=>s.role===e.value).length;return s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[e.label,"s"]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]}),s.jsx(i,{className:"h-8 w-8 text-gray-400"})]})})},e.value)})}),s.jsx(_,{children:s.jsxs(U,{className:"p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(L,{placeholder:"Search users by name or email...",value:g,onChange:e=>N(e.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(k,{value:f,onValueChange:e=>y(e),children:[s.jsx(D,{children:s.jsx(I,{placeholder:"Filter by role"})}),s.jsxs(P,{children:[s.jsx(O,{value:"all",children:"All Roles"}),be.map(e=>s.jsx(O,{value:e.value,children:e.label},e.value))]})]})})]}),w.length>0&&R(ge.USERS_MANAGE_ROLES)&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 p-3 bg-blue-50 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[w.length," user",1===w.length?"":"s"," selected"]}),s.jsxs(k,{value:S,onValueChange:A,children:[s.jsx(D,{className:"w-48",children:s.jsx(I,{placeholder:"Bulk actions"})}),s.jsxs(P,{children:[s.jsx(O,{value:"promote_moderator",children:"Promote to Moderator"}),s.jsx(O,{value:"demote_user",children:"Demote to User"}),s.jsx(O,{value:"delete",children:"Delete Users"})]})]}),s.jsx(F,{onClick:async()=>{if(0!==w.length&&S)try{switch(S){case"delete":if(!confirm(`Are you sure you want to delete ${w.length} users? This action cannot be undone.`))return;await ve.bulkDeleteUsers(w),ye.success(`${w.length} users deleted successfully`);break;case"promote_moderator":await ve.bulkUpdateUserRoles(w,"moderator"),ye.success(`${w.length} users promoted to moderator`);break;case"demote_user":await ve.bulkUpdateUserRoles(w,"user"),ye.success(`${w.length} users demoted to user`);break;default:return}b([]),A(""),E()}catch(e){ye.error("Failed to perform bulk action")}},disabled:!S,children:"Apply"}),s.jsx(F,{variant:"outline",onClick:()=>b([]),children:"Clear Selection"})]})]})}),s.jsxs(_,{children:[s.jsx($,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(V,{children:["Users (",j.length,")"]}),R(ge.USERS_MANAGE_ROLES)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{checked:w.length===j.length&&j.length>0,onCheckedChange:e=>{b(e?j.map(e=>e.id):[])}}),s.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})}),s.jsx(U,{children:p?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},a))}):j.length>0?s.jsx("div",{className:"space-y-2",children:j.map(e=>{const a=(l=e.role,be.find(e=>e.value===l)||be[0]);var l,t;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[R(ge.USERS_MANAGE_ROLES)&&s.jsx(Y,{checked:w.includes(e.id),onCheckedChange:s=>{return a=e.id,void b(!!s?e=>[...e,a]:e=>e.filter(e=>e!==a));var a}}),s.jsx(G,{children:s.jsx(z,{children:e.full_name?(t=e.full_name,t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):e.email[0].toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.full_name||"Unnamed User"}),s.jsx(W,{className:a.color,children:a.label})]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",we(new Date(e.created_at),{addSuffix:!0})]})]})]}),R(ge.USERS_UPDATE)&&s.jsxs(H,{children:[s.jsx(Q,{asChild:!0,children:s.jsx(F,{variant:"ghost",size:"sm",children:s.jsx(c,{className:"h-4 w-4"})})}),s.jsxs(B,{align:"end",children:[s.jsx(q,{children:"Actions"}),s.jsx(J,{}),R(ge.USERS_MANAGE_ROLES)&&s.jsxs(s.Fragment,{children:[s.jsxs(K,{onClick:()=>C(e.id,"moderator"),children:[s.jsx(n,{className:"h-4 w-4 mr-2"}),"Promote to Moderator"]}),s.jsxs(K,{onClick:()=>C(e.id,"user"),children:[s.jsx(d,{className:"h-4 w-4 mr-2"}),"Demote to User"]}),s.jsx(J,{})]}),R(ge.USERS_DELETE)&&s.jsxs(K,{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await ve.deleteUser(e),ye.success("User deleted successfully"),E()}catch(s){ye.error("Failed to delete user")}})(e.id),className:"text-red-600",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})]},e.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(i,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]})})]})]}):s.jsx(_,{className:x,children:s.jsxs(U,{className:"text-center py-8",children:[s.jsx(a,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to view user management."})]})})},Ae=({className:a=""})=>{const[l,t]=e.useState([]),[r,c]=e.useState([]),[n,d]=e.useState({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0}),[m,f]=e.useState(!0),[y,w]=e.useState("reviews"),{hasPermission:b}=pe();e.useEffect(()=>{S()},[]);const S=async()=>{try{f(!0),t([]),c([]),d({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0})}catch(e){ye.error("Failed to load moderation data")}finally{f(!1)}},A=async(e,s)=>{try{await le.moderateReview(e,s),ye.success(`Review ${s} successfully`),S()}catch(a){ye.error("Failed to moderate review")}},R=async(e,s)=>{try{ye.success(`Template ${s} successfully`),S()}catch(a){ye.error("Failed to moderate template")}};if(!b(ge.LAW_FIRMS_MODERATE_REVIEWS)&&!b(ge.TEMPLATES_MODERATE))return s.jsx(_,{className:a,children:s.jsxs(U,{className:"text-center py-8",children:[s.jsx(x,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to access content moderation."})]})});const E=[{title:"Pending Reviews",value:n.pendingReviews,total:n.totalReviews,description:"Reviews awaiting moderation",icon:o,color:"text-yellow-600"},{title:"Pending Templates",value:n.pendingTemplates,total:n.totalTemplates,description:"Templates awaiting approval",icon:h,color:"text-blue-600"},{title:"Total Content",value:n.totalReviews+n.totalTemplates,total:null,description:"All moderated content",icon:i,color:"text-green-600"},{title:"Moderation Queue",value:n.pendingReviews+n.pendingTemplates,total:null,description:"Items requiring attention",icon:j,color:"text-red-600"}];return s.jsxs("div",{className:`space-y-6 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Content Moderation"}),s.jsx("p",{className:"text-gray-600",children:"Review and moderate user-generated content"})]}),s.jsxs(F,{variant:"outline",onClick:S,children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Refresh Queue"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map((e,a)=>s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.value,null!==e.total&&s.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["/ ",e.total]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(X,{value:y,onValueChange:w,children:[s.jsxs(Z,{className:"grid w-full grid-cols-2",children:[s.jsxs(ee,{value:"reviews",className:"flex items-center space-x-2",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsxs("span",{children:["Reviews (",n.pendingReviews,")"]})]}),s.jsxs(ee,{value:"templates",className:"flex items-center space-x-2",children:[s.jsx(h,{className:"h-4 w-4"}),s.jsxs("span",{children:["Templates (",n.pendingTemplates,")"]})]})]}),s.jsx(se,{value:"reviews",className:"space-y-4",children:s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Pending Reviews"}),s.jsx(ae,{children:"Law firm reviews awaiting moderation approval"})]}),s.jsx(U,{children:m?s.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},a))}):l.length>0?s.jsx("div",{className:"space-y-4",children:l.map(e=>{return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(G,{children:s.jsx(z,{children:e.user?(l=e.user.full_name,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):"U"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.user?.full_name||"Anonymous"}),s.jsx(W,{variant:"secondary",children:"Pending"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"flex items-center space-x-1",children:(a=e.rating,Array.from({length:5},(e,l)=>s.jsx(N,{className:"h-4 w-4 "+(l<Math.floor(a)?"text-yellow-400 fill-current":"text-gray-300")},l)))}),s.jsx("span",{className:"text-sm text-gray-500",children:we(new Date(e.created_at),{addSuffix:!0})})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(F,{size:"sm",onClick:()=>A(e.id,"approved"),children:[s.jsx(u,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(F,{variant:"destructive",size:"sm",onClick:()=>A(e.id,"rejected"),children:[s.jsx(p,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.title}),s.jsx("p",{className:"text-gray-700",children:e.content})]})]},e.id);var a,l})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(o,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),s.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})})]})}),s.jsx(se,{value:"templates",className:"space-y-4",children:s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Pending Templates"}),s.jsx(ae,{children:"Public templates awaiting approval"})]}),s.jsx(U,{children:m?s.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},a))}):r.length>0?s.jsx("div",{className:"space-y-4",children:r.map(e=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(h,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsx(W,{variant:"secondary",children:"Pending"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.category}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",we(new Date(e.created_at),{addSuffix:!0})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(v,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(F,{size:"sm",onClick:()=>R(e.id,"approved"),children:[s.jsx(u,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(F,{variant:"destructive",size:"sm",onClick:()=>R(e.id,"rejected"),children:[s.jsx(p,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-gray-700",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Variables:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.variables.slice(0,3).map((e,a)=>s.jsx(W,{variant:"outline",className:"text-xs",children:e},a)),e.variables.length>3&&s.jsxs(W,{variant:"outline",className:"text-xs",children:["+",e.variables.length-3," more"]})]})]})]})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(h,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending templates"}),s.jsx("p",{className:"text-gray-500",children:"All templates have been reviewed."})]})})]})})]}),s.jsxs(_,{children:[s.jsx($,{children:s.jsxs(V,{className:"flex items-center space-x-2",children:[s.jsx(g,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{children:"Moderation Guidelines"})]})}),s.jsx(U,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Review Moderation"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Check for inappropriate language or content"}),s.jsx("li",{children:"• Verify reviews are constructive and helpful"}),s.jsx("li",{children:"• Ensure reviews don't contain personal information"}),s.jsx("li",{children:"• Look for potential fake or spam reviews"}),s.jsx("li",{children:"• Approve reviews that provide genuine feedback"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Template Moderation"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Verify legal accuracy and completeness"}),s.jsx("li",{children:"• Check for proper variable placement"}),s.jsx("li",{children:"• Ensure templates follow Singapore law"}),s.jsx("li",{children:"• Review for clarity and usability"}),s.jsx("li",{children:"• Approve templates that meet quality standards"})]})]})]})})]})]})},Re=({className:a=""})=>{const[l,r]=e.useState({totalUsers:0,activeUsers:0,totalDocuments:0,totalTemplates:0,totalLawFirms:0,systemHealth:"healthy",uptime:"99.9%",responseTime:120}),[c,n]=e.useState({dailyActiveUsers:0,documentsProcessed:0,templatesGenerated:0,searchQueries:0,aiOperations:0}),[d,m]=e.useState([]),[x,o]=e.useState(!0),[p,v]=e.useState("overview"),{hasPermission:N}=pe();e.useEffect(()=>{E();const e=setInterval(E,3e4);return()=>clearInterval(e)},[]);const E=async()=>{try{o(!0);const e=await ve.getAuditLogs({date_from:new Date(Date.now()-864e5)});m(e),r({totalUsers:1250,activeUsers:89,totalDocuments:5420,totalTemplates:156,totalLawFirms:89,systemHealth:"healthy",uptime:"99.9%",responseTime:Math.floor(50*Math.random())+100}),n({dailyActiveUsers:89,documentsProcessed:234,templatesGenerated:45,searchQueries:1250,aiOperations:567})}catch(e){ye.error("Failed to load system data")}finally{o(!1)}};if(!N(ge.SYSTEM_MONITORING))return s.jsx(_,{className:a,children:s.jsxs(U,{className:"text-center py-8",children:[s.jsx(f,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to view system monitoring."})]})});const T=[{title:"System Health",value:l.systemHealth,description:`${l.uptime} uptime`,icon:(e=>{switch(e){case"healthy":return u;case"warning":case"critical":return g;default:return y}})(l.systemHealth),color:(e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(l.systemHealth),trend:null},{title:"Active Users",value:l.activeUsers,description:`${l.totalUsers} total users`,icon:i,color:"text-blue-600",trend:"+12%"},{title:"Documents",value:l.totalDocuments,description:`${c.documentsProcessed} processed today`,icon:h,color:"text-green-600",trend:"+8%"},{title:"Response Time",value:`${l.responseTime}ms`,description:"Average response time",icon:y,color:l.responseTime>200?"text-yellow-600":"text-green-600",trend:l.responseTime>200?"+5%":"-3%"}],C=[{title:"Daily Active Users",value:c.dailyActiveUsers,icon:i,color:"text-blue-600"},{title:"Documents Processed",value:c.documentsProcessed,icon:h,color:"text-green-600"},{title:"Templates Generated",value:c.templatesGenerated,icon:w,color:"text-purple-600"},{title:"Search Queries",value:c.searchQueries,icon:b,color:"text-orange-600"},{title:"AI Operations",value:c.aiOperations,icon:y,color:"text-red-600"}];return s.jsxs("div",{className:`space-y-6 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Monitoring"}),s.jsx("p",{className:"text-gray-600",children:"Monitor system health, performance, and usage metrics"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(F,{variant:"outline",onClick:E,children:[s.jsx(t,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((e,a)=>s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`}),e.trend&&s.jsxs("div",{className:"flex items-center mt-2 "+(e.trend.startsWith("+")?"text-green-600":"text-red-600"),children:[e.trend.startsWith("+")?s.jsx(S,{className:"h-3 w-3 mr-1"}):s.jsx(A,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"text-xs",children:e.trend})]})]})]})})},a))}),s.jsxs(X,{value:p,onValueChange:v,children:[s.jsxs(Z,{className:"grid w-full grid-cols-3",children:[s.jsx(ee,{value:"overview",children:"Overview"}),s.jsx(ee,{value:"usage",children:"Usage Metrics"}),s.jsx(ee,{value:"activity",children:"Recent Activity"})]}),s.jsx(se,{value:"overview",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"System Status"}),s.jsx(ae,{children:"Current system health and performance"})]}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Database"}),s.jsx(W,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"API Server"}),s.jsx(W,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"File Storage"}),s.jsx(W,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"AI Services"}),s.jsx(W,{className:"bg-yellow-100 text-yellow-800",children:"Warning"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Email Service"}),s.jsx(W,{className:"bg-green-100 text-green-800",children:"Healthy"})]})]})]}),s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Resource Usage"}),s.jsx(ae,{children:"Current system resource utilization"})]}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"CPU Usage"}),s.jsx("span",{children:"45%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Memory Usage"}),s.jsx("span",{children:"67%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"67%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Storage Usage"}),s.jsx("span",{children:"23%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"23%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Network I/O"}),s.jsx("span",{children:"12%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"12%"}})})]})]})]})]})}),s.jsxs(se,{value:"usage",className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:C.map((e,a)=>s.jsx(_,{children:s.jsxs(U,{className:"p-6 text-center",children:[s.jsx(e.icon,{className:`h-8 w-8 ${e.color} mx-auto mb-2`}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-sm text-gray-600",children:e.title})]})},a))}),s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Usage Trends (Last 7 Days)"}),s.jsx(ae,{children:"Daily usage patterns and trends"})]}),s.jsx(U,{children:s.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(R,{className:"h-12 w-12 mx-auto mb-2"}),s.jsx("p",{children:"Usage charts would be displayed here"}),s.jsx("p",{className:"text-sm",children:"Integration with charting library needed"})]})})})]})]}),s.jsx(se,{value:"activity",className:"space-y-6",children:s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Recent System Activity"}),s.jsx(ae,{children:"Latest admin actions and system events"})]}),s.jsx(U,{children:x?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]})},a))}):d.length>0?s.jsx("div",{className:"space-y-3",children:d.map(e=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(y,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:e.user?.full_name||"System"}),s.jsx("span",{className:"text-gray-600",children:e.action.replace(/_/g," ")}),s.jsx(W,{variant:"outline",className:"text-xs",children:e.resource_type})]}),s.jsx("p",{className:"text-sm text-gray-500",children:we(new Date(e.created_at),{addSuffix:!0})})]})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recent activity"}),s.jsx("p",{className:"text-gray-500",children:"System activity will appear here as it occurs."})]})})]})})]})]})},Ee=({className:a=""})=>{const[l,t]=e.useState([]),[r,c]=e.useState([]),[n,d]=e.useState(!0),[x,h]=e.useState("firms");e.useEffect(()=>{g()},[]);const g=async()=>{try{d(!0);const e=await le.getLawFirms();t(e)}catch(e){ye.error("Failed to load data")}finally{d(!1)}},f=async(e,s)=>{try{await le.verifyLawFirm(e,s),ye.success(`Law firm ${s?"verified":"unverified"} successfully`),g()}catch(a){ye.error("Failed to update verification status")}},y=async(e,s)=>{try{await le.moderateReview(e,s),ye.success(`Review ${s} successfully`),g()}catch(a){ye.error("Failed to moderate review")}},w=e=>Array.from({length:5},(a,l)=>s.jsx(N,{className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")},l)),b=[{title:"Total Law Firms",value:l.length,description:"All registered firms",icon:i,color:"text-blue-600"},{title:"Verified Firms",value:l.filter(e=>e.verified).length,description:"Approved and verified",icon:u,color:"text-green-600"},{title:"Pending Verification",value:l.filter(e=>!e.verified).length,description:"Awaiting approval",icon:j,color:"text-yellow-600"},{title:"Pending Reviews",value:r.length,description:"Awaiting moderation",icon:o,color:"text-purple-600"}];return s.jsxs("div",{className:`space-y-6 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Law Firm Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage law firm listings, verifications, and reviews"})]}),s.jsxs(F,{children:[s.jsx(E,{className:"h-4 w-4 mr-2"}),"Add Law Firm"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((e,a)=>s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(X,{value:x,onValueChange:h,children:[s.jsxs(Z,{className:"grid w-full grid-cols-2",children:[s.jsxs(ee,{value:"firms",children:["Law Firms (",l.length,")"]}),s.jsxs(ee,{value:"reviews",children:["Pending Reviews (",r.length,")"]})]}),s.jsx(se,{value:"firms",className:"space-y-4",children:n?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsx(_,{className:"animate-pulse",children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},a))}):s.jsx("div",{className:"space-y-4",children:l.map(e=>s.jsx(_,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(i,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),s.jsx(W,{variant:e.verified?"default":"secondary",children:e.verified?"Verified":"Pending"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsx("span",{children:e.address}),s.jsx("span",{children:e.phone}),s.jsxs("div",{className:"flex items-center space-x-1",children:[w(e.rating),s.jsx("span",{children:e.rating.toFixed(1)})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(F,{variant:"outline",size:"sm",children:s.jsx(v,{className:"h-4 w-4"})}),e.verified?s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>f(e.id,!1),children:[s.jsx(p,{className:"h-4 w-4 mr-1"}),"Unverify"]}):s.jsxs(F,{size:"sm",onClick:()=>f(e.id,!0),children:[s.jsx(u,{className:"h-4 w-4 mr-1"}),"Verify"]}),s.jsx(F,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this law firm? This action cannot be undone."))try{await le.deleteLawFirm(e),ye.success("Law firm deleted successfully"),g()}catch(s){ye.error("Failed to delete law firm")}})(e.id),children:s.jsx(m,{className:"h-4 w-4"})})]})]})})},e.id))})}),s.jsx(se,{value:"reviews",className:"space-y-4",children:0===r.length?s.jsx(_,{children:s.jsxs(U,{className:"text-center py-8",children:[s.jsx(o,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),s.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})}):s.jsx("div",{className:"space-y-4",children:r.map(e=>s.jsx(_,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"flex items-center space-x-1",children:w(e.rating)}),s.jsxs("span",{className:"text-sm text-gray-500",children:["by ",e.user?.full_name||"Anonymous"]})]})]}),s.jsx(W,{variant:"secondary",children:"Pending"})]}),s.jsx("p",{className:"text-gray-700",children:e.content}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(F,{size:"sm",onClick:()=>y(e.id,"approved"),children:[s.jsx(u,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(F,{variant:"destructive",size:"sm",onClick:()=>y(e.id,"rejected"),children:[s.jsx(p,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})})},e.id))})})]})]})},Te=()=>{const[a,t]=e.useState([]),[i,c]=e.useState([]),[n,d]=e.useState(!0),[m,x]=e.useState(""),[o,g]=e.useState(""),[f,y]=e.useState(""),[w,b]=e.useState(!1),S=Array.isArray(i)?i:[];e.useEffect(()=>{A()},[]);const A=async()=>{try{d(!0);const[e,s]=await Promise.all([te.searchTemplates({limit:100,sortBy:"newest"}),te.getCategories()]);t(e.templates),c(s)}catch(e){ye.error("Failed to load template data")}finally{d(!1)}},R=a.filter(e=>{const s=!m||e.title.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase()),a=!o||e.categoryId===o,l=!f||"active"===f&&e.isActive||"inactive"===f&&!e.isActive||"featured"===f&&e.isFeatured;return s&&a&&l}),M=e=>e.isActive?e.isFeatured?s.jsxs(W,{variant:"default",children:[s.jsx(N,{className:"h-3 w-3 mr-1"}),"Featured"]}):s.jsxs(W,{variant:"secondary",children:[s.jsx(u,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(W,{variant:"destructive",children:[s.jsx(p,{className:"h-3 w-3 mr-1"}),"Inactive"]});return n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{className:"h-8 w-48"}),s.jsx(ie,{className:"h-10 w-32"})]}),s.jsx("div",{className:"grid gap-4",children:Array.from({length:5}).map((e,a)=>s.jsx(ie,{className:"h-24 w-full"},a))})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Template Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage legal document templates and categories"})]}),s.jsxs(re,{open:w,onOpenChange:b,children:[s.jsx(ce,{asChild:!0,children:s.jsxs(F,{children:[s.jsx(E,{className:"h-4 w-4 mr-2"}),"Create Template"]})}),s.jsxs(ne,{className:"max-w-2xl",children:[s.jsxs(de,{children:[s.jsx(me,{children:"Create New Template"}),s.jsx(xe,{children:"Create a new legal document template for the marketplace."})]}),s.jsxs(oe,{children:[s.jsx(T,{className:"h-4 w-4"}),s.jsx(he,{children:"Template creation interface would be implemented here with form fields for title, description, content, fields, etc."})]})]})]})]}),s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(L,{placeholder:"Search templates...",value:m,onChange:e=>x(e.target.value),className:"pl-10"})]})}),s.jsxs(k,{value:o,onValueChange:g,children:[s.jsx(D,{className:"w-full lg:w-48",children:s.jsx(I,{placeholder:"All Categories"})}),s.jsxs(P,{children:[s.jsx(O,{value:"",children:"All Categories"}),S.map(e=>e&&e.id&&e.name?s.jsx(O,{value:e.id,children:e.name},e.id):null)]})]}),s.jsxs(k,{value:f,onValueChange:y,children:[s.jsx(D,{className:"w-full lg:w-32",children:s.jsx(I,{placeholder:"All Status"})}),s.jsxs(P,{children:[s.jsx(O,{value:"",children:"All Status"}),s.jsx(O,{value:"active",children:"Active"}),s.jsx(O,{value:"inactive",children:"Inactive"}),s.jsx(O,{value:"featured",children:"Featured"})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:0===R.length?s.jsx(_,{children:s.jsxs(U,{className:"text-center py-12",children:[s.jsx(h,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No templates found"}),s.jsx("p",{className:"text-gray-600",children:m||o||f?"Try adjusting your filters to see more templates.":"Get started by creating your first template."})]})}):R.map(e=>{return s.jsx(_,{className:"hover:shadow-md transition-shadow",children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),M(e),(a=e.accessLevel,s.jsx(W,{variant:{public:"outline",premium:"secondary",enterprise:"default"}[a]||"outline",children:a.charAt(0).toUpperCase()+a.slice(1)}))]}),s.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(l,{className:"h-4 w-4"}),e.downloadCount.toLocaleString()," downloads"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(N,{className:"h-4 w-4"}),e.ratingAverage.toFixed(1)," (",e.ratingCount," reviews)"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(j,{className:"h-4 w-4"}),new Date(e.createdAt).toLocaleDateString()]}),e.priceSgd>0&&s.jsxs("div",{className:"font-medium text-green-600",children:["S$",e.priceSgd.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(v,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(C,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>(async(e,s)=>{try{ye.success(`Template ${s?"unfeatured":"featured"} successfully`),A()}catch(a){ye.error("Failed to update template featured status")}})(e.id,e.isFeatured),children:[s.jsx(N,{className:"h-4 w-4 mr-1 "+(e.isFeatured?"fill-current":"")}),e.isFeatured?"Unfeature":"Feature"]}),s.jsx(F,{variant:e.isActive?"destructive":"default",size:"sm",onClick:()=>(async(e,s)=>{try{ye.success(`Template ${s?"deactivated":"activated"} successfully`),A()}catch(a){ye.error("Failed to update template status")}})(e.id,e.isActive),children:e.isActive?s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"h-4 w-4 mr-1"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"h-4 w-4 mr-1"}),"Activate"]})})]})]})})},e.id);var a})}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(_,{children:s.jsxs(U,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Templates"})]})}),s.jsx(_,{children:s.jsxs(U,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(e=>e.isActive).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Templates"})]})}),s.jsx(_,{children:s.jsxs(U,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.filter(e=>e.isFeatured).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Featured Templates"})]})}),s.jsx(_,{children:s.jsxs(U,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.reduce((e,s)=>e+s.downloadCount,0).toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Downloads"})]})})]})]})},Ce=()=>{const[l,t]=e.useState("overview"),{hasPermission:r}=pe(),{canAccessAdmin:c}=Ne(),{profile:n}=je();if(!c())return s.jsx(ue,{children:s.jsx(_,{children:s.jsxs(U,{className:"text-center py-12",children:[s.jsx(a,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the admin dashboard."}),s.jsx(F,{onClick:()=>window.history.back(),children:"Go Back"})]})})});const d=[{title:"Total Users",value:"1,250",description:"+12% from last month",icon:i,color:"text-blue-600",permission:ge.USERS_READ},{title:"Pending Reviews",value:"23",description:"Awaiting moderation",icon:o,color:"text-yellow-600",permission:ge.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Health",value:"99.9%",description:"Uptime this month",icon:y,color:"text-green-600",permission:ge.SYSTEM_MONITORING},{title:"Active Sessions",value:"89",description:"Currently online",icon:b,color:"text-purple-600",permission:ge.SYSTEM_ANALYTICS}],m=[{title:"Manage Users",description:"Add, edit, or remove user accounts",icon:i,action:()=>t("users"),permission:ge.USERS_READ},{title:"Content Moderation",description:"Review and moderate user content",icon:x,action:()=>t("moderation"),permission:ge.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Monitoring",description:"Monitor system health and performance",icon:y,action:()=>t("monitoring"),permission:ge.SYSTEM_MONITORING},{title:"Law Firm Management",description:"Manage law firm listings and verifications",icon:w,action:()=>t("lawfirms"),permission:ge.LAW_FIRMS_VERIFY},{title:"Template Management",description:"Manage legal document templates",icon:h,action:()=>t("templates"),permission:ge.TEMPLATES_MANAGE},{title:"Analytics Dashboard",description:"View template marketplace analytics",icon:b,action:()=>t("analytics"),permission:ge.SYSTEM_ANALYTICS}],j=[{id:"overview",label:"Overview",icon:b,permission:null},{id:"users",label:"Users",icon:i,permission:ge.USERS_READ},{id:"moderation",label:"Moderation",icon:x,permission:ge.LAW_FIRMS_MODERATE_REVIEWS},{id:"lawfirms",label:"Law Firms",icon:w,permission:ge.LAW_FIRMS_VERIFY},{id:"templates",label:"Templates",icon:h,permission:ge.TEMPLATES_MANAGE},{id:"analytics",label:"Analytics",icon:b,permission:ge.SYSTEM_ANALYTICS},{id:"monitoring",label:"Monitoring",icon:y,permission:ge.SYSTEM_MONITORING}].filter(e=>!e.permission||r(e.permission));return s.jsx(ue,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",n?.full_name||n?.email]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(F,{variant:"outline",children:[s.jsx(M,{className:"h-4 w-4 mr-2"}),"Settings"]})})]}),s.jsxs(X,{value:l,onValueChange:t,children:[s.jsx(Z,{className:`grid w-full grid-cols-${j.length}`,children:j.map(e=>s.jsxs(ee,{value:e.id,className:"flex items-center space-x-2",children:[s.jsx(e.icon,{className:"h-4 w-4"}),s.jsx("span",{children:e.label})]},e.id))}),s.jsxs(se,{value:"overview",className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.filter(e=>!e.permission||r(e.permission)).map((e,a)=>s.jsx(_,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(_,{children:[s.jsxs($,{children:[s.jsx(V,{children:"Quick Actions"}),s.jsx(ae,{children:"Common administrative tasks and shortcuts"})]}),s.jsx(U,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.filter(e=>!e.permission||r(e.permission)).map((e,a)=>s.jsxs(F,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:e.action,children:[s.jsx(e.icon,{className:"h-6 w-6"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium",children:e.title}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]})]},a))})})]}),s.jsxs(_,{children:[s.jsxs($,{children:[s.jsxs(V,{className:"flex items-center space-x-2",children:[s.jsx(g,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{children:"System Alerts"})]}),s.jsx(ae,{children:"Important notifications and system status updates"})]}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx(g,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"AI Service Performance"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Response times are slightly elevated. Monitoring the situation."})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx(h,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-800",children:"Content Moderation Queue"}),s.jsx("p",{className:"text-sm text-blue-700",children:"23 items pending review in the moderation queue."})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(y,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800",children:"System Update Complete"}),s.jsx("p",{className:"text-sm text-green-700",children:"Successfully deployed security updates with zero downtime."})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(_,{children:[s.jsx($,{children:s.jsx(V,{children:"Recent User Activity"})}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"New user registrations"}),s.jsx("span",{className:"font-medium",children:"+15 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Documents uploaded"}),s.jsx("span",{className:"font-medium",children:"234 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Templates generated"}),s.jsx("span",{className:"font-medium",children:"45 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"AI chat sessions"}),s.jsx("span",{className:"font-medium",children:"89 today"})]})]})})]}),s.jsxs(_,{children:[s.jsx($,{children:s.jsx(V,{children:"System Performance"})}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Average response time"}),s.jsx("span",{className:"font-medium text-green-600",children:"120ms"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Error rate"}),s.jsx("span",{className:"font-medium text-green-600",children:"0.02%"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"CPU usage"}),s.jsx("span",{className:"font-medium text-yellow-600",children:"45%"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Memory usage"}),s.jsx("span",{className:"font-medium text-yellow-600",children:"67%"})]})]})})]})]})]}),r(ge.USERS_READ)&&s.jsx(se,{value:"users",children:s.jsx(Se,{})}),r(ge.LAW_FIRMS_MODERATE_REVIEWS)&&s.jsx(se,{value:"moderation",children:s.jsx(Ae,{})}),r(ge.LAW_FIRMS_VERIFY)&&s.jsx(se,{value:"lawfirms",children:s.jsx(Ee,{})}),r(ge.TEMPLATES_MANAGE)&&s.jsx(se,{value:"templates",children:s.jsx(Te,{})}),r(ge.SYSTEM_ANALYTICS)&&s.jsx(se,{value:"analytics",children:s.jsx(fe,{})}),r(ge.SYSTEM_MONITORING)&&s.jsx(se,{value:"monitoring",children:s.jsx(Re,{})})]})]})})};export{Ce as default};
