import{r as e,j as s,ar as a,a6 as l,m as t,F as c,aE as r,U as n,aU as i,bM as d,w as o,b2 as m,Y as x,bO as h,W as p,q as u,cq as j,s as g,bH as v,v as N}from"./react-vendor-SE0pM8Ra.js";import{B as w,C as f,o as y,I as b,A as C,E as S,G as T,H as k,K as z,u as L,v as E,z as _,h as D,a0 as A,S as $,L as P,M as R,ab as I,q as U,r as F,s as B,t as G}from"./ai-services-C7T4cFUa.js";import{t as O,T as V}from"./TemplateGenerator-XiJTXv2a.js";import{J as q}from"./vendor-CrSvAuNw.js";import{f as H}from"./utilities-CJeqyZZO.js";import"./supabase-Cfql4b7O.js";import"./ui-components-ByoYm48K.js";import"./data-fetching-De8LKKym.js";import"./ocr-worker-Ehk6BbiK.js";import"./pdf-worker-CdhgQTyu.js";import"./forms-Mu2Tem6y.js";const M=[{value:"",label:"All Categories"},{value:"contracts",label:"Contracts & Agreements"},{value:"employment",label:"Employment Law"},{value:"corporate",label:"Corporate Documents"},{value:"real-estate",label:"Real Estate"},{value:"intellectual-property",label:"Intellectual Property"},{value:"litigation",label:"Litigation & Court"},{value:"compliance",label:"Compliance & Regulatory"},{value:"personal",label:"Personal Legal"},{value:"other",label:"Other"}],J=({onTemplateSelect:m,onTemplatePreview:x,className:h=""})=>{const[p,u]=e.useState([]),[j,g]=e.useState([]),[v,N]=e.useState(!0),[A,$]=e.useState(""),[P,R]=e.useState(""),[I,U]=e.useState("grid"),[F,B]=e.useState("newest");e.useEffect(()=>{G()},[]),e.useEffect(()=>{V()},[p,A,P,F]);const G=async()=>{try{N(!0);const e=await O.getPublicTemplates();u(e)}catch(e){q.error("Failed to load templates")}finally{N(!1)}},V=()=>{let e=[...p];if(A.trim()){const s=A.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.category.toLowerCase().includes(s))}P&&(e=e.filter(e=>e.category===P)),e.sort((e,s)=>{switch(F){case"newest":return new Date(s.created_at).getTime()-new Date(e.created_at).getTime();case"oldest":return new Date(e.created_at).getTime()-new Date(s.created_at).getTime();case"name":return e.name.localeCompare(s.name);default:return 0}}),g(e)},J=(e,s)=>{switch(s){case"select":m?.(e);break;case"preview":x?.(e);break;case"copy":navigator.clipboard.writeText(e.content),q.success("Template content copied to clipboard")}},W=e=>{const s=M.find(s=>s.value===e);return s?.label||e},Y=({template:e})=>s.jsxs(f,{className:"h-full hover:shadow-md transition-shadow",children:[s.jsx(L,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(E,{className:"text-lg font-semibold truncate",children:e.name}),s.jsx(_,{className:"mt-1 line-clamp-2",children:e.description})]}),s.jsx(D,{variant:"secondary",className:"ml-2 flex-shrink-0",children:W(e.category)})]})}),s.jsx(y,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[e.content.substring(0,150),"..."]})}),e.variables&&e.variables.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Variables:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.variables.slice(0,3).map((e,a)=>s.jsx(D,{variant:"outline",className:"text-xs",children:e},a)),e.variables.length>3&&s.jsxs(D,{variant:"outline",className:"text-xs",children:["+",e.variables.length-3," more"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(r,{className:"h-3 w-3"}),s.jsx("span",{children:H(new Date(e.created_at),{addSuffix:!0})})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(n,{className:"h-3 w-3"}),s.jsx("span",{children:"Public"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(w,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>J(e,"preview"),children:[s.jsx(i,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsx(w,{variant:"outline",size:"sm",onClick:()=>J(e,"copy"),children:s.jsx(d,{className:"h-4 w-4"})}),s.jsxs(w,{size:"sm",onClick:()=>J(e,"select"),children:[s.jsx(o,{className:"h-4 w-4 mr-1"}),"Use"]})]})]})})]}),K=({template:e})=>s.jsx(f,{className:"hover:shadow-sm transition-shadow",children:s.jsx(y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(c,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-medium truncate",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.description})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(D,{variant:"secondary",className:"text-xs",children:W(e.category)}),s.jsx("span",{className:"text-xs text-gray-500",children:H(new Date(e.created_at),{addSuffix:!0})}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(w,{variant:"ghost",size:"sm",onClick:()=>J(e,"preview"),children:s.jsx(i,{className:"h-4 w-4"})}),s.jsx(w,{variant:"ghost",size:"sm",onClick:()=>J(e,"copy"),children:s.jsx(d,{className:"h-4 w-4"})}),s.jsx(w,{size:"sm",onClick:()=>J(e,"select"),children:"Use"})]})]})]})})});return s.jsxs("div",{className:`space-y-6 ${h}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Legal Templates"}),s.jsx("p",{className:"text-gray-600",children:"Browse and customize professional legal document templates"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(w,{variant:"grid"===I?"default":"outline",size:"sm",onClick:()=>U("grid"),children:s.jsx(a,{className:"h-4 w-4"})}),s.jsx(w,{variant:"list"===I?"default":"outline",size:"sm",onClick:()=>U("list"),children:s.jsx(l,{className:"h-4 w-4"})})]})]}),s.jsx(f,{children:s.jsx(y,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(b,{placeholder:"Search templates...",value:A,onChange:e=>$(e.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"w-full md:w-64",children:s.jsxs(C,{value:P,onValueChange:R,children:[s.jsx(S,{children:s.jsx(T,{placeholder:"Category"})}),s.jsx(k,{children:M.map(e=>s.jsx(z,{value:e.value,children:e.label},e.value))})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(C,{value:F,onValueChange:e=>B(e),children:[s.jsx(S,{children:s.jsx(T,{placeholder:"Sort by"})}),s.jsxs(k,{children:[s.jsx(z,{value:"newest",children:"Newest First"}),s.jsx(z,{value:"oldest",children:"Oldest First"}),s.jsx(z,{value:"name",children:"Name A-Z"})]})]})})]})})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:v?"Loading...":`${j.length} template${1===j.length?"":"s"} found`})}),v?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>s.jsxs(f,{className:"animate-pulse",children:[s.jsxs(L,{children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},a))}):j.length>0?"grid"===I?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>s.jsx(Y,{template:e},e.id))}):s.jsx("div",{className:"space-y-3",children:j.map(e=>s.jsx(K,{template:e},e.id))}):s.jsx(f,{children:s.jsxs(y,{className:"text-center py-8",children:[s.jsx(c,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or browse different categories."})]})})]})]})},W=({template:a,onSave:l,onDownload:t,className:r=""})=>{const[n,d]=e.useState(a.content),[j,g]=e.useState({}),[v,N]=e.useState([]),[C,S]=e.useState(!1);e.useState(!1),e.useEffect(()=>{T()},[a]),e.useEffect(()=>{U()},[j,a.content]);const T=()=>{const e=a.content.match(/\{\{([^}]+)\}\}/g)||[],s=[...new Set(e.map(e=>e.replace(/[{}]/g,"")))].map(e=>{const s=e.trim();return{name:s,value:"",required:!0,type:k(s),placeholder:z(s),description:I(s)}});N(s);const l={};s.forEach(e=>{l[e.name]=""}),g(l)},k=e=>{const s=e.toLowerCase();return s.includes("date")||s.includes("time")?"date":s.includes("email")||s.includes("mail")?"email":s.includes("amount")||s.includes("price")||s.includes("cost")?"number":"text"},z=e=>{const s=e.toLowerCase();return s.includes("name")?"Enter full name":s.includes("company")?"Enter company name":s.includes("address")?"Enter address":s.includes("date")?"Select date":s.includes("email")?"Enter email address":s.includes("phone")?"Enter phone number":s.includes("amount")||s.includes("price")?"Enter amount":`Enter ${e.replace(/_/g," ").toLowerCase()}`},I=e=>{const s=e.toLowerCase();return s.includes("party1")||s.includes("first_party")?"First party to the agreement":s.includes("party2")||s.includes("second_party")?"Second party to the agreement":s.includes("effective_date")?"Date when the agreement becomes effective":s.includes("termination_date")?"Date when the agreement terminates":s.includes("governing_law")?"Jurisdiction governing this agreement":`Value for ${e.replace(/_/g," ").toLowerCase()}`},U=()=>{let e=a.content;v.forEach(s=>{const a=`{{${s.name}}}`,l=j[s.name]||`[${s.name.toUpperCase()}]`;e=e.replace(new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),l)}),d(e)},F=(e,s)=>{g(a=>({...a,[e]:s}))},{total:B,completed:G}={total:v.length,completed:v.filter(e=>j[e.name]?.trim()).length},O=B>0?Math.round(G/B*100):100;return s.jsxs("div",{className:`space-y-6 ${r}`,children:[s.jsx(f,{children:s.jsx(L,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(E,{className:"flex items-center space-x-2",children:[s.jsx(c,{className:"h-5 w-5"}),s.jsx("span",{children:"Customize Template"})]}),s.jsxs(_,{children:[a.name," - Fill in the variables to customize your document"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(D,{variant:100===O?"default":"secondary",children:[G,"/",B," completed"]}),s.jsxs(w,{variant:"outline",size:"sm",onClick:()=>S(!C),children:[C?s.jsx(m,{className:"h-4 w-4"}):s.jsx(i,{className:"h-4 w-4"}),C?"Hide":"Show"," Preview"]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(f,{children:[s.jsxs(L,{children:[s.jsx(E,{className:"text-lg",children:"Template Variables"}),s.jsx(_,{children:"Fill in the required information to customize your document"})]}),s.jsx(y,{className:"space-y-4",children:v.length>0?s.jsxs(s.Fragment,{children:[v.map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs(A,{htmlFor:e.name,className:"flex items-center space-x-2",children:[s.jsx("span",{children:e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),"date"===e.type?s.jsx(b,{id:e.name,type:"date",value:j[e.name]||"",onChange:s=>F(e.name,s.target.value),className:"w-full"}):"email"===e.type?s.jsx(b,{id:e.name,type:"email",placeholder:e.placeholder,value:j[e.name]||"",onChange:s=>F(e.name,s.target.value),className:"w-full"}):"number"===e.type?s.jsx(b,{id:e.name,type:"number",placeholder:e.placeholder,value:j[e.name]||"",onChange:s=>F(e.name,s.target.value),className:"w-full"}):s.jsx(b,{id:e.name,type:"text",placeholder:e.placeholder,value:j[e.name]||"",onChange:s=>F(e.name,s.target.value),className:"w-full"}),e.description&&s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]},e.name)),s.jsx($,{}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(w,{variant:"outline",onClick:()=>{const e={};v.forEach(s=>{e[s.name]=""}),g(e),q.success("Variables reset")},className:"flex-1",children:[s.jsx(x,{className:"h-4 w-4 mr-2"}),"Reset"]}),s.jsxs(w,{onClick:()=>{l?.(n,j),q.success("Template customization saved")},disabled:0===G,className:"flex-1",children:[s.jsx(h,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(w,{onClick:()=>{const e=`${a.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_customized.docx`;t?.(n,e),q.success("Template downloaded")},disabled:0===G,children:[s.jsx(o,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):s.jsxs(P,{children:[s.jsx(p,{className:"h-4 w-4"}),s.jsx(R,{children:"No variables found in this template. You can download it as-is or modify the content directly."})]})})]}),C&&s.jsxs(f,{children:[s.jsxs(L,{children:[s.jsx(E,{className:"text-lg",children:"Document Preview"}),s.jsx(_,{children:"Live preview of your customized document"})]}),s.jsx(y,{children:s.jsx("div",{className:"max-h-96 overflow-y-auto p-4 bg-gray-50 rounded-lg",children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono",children:n})})})})]})]}),v.length>0&&s.jsx(f,{children:s.jsxs(y,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[100===O?s.jsx(u,{className:"h-5 w-5 text-green-500"}):s.jsx(p,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium",children:100===O?"All variables completed - ready to download!":`${B-G} variable${B-G===1?"":"s"} remaining`})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[O,"% complete"]})]}),s.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${O}%`}})})]})})]})},Y=()=>{const[a,l]=e.useState("browse"),[r,n]=e.useState(null),[i,d]=e.useState(null),o=[{title:"Available Templates",value:"150+",description:"Professional legal templates",icon:c,color:"text-blue-600"},{title:"AI Generated",value:"50+",description:"Custom AI-created templates",icon:j,color:"text-purple-600"},{title:"Most Popular",value:"Service Agreement",description:"This month's top template",icon:v,color:"text-green-600"},{title:"Recently Added",value:"12",description:"New templates this week",icon:N,color:"text-orange-600"}];return s.jsx(I,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Legal Templates"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Browse, customize, and generate professional legal document templates"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(w,{variant:"outline",onClick:()=>l("generate"),children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Generate with AI"]}),s.jsxs(w,{onClick:()=>l("browse"),children:[s.jsx(t,{className:"h-4 w-4 mr-2"}),"Browse Templates"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((e,a)=>s.jsx(f,{children:s.jsx(y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(U,{value:a,onValueChange:l,children:[s.jsxs(F,{className:"grid w-full grid-cols-3",children:[s.jsxs(B,{value:"browse",className:"flex items-center space-x-2",children:[s.jsx(t,{className:"h-4 w-4"}),s.jsx("span",{children:"Browse Templates"})]}),s.jsxs(B,{value:"generate",className:"flex items-center space-x-2",children:[s.jsx(j,{className:"h-4 w-4"}),s.jsx("span",{children:"AI Generator"})]}),s.jsxs(B,{value:"customize",className:"flex items-center space-x-2",children:[s.jsx(c,{className:"h-4 w-4"}),s.jsx("span",{children:"Customize"})]})]}),s.jsxs(G,{value:"browse",className:"space-y-6",children:[s.jsxs(f,{children:[s.jsxs(L,{children:[s.jsx(E,{className:"text-lg",children:"Template Categories"}),s.jsx(_,{children:"Explore templates by category"})]}),s.jsx(y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Contracts & Agreements",count:45,description:"Service agreements, NDAs, and general contracts",popular:!0},{name:"Employment Law",count:28,description:"Employment contracts and HR documents",popular:!0},{name:"Corporate Documents",count:32,description:"Partnership agreements and corporate filings",popular:!1},{name:"Real Estate",count:18,description:"Lease agreements and property documents",popular:!1},{name:"Compliance & Regulatory",count:15,description:"Privacy policies and terms of service",popular:!0},{name:"Personal Legal",count:12,description:"Wills, powers of attorney, and personal documents",popular:!1}].map((e,a)=>s.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{variant:"secondary",children:e.count}),e.popular&&s.jsx(g,{className:"h-4 w-4 text-yellow-500"})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]},a))})})]}),s.jsx(J,{onTemplateSelect:e=>{n(e),l("customize")},onTemplatePreview:e=>{n(e),l("customize")}})]}),s.jsx(G,{value:"generate",className:"space-y-6",children:s.jsx(V,{onTemplateGenerated:e=>{d(e);const s={id:"generated-"+Date.now(),name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables,is_public:!1,created_by:"current-user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(s),l("customize")}})}),s.jsx(G,{value:"customize",className:"space-y-6",children:r?s.jsx(W,{template:r,onSave:(e,s)=>{},onDownload:(e,s)=>{const a=new Blob([e],{type:"text/plain"}),l=URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)}}):s.jsx(f,{children:s.jsxs(y,{className:"text-center py-12",children:[s.jsx(c,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Template Selected"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Choose a template from the browser or generate a new one with AI to start customizing."}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsxs(w,{variant:"outline",onClick:()=>l("browse"),children:[s.jsx(t,{className:"h-4 w-4 mr-2"}),"Browse Templates"]}),s.jsxs(w,{onClick:()=>l("generate"),children:[s.jsx(j,{className:"h-4 w-4 mr-2"}),"Generate with AI"]})]})]})})})]})]})})};export{Y as default};
