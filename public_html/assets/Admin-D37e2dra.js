import{r as c,j as e,t as ye,w as fe,aM as we,U as $,m as be,co as Me,cu as Ue,cv as _e,b$ as Se,cw as he,o as H,F as O,v as X,q as Y,aN as Q,aR as ue,aK as Z,s as K,cx as De,cy as V,aQ as je,bF as q,bG as Fe,cz as Le,cA as ke,aw as Ae,b3 as Ie,cs as Pe,bD as Oe}from"./react-vendor-DgOuH3B5.js";import{C as n,o as d,B as j,I as Te,A as ae,E as te,G as le,H as re,K as I,u as F,v as L,a1 as pe,Y as Ce,$ as Re,h as A,D as $e,a as Ve,b as Ge,ai as Ye,a5 as ge,d as xe,q as ce,r as ne,s as z,t as _,z as G,aj as J,ab as ve,ac as me,k as ze,ae as We,l as He,m as Qe,n as Be,af as qe,L as Je,M as Ke,y as Xe,aa as Ne}from"./ai-services-DbCQJDXZ.js";import{u as de,r as W,P as x,a as Ze,T as es}from"./usePermissions-3pjBBO6o.js";import{J as h}from"./vendor-DXfpcdns.js";import{f as ie}from"./utilities-x5TAO4by.js";import"./ui-components-BA32w1ww.js";import"./data-fetching-C9PAuT9r.js";import"./ocr-worker-CHC1Ilq1.js";import"./pdf-worker-D8bnToiL.js";import"./supabase-B5_W4sir.js";import"./forms-zYe9FhTN.js";const se=[{value:"user",label:"User",color:"bg-gray-100 text-gray-800"},{value:"moderator",label:"Moderator",color:"bg-blue-100 text-blue-800"},{value:"admin",label:"Admin",color:"bg-purple-100 text-purple-800"},{value:"super_admin",label:"Super Admin",color:"bg-red-100 text-red-800"}],ss=({className:b=""})=>{const[o,y]=c.useState([]),[u,C]=c.useState([]),[g,S]=c.useState(!0),[T,i]=c.useState(""),[w,R]=c.useState("all"),[v,f]=c.useState([]),[U,k]=c.useState(""),{hasPermission:s}=de();c.useEffect(()=>{m()},[]),c.useEffect(()=>{r()},[o,T,w]);const m=async()=>{try{S(!0);const l=await W.getUsers();y(l)}catch(l){console.error("Error loading users:",l),h.error("Failed to load users")}finally{S(!1)}},r=()=>{let l=[...o];if(T.trim()){const p=T.toLowerCase();l=l.filter(M=>{var P;return((P=M.full_name)==null?void 0:P.toLowerCase().includes(p))||M.email.toLowerCase().includes(p)})}w!=="all"&&(l=l.filter(p=>p.role===w)),C(l)},t=(l,p)=>{f(p?M=>[...M,l]:M=>M.filter(P=>P!==l))},N=l=>{f(l?u.map(p=>p.id):[])},D=async(l,p)=>{try{await W.updateUserRole(l,p),h.success("User role updated successfully"),m()}catch(M){console.error("Error updating user role:",M),h.error("Failed to update user role")}},a=async l=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await W.deleteUser(l),h.success("User deleted successfully"),m()}catch(p){console.error("Error deleting user:",p),h.error("Failed to delete user")}},E=async()=>{if(!(v.length===0||!U))try{switch(U){case"delete":if(!confirm(`Are you sure you want to delete ${v.length} users? This action cannot be undone.`))return;await W.bulkDeleteUsers(v),h.success(`${v.length} users deleted successfully`);break;case"promote_moderator":await W.bulkUpdateUserRoles(v,"moderator"),h.success(`${v.length} users promoted to moderator`);break;case"demote_user":await W.bulkUpdateUserRoles(v,"user"),h.success(`${v.length} users demoted to user`);break;default:return}f([]),k(""),m()}catch(l){console.error("Error performing bulk action:",l),h.error("Failed to perform bulk action")}},B=l=>se.find(p=>p.value===l)||se[0],oe=l=>l.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2),Ee=()=>{const l=[["Name","Email","Role","Created At"].join(","),...u.map(ee=>[ee.full_name||"",ee.email,ee.role,new Date(ee.created_at).toLocaleDateString()].join(","))].join(`
`),p=new Blob([l],{type:"text/csv"}),M=URL.createObjectURL(p),P=document.createElement("a");P.href=M,P.download=`users_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(M)};return s(x.USERS_READ)?e.jsxs("div",{className:`space-y-6 ${b}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage user accounts, roles, and permissions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{variant:"outline",onClick:Ee,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(j,{variant:"outline",onClick:m,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:se.map(l=>{const p=o.filter(M=>M.role===l.value).length;return e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[l.label,"s"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p})]}),e.jsx($,{className:"h-8 w-8 text-gray-400"})]})})},l.value)})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Te,{placeholder:"Search users by name or email...",value:T,onChange:l=>i(l.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ae,{value:w,onValueChange:l=>R(l),children:[e.jsx(te,{children:e.jsx(le,{placeholder:"Filter by role"})}),e.jsxs(re,{children:[e.jsx(I,{value:"all",children:"All Roles"}),se.map(l=>e.jsx(I,{value:l.value,children:l.label},l.value))]})]})})]}),v.length>0&&s(x.USERS_MANAGE_ROLES)&&e.jsxs("div",{className:"flex items-center space-x-4 mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[v.length," user",v.length===1?"":"s"," selected"]}),e.jsxs(ae,{value:U,onValueChange:k,children:[e.jsx(te,{className:"w-48",children:e.jsx(le,{placeholder:"Bulk actions"})}),e.jsxs(re,{children:[e.jsx(I,{value:"promote_moderator",children:"Promote to Moderator"}),e.jsx(I,{value:"demote_user",children:"Demote to User"}),e.jsx(I,{value:"delete",children:"Delete Users"})]})]}),e.jsx(j,{onClick:E,disabled:!U,children:"Apply"}),e.jsx(j,{variant:"outline",onClick:()=>f([]),children:"Clear Selection"})]})]})}),e.jsxs(n,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{children:["Users (",u.length,")"]}),s(x.USERS_MANAGE_ROLES)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{checked:v.length===u.length&&u.length>0,onCheckedChange:N}),e.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})}),e.jsx(d,{children:g?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((l,p)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},p))}):u.length>0?e.jsx("div",{className:"space-y-2",children:u.map(l=>{const p=B(l.role);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s(x.USERS_MANAGE_ROLES)&&e.jsx(pe,{checked:v.includes(l.id),onCheckedChange:M=>t(l.id,!!M)}),e.jsx(Ce,{children:e.jsx(Re,{children:l.full_name?oe(l.full_name):l.email[0].toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:l.full_name||"Unnamed User"}),e.jsx(A,{className:p.color,children:p.label})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",ie(new Date(l.created_at),{addSuffix:!0})]})]})]}),s(x.USERS_UPDATE)&&e.jsxs($e,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Me,{className:"h-4 w-4"})})}),e.jsxs(Ge,{align:"end",children:[e.jsx(Ye,{children:"Actions"}),e.jsx(ge,{}),s(x.USERS_MANAGE_ROLES)&&e.jsxs(e.Fragment,{children:[e.jsxs(xe,{onClick:()=>D(l.id,"moderator"),children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Promote to Moderator"]}),e.jsxs(xe,{onClick:()=>D(l.id,"user"),children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Demote to User"]}),e.jsx(ge,{})]}),s(x.USERS_DELETE)&&e.jsxs(xe,{onClick:()=>a(l.id),className:"text-red-600",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})]},l.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]})})]})]}):e.jsx(n,{className:b,children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(ye,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500",children:"You don't have permission to view user management."})]})})},as=({className:b=""})=>{const[o,y]=c.useState([]),[u,C]=c.useState([]),[g,S]=c.useState({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0}),[T,i]=c.useState(!0),[w,R]=c.useState("reviews"),{hasPermission:v}=de();c.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),y([]),C([]),S({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0})}catch(t){console.error("Error loading moderation data:",t),h.error("Failed to load moderation data")}finally{i(!1)}},U=async(t,N)=>{try{await J.moderateReview(t,N),h.success(`Review ${N} successfully`),f()}catch(D){console.error("Error moderating review:",D),h.error("Failed to moderate review")}},k=async(t,N)=>{try{h.success(`Template ${N} successfully`),f()}catch(D){console.error("Error moderating template:",D),h.error("Failed to moderate template")}},s=t=>Array.from({length:5},(N,D)=>e.jsx(K,{className:`h-4 w-4 ${D<Math.floor(t)?"text-yellow-400 fill-current":"text-gray-300"}`},D)),m=t=>t.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2);if(!v(x.LAW_FIRMS_MODERATE_REVIEWS)&&!v(x.TEMPLATES_MODERATE))return e.jsx(n,{className:b,children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(he,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500",children:"You don't have permission to access content moderation."})]})});const r=[{title:"Pending Reviews",value:g.pendingReviews,total:g.totalReviews,description:"Reviews awaiting moderation",icon:H,color:"text-yellow-600"},{title:"Pending Templates",value:g.pendingTemplates,total:g.totalTemplates,description:"Templates awaiting approval",icon:O,color:"text-blue-600"},{title:"Total Content",value:g.totalReviews+g.totalTemplates,total:null,description:"All moderated content",icon:$,color:"text-green-600"},{title:"Moderation Queue",value:g.pendingReviews+g.pendingTemplates,total:null,description:"Items requiring attention",icon:X,color:"text-red-600"}];return e.jsxs("div",{className:`space-y-6 ${b}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Content Moderation"}),e.jsx("p",{className:"text-gray-600",children:"Review and moderate user-generated content"})]}),e.jsxs(j,{variant:"outline",onClick:f,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Refresh Queue"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((t,N)=>e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t.title}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.value,t.total!==null&&e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["/ ",t.total]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),e.jsx(t.icon,{className:`h-8 w-8 ${t.color}`})]})})},N))}),e.jsxs(ce,{value:w,onValueChange:R,children:[e.jsxs(ne,{className:"grid w-full grid-cols-2",children:[e.jsxs(z,{value:"reviews",className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs("span",{children:["Reviews (",g.pendingReviews,")"]})]}),e.jsxs(z,{value:"templates",className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{children:["Templates (",g.pendingTemplates,")"]})]})]}),e.jsx(_,{value:"reviews",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Pending Reviews"}),e.jsx(G,{children:"Law firm reviews awaiting moderation approval"})]}),e.jsx(d,{children:T?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,N)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},N))}):o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(t=>{var N;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ce,{children:e.jsx(Re,{children:t.user?m(t.user.full_name):"U"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:((N=t.user)==null?void 0:N.full_name)||"Anonymous"}),e.jsx(A,{variant:"secondary",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex items-center space-x-1",children:s(t.rating)}),e.jsx("span",{className:"text-sm text-gray-500",children:ie(new Date(t.created_at),{addSuffix:!0})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{size:"sm",onClick:()=>U(t.id,"approved"),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(j,{variant:"destructive",size:"sm",onClick:()=>U(t.id,"rejected"),children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"text-gray-700",children:t.content})]})]},t.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),e.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})})]})}),e.jsx(_,{value:"templates",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Pending Templates"}),e.jsx(G,{children:"Public templates awaiting approval"})]}),e.jsx(d,{children:T?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((t,N)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},N))}):u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(O,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsx(A,{variant:"secondary",children:"Pending"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.category}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",ie(new Date(t.created_at),{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Preview"]}),e.jsxs(j,{size:"sm",onClick:()=>k(t.id,"approved"),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(j,{variant:"destructive",size:"sm",onClick:()=>k(t.id,"rejected"),children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-700",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Variables:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.variables.slice(0,3).map((N,D)=>e.jsx(A,{variant:"outline",className:"text-xs",children:N},D)),t.variables.length>3&&e.jsxs(A,{variant:"outline",className:"text-xs",children:["+",t.variables.length-3," more"]})]})]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending templates"}),e.jsx("p",{className:"text-gray-500",children:"All templates have been reviewed."})]})})]})})]}),e.jsxs(n,{children:[e.jsx(F,{children:e.jsxs(L,{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"Moderation Guidelines"})]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Review Moderation"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Check for inappropriate language or content"}),e.jsx("li",{children:"• Verify reviews are constructive and helpful"}),e.jsx("li",{children:"• Ensure reviews don't contain personal information"}),e.jsx("li",{children:"• Look for potential fake or spam reviews"}),e.jsx("li",{children:"• Approve reviews that provide genuine feedback"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Template Moderation"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Verify legal accuracy and completeness"}),e.jsx("li",{children:"• Check for proper variable placement"}),e.jsx("li",{children:"• Ensure templates follow Singapore law"}),e.jsx("li",{children:"• Review for clarity and usability"}),e.jsx("li",{children:"• Approve templates that meet quality standards"})]})]})]})})]})]})},ts=({className:b=""})=>{const[o,y]=c.useState({totalUsers:0,activeUsers:0,totalDocuments:0,totalTemplates:0,totalLawFirms:0,systemHealth:"healthy",uptime:"99.9%",responseTime:120}),[u,C]=c.useState({dailyActiveUsers:0,documentsProcessed:0,templatesGenerated:0,searchQueries:0,aiOperations:0}),[g,S]=c.useState([]),[T,i]=c.useState(!0),[w,R]=c.useState("overview"),{hasPermission:v}=de();c.useEffect(()=>{f();const r=setInterval(f,3e4);return()=>clearInterval(r)},[]);const f=async()=>{try{i(!0);const r=await W.getAuditLogs({date_from:new Date(Date.now()-24*60*60*1e3)});S(r),y({totalUsers:1250,activeUsers:89,totalDocuments:5420,totalTemplates:156,totalLawFirms:89,systemHealth:"healthy",uptime:"99.9%",responseTime:Math.floor(Math.random()*50)+100}),C({dailyActiveUsers:89,documentsProcessed:234,templatesGenerated:45,searchQueries:1250,aiOperations:567})}catch(r){console.error("Error loading system data:",r),h.error("Failed to load system data")}finally{i(!1)}},U=r=>{switch(r){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}},k=r=>{switch(r){case"healthy":return Y;case"warning":return Z;case"critical":return Z;default:return V}};if(!v(x.SYSTEM_MONITORING))return e.jsx(n,{className:b,children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(De,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-500",children:"You don't have permission to view system monitoring."})]})});const s=[{title:"System Health",value:o.systemHealth,description:`${o.uptime} uptime`,icon:k(o.systemHealth),color:U(o.systemHealth),trend:null},{title:"Active Users",value:o.activeUsers,description:`${o.totalUsers} total users`,icon:$,color:"text-blue-600",trend:"+12%"},{title:"Documents",value:o.totalDocuments,description:`${u.documentsProcessed} processed today`,icon:O,color:"text-green-600",trend:"+8%"},{title:"Response Time",value:`${o.responseTime}ms`,description:"Average response time",icon:V,color:o.responseTime>200?"text-yellow-600":"text-green-600",trend:o.responseTime>200?"+5%":"-3%"}],m=[{title:"Daily Active Users",value:u.dailyActiveUsers,icon:$,color:"text-blue-600"},{title:"Documents Processed",value:u.documentsProcessed,icon:O,color:"text-green-600"},{title:"Templates Generated",value:u.templatesGenerated,icon:je,color:"text-purple-600"},{title:"Search Queries",value:u.searchQueries,icon:q,color:"text-orange-600"},{title:"AI Operations",value:u.aiOperations,icon:V,color:"text-red-600"}];return e.jsxs("div",{className:`space-y-6 ${b}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-600",children:"Monitor system health, performance, and usage metrics"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(j,{variant:"outline",onClick:f,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((r,t)=>e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.value}),e.jsx("p",{className:"text-xs text-gray-500",children:r.description})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(r.icon,{className:`h-8 w-8 ${r.color}`}),r.trend&&e.jsxs("div",{className:`flex items-center mt-2 ${r.trend.startsWith("+")?"text-green-600":"text-red-600"}`,children:[r.trend.startsWith("+")?e.jsx(Fe,{className:"h-3 w-3 mr-1"}):e.jsx(Le,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:r.trend})]})]})]})})},t))}),e.jsxs(ce,{value:w,onValueChange:R,children:[e.jsxs(ne,{className:"grid w-full grid-cols-3",children:[e.jsx(z,{value:"overview",children:"Overview"}),e.jsx(z,{value:"usage",children:"Usage Metrics"}),e.jsx(z,{value:"activity",children:"Recent Activity"})]}),e.jsx(_,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"System Status"}),e.jsx(G,{children:"Current system health and performance"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Database"}),e.jsx(A,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"API Server"}),e.jsx(A,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"File Storage"}),e.jsx(A,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Services"}),e.jsx(A,{className:"bg-yellow-100 text-yellow-800",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Email Service"}),e.jsx(A,{className:"bg-green-100 text-green-800",children:"Healthy"})]})]})]}),e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Resource Usage"}),e.jsx(G,{children:"Current system resource utilization"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"CPU Usage"}),e.jsx("span",{children:"45%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Memory Usage"}),e.jsx("span",{children:"67%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"67%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Storage Usage"}),e.jsx("span",{children:"23%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"23%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Network I/O"}),e.jsx("span",{children:"12%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"12%"}})})]})]})]})]})}),e.jsxs(_,{value:"usage",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:m.map((r,t)=>e.jsx(n,{children:e.jsxs(d,{className:"p-6 text-center",children:[e.jsx(r.icon,{className:`h-8 w-8 ${r.color} mx-auto mb-2`}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.value}),e.jsx("p",{className:"text-sm text-gray-600",children:r.title})]})},t))}),e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Usage Trends (Last 7 Days)"}),e.jsx(G,{children:"Daily usage patterns and trends"})]}),e.jsx(d,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"Usage charts would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with charting library needed"})]})})})]})]}),e.jsx(_,{value:"activity",className:"space-y-6",children:e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Recent System Activity"}),e.jsx(G,{children:"Latest admin actions and system events"})]}),e.jsx(d,{children:T?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((r,t)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]})},t))}):g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(r=>{var t;return e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:((t=r.user)==null?void 0:t.full_name)||"System"}),e.jsx("span",{className:"text-gray-600",children:r.action.replace(/_/g," ")}),e.jsx(A,{variant:"outline",className:"text-xs",children:r.resource_type})]}),e.jsx("p",{className:"text-sm text-gray-500",children:ie(new Date(r.created_at),{addSuffix:!0})})]})]},r.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recent activity"}),e.jsx("p",{className:"text-gray-500",children:"System activity will appear here as it occurs."})]})})]})})]})]})},ls=({className:b=""})=>{const[o,y]=c.useState([]),[u,C]=c.useState([]),[g,S]=c.useState(!0),[T,i]=c.useState("firms");c.useEffect(()=>{w()},[]);const w=async()=>{try{S(!0);const s=await J.getLawFirms();y(s)}catch(s){console.error("Error loading admin data:",s),h.error("Failed to load data")}finally{S(!1)}},R=async(s,m)=>{try{await J.verifyLawFirm(s,m),h.success(`Law firm ${m?"verified":"unverified"} successfully`),w()}catch(r){console.error("Error verifying firm:",r),h.error("Failed to update verification status")}},v=async s=>{if(confirm("Are you sure you want to delete this law firm? This action cannot be undone."))try{await J.deleteLawFirm(s),h.success("Law firm deleted successfully"),w()}catch(m){console.error("Error deleting firm:",m),h.error("Failed to delete law firm")}},f=async(s,m)=>{try{await J.moderateReview(s,m),h.success(`Review ${m} successfully`),w()}catch(r){console.error("Error moderating review:",r),h.error("Failed to moderate review")}},U=s=>Array.from({length:5},(m,r)=>e.jsx(K,{className:`h-4 w-4 ${r<Math.floor(s)?"text-yellow-400 fill-current":"text-gray-300"}`},r)),k=[{title:"Total Law Firms",value:o.length,description:"All registered firms",icon:$,color:"text-blue-600"},{title:"Verified Firms",value:o.filter(s=>s.verified).length,description:"Approved and verified",icon:Y,color:"text-green-600"},{title:"Pending Verification",value:o.filter(s=>!s.verified).length,description:"Awaiting approval",icon:X,color:"text-yellow-600"},{title:"Pending Reviews",value:u.length,description:"Awaiting moderation",icon:H,color:"text-purple-600"}];return e.jsxs("div",{className:`space-y-6 ${b}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Law Firm Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage law firm listings, verifications, and reviews"})]}),e.jsxs(j,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add Law Firm"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:k.map((s,m)=>e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description})]}),e.jsx(s.icon,{className:`h-8 w-8 ${s.color}`})]})})},m))}),e.jsxs(ce,{value:T,onValueChange:i,children:[e.jsxs(ne,{className:"grid w-full grid-cols-2",children:[e.jsxs(z,{value:"firms",children:["Law Firms (",o.length,")"]}),e.jsxs(z,{value:"reviews",children:["Pending Reviews (",u.length,")"]})]}),e.jsx(_,{value:"firms",className:"space-y-4",children:g?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,m)=>e.jsx(n,{className:"animate-pulse",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},m))}):e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx($,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx(A,{variant:s.verified?"default":"secondary",children:s.verified?"Verified":"Pending"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsx("span",{children:s.address}),e.jsx("span",{children:s.phone}),e.jsxs("div",{className:"flex items-center space-x-1",children:[U(s.rating),e.jsx("span",{children:s.rating.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{variant:"outline",size:"sm",children:e.jsx(ue,{className:"h-4 w-4"})}),s.verified?e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>R(s.id,!1),children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Unverify"]}):e.jsxs(j,{size:"sm",onClick:()=>R(s.id,!0),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Verify"]}),e.jsx(j,{variant:"destructive",size:"sm",onClick:()=>v(s.id),children:e.jsx(Se,{className:"h-4 w-4"})})]})]})})},s.id))})}),e.jsx(_,{value:"reviews",className:"space-y-4",children:u.length===0?e.jsx(n,{children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(H,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),e.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})}):e.jsx("div",{className:"space-y-4",children:u.map(s=>{var m;return e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex items-center space-x-1",children:U(s.rating)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["by ",((m=s.user)==null?void 0:m.full_name)||"Anonymous"]})]})]}),e.jsx(A,{variant:"secondary",children:"Pending"})]}),e.jsx("p",{className:"text-gray-700",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{size:"sm",onClick:()=>f(s.id,"approved"),children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(j,{variant:"destructive",size:"sm",onClick:()=>f(s.id,"rejected"),children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})})},s.id)})})})]})]})},rs=()=>{const[b,o]=c.useState([]),[y,u]=c.useState([]),[C,g]=c.useState(!0),[S,T]=c.useState(""),[i,w]=c.useState(""),[R,v]=c.useState(""),[f,U]=c.useState(!1),k=Array.isArray(y)?y:[];c.useEffect(()=>{s()},[]);const s=async()=>{try{g(!0);const[a,E]=await Promise.all([ve.searchTemplates({limit:100,sortBy:"newest"}),ve.getCategories()]);o(a.templates),u(E)}catch(a){console.error("Failed to load data:",a),h.error("Failed to load template data")}finally{g(!1)}},m=async(a,E)=>{try{h.success(`Template ${E?"deactivated":"activated"} successfully`),s()}catch{h.error("Failed to update template status")}},r=async(a,E)=>{try{h.success(`Template ${E?"unfeatured":"featured"} successfully`),s()}catch{h.error("Failed to update template featured status")}},t=b.filter(a=>{const E=!S||a.title.toLowerCase().includes(S.toLowerCase())||a.description.toLowerCase().includes(S.toLowerCase()),B=!i||a.categoryId===i,oe=!R||R==="active"&&a.isActive||R==="inactive"&&!a.isActive||R==="featured"&&a.isFeatured;return E&&B&&oe}),N=a=>a.isActive?a.isFeatured?e.jsxs(A,{variant:"default",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Featured"]}):e.jsxs(A,{variant:"secondary",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(A,{variant:"destructive",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),"Inactive"]}),D=a=>{const E={public:"outline",premium:"secondary",enterprise:"default"};return e.jsx(A,{variant:E[a]||"outline",children:a.charAt(0).toUpperCase()+a.slice(1)})};return C?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(me,{className:"h-8 w-48"}),e.jsx(me,{className:"h-10 w-32"})]}),e.jsx("div",{className:"grid gap-4",children:Array.from({length:5}).map((a,E)=>e.jsx(me,{className:"h-24 w-full"},E))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Template Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage legal document templates and categories"})]}),e.jsxs(ze,{open:f,onOpenChange:U,children:[e.jsx(We,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Create Template"]})}),e.jsxs(He,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Be,{children:"Create New Template"}),e.jsx(qe,{children:"Create a new legal document template for the marketplace."})]}),e.jsxs(Je,{children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx(Ke,{children:"Template creation interface would be implemented here with form fields for title, description, content, fields, etc."})]})]})]})]}),e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Te,{placeholder:"Search templates...",value:S,onChange:a=>T(a.target.value),className:"pl-10"})]})}),e.jsxs(ae,{value:i,onValueChange:w,children:[e.jsx(te,{className:"w-full lg:w-48",children:e.jsx(le,{placeholder:"All Categories"})}),e.jsxs(re,{children:[e.jsx(I,{value:"",children:"All Categories"}),k.map(a=>a&&a.id&&a.name?e.jsx(I,{value:a.id,children:a.name},a.id):null)]})]}),e.jsxs(ae,{value:R,onValueChange:v,children:[e.jsx(te,{className:"w-full lg:w-32",children:e.jsx(le,{placeholder:"All Status"})}),e.jsxs(re,{children:[e.jsx(I,{value:"",children:"All Status"}),e.jsx(I,{value:"active",children:"Active"}),e.jsx(I,{value:"inactive",children:"Inactive"}),e.jsx(I,{value:"featured",children:"Featured"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx(n,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(O,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-600",children:S||i||R?"Try adjusting your filters to see more templates.":"Get started by creating your first template."})]})}):t.map(a=>e.jsx(n,{className:"hover:shadow-md transition-shadow",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),N(a),D(a.accessLevel)]}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-4 w-4"}),a.downloadCount.toLocaleString()," downloads"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-4 w-4"}),a.ratingAverage.toFixed(1)," (",a.ratingCount," reviews)"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),new Date(a.createdAt).toLocaleDateString()]}),a.priceSgd>0&&e.jsxs("div",{className:"font-medium text-green-600",children:["S$",a.priceSgd.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Preview"]}),e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>r(a.id,a.isFeatured),children:[e.jsx(K,{className:`h-4 w-4 mr-1 ${a.isFeatured?"fill-current":""}`}),a.isFeatured?"Unfeature":"Feature"]}),e.jsx(j,{variant:a.isActive?"destructive":"default",size:"sm",onClick:()=>m(a.id,a.isActive),children:a.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Activate"]})})]})]})})},a.id))}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Templates"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.filter(a=>a.isActive).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Templates"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:b.filter(a=>a.isFeatured).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Featured Templates"})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b.reduce((a,E)=>a+E.downloadCount,0).toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Downloads"})]})})]})]})},gs=()=>{const[b,o]=c.useState("overview"),{hasPermission:y}=de(),{canAccessAdmin:u}=Ze(),{profile:C}=Xe();if(!u())return e.jsx(Ne,{children:e.jsx(n,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(ye,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx(j,{onClick:()=>window.history.back(),children:"Go Back"})]})})});const g=[{title:"Total Users",value:"1,250",description:"+12% from last month",icon:$,color:"text-blue-600",permission:x.USERS_READ},{title:"Pending Reviews",value:"23",description:"Awaiting moderation",icon:H,color:"text-yellow-600",permission:x.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Health",value:"99.9%",description:"Uptime this month",icon:V,color:"text-green-600",permission:x.SYSTEM_MONITORING},{title:"Active Sessions",value:"89",description:"Currently online",icon:q,color:"text-purple-600",permission:x.SYSTEM_ANALYTICS}],S=[{title:"Manage Users",description:"Add, edit, or remove user accounts",icon:$,action:()=>o("users"),permission:x.USERS_READ},{title:"Content Moderation",description:"Review and moderate user content",icon:he,action:()=>o("moderation"),permission:x.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Monitoring",description:"Monitor system health and performance",icon:V,action:()=>o("monitoring"),permission:x.SYSTEM_MONITORING},{title:"Law Firm Management",description:"Manage law firm listings and verifications",icon:je,action:()=>o("lawfirms"),permission:x.LAW_FIRMS_VERIFY},{title:"Template Management",description:"Manage legal document templates",icon:O,action:()=>o("templates"),permission:x.TEMPLATES_MANAGE},{title:"Analytics Dashboard",description:"View template marketplace analytics",icon:q,action:()=>o("analytics"),permission:x.SYSTEM_ANALYTICS}],T=[{id:"overview",label:"Overview",icon:q,permission:null},{id:"users",label:"Users",icon:$,permission:x.USERS_READ},{id:"moderation",label:"Moderation",icon:he,permission:x.LAW_FIRMS_MODERATE_REVIEWS},{id:"lawfirms",label:"Law Firms",icon:je,permission:x.LAW_FIRMS_VERIFY},{id:"templates",label:"Templates",icon:O,permission:x.TEMPLATES_MANAGE},{id:"analytics",label:"Analytics",icon:q,permission:x.SYSTEM_ANALYTICS},{id:"monitoring",label:"Monitoring",icon:V,permission:x.SYSTEM_MONITORING}].filter(i=>!i.permission||y(i.permission));return e.jsx(Ne,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",(C==null?void 0:C.full_name)||(C==null?void 0:C.email)]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(j,{variant:"outline",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Settings"]})})]}),e.jsxs(ce,{value:b,onValueChange:o,children:[e.jsx(ne,{className:`grid w-full grid-cols-${T.length}`,children:T.map(i=>e.jsxs(z,{value:i.id,className:"flex items-center space-x-2",children:[e.jsx(i.icon,{className:"h-4 w-4"}),e.jsx("span",{children:i.label})]},i.id))}),e.jsxs(_,{value:"overview",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.filter(i=>!i.permission||y(i.permission)).map((i,w)=>e.jsx(n,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:i.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.value}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]}),e.jsx(i.icon,{className:`h-8 w-8 ${i.color}`})]})})},w))}),e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsx(L,{children:"Quick Actions"}),e.jsx(G,{children:"Common administrative tasks and shortcuts"})]}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.filter(i=>!i.permission||y(i.permission)).map((i,w)=>e.jsxs(j,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:i.action,children:[e.jsx(i.icon,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description})]})]},w))})})]}),e.jsxs(n,{children:[e.jsxs(F,{children:[e.jsxs(L,{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{children:"System Alerts"})]}),e.jsx(G,{children:"Important notifications and system status updates"})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Z,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"AI Service Performance"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Response times are slightly elevated. Monitoring the situation."})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(O,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Content Moderation Queue"}),e.jsx("p",{className:"text-sm text-blue-700",children:"23 items pending review in the moderation queue."})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(V,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"System Update Complete"}),e.jsx("p",{className:"text-sm text-green-700",children:"Successfully deployed security updates with zero downtime."})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(F,{children:e.jsx(L,{children:"Recent User Activity"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"New user registrations"}),e.jsx("span",{className:"font-medium",children:"+15 today"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Documents uploaded"}),e.jsx("span",{className:"font-medium",children:"234 today"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Templates generated"}),e.jsx("span",{className:"font-medium",children:"45 today"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"AI chat sessions"}),e.jsx("span",{className:"font-medium",children:"89 today"})]})]})})]}),e.jsxs(n,{children:[e.jsx(F,{children:e.jsx(L,{children:"System Performance"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average response time"}),e.jsx("span",{className:"font-medium text-green-600",children:"120ms"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Error rate"}),e.jsx("span",{className:"font-medium text-green-600",children:"0.02%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"CPU usage"}),e.jsx("span",{className:"font-medium text-yellow-600",children:"45%"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Memory usage"}),e.jsx("span",{className:"font-medium text-yellow-600",children:"67%"})]})]})})]})]})]}),y(x.USERS_READ)&&e.jsx(_,{value:"users",children:e.jsx(ss,{})}),y(x.LAW_FIRMS_MODERATE_REVIEWS)&&e.jsx(_,{value:"moderation",children:e.jsx(as,{})}),y(x.LAW_FIRMS_VERIFY)&&e.jsx(_,{value:"lawfirms",children:e.jsx(ls,{})}),y(x.TEMPLATES_MANAGE)&&e.jsx(_,{value:"templates",children:e.jsx(rs,{})}),y(x.SYSTEM_ANALYTICS)&&e.jsx(_,{value:"analytics",children:e.jsx(es,{})}),y(x.SYSTEM_MONITORING)&&e.jsx(_,{value:"monitoring",children:e.jsx(ts,{})})]})]})})};export{gs as default};
