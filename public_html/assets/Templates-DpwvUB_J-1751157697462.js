import{r as e,j as s}from"./react-vendor-C9QDz5CC-1751157697462.js";import{J as a,B as l,C as t,n as c,I as n,E as r,G as i,H as d,K as o,M as m,t as x,u as h,A as p,g as u,a1 as j,S as g,N as v,O as N,ag as w,p as f,q as y,r as b,s as C}from"./index-Nm10j6Nl-1751157697462.js";import{t as S,T}from"./TemplateGenerator-DTVuTZ3u-1751157697462.js";import{ap as z,a4 as E,n as L,F as k,aC as _,U as D,aM as A,bC as $,w as P,aW as R,N as I,bE as F,K as U,r as B,c2 as G,s as O,bx as V,v as q}from"./ui-components-sGEvreJz-1751157697462.js";import{f as M}from"./utilities-4I7I24te-1751157697462.js";import"./supabase-Ra3u5gLZ-1751157697462.js";import"./data-fetching-fKMcgonG-1751157697462.js";import"./forms-B_mclhSF-1751157697462.js";import"./ai-services-BdAg_3mV-1751157697462.js";const H=[{value:"",label:"All Categories"},{value:"contracts",label:"Contracts & Agreements"},{value:"employment",label:"Employment Law"},{value:"corporate",label:"Corporate Documents"},{value:"real-estate",label:"Real Estate"},{value:"intellectual-property",label:"Intellectual Property"},{value:"litigation",label:"Litigation & Court"},{value:"compliance",label:"Compliance & Regulatory"},{value:"personal",label:"Personal Legal"},{value:"other",label:"Other"}],TemplateBrowser=({onTemplateSelect:j,onTemplatePreview:g,className:v=""})=>{const[N,w]=e.useState([]),[f,y]=e.useState([]),[b,C]=e.useState(!0),[T,R]=e.useState(""),[I,F]=e.useState(""),[U,B]=e.useState("grid"),[G,O]=e.useState("newest");e.useEffect(()=>{loadTemplates()},[]),e.useEffect(()=>{filterTemplates()},[N,T,I,G]);const loadTemplates=async()=>{try{C(!0);const e=await S.getPublicTemplates();w(e)}catch(e){console.error("Error loading templates:",e),a.error("Failed to load templates")}finally{C(!1)}},filterTemplates=()=>{let e=[...N];if(T.trim()){const s=T.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.category.toLowerCase().includes(s))}I&&(e=e.filter(e=>e.category===I)),e.sort((e,s)=>{switch(G){case"newest":return new Date(s.created_at).getTime()-new Date(e.created_at).getTime();case"oldest":return new Date(e.created_at).getTime()-new Date(s.created_at).getTime();case"name":return e.name.localeCompare(s.name);default:return 0}}),y(e)},handleTemplateAction=(e,s)=>{switch(s){case"select":j?.(e);break;case"preview":g?.(e);break;case"copy":navigator.clipboard.writeText(e.content),a.success("Template content copied to clipboard")}},getCategoryLabel=e=>{const s=H.find(s=>s.value===e);return s?.label||e},TemplateCard=({template:e})=>s.jsxs(t,{className:"h-full hover:shadow-md transition-shadow",children:[s.jsx(x,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(h,{className:"text-lg font-semibold truncate",children:e.name}),s.jsx(p,{className:"mt-1 line-clamp-2",children:e.description})]}),s.jsx(u,{variant:"secondary",className:"ml-2 flex-shrink-0",children:getCategoryLabel(e.category)})]})}),s.jsx(c,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[e.content.substring(0,150),"..."]})}),e.variables&&e.variables.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Variables:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.variables.slice(0,3).map((e,a)=>s.jsx(u,{variant:"outline",className:"text-xs",children:e},a)),e.variables.length>3&&s.jsxs(u,{variant:"outline",className:"text-xs",children:["+",e.variables.length-3," more"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(_,{className:"h-3 w-3"}),s.jsx("span",{children:M(new Date(e.created_at),{addSuffix:!0})})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(D,{className:"h-3 w-3"}),s.jsx("span",{children:"Public"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(l,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>handleTemplateAction(e,"preview"),children:[s.jsx(A,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsx(l,{variant:"outline",size:"sm",onClick:()=>handleTemplateAction(e,"copy"),children:s.jsx($,{className:"h-4 w-4"})}),s.jsxs(l,{size:"sm",onClick:()=>handleTemplateAction(e,"select"),children:[s.jsx(P,{className:"h-4 w-4 mr-1"}),"Use"]})]})]})})]}),TemplateListItem=({template:e})=>s.jsx(t,{className:"hover:shadow-sm transition-shadow",children:s.jsx(c,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(k,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-medium truncate",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.description})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(u,{variant:"secondary",className:"text-xs",children:getCategoryLabel(e.category)}),s.jsx("span",{className:"text-xs text-gray-500",children:M(new Date(e.created_at),{addSuffix:!0})}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(l,{variant:"ghost",size:"sm",onClick:()=>handleTemplateAction(e,"preview"),children:s.jsx(A,{className:"h-4 w-4"})}),s.jsx(l,{variant:"ghost",size:"sm",onClick:()=>handleTemplateAction(e,"copy"),children:s.jsx($,{className:"h-4 w-4"})}),s.jsx(l,{size:"sm",onClick:()=>handleTemplateAction(e,"select"),children:"Use"})]})]})]})})});return s.jsxs("div",{className:`space-y-6 ${v}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Legal Templates"}),s.jsx("p",{className:"text-gray-600",children:"Browse and customize professional legal document templates"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{variant:"grid"===U?"default":"outline",size:"sm",onClick:()=>B("grid"),children:s.jsx(z,{className:"h-4 w-4"})}),s.jsx(l,{variant:"list"===U?"default":"outline",size:"sm",onClick:()=>B("list"),children:s.jsx(E,{className:"h-4 w-4"})})]})]}),s.jsx(t,{children:s.jsx(c,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(n,{placeholder:"Search templates...",value:T,onChange:e=>R(e.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"w-full md:w-64",children:s.jsxs(r,{value:I,onValueChange:F,children:[s.jsx(i,{children:s.jsx(d,{placeholder:"Category"})}),s.jsx(o,{children:H.map(e=>s.jsx(m,{value:e.value,children:e.label},e.value))})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(r,{value:G,onValueChange:e=>O(e),children:[s.jsx(i,{children:s.jsx(d,{placeholder:"Sort by"})}),s.jsxs(o,{children:[s.jsx(m,{value:"newest",children:"Newest First"}),s.jsx(m,{value:"oldest",children:"Oldest First"}),s.jsx(m,{value:"name",children:"Name A-Z"})]})]})})]})})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:b?"Loading...":`${f.length} template${1===f.length?"":"s"} found`})}),b?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>s.jsxs(t,{className:"animate-pulse",children:[s.jsxs(x,{children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},a))}):f.length>0?"grid"===U?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>s.jsx(TemplateCard,{template:e},e.id))}):s.jsx("div",{className:"space-y-3",children:f.map(e=>s.jsx(TemplateListItem,{template:e},e.id))}):s.jsx(t,{children:s.jsxs(c,{className:"text-center py-8",children:[s.jsx(k,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or browse different categories."})]})})]})]})},TemplateCustomizer=({template:r,onSave:i,onDownload:d,className:o=""})=>{const[m,w]=e.useState(r.content),[f,y]=e.useState({}),[b,C]=e.useState([]),[S,T]=e.useState(!1);e.useState(!1),e.useEffect(()=>{extractVariables()},[r]),e.useEffect(()=>{generateCustomizedContent()},[f,r.content]);const extractVariables=()=>{const e=r.content.match(/\{\{([^}]+)\}\}/g)||[],s=[...new Set(e.map(e=>e.replace(/[{}]/g,"")))].map(e=>{const s=e.trim();return{name:s,value:"",required:!0,type:getVariableType(s),placeholder:getVariablePlaceholder(s),description:getVariableDescription(s)}});C(s);const a={};s.forEach(e=>{a[e.name]=""}),y(a)},getVariableType=e=>{const s=e.toLowerCase();return s.includes("date")||s.includes("time")?"date":s.includes("email")||s.includes("mail")?"email":s.includes("amount")||s.includes("price")||s.includes("cost")?"number":"text"},getVariablePlaceholder=e=>{const s=e.toLowerCase();return s.includes("name")?"Enter full name":s.includes("company")?"Enter company name":s.includes("address")?"Enter address":s.includes("date")?"Select date":s.includes("email")?"Enter email address":s.includes("phone")?"Enter phone number":s.includes("amount")||s.includes("price")?"Enter amount":`Enter ${e.replace(/_/g," ").toLowerCase()}`},getVariableDescription=e=>{const s=e.toLowerCase();return s.includes("party1")||s.includes("first_party")?"First party to the agreement":s.includes("party2")||s.includes("second_party")?"Second party to the agreement":s.includes("effective_date")?"Date when the agreement becomes effective":s.includes("termination_date")?"Date when the agreement terminates":s.includes("governing_law")?"Jurisdiction governing this agreement":`Value for ${e.replace(/_/g," ").toLowerCase()}`},generateCustomizedContent=()=>{let e=r.content;b.forEach(s=>{const a=`{{${s.name}}}`,l=f[s.name]||`[${s.name.toUpperCase()}]`;e=e.replace(new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),l)}),w(e)},handleVariableChange=(e,s)=>{y(a=>({...a,[e]:s}))},{total:z,completed:E}={total:b.length,completed:b.filter(e=>f[e.name]?.trim()).length},L=z>0?Math.round(E/z*100):100;return s.jsxs("div",{className:`space-y-6 ${o}`,children:[s.jsx(t,{children:s.jsx(x,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(h,{className:"flex items-center space-x-2",children:[s.jsx(k,{className:"h-5 w-5"}),s.jsx("span",{children:"Customize Template"})]}),s.jsxs(p,{children:[r.name," - Fill in the variables to customize your document"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(u,{variant:100===L?"default":"secondary",children:[E,"/",z," completed"]}),s.jsxs(l,{variant:"outline",size:"sm",onClick:()=>T(!S),children:[S?s.jsx(R,{className:"h-4 w-4"}):s.jsx(A,{className:"h-4 w-4"}),S?"Hide":"Show"," Preview"]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(t,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"text-lg",children:"Template Variables"}),s.jsx(p,{children:"Fill in the required information to customize your document"})]}),s.jsx(c,{className:"space-y-4",children:b.length>0?s.jsxs(s.Fragment,{children:[b.map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs(j,{htmlFor:e.name,className:"flex items-center space-x-2",children:[s.jsx("span",{children:e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),"date"===e.type?s.jsx(n,{id:e.name,type:"date",value:f[e.name]||"",onChange:s=>handleVariableChange(e.name,s.target.value),className:"w-full"}):"email"===e.type?s.jsx(n,{id:e.name,type:"email",placeholder:e.placeholder,value:f[e.name]||"",onChange:s=>handleVariableChange(e.name,s.target.value),className:"w-full"}):"number"===e.type?s.jsx(n,{id:e.name,type:"number",placeholder:e.placeholder,value:f[e.name]||"",onChange:s=>handleVariableChange(e.name,s.target.value),className:"w-full"}):s.jsx(n,{id:e.name,type:"text",placeholder:e.placeholder,value:f[e.name]||"",onChange:s=>handleVariableChange(e.name,s.target.value),className:"w-full"}),e.description&&s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]},e.name)),s.jsx(g,{}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(l,{variant:"outline",onClick:()=>{const e={};b.forEach(s=>{e[s.name]=""}),y(e),a.success("Variables reset")},className:"flex-1",children:[s.jsx(I,{className:"h-4 w-4 mr-2"}),"Reset"]}),s.jsxs(l,{onClick:()=>{i?.(m,f),a.success("Template customization saved")},disabled:0===E,className:"flex-1",children:[s.jsx(F,{className:"h-4 w-4 mr-2"}),"Save"]}),s.jsxs(l,{onClick:()=>{const e=`${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_customized.docx`;d?.(m,e),a.success("Template downloaded")},disabled:0===E,children:[s.jsx(P,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):s.jsxs(v,{children:[s.jsx(U,{className:"h-4 w-4"}),s.jsx(N,{children:"No variables found in this template. You can download it as-is or modify the content directly."})]})})]}),S&&s.jsxs(t,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"text-lg",children:"Document Preview"}),s.jsx(p,{children:"Live preview of your customized document"})]}),s.jsx(c,{children:s.jsx("div",{className:"max-h-96 overflow-y-auto p-4 bg-gray-50 rounded-lg",children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono",children:m})})})})]})]}),b.length>0&&s.jsx(t,{children:s.jsxs(c,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[100===L?s.jsx(B,{className:"h-5 w-5 text-green-500"}):s.jsx(U,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium",children:100===L?"All variables completed - ready to download!":`${z-E} variable${z-E===1?"":"s"} remaining`})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[L,"% complete"]})]}),s.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})})]})})]})},Templates=()=>{const[a,n]=e.useState("browse"),[r,i]=e.useState(null),[d,o]=e.useState(null),m=[{title:"Available Templates",value:"150+",description:"Professional legal templates",icon:k,color:"text-blue-600"},{title:"AI Generated",value:"50+",description:"Custom AI-created templates",icon:G,color:"text-purple-600"},{title:"Most Popular",value:"Service Agreement",description:"This month's top template",icon:V,color:"text-green-600"},{title:"Recently Added",value:"12",description:"New templates this week",icon:q,color:"text-orange-600"}];return s.jsx(w,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Legal Templates"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Browse, customize, and generate professional legal document templates"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(l,{variant:"outline",onClick:()=>n("generate"),children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Generate with AI"]}),s.jsxs(l,{onClick:()=>n("browse"),children:[s.jsx(L,{className:"h-4 w-4 mr-2"}),"Browse Templates"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map((e,a)=>s.jsx(t,{children:s.jsx(c,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(f,{value:a,onValueChange:n,children:[s.jsxs(y,{className:"grid w-full grid-cols-3",children:[s.jsxs(b,{value:"browse",className:"flex items-center space-x-2",children:[s.jsx(L,{className:"h-4 w-4"}),s.jsx("span",{children:"Browse Templates"})]}),s.jsxs(b,{value:"generate",className:"flex items-center space-x-2",children:[s.jsx(G,{className:"h-4 w-4"}),s.jsx("span",{children:"AI Generator"})]}),s.jsxs(b,{value:"customize",className:"flex items-center space-x-2",children:[s.jsx(k,{className:"h-4 w-4"}),s.jsx("span",{children:"Customize"})]})]}),s.jsxs(C,{value:"browse",className:"space-y-6",children:[s.jsxs(t,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"text-lg",children:"Template Categories"}),s.jsx(p,{children:"Explore templates by category"})]}),s.jsx(c,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Contracts & Agreements",count:45,description:"Service agreements, NDAs, and general contracts",popular:!0},{name:"Employment Law",count:28,description:"Employment contracts and HR documents",popular:!0},{name:"Corporate Documents",count:32,description:"Partnership agreements and corporate filings",popular:!1},{name:"Real Estate",count:18,description:"Lease agreements and property documents",popular:!1},{name:"Compliance & Regulatory",count:15,description:"Privacy policies and terms of service",popular:!0},{name:"Personal Legal",count:12,description:"Wills, powers of attorney, and personal documents",popular:!1}].map((e,a)=>s.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(u,{variant:"secondary",children:e.count}),e.popular&&s.jsx(O,{className:"h-4 w-4 text-yellow-500"})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]},a))})})]}),s.jsx(TemplateBrowser,{onTemplateSelect:e=>{i(e),n("customize")},onTemplatePreview:e=>{i(e),n("customize")}})]}),s.jsx(C,{value:"generate",className:"space-y-6",children:s.jsx(T,{onTemplateGenerated:e=>{o(e);const s={id:"generated-"+Date.now(),name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables,is_public:!1,created_by:"current-user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};i(s),n("customize")}})}),s.jsx(C,{value:"customize",className:"space-y-6",children:r?s.jsx(TemplateCustomizer,{template:r,onSave:(e,s)=>{console.log("Template customized:",{content:e,variables:s})},onDownload:(e,s)=>{const a=new Blob([e],{type:"text/plain"}),l=URL.createObjectURL(a),t=document.createElement("a");t.href=l,t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)}}):s.jsx(t,{children:s.jsxs(c,{className:"text-center py-12",children:[s.jsx(k,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Template Selected"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Choose a template from the browser or generate a new one with AI to start customizing."}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsxs(l,{variant:"outline",onClick:()=>n("browse"),children:[s.jsx(L,{className:"h-4 w-4 mr-2"}),"Browse Templates"]}),s.jsxs(l,{onClick:()=>n("generate"),children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Generate with AI"]})]})]})})})]})]})})};export{Templates as default};
