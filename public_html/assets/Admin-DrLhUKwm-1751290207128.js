import{r as e,j as s}from"./react-vendor-C9QDz5CC-1751290207128.js";import{J as a,C as l,n as t,B as i,I as r,z as c,A as n,E as d,G as m,K as x,t as o,u as h,_ as j,W as u,Y as p,g as v,D as g,a as N,b as f,ak as y,a3 as w,d as b,p as S,q as A,r as E,s as R,y as T,al as C,ad as M,ae as _,j as U,ag as F,k as L,l as k,m as D,ah as I,L as P,M as O,a4 as $,ab as V}from"./index-CIUloMom-1751290207128.js";import{u as Y,r as z,P as G,a as W,T as H}from"./usePermissions-C-2vLP8q-1751290207128.js";import{u as Q,w as q,N as B,y as J,n as K,c0 as X,c6 as Z,c7 as ee,bP as se,c8 as ae,p as le,F as te,v as ie,r as re,aX as ce,aM as ne,K as de,s as me,c9 as xe,ca as oe,a_ as he,bw as je,bx as ue,cb as pe,cc as ve,az as ge,aY as Ne,c4 as fe,bu as ye}from"./ui-components-NADxK8eM-1751290207128.js";import{f as we}from"./utilities-kqqoeiVg-1751290207128.js";import"./supabase-krEVv_JN-1751290207128.js";import"./data-fetching-Ch-Btsro-1751290207128.js";import"./forms-DcZe9WbG-1751290207128.js";const be=[{value:"user",label:"User",color:"bg-gray-100 text-gray-800"},{value:"moderator",label:"Moderator",color:"bg-blue-100 text-blue-800"},{value:"admin",label:"Admin",color:"bg-purple-100 text-purple-800"},{value:"super_admin",label:"Super Admin",color:"bg-red-100 text-red-800"}],UserManagement=({className:S=""})=>{const[A,E]=e.useState([]),[R,T]=e.useState([]),[C,M]=e.useState(!0),[_,U]=e.useState(""),[F,L]=e.useState("all"),[k,D]=e.useState([]),[I,P]=e.useState(""),{hasPermission:O}=Y();e.useEffect(()=>{loadUsers()},[]),e.useEffect(()=>{filterUsers()},[A,_,F]);const loadUsers=async()=>{try{M(!0);const e=await z.getUsers();E(e)}catch(e){console.error("Error loading users:",e),a.error("Failed to load users")}finally{M(!1)}},filterUsers=()=>{let e=[...A];if(_.trim()){const s=_.toLowerCase();e=e.filter(e=>e.full_name?.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))}"all"!==F&&(e=e.filter(e=>e.role===F)),T(e)},handleUpdateUserRole=async(e,s)=>{try{await z.updateUserRole(e,s),a.success("User role updated successfully"),loadUsers()}catch(l){console.error("Error updating user role:",l),a.error("Failed to update user role")}};return O(G.USERS_READ)?s.jsxs("div",{className:`space-y-6 ${S}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage user accounts, roles, and permissions"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(i,{variant:"outline",onClick:()=>{const e=[["Name","Email","Role","Created At"].join(","),...R.map(e=>[e.full_name||"",e.email,e.role,new Date(e.created_at).toLocaleDateString()].join(","))].join("\n"),s=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`users_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},children:[s.jsx(q,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(i,{variant:"outline",onClick:loadUsers,children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:be.map(e=>{const a=A.filter(s=>s.role===e.value).length;return s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[e.label,"s"]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a})]}),s.jsx(J,{className:"h-8 w-8 text-gray-400"})]})})},e.value)})}),s.jsx(l,{children:s.jsxs(t,{className:"p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(r,{placeholder:"Search users by name or email...",value:_,onChange:e=>U(e.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(c,{value:F,onValueChange:e=>L(e),children:[s.jsx(n,{children:s.jsx(d,{placeholder:"Filter by role"})}),s.jsxs(m,{children:[s.jsx(x,{value:"all",children:"All Roles"}),be.map(e=>s.jsx(x,{value:e.value,children:e.label},e.value))]})]})})]}),k.length>0&&O(G.USERS_MANAGE_ROLES)&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 p-3 bg-blue-50 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[k.length," user",1===k.length?"":"s"," selected"]}),s.jsxs(c,{value:I,onValueChange:P,children:[s.jsx(n,{className:"w-48",children:s.jsx(d,{placeholder:"Bulk actions"})}),s.jsxs(m,{children:[s.jsx(x,{value:"promote_moderator",children:"Promote to Moderator"}),s.jsx(x,{value:"demote_user",children:"Demote to User"}),s.jsx(x,{value:"delete",children:"Delete Users"})]})]}),s.jsx(i,{onClick:async()=>{if(0!==k.length&&I)try{switch(I){case"delete":if(!confirm(`Are you sure you want to delete ${k.length} users? This action cannot be undone.`))return;await z.bulkDeleteUsers(k),a.success(`${k.length} users deleted successfully`);break;case"promote_moderator":await z.bulkUpdateUserRoles(k,"moderator"),a.success(`${k.length} users promoted to moderator`);break;case"demote_user":await z.bulkUpdateUserRoles(k,"user"),a.success(`${k.length} users demoted to user`);break;default:return}D([]),P(""),loadUsers()}catch(e){console.error("Error performing bulk action:",e),a.error("Failed to perform bulk action")}},disabled:!I,children:"Apply"}),s.jsx(i,{variant:"outline",onClick:()=>D([]),children:"Clear Selection"})]})]})}),s.jsxs(l,{children:[s.jsx(o,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(h,{children:["Users (",R.length,")"]}),O(G.USERS_MANAGE_ROLES)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(j,{checked:k.length===R.length&&R.length>0,onCheckedChange:e=>{D(e?R.map(e=>e.id):[])}}),s.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})}),s.jsx(t,{children:C?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 animate-pulse",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},a))}):R.length>0?s.jsx("div",{className:"space-y-2",children:R.map(e=>{const l=(t=e.role,be.find(e=>e.value===t)||be[0]);var t,r;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[O(G.USERS_MANAGE_ROLES)&&s.jsx(j,{checked:k.includes(e.id),onCheckedChange:s=>{return a=e.id,void D(!!s?e=>[...e,a]:e=>e.filter(e=>e!==a));var a}}),s.jsx(u,{children:s.jsx(p,{children:e.full_name?(r=e.full_name,r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):e.email[0].toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.full_name||"Unnamed User"}),s.jsx(v,{className:l.color,children:l.label})]}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",we(new Date(e.created_at),{addSuffix:!0})]})]})]}),O(G.USERS_UPDATE)&&s.jsxs(g,{children:[s.jsx(N,{asChild:!0,children:s.jsx(i,{variant:"ghost",size:"sm",children:s.jsx(X,{className:"h-4 w-4"})})}),s.jsxs(f,{align:"end",children:[s.jsx(y,{children:"Actions"}),s.jsx(w,{}),O(G.USERS_MANAGE_ROLES)&&s.jsxs(s.Fragment,{children:[s.jsxs(b,{onClick:()=>handleUpdateUserRole(e.id,"moderator"),children:[s.jsx(Z,{className:"h-4 w-4 mr-2"}),"Promote to Moderator"]}),s.jsxs(b,{onClick:()=>handleUpdateUserRole(e.id,"user"),children:[s.jsx(ee,{className:"h-4 w-4 mr-2"}),"Demote to User"]}),s.jsx(w,{})]}),O(G.USERS_DELETE)&&s.jsxs(b,{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await z.deleteUser(e),a.success("User deleted successfully"),loadUsers()}catch(s){console.error("Error deleting user:",s),a.error("Failed to delete user")}})(e.id),className:"text-red-600",children:[s.jsx(se,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})]},e.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(J,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]})})]})]}):s.jsx(l,{className:S,children:s.jsxs(t,{className:"text-center py-8",children:[s.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to view user management."})]})})},ContentModeration=({className:r=""})=>{const[c,n]=e.useState([]),[d,m]=e.useState([]),[x,j]=e.useState({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0}),[g,N]=e.useState(!0),[f,y]=e.useState("reviews"),{hasPermission:w}=Y();e.useEffect(()=>{loadModerationData()},[]);const loadModerationData=async()=>{try{N(!0),n([]),m([]),j({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0})}catch(e){console.error("Error loading moderation data:",e),a.error("Failed to load moderation data")}finally{N(!1)}},handleReviewModeration=async(e,s)=>{try{await C.moderateReview(e,s),a.success(`Review ${s} successfully`),loadModerationData()}catch(l){console.error("Error moderating review:",l),a.error("Failed to moderate review")}},handleTemplateModeration=async(e,s)=>{try{a.success(`Template ${s} successfully`),loadModerationData()}catch(l){console.error("Error moderating template:",l),a.error("Failed to moderate template")}};if(!w(G.LAW_FIRMS_MODERATE_REVIEWS)&&!w(G.TEMPLATES_MODERATE))return s.jsx(l,{className:r,children:s.jsxs(t,{className:"text-center py-8",children:[s.jsx(ae,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to access content moderation."})]})});const b=[{title:"Pending Reviews",value:x.pendingReviews,total:x.totalReviews,description:"Reviews awaiting moderation",icon:le,color:"text-yellow-600"},{title:"Pending Templates",value:x.pendingTemplates,total:x.totalTemplates,description:"Templates awaiting approval",icon:te,color:"text-blue-600"},{title:"Total Content",value:x.totalReviews+x.totalTemplates,total:null,description:"All moderated content",icon:J,color:"text-green-600"},{title:"Moderation Queue",value:x.pendingReviews+x.pendingTemplates,total:null,description:"Items requiring attention",icon:ie,color:"text-red-600"}];return s.jsxs("div",{className:`space-y-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Content Moderation"}),s.jsx("p",{className:"text-gray-600",children:"Review and moderate user-generated content"})]}),s.jsxs(i,{variant:"outline",onClick:loadModerationData,children:[s.jsx(ie,{className:"h-4 w-4 mr-2"}),"Refresh Queue"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((e,a)=>s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.value,null!==e.total&&s.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["/ ",e.total]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(S,{value:f,onValueChange:y,children:[s.jsxs(A,{className:"grid w-full grid-cols-2",children:[s.jsxs(E,{value:"reviews",className:"flex items-center space-x-2",children:[s.jsx(le,{className:"h-4 w-4"}),s.jsxs("span",{children:["Reviews (",x.pendingReviews,")"]})]}),s.jsxs(E,{value:"templates",className:"flex items-center space-x-2",children:[s.jsx(te,{className:"h-4 w-4"}),s.jsxs("span",{children:["Templates (",x.pendingTemplates,")"]})]})]}),s.jsx(R,{value:"reviews",className:"space-y-4",children:s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Pending Reviews"}),s.jsx(T,{children:"Law firm reviews awaiting moderation approval"})]}),s.jsx(t,{children:g?s.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},a))}):c.length>0?s.jsx("div",{className:"space-y-4",children:c.map(e=>{return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(u,{children:s.jsx(p,{children:e.user?(l=e.user.full_name,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):"U"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.user?.full_name||"Anonymous"}),s.jsx(v,{variant:"secondary",children:"Pending"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"flex items-center space-x-1",children:(a=e.rating,Array.from({length:5},(e,l)=>s.jsx(me,{className:"h-4 w-4 "+(l<Math.floor(a)?"text-yellow-400 fill-current":"text-gray-300")},l)))}),s.jsx("span",{className:"text-sm text-gray-500",children:we(new Date(e.created_at),{addSuffix:!0})})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(i,{size:"sm",onClick:()=>handleReviewModeration(e.id,"approved"),children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(i,{variant:"destructive",size:"sm",onClick:()=>handleReviewModeration(e.id,"rejected"),children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:e.title}),s.jsx("p",{className:"text-gray-700",children:e.content})]})]},e.id);var a,l})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(le,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),s.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})})]})}),s.jsx(R,{value:"templates",className:"space-y-4",children:s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Pending Templates"}),s.jsx(T,{children:"Public templates awaiting approval"})]}),s.jsx(t,{children:g?s.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},a))}):d.length>0?s.jsx("div",{className:"space-y-4",children:d.map(e=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(te,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsx(v,{variant:"secondary",children:"Pending"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.category}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",we(new Date(e.created_at),{addSuffix:!0})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(i,{variant:"outline",size:"sm",children:[s.jsx(ne,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(i,{size:"sm",onClick:()=>handleTemplateModeration(e.id,"approved"),children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(i,{variant:"destructive",size:"sm",onClick:()=>handleTemplateModeration(e.id,"rejected"),children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-gray-700",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Variables:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.variables.slice(0,3).map((e,a)=>s.jsx(v,{variant:"outline",className:"text-xs",children:e},a)),e.variables.length>3&&s.jsxs(v,{variant:"outline",className:"text-xs",children:["+",e.variables.length-3," more"]})]})]})]})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(te,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending templates"}),s.jsx("p",{className:"text-gray-500",children:"All templates have been reviewed."})]})})]})})]}),s.jsxs(l,{children:[s.jsx(o,{children:s.jsxs(h,{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{children:"Moderation Guidelines"})]})}),s.jsx(t,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Review Moderation"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Check for inappropriate language or content"}),s.jsx("li",{children:"• Verify reviews are constructive and helpful"}),s.jsx("li",{children:"• Ensure reviews don't contain personal information"}),s.jsx("li",{children:"• Look for potential fake or spam reviews"}),s.jsx("li",{children:"• Approve reviews that provide genuine feedback"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Template Moderation"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("li",{children:"• Verify legal accuracy and completeness"}),s.jsx("li",{children:"• Check for proper variable placement"}),s.jsx("li",{children:"• Ensure templates follow Singapore law"}),s.jsx("li",{children:"• Review for clarity and usability"}),s.jsx("li",{children:"• Approve templates that meet quality standards"})]})]})]})})]})]})},SystemMonitoring=({className:r=""})=>{const[c,n]=e.useState({totalUsers:0,activeUsers:0,totalDocuments:0,totalTemplates:0,totalLawFirms:0,systemHealth:"healthy",uptime:"99.9%",responseTime:120}),[d,m]=e.useState({dailyActiveUsers:0,documentsProcessed:0,templatesGenerated:0,searchQueries:0,aiOperations:0}),[x,j]=e.useState([]),[u,p]=e.useState(!0),[g,N]=e.useState("overview"),{hasPermission:f}=Y();e.useEffect(()=>{loadSystemData();const e=setInterval(loadSystemData,3e4);return()=>clearInterval(e)},[]);const loadSystemData=async()=>{try{p(!0);const e=await z.getAuditLogs({date_from:new Date(Date.now()-864e5)});j(e),n({totalUsers:1250,activeUsers:89,totalDocuments:5420,totalTemplates:156,totalLawFirms:89,systemHealth:"healthy",uptime:"99.9%",responseTime:Math.floor(50*Math.random())+100}),m({dailyActiveUsers:89,documentsProcessed:234,templatesGenerated:45,searchQueries:1250,aiOperations:567})}catch(e){console.error("Error loading system data:",e),a.error("Failed to load system data")}finally{p(!1)}};if(!f(G.SYSTEM_MONITORING))return s.jsx(l,{className:r,children:s.jsxs(t,{className:"text-center py-8",children:[s.jsx(xe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500",children:"You don't have permission to view system monitoring."})]})});const y=[{title:"System Health",value:c.systemHealth,description:`${c.uptime} uptime`,icon:(e=>{switch(e){case"healthy":return re;case"warning":case"critical":return de;default:return oe}})(c.systemHealth),color:(e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(c.systemHealth),trend:null},{title:"Active Users",value:c.activeUsers,description:`${c.totalUsers} total users`,icon:J,color:"text-blue-600",trend:"+12%"},{title:"Documents",value:c.totalDocuments,description:`${d.documentsProcessed} processed today`,icon:te,color:"text-green-600",trend:"+8%"},{title:"Response Time",value:`${c.responseTime}ms`,description:"Average response time",icon:oe,color:c.responseTime>200?"text-yellow-600":"text-green-600",trend:c.responseTime>200?"+5%":"-3%"}],w=[{title:"Daily Active Users",value:d.dailyActiveUsers,icon:J,color:"text-blue-600"},{title:"Documents Processed",value:d.documentsProcessed,icon:te,color:"text-green-600"},{title:"Templates Generated",value:d.templatesGenerated,icon:he,color:"text-purple-600"},{title:"Search Queries",value:d.searchQueries,icon:je,color:"text-orange-600"},{title:"AI Operations",value:d.aiOperations,icon:oe,color:"text-red-600"}];return s.jsxs("div",{className:`space-y-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Monitoring"}),s.jsx("p",{className:"text-gray-600",children:"Monitor system health, performance, and usage metrics"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(i,{variant:"outline",onClick:loadSystemData,children:[s.jsx(B,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map((e,a)=>s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`}),e.trend&&s.jsxs("div",{className:"flex items-center mt-2 "+(e.trend.startsWith("+")?"text-green-600":"text-red-600"),children:[e.trend.startsWith("+")?s.jsx(ue,{className:"h-3 w-3 mr-1"}):s.jsx(pe,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"text-xs",children:e.trend})]})]})]})})},a))}),s.jsxs(S,{value:g,onValueChange:N,children:[s.jsxs(A,{className:"grid w-full grid-cols-3",children:[s.jsx(E,{value:"overview",children:"Overview"}),s.jsx(E,{value:"usage",children:"Usage Metrics"}),s.jsx(E,{value:"activity",children:"Recent Activity"})]}),s.jsx(R,{value:"overview",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"System Status"}),s.jsx(T,{children:"Current system health and performance"})]}),s.jsxs(t,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Database"}),s.jsx(v,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"API Server"}),s.jsx(v,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"File Storage"}),s.jsx(v,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"AI Services"}),s.jsx(v,{className:"bg-yellow-100 text-yellow-800",children:"Warning"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Email Service"}),s.jsx(v,{className:"bg-green-100 text-green-800",children:"Healthy"})]})]})]}),s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Resource Usage"}),s.jsx(T,{children:"Current system resource utilization"})]}),s.jsxs(t,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"CPU Usage"}),s.jsx("span",{children:"45%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Memory Usage"}),s.jsx("span",{children:"67%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"67%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Storage Usage"}),s.jsx("span",{children:"23%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"23%"}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Network I/O"}),s.jsx("span",{children:"12%"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"12%"}})})]})]})]})]})}),s.jsxs(R,{value:"usage",className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6",children:w.map((e,a)=>s.jsx(l,{children:s.jsxs(t,{className:"p-6 text-center",children:[s.jsx(e.icon,{className:`h-8 w-8 ${e.color} mx-auto mb-2`}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-sm text-gray-600",children:e.title})]})},a))}),s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Usage Trends (Last 7 Days)"}),s.jsx(T,{children:"Daily usage patterns and trends"})]}),s.jsx(t,{children:s.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ve,{className:"h-12 w-12 mx-auto mb-2"}),s.jsx("p",{children:"Usage charts would be displayed here"}),s.jsx("p",{className:"text-sm",children:"Integration with charting library needed"})]})})})]})]}),s.jsx(R,{value:"activity",className:"space-y-6",children:s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Recent System Activity"}),s.jsx(T,{children:"Latest admin actions and system events"})]}),s.jsx(t,{children:u?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]})},a))}):x.length>0?s.jsx("div",{className:"space-y-3",children:x.map(e=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(oe,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:e.user?.full_name||"System"}),s.jsx("span",{className:"text-gray-600",children:e.action.replace(/_/g," ")}),s.jsx(v,{variant:"outline",className:"text-xs",children:e.resource_type})]}),s.jsx("p",{className:"text-sm text-gray-500",children:we(new Date(e.created_at),{addSuffix:!0})})]})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ie,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recent activity"}),s.jsx("p",{className:"text-gray-500",children:"System activity will appear here as it occurs."})]})})]})})]})]})},AdminLawFirmManager=({className:r=""})=>{const[c,n]=e.useState([]),[d,m]=e.useState([]),[x,o]=e.useState(!0),[h,j]=e.useState("firms");e.useEffect(()=>{loadData()},[]);const loadData=async()=>{try{o(!0);const e=await C.getLawFirms();n(e)}catch(e){console.error("Error loading admin data:",e),a.error("Failed to load data")}finally{o(!1)}},handleVerifyFirm=async(e,s)=>{try{await C.verifyLawFirm(e,s),a.success(`Law firm ${s?"verified":"unverified"} successfully`),loadData()}catch(l){console.error("Error verifying firm:",l),a.error("Failed to update verification status")}},handleModerateReview=async(e,s)=>{try{await C.moderateReview(e,s),a.success(`Review ${s} successfully`),loadData()}catch(l){console.error("Error moderating review:",l),a.error("Failed to moderate review")}},renderStars=e=>Array.from({length:5},(a,l)=>s.jsx(me,{className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")},l)),u=[{title:"Total Law Firms",value:c.length,description:"All registered firms",icon:J,color:"text-blue-600"},{title:"Verified Firms",value:c.filter(e=>e.verified).length,description:"Approved and verified",icon:re,color:"text-green-600"},{title:"Pending Verification",value:c.filter(e=>!e.verified).length,description:"Awaiting approval",icon:ie,color:"text-yellow-600"},{title:"Pending Reviews",value:d.length,description:"Awaiting moderation",icon:le,color:"text-purple-600"}];return s.jsxs("div",{className:`space-y-6 ${r}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Law Firm Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage law firm listings, verifications, and reviews"})]}),s.jsxs(i,{children:[s.jsx(ge,{className:"h-4 w-4 mr-2"}),"Add Law Firm"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((e,a)=>s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(S,{value:h,onValueChange:j,children:[s.jsxs(A,{className:"grid w-full grid-cols-2",children:[s.jsxs(E,{value:"firms",children:["Law Firms (",c.length,")"]}),s.jsxs(E,{value:"reviews",children:["Pending Reviews (",d.length,")"]})]}),s.jsx(R,{value:"firms",className:"space-y-4",children:x?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsx(l,{className:"animate-pulse",children:s.jsx(t,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},a))}):s.jsx("div",{className:"space-y-4",children:c.map(e=>s.jsx(l,{children:s.jsx(t,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(J,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),s.jsx(v,{variant:e.verified?"default":"secondary",children:e.verified?"Verified":"Pending"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsx("span",{children:e.address}),s.jsx("span",{children:e.phone}),s.jsxs("div",{className:"flex items-center space-x-1",children:[renderStars(e.rating),s.jsx("span",{children:e.rating.toFixed(1)})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(i,{variant:"outline",size:"sm",children:s.jsx(ne,{className:"h-4 w-4"})}),e.verified?s.jsxs(i,{variant:"outline",size:"sm",onClick:()=>handleVerifyFirm(e.id,!1),children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"Unverify"]}):s.jsxs(i,{size:"sm",onClick:()=>handleVerifyFirm(e.id,!0),children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"Verify"]}),s.jsx(i,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this law firm? This action cannot be undone."))try{await C.deleteLawFirm(e),a.success("Law firm deleted successfully"),loadData()}catch(s){console.error("Error deleting firm:",s),a.error("Failed to delete law firm")}})(e.id),children:s.jsx(se,{className:"h-4 w-4"})})]})]})})},e.id))})}),s.jsx(R,{value:"reviews",className:"space-y-4",children:0===d.length?s.jsx(l,{children:s.jsxs(t,{className:"text-center py-8",children:[s.jsx(le,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending reviews"}),s.jsx("p",{className:"text-gray-500",children:"All reviews have been moderated."})]})}):s.jsx("div",{className:"space-y-4",children:d.map(e=>s.jsx(l,{children:s.jsx(t,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:"flex items-center space-x-1",children:renderStars(e.rating)}),s.jsxs("span",{className:"text-sm text-gray-500",children:["by ",e.user?.full_name||"Anonymous"]})]})]}),s.jsx(v,{variant:"secondary",children:"Pending"})]}),s.jsx("p",{className:"text-gray-700",children:e.content}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(i,{size:"sm",onClick:()=>handleModerateReview(e.id,"approved"),children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(i,{variant:"destructive",size:"sm",onClick:()=>handleModerateReview(e.id,"rejected"),children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})})},e.id))})})]})]})},TemplateManagement=()=>{const[o,h]=e.useState([]),[j,u]=e.useState([]),[p,g]=e.useState(!0),[N,f]=e.useState(""),[y,w]=e.useState(""),[b,S]=e.useState(""),[A,E]=e.useState(!1),R=Array.isArray(j)?j:[];e.useEffect(()=>{loadData()},[]);const loadData=async()=>{try{g(!0);const[e,s]=await Promise.all([M.searchTemplates({limit:100,sortBy:"newest"}),M.getCategories()]);h(e.templates),u(s)}catch(e){console.error("Failed to load data:",e),a.error("Failed to load template data")}finally{g(!1)}},T=o.filter(e=>{const s=!N||e.title.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase()),a=!y||e.categoryId===y,l=!b||"active"===b&&e.isActive||"inactive"===b&&!e.isActive||"featured"===b&&e.isFeatured;return s&&a&&l}),getStatusBadge=e=>e.isActive?e.isFeatured?s.jsxs(v,{variant:"default",children:[s.jsx(me,{className:"h-3 w-3 mr-1"}),"Featured"]}):s.jsxs(v,{variant:"secondary",children:[s.jsx(re,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(v,{variant:"destructive",children:[s.jsx(ce,{className:"h-3 w-3 mr-1"}),"Inactive"]});return p?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(_,{className:"h-8 w-48"}),s.jsx(_,{className:"h-10 w-32"})]}),s.jsx("div",{className:"grid gap-4",children:Array.from({length:5}).map((e,a)=>s.jsx(_,{className:"h-24 w-full"},a))})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Template Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage legal document templates and categories"})]}),s.jsxs(U,{open:A,onOpenChange:E,children:[s.jsx(F,{asChild:!0,children:s.jsxs(i,{children:[s.jsx(ge,{className:"h-4 w-4 mr-2"}),"Create Template"]})}),s.jsxs(L,{className:"max-w-2xl",children:[s.jsxs(k,{children:[s.jsx(D,{children:"Create New Template"}),s.jsx(I,{children:"Create a new legal document template for the marketplace."})]}),s.jsxs(P,{children:[s.jsx(Ne,{className:"h-4 w-4"}),s.jsx(O,{children:"Template creation interface would be implemented here with form fields for title, description, content, fields, etc."})]})]})]})]}),s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(r,{placeholder:"Search templates...",value:N,onChange:e=>f(e.target.value),className:"pl-10"})]})}),s.jsxs(c,{value:y,onValueChange:w,children:[s.jsx(n,{className:"w-full lg:w-48",children:s.jsx(d,{placeholder:"All Categories"})}),s.jsxs(m,{children:[s.jsx(x,{value:"",children:"All Categories"}),R.map(e=>e&&e.id&&e.name?s.jsx(x,{value:e.id,children:e.name},e.id):null)]})]}),s.jsxs(c,{value:b,onValueChange:S,children:[s.jsx(n,{className:"w-full lg:w-32",children:s.jsx(d,{placeholder:"All Status"})}),s.jsxs(m,{children:[s.jsx(x,{value:"",children:"All Status"}),s.jsx(x,{value:"active",children:"Active"}),s.jsx(x,{value:"inactive",children:"Inactive"}),s.jsx(x,{value:"featured",children:"Featured"})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:0===T.length?s.jsx(l,{children:s.jsxs(t,{className:"text-center py-12",children:[s.jsx(te,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No templates found"}),s.jsx("p",{className:"text-gray-600",children:N||y||b?"Try adjusting your filters to see more templates.":"Get started by creating your first template."})]})}):T.map(e=>{return s.jsx(l,{className:"hover:shadow-md transition-shadow",children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),getStatusBadge(e),(r=e.accessLevel,s.jsx(v,{variant:{public:"outline",premium:"secondary",enterprise:"default"}[r]||"outline",children:r.charAt(0).toUpperCase()+r.slice(1)}))]}),s.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(q,{className:"h-4 w-4"}),e.downloadCount.toLocaleString()," downloads"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(me,{className:"h-4 w-4"}),e.ratingAverage.toFixed(1)," (",e.ratingCount," reviews)"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ie,{className:"h-4 w-4"}),new Date(e.createdAt).toLocaleDateString()]}),e.priceSgd>0&&s.jsxs("div",{className:"font-medium text-green-600",children:["S$",e.priceSgd.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsxs(i,{variant:"outline",size:"sm",children:[s.jsx(ne,{className:"h-4 w-4 mr-1"}),"Preview"]}),s.jsxs(i,{variant:"outline",size:"sm",children:[s.jsx(fe,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.jsxs(i,{variant:"outline",size:"sm",onClick:()=>(async(e,s)=>{try{a.success(`Template ${s?"unfeatured":"featured"} successfully`),loadData()}catch(l){a.error("Failed to update template featured status")}})(e.id,e.isFeatured),children:[s.jsx(me,{className:"h-4 w-4 mr-1 "+(e.isFeatured?"fill-current":"")}),e.isFeatured?"Unfeature":"Feature"]}),s.jsx(i,{variant:e.isActive?"destructive":"default",size:"sm",onClick:()=>(async(e,s)=>{try{a.success(`Template ${s?"deactivated":"activated"} successfully`),loadData()}catch(l){a.error("Failed to update template status")}})(e.id,e.isActive),children:e.isActive?s.jsxs(s.Fragment,{children:[s.jsx(ce,{className:"h-4 w-4 mr-1"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"Activate"]})})]})]})})},e.id);var r})}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(l,{children:s.jsxs(t,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Templates"})]})}),s.jsx(l,{children:s.jsxs(t,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.filter(e=>e.isActive).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Templates"})]})}),s.jsx(l,{children:s.jsxs(t,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.filter(e=>e.isFeatured).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Featured Templates"})]})}),s.jsx(l,{children:s.jsxs(t,{className:"p-4",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.reduce((e,s)=>e+s.downloadCount,0).toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Downloads"})]})})]})]})},Admin=()=>{const[a,r]=e.useState("overview"),{hasPermission:c}=Y(),{canAccessAdmin:n}=W(),{profile:d}=$();if(!n())return s.jsx(V,{children:s.jsx(l,{children:s.jsxs(t,{className:"text-center py-12",children:[s.jsx(Q,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the admin dashboard."}),s.jsx(i,{onClick:()=>window.history.back(),children:"Go Back"})]})})});const m=[{title:"Total Users",value:"1,250",description:"+12% from last month",icon:J,color:"text-blue-600",permission:G.USERS_READ},{title:"Pending Reviews",value:"23",description:"Awaiting moderation",icon:le,color:"text-yellow-600",permission:G.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Health",value:"99.9%",description:"Uptime this month",icon:oe,color:"text-green-600",permission:G.SYSTEM_MONITORING},{title:"Active Sessions",value:"89",description:"Currently online",icon:je,color:"text-purple-600",permission:G.SYSTEM_ANALYTICS}],x=[{title:"Manage Users",description:"Add, edit, or remove user accounts",icon:J,action:()=>r("users"),permission:G.USERS_READ},{title:"Content Moderation",description:"Review and moderate user content",icon:ae,action:()=>r("moderation"),permission:G.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Monitoring",description:"Monitor system health and performance",icon:oe,action:()=>r("monitoring"),permission:G.SYSTEM_MONITORING},{title:"Law Firm Management",description:"Manage law firm listings and verifications",icon:he,action:()=>r("lawfirms"),permission:G.LAW_FIRMS_VERIFY},{title:"Template Management",description:"Manage legal document templates",icon:te,action:()=>r("templates"),permission:G.TEMPLATES_MANAGE},{title:"Analytics Dashboard",description:"View template marketplace analytics",icon:je,action:()=>r("analytics"),permission:G.SYSTEM_ANALYTICS}],j=[{id:"overview",label:"Overview",icon:je,permission:null},{id:"users",label:"Users",icon:J,permission:G.USERS_READ},{id:"moderation",label:"Moderation",icon:ae,permission:G.LAW_FIRMS_MODERATE_REVIEWS},{id:"lawfirms",label:"Law Firms",icon:he,permission:G.LAW_FIRMS_VERIFY},{id:"templates",label:"Templates",icon:te,permission:G.TEMPLATES_MANAGE},{id:"analytics",label:"Analytics",icon:je,permission:G.SYSTEM_ANALYTICS},{id:"monitoring",label:"Monitoring",icon:oe,permission:G.SYSTEM_MONITORING}].filter(e=>!e.permission||c(e.permission));return s.jsx(V,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",d?.full_name||d?.email]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(i,{variant:"outline",children:[s.jsx(ye,{className:"h-4 w-4 mr-2"}),"Settings"]})})]}),s.jsxs(S,{value:a,onValueChange:r,children:[s.jsx(A,{className:`grid w-full grid-cols-${j.length}`,children:j.map(e=>s.jsxs(E,{value:e.id,className:"flex items-center space-x-2",children:[s.jsx(e.icon,{className:"h-4 w-4"}),s.jsx("span",{children:e.label})]},e.id))}),s.jsxs(R,{value:"overview",className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.filter(e=>!e.permission||c(e.permission)).map((e,a)=>s.jsx(l,{children:s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),s.jsx(e.icon,{className:`h-8 w-8 ${e.color}`})]})})},a))}),s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsx(h,{children:"Quick Actions"}),s.jsx(T,{children:"Common administrative tasks and shortcuts"})]}),s.jsx(t,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.filter(e=>!e.permission||c(e.permission)).map((e,a)=>s.jsxs(i,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:e.action,children:[s.jsx(e.icon,{className:"h-6 w-6"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium",children:e.title}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description})]})]},a))})})]}),s.jsxs(l,{children:[s.jsxs(o,{children:[s.jsxs(h,{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{children:"System Alerts"})]}),s.jsx(T,{children:"Important notifications and system status updates"})]}),s.jsx(t,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx(de,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"AI Service Performance"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Response times are slightly elevated. Monitoring the situation."})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx(te,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-800",children:"Content Moderation Queue"}),s.jsx("p",{className:"text-sm text-blue-700",children:"23 items pending review in the moderation queue."})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(oe,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800",children:"System Update Complete"}),s.jsx("p",{className:"text-sm text-green-700",children:"Successfully deployed security updates with zero downtime."})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(l,{children:[s.jsx(o,{children:s.jsx(h,{children:"Recent User Activity"})}),s.jsx(t,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"New user registrations"}),s.jsx("span",{className:"font-medium",children:"+15 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Documents uploaded"}),s.jsx("span",{className:"font-medium",children:"234 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Templates generated"}),s.jsx("span",{className:"font-medium",children:"45 today"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"AI chat sessions"}),s.jsx("span",{className:"font-medium",children:"89 today"})]})]})})]}),s.jsxs(l,{children:[s.jsx(o,{children:s.jsx(h,{children:"System Performance"})}),s.jsx(t,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Average response time"}),s.jsx("span",{className:"font-medium text-green-600",children:"120ms"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Error rate"}),s.jsx("span",{className:"font-medium text-green-600",children:"0.02%"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"CPU usage"}),s.jsx("span",{className:"font-medium text-yellow-600",children:"45%"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Memory usage"}),s.jsx("span",{className:"font-medium text-yellow-600",children:"67%"})]})]})})]})]})]}),c(G.USERS_READ)&&s.jsx(R,{value:"users",children:s.jsx(UserManagement,{})}),c(G.LAW_FIRMS_MODERATE_REVIEWS)&&s.jsx(R,{value:"moderation",children:s.jsx(ContentModeration,{})}),c(G.LAW_FIRMS_VERIFY)&&s.jsx(R,{value:"lawfirms",children:s.jsx(AdminLawFirmManager,{})}),c(G.TEMPLATES_MANAGE)&&s.jsx(R,{value:"templates",children:s.jsx(TemplateManagement,{})}),c(G.SYSTEM_ANALYTICS)&&s.jsx(R,{value:"analytics",children:s.jsx(H,{})}),c(G.SYSTEM_MONITORING)&&s.jsx(R,{value:"monitoring",children:s.jsx(SystemMonitoring,{})})]})]})})};export{Admin as default};
