import{r as n,j as e,am as re,a1 as ne,m as U,F as E,az as ce,aY as ie,aR as K,bL as W,w as le,b0 as de,aM as oe,bN as me,aK as Y,q as xe,cq as G,s as he,bG as ue,v as pe}from"./react-vendor-CQwTX5cM.js";import{B as d,C as h,o as u,I as D,A as Z,E as X,G as ee,H as se,K as F,u as k,v as R,z as $,h as z,a0 as je,S as ge,L as fe,M as Ne,aa as we,q as ve,r as ye,s as H,t as J}from"./ai-services-C7wGs9RJ.js";import{t as be,T as Ce}from"./TemplateGenerator-qnoc6Sk1.js";import{J as I}from"./vendor-CdHE2p_m.js";import{f as ae}from"./utilities-1ndx239g.js";import"./supabase-DtnFeX9z.js";import"./ui-components-BA32w1ww.js";import"./data-fetching-C9PAuT9r.js";import"./ocr-worker-C-xttgCS.js";import"./pdf-worker-CQFXObSw.js";import"./forms-DACbGb-3.js";const te=[{value:"",label:"All Categories"},{value:"contracts",label:"Contracts & Agreements"},{value:"employment",label:"Employment Law"},{value:"corporate",label:"Corporate Documents"},{value:"real-estate",label:"Real Estate"},{value:"intellectual-property",label:"Intellectual Property"},{value:"litigation",label:"Litigation & Court"},{value:"compliance",label:"Compliance & Regulatory"},{value:"personal",label:"Personal Legal"},{value:"other",label:"Other"}],Te=({onTemplateSelect:o,onTemplatePreview:c,className:g=""})=>{const[f,T]=n.useState([]),[j,m]=n.useState([]),[N,x]=n.useState(!0),[w,l]=n.useState(""),[i,A]=n.useState(""),[v,p]=n.useState("grid"),[V,q]=n.useState("newest");n.useEffect(()=>{S()},[]),n.useEffect(()=>{M()},[f,w,i,V]);const S=async()=>{try{x(!0);const s=await be.getPublicTemplates();T(s)}catch(s){console.error("Error loading templates:",s),I.error("Failed to load templates")}finally{x(!1)}},M=()=>{let s=[...f];if(w.trim()){const r=w.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.category.toLowerCase().includes(r))}i&&(s=s.filter(r=>r.category===i)),s.sort((r,a)=>{switch(V){case"newest":return new Date(a.created_at).getTime()-new Date(r.created_at).getTime();case"oldest":return new Date(r.created_at).getTime()-new Date(a.created_at).getTime();case"name":return r.name.localeCompare(a.name);default:return 0}}),m(s)},y=(s,r)=>{switch(r){case"select":o==null||o(s);break;case"preview":c==null||c(s);break;case"copy":navigator.clipboard.writeText(s.content),I.success("Template content copied to clipboard");break}},P=s=>{const r=te.find(a=>a.value===s);return(r==null?void 0:r.label)||s},O=({template:s})=>e.jsxs(h,{className:"h-full hover:shadow-md transition-shadow",children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(R,{className:"text-lg font-semibold truncate",children:s.name}),e.jsx($,{className:"mt-1 line-clamp-2",children:s.description})]}),e.jsx(z,{variant:"secondary",className:"ml-2 flex-shrink-0",children:P(s.category)})]})}),e.jsx(u,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[s.content.substring(0,150),"..."]})}),s.variables&&s.variables.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Variables:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.variables.slice(0,3).map((r,a)=>e.jsx(z,{variant:"outline",className:"text-xs",children:r},a)),s.variables.length>3&&e.jsxs(z,{variant:"outline",className:"text-xs",children:["+",s.variables.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ce,{className:"h-3 w-3"}),e.jsx("span",{children:ae(new Date(s.created_at),{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsx("span",{children:"Public"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>y(s,"preview"),children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),"Preview"]}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>y(s,"copy"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsxs(d,{size:"sm",onClick:()=>y(s,"select"),children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Use"]})]})]})})]}),b=({template:s})=>e.jsx(h,{className:"hover:shadow-sm transition-shadow",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.description})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(z,{variant:"secondary",className:"text-xs",children:P(s.category)}),e.jsx("span",{className:"text-xs text-gray-500",children:ae(new Date(s.created_at),{addSuffix:!0})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>y(s,"preview"),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>y(s,"copy"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",onClick:()=>y(s,"select"),children:"Use"})]})]})]})})});return e.jsxs("div",{className:`space-y-6 ${g}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Legal Templates"}),e.jsx("p",{className:"text-gray-600",children:"Browse and customize professional legal document templates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:v==="grid"?"default":"outline",size:"sm",onClick:()=>p("grid"),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(d,{variant:v==="list"?"default":"outline",size:"sm",onClick:()=>p("list"),children:e.jsx(ne,{className:"h-4 w-4"})})]})]}),e.jsx(h,{children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(D,{placeholder:"Search templates...",value:w,onChange:s=>l(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs(Z,{value:i,onValueChange:A,children:[e.jsx(X,{children:e.jsx(ee,{placeholder:"Category"})}),e.jsx(se,{children:te.map(s=>e.jsx(F,{value:s.value,children:s.label},s.value))})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(Z,{value:V,onValueChange:s=>q(s),children:[e.jsx(X,{children:e.jsx(ee,{placeholder:"Sort by"})}),e.jsxs(se,{children:[e.jsx(F,{value:"newest",children:"Newest First"}),e.jsx(F,{value:"oldest",children:"Oldest First"}),e.jsx(F,{value:"name",children:"Name A-Z"})]})]})})]})})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:N?"Loading...":`${j.length} template${j.length===1?"":"s"} found`})}),N?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,r)=>e.jsxs(h,{className:"animate-pulse",children:[e.jsxs(k,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},r))}):j.length>0?v==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>e.jsx(O,{template:s},s.id))}):e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsx(b,{template:s},s.id))}):e.jsx(h,{children:e.jsxs(u,{className:"text-center py-8",children:[e.jsx(E,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or browse different categories."})]})})]})]})},Se=({template:o,onSave:c,onDownload:g,className:f=""})=>{const[T,j]=n.useState(o.content),[m,N]=n.useState({}),[x,w]=n.useState([]),[l,i]=n.useState(!1);n.useState(!1),n.useEffect(()=>{A()},[o]),n.useEffect(()=>{q()},[m,o.content]);const A=()=>{const a=/\{\{([^}]+)\}\}/g,t=o.content.match(a)||[],C=[...new Set(t.map(_=>_.replace(/[{}]/g,"")))].map(_=>{const B=_.trim();return{name:B,value:"",required:!0,type:v(B),placeholder:p(B),description:V(B)}});w(C);const Q={};C.forEach(_=>{Q[_.name]=""}),N(Q)},v=a=>{const t=a.toLowerCase();return t.includes("date")||t.includes("time")?"date":t.includes("email")||t.includes("mail")?"email":t.includes("amount")||t.includes("price")||t.includes("cost")?"number":"text"},p=a=>{const t=a.toLowerCase();return t.includes("name")?"Enter full name":t.includes("company")?"Enter company name":t.includes("address")?"Enter address":t.includes("date")?"Select date":t.includes("email")?"Enter email address":t.includes("phone")?"Enter phone number":t.includes("amount")||t.includes("price")?"Enter amount":`Enter ${a.replace(/_/g," ").toLowerCase()}`},V=a=>{const t=a.toLowerCase();return t.includes("party1")||t.includes("first_party")?"First party to the agreement":t.includes("party2")||t.includes("second_party")?"Second party to the agreement":t.includes("effective_date")?"Date when the agreement becomes effective":t.includes("termination_date")?"Date when the agreement terminates":t.includes("governing_law")?"Jurisdiction governing this agreement":`Value for ${a.replace(/_/g," ").toLowerCase()}`},q=()=>{let a=o.content;x.forEach(t=>{const L=`{{${t.name}}}`,C=m[t.name]||`[${t.name.toUpperCase()}]`;a=a.replace(new RegExp(L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),C)}),j(a)},S=(a,t)=>{N(L=>({...L,[a]:t}))},M=()=>{c==null||c(T,m),I.success("Template customization saved")},y=()=>{const a=`${o.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_customized.docx`;g==null||g(T,a),I.success("Template downloaded")},P=()=>{const a={};x.forEach(t=>{a[t.name]=""}),N(a),I.success("Variables reset")},O=()=>{const a=x.length,t=x.filter(L=>{var C;return(C=m[L.name])==null?void 0:C.trim()}).length;return{total:a,completed:t}},{total:b,completed:s}=O(),r=b>0?Math.round(s/b*100):100;return e.jsxs("div",{className:`space-y-6 ${f}`,children:[e.jsx(h,{children:e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:"Customize Template"})]}),e.jsxs($,{children:[o.name," - Fill in the variables to customize your document"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(z,{variant:r===100?"default":"secondary",children:[s,"/",b," completed"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>i(!l),children:[l?e.jsx(de,{className:"h-4 w-4"}):e.jsx(K,{className:"h-4 w-4"}),l?"Hide":"Show"," Preview"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(k,{children:[e.jsx(R,{className:"text-lg",children:"Template Variables"}),e.jsx($,{children:"Fill in the required information to customize your document"})]}),e.jsx(u,{className:"space-y-4",children:x.length>0?e.jsxs(e.Fragment,{children:[x.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(je,{htmlFor:a.name,className:"flex items-center space-x-2",children:[e.jsx("span",{children:a.name.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}),a.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),a.type==="date"?e.jsx(D,{id:a.name,type:"date",value:m[a.name]||"",onChange:t=>S(a.name,t.target.value),className:"w-full"}):a.type==="email"?e.jsx(D,{id:a.name,type:"email",placeholder:a.placeholder,value:m[a.name]||"",onChange:t=>S(a.name,t.target.value),className:"w-full"}):a.type==="number"?e.jsx(D,{id:a.name,type:"number",placeholder:a.placeholder,value:m[a.name]||"",onChange:t=>S(a.name,t.target.value),className:"w-full"}):e.jsx(D,{id:a.name,type:"text",placeholder:a.placeholder,value:m[a.name]||"",onChange:t=>S(a.name,t.target.value),className:"w-full"}),a.description&&e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]},a.name)),e.jsx(ge,{}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{variant:"outline",onClick:P,className:"flex-1",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Reset"]}),e.jsxs(d,{onClick:M,disabled:s===0,className:"flex-1",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsxs(d,{onClick:y,disabled:s===0,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}):e.jsxs(fe,{children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx(Ne,{children:"No variables found in this template. You can download it as-is or modify the content directly."})]})})]}),l&&e.jsxs(h,{children:[e.jsxs(k,{children:[e.jsx(R,{className:"text-lg",children:"Document Preview"}),e.jsx($,{children:"Live preview of your customized document"})]}),e.jsx(u,{children:e.jsx("div",{className:"max-h-96 overflow-y-auto p-4 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono",children:T})})})})]})]}),x.length>0&&e.jsx(h,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r===100?e.jsx(xe,{className:"h-5 w-5 text-green-500"}):e.jsx(Y,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:r===100?"All variables completed - ready to download!":`${b-s} variable${b-s===1?"":"s"} remaining`})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r,"% complete"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]})})]})},Pe=()=>{const[o,c]=n.useState("browse"),[g,f]=n.useState(null),[T,j]=n.useState(null),m=l=>{f(l),c("customize")},N=l=>{j(l);const i={id:"generated-"+Date.now(),name:l.name,description:l.description,category:l.category,content:l.content,variables:l.variables,is_public:!1,created_by:"current-user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};f(i),c("customize")},x=[{title:"Available Templates",value:"150+",description:"Professional legal templates",icon:E,color:"text-blue-600"},{title:"AI Generated",value:"50+",description:"Custom AI-created templates",icon:G,color:"text-purple-600"},{title:"Most Popular",value:"Service Agreement",description:"This month's top template",icon:ue,color:"text-green-600"},{title:"Recently Added",value:"12",description:"New templates this week",icon:pe,color:"text-orange-600"}],w=[{name:"Contracts & Agreements",count:45,description:"Service agreements, NDAs, and general contracts",popular:!0},{name:"Employment Law",count:28,description:"Employment contracts and HR documents",popular:!0},{name:"Corporate Documents",count:32,description:"Partnership agreements and corporate filings",popular:!1},{name:"Real Estate",count:18,description:"Lease agreements and property documents",popular:!1},{name:"Compliance & Regulatory",count:15,description:"Privacy policies and terms of service",popular:!0},{name:"Personal Legal",count:12,description:"Wills, powers of attorney, and personal documents",popular:!1}];return e.jsx(we,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Legal Templates"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Browse, customize, and generate professional legal document templates"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>c("generate"),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Generate with AI"]}),e.jsxs(d,{onClick:()=>c("browse"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Browse Templates"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map((l,i)=>e.jsx(h,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:l.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.value}),e.jsx("p",{className:"text-xs text-gray-500",children:l.description})]}),e.jsx(l.icon,{className:`h-8 w-8 ${l.color}`})]})})},i))}),e.jsxs(ve,{value:o,onValueChange:c,children:[e.jsxs(ye,{className:"grid w-full grid-cols-3",children:[e.jsxs(H,{value:"browse",className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Browse Templates"})]}),e.jsxs(H,{value:"generate",className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"AI Generator"})]}),e.jsxs(H,{value:"customize",className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Customize"})]})]}),e.jsxs(J,{value:"browse",className:"space-y-6",children:[e.jsxs(h,{children:[e.jsxs(k,{children:[e.jsx(R,{className:"text-lg",children:"Template Categories"}),e.jsx($,{children:"Explore templates by category"})]}),e.jsx(u,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map((l,i)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:l.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{variant:"secondary",children:l.count}),l.popular&&e.jsx(he,{className:"h-4 w-4 text-yellow-500"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.description})]},i))})})]}),e.jsx(Te,{onTemplateSelect:m,onTemplatePreview:l=>{f(l),c("customize")}})]}),e.jsx(J,{value:"generate",className:"space-y-6",children:e.jsx(Ce,{onTemplateGenerated:N})}),e.jsx(J,{value:"customize",className:"space-y-6",children:g?e.jsx(Se,{template:g,onSave:(l,i)=>{console.log("Template customized:",{content:l,variables:i})},onDownload:(l,i)=>{const A=new Blob([l],{type:"text/plain"}),v=URL.createObjectURL(A),p=document.createElement("a");p.href=v,p.download=i,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(v)}}):e.jsx(h,{children:e.jsxs(u,{className:"text-center py-12",children:[e.jsx(E,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Template Selected"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Choose a template from the browser or generate a new one with AI to start customizing."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(d,{variant:"outline",onClick:()=>c("browse"),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Browse Templates"]}),e.jsxs(d,{onClick:()=>c("generate"),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Generate with AI"]})]})]})})})]})]})})};export{Pe as default};
