import{a as e,R as t}from"./react-vendor-92YuBQvb-1751326256027.js";import{c as a,a6 as r,aG as n,aH as l,aI as s,aK as c,aL as o,z as i,a0 as m,a1 as p,ab as u,A as d,aN as g,ad as y,ae as h,af as E,ag as v,ai as f,I as b,H as w,aO as x,B as N,ap as T,V as A,aF as S,Z as k,a5 as F,am as C,as as P,an as $,b9 as j,aP as q,a8 as _}from"./index-Fb_ssaOc-1751326256027.js";import{chatWithAI as R}from"./openai-C-whISGC-1751326256027.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=a("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),L={async getPublicTemplates(){const{data:e,error:t}=await r.from("templates").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(t)throw t;return e},async getUserTemplates(){const{data:e,error:t}=await r.from("templates").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async getTemplatesByCategory(e){const{data:t,error:a}=await r.from("templates").select("*").eq("category",e).eq("is_public",!0).order("created_at",{ascending:!1});if(a)throw a;return t},async getTemplate(e){const{data:t,error:a}=await r.from("templates").select("*").eq("id",e).single();if(a)throw a;return t},async createTemplate(e){const t=await r.auth.getUser();if(!t.data.user)throw new Error("User not authenticated");const{data:a,error:n}=await r.from("templates").insert({...e,created_by:t.data.user.id}).select().single();if(n)throw n;return a},async updateTemplate(e,t){const{data:a,error:n}=await r.from("templates").update(t).eq("id",e).select().single();if(n)throw n;return a},async deleteTemplate(e){const{error:t}=await r.from("templates").delete().eq("id",e);if(t)throw t},async searchTemplates(e){const{data:t,error:a}=await r.from("templates").select("*").or(`name.ilike.%${e}%,description.ilike.%${e}%,category.ilike.%${e}%`).eq("is_public",!0).order("created_at",{ascending:!1});if(a)throw a;return t},exportTemplate(e,t="txt"){let a,r;switch(t){case"json":a=JSON.stringify(e,null,2),r="application/json";break;case"docx":a=e.content,r="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;default:a=e.content,r="text/plain"}return new Blob([a],{type:r})},downloadTemplate(e,t="txt"){const a=this.exportTemplate(e,t),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.${t}`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},async createTemplateVersion(e,t,a){const r=await this.getTemplate(e),n={name:`${r.name} v${Date.now()}`,description:t.description||r.description,category:t.category||r.category,content:t.content||r.content,variables:t.variables||r.variables,is_public:t.is_public??r.is_public};return this.createTemplate(n)}};async function generateTemplate(e){const t=function buildTemplatePrompt(e){const{type:t,parties:a,terms:r,customRequirements:n,language:l="english",jurisdiction:s="singapore"}=e;let c=`Generate a professional legal ${t} template for ${"singapore"===s?"Singapore":"international"} use. `;c+="simplified"===l?"Use clear, simple language that non-lawyers can understand. ":"Use standard legal terminology and formal language. ";c+="\n\nTemplate Requirements:\n",c+=`- Document Type: ${t}\n`,(a.party1||a.party2)&&(c+="- Parties:\n",a.party1&&(c+=`  - First Party: Use variable {{party1_name}} for ${a.party1}\n`),a.party2&&(c+=`  - Second Party: Use variable {{party2_name}} for ${a.party2}\n`));Object.keys(r).length>0&&(c+="- Key Terms:\n",Object.entries(r).forEach(([e,t])=>{t&&(c+=`  - ${e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}: Use variable {{${e}}} for ${t}\n`)}));n&&(c+=`- Additional Requirements: ${n}\n`);return c+="\nInstructions:\n",c+="1. Create a complete, legally sound template\n",c+="2. Use variables in double curly braces {{variable_name}} for customizable fields\n",c+="3. Include all necessary legal clauses and provisions\n",c+="4. Ensure compliance with Singapore law (if applicable)\n",c+="5. Add appropriate signature blocks and date fields\n",c+="6. Include clear section headings and numbering\n\n",c+="Format your response as JSON with the following structure:\n",c+="{\n",c+='  "name": "Template name",\n',c+='  "description": "Brief description of the template",\n',c+='  "category": "Template category (contracts, employment, corporate, etc.)",\n',c+='  "content": "Full template content with variables",\n',c+='  "variables": ["list", "of", "variable", "names"]\n',c+="}\n\n",c+="Respond with valid JSON only, no additional text.",c}(e);try{const a=await R(t,[],[]),r=function parseTemplateResponse(e,t){try{const a=JSON.parse(e);return{name:a.name||`${t.type} Template`,content:a.content||e,variables:a.variables||extractVariablesFromContent(a.content||e),category:a.category||categorizeTemplate(t.type),description:a.description||`AI-generated ${t.type} template`}}catch(a){return console.warn("Failed to parse JSON response, using raw content"),{name:`${t.type} Template`,content:e,variables:extractVariablesFromContent(e),category:categorizeTemplate(t.type),description:`AI-generated ${t.type} template`}}}(a.message,e);return{...r,confidence:a.confidence}}catch(a){throw console.error("Template generation failed:",a),new Error("Failed to generate template")}}function extractVariablesFromContent(e){const t=e.match(/\{\{([^}]+)\}\}/g)||[];return[...new Set(t.map(e=>e.replace(/[{}]/g,"").trim()))]}function categorizeTemplate(e){return{contract:"contracts",agreement:"contracts","employment contract":"employment","service agreement":"contracts",nda:"contracts","non-disclosure agreement":"contracts","lease agreement":"real-estate","rental agreement":"real-estate","purchase agreement":"real-estate","partnership agreement":"corporate","shareholder agreement":"corporate","articles of incorporation":"corporate","trademark application":"intellectual-property","copyright notice":"intellectual-property","privacy policy":"compliance","terms of service":"compliance",will:"personal","power of attorney":"personal"}[e.toLowerCase()]||"other"}const V=n({type:l().min(1,"Template type is required"),party1:l().optional(),party2:l().optional(),duration:l().optional(),amount:l().optional(),jurisdiction:s(["singapore","international"]).default("singapore"),language:s(["english","simplified"]).default("english"),customRequirements:l().optional(),saveAsPublic:c().default(!1)}),I=[{value:"service agreement",label:"Service Agreement"},{value:"employment contract",label:"Employment Contract"},{value:"non-disclosure agreement",label:"Non-Disclosure Agreement (NDA)"},{value:"consulting agreement",label:"Consulting Agreement"},{value:"partnership agreement",label:"Partnership Agreement"},{value:"lease agreement",label:"Lease Agreement"},{value:"purchase agreement",label:"Purchase Agreement"},{value:"terms of service",label:"Terms of Service"},{value:"privacy policy",label:"Privacy Policy"},{value:"shareholder agreement",label:"Shareholder Agreement"},{value:"licensing agreement",label:"Licensing Agreement"},{value:"distribution agreement",label:"Distribution Agreement"}],TemplateGenerator=({onTemplateGenerated:a,className:r=""})=>{const[n,l]=e.useState(!1),[s,c]=e.useState(null),[R,G]=e.useState(!1),{register:O,handleSubmit:z,watch:D,setValue:M,formState:{errors:B}}=o({resolver:q(V),defaultValues:{jurisdiction:"singapore",language:"english",saveAsPublic:!1}}),J=D("type");return t.createElement("div",{className:`space-y-6 ${r}`},t.createElement(i,null,t.createElement(m,null,t.createElement(p,{className:"flex items-center space-x-2"},t.createElement(U,{className:"h-5 w-5 text-purple-600"}),t.createElement("span",null,"AI Template Generator")),t.createElement(u,null,"Generate custom legal templates using AI. Fill in the details below to create a professional legal document."))),t.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.createElement(i,null,t.createElement(m,null,t.createElement(p,{className:"text-lg"},"Template Details"),t.createElement(u,null,"Provide information about the template you want to generate")),t.createElement(d,null,t.createElement("form",{onSubmit:z(async e=>{l(!0);try{const t={type:e.type,parties:{party1:e.party1,party2:e.party2},terms:{duration:e.duration,amount:e.amount,jurisdiction:e.jurisdiction},customRequirements:e.customRequirements,language:e.language,jurisdiction:e.jurisdiction},r=await generateTemplate(t);c(r),G(!0),a?.(r),_.success("Template generated successfully!")}catch(t){console.error("Template generation failed:",t),_.error("Failed to generate template: "+t.message)}finally{l(!1)}}),className:"space-y-4"},t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"type"},"Template Type *"),t.createElement(y,{onValueChange:e=>M("type",e)},t.createElement(h,null,t.createElement(E,{placeholder:"Select template type"})),t.createElement(v,null,I.map(e=>t.createElement(f,{key:e.value,value:e.value},e.label)))),B.type&&t.createElement("p",{className:"text-red-500 text-sm"},B.type.message),J&&t.createElement("p",{className:"text-sm text-gray-600"},{"service agreement":"A contract for providing services between two parties","employment contract":"An agreement between employer and employee","non-disclosure agreement":"A confidentiality agreement to protect sensitive information","consulting agreement":"A contract for consulting services","partnership agreement":"An agreement between business partners","lease agreement":"A rental agreement for property","purchase agreement":"A contract for buying/selling goods or property","terms of service":"Terms and conditions for using a service or platform","privacy policy":"A policy explaining how personal data is collected and used","shareholder agreement":"An agreement between company shareholders"}[J]||"A legal document template")),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"party1"},"First Party"),t.createElement(b,{...O("party1"),placeholder:"e.g., Service Provider, Employer"})),t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"party2"},"Second Party"),t.createElement(b,{...O("party2"),placeholder:"e.g., Client, Employee"}))),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"duration"},"Duration/Term"),t.createElement(b,{...O("duration"),placeholder:"e.g., 12 months, 2 years"})),t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"amount"},"Amount/Value"),t.createElement(b,{...O("amount"),placeholder:"e.g., $5,000, SGD 10,000"}))),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"jurisdiction"},"Jurisdiction"),t.createElement(y,{onValueChange:e=>M("jurisdiction",e)},t.createElement(h,null,t.createElement(E,{placeholder:"Select jurisdiction"})),t.createElement(v,null,t.createElement(f,{value:"singapore"},"Singapore"),t.createElement(f,{value:"international"},"International")))),t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"language"},"Language Style"),t.createElement(y,{onValueChange:e=>M("language",e)},t.createElement(h,null,t.createElement(E,{placeholder:"Select language style"})),t.createElement(v,null,t.createElement(f,{value:"english"},"Standard Legal"),t.createElement(f,{value:"simplified"},"Plain English"))))),t.createElement("div",{className:"space-y-2"},t.createElement(g,{htmlFor:"customRequirements"},"Additional Requirements"),t.createElement(w,{...O("customRequirements"),placeholder:"Describe any specific clauses, terms, or requirements you need...",rows:3})),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(x,{id:"saveAsPublic",onCheckedChange:e=>M("saveAsPublic",!!e)}),t.createElement(g,{htmlFor:"saveAsPublic",className:"text-sm"},"Make this template public for other users")),t.createElement(N,{type:"submit",disabled:n,className:"w-full"},n?t.createElement(t.Fragment,null,t.createElement(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Template..."):t.createElement(t.Fragment,null,t.createElement(U,{className:"mr-2 h-4 w-4"}),"Generate Template"))))),t.createElement(i,null,t.createElement(m,null,t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement(p,{className:"text-lg"},"Generated Template"),t.createElement(u,null,"Preview and save your AI-generated template")),s&&t.createElement("div",{className:"flex space-x-2"},t.createElement(N,{variant:"outline",size:"sm",onClick:()=>G(!R)},t.createElement(A,{className:"h-4 w-4 mr-2"}),R?"Hide":"Show"," Preview"),t.createElement(N,{size:"sm",onClick:async()=>{if(s)try{const e=D("saveAsPublic");await async function saveGeneratedTemplate(e,t=!1){try{const a={name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables,is_public:t};return await L.createTemplate(a)}catch(a){throw console.error("Failed to save generated template:",a),new Error("Failed to save template")}}(s,e),_.success("Template saved successfully!")}catch(e){console.error("Failed to save template:",e),_.error("Failed to save template: "+e.message)}}},t.createElement(S,{className:"h-4 w-4 mr-2"}),"Save")))),t.createElement(d,null,s?t.createElement("div",{className:"space-y-4"},t.createElement("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200"},t.createElement("div",{className:"flex items-center space-x-2 mb-2"},t.createElement(F,{className:"h-5 w-5 text-green-600"}),t.createElement("h4",{className:"font-medium text-green-900"},s.name)),t.createElement("p",{className:"text-sm text-green-700 mb-2"},s.description),t.createElement("div",{className:"flex items-center space-x-4 text-xs text-green-600"},t.createElement("span",null,"Category: ",s.category),t.createElement("span",null,"Variables: ",s.variables.length),t.createElement("span",null,"Confidence: ",Math.round(100*s.confidence),"%"))),s.variables.length>0&&t.createElement("div",null,t.createElement("h5",{className:"font-medium text-sm mb-2"},"Template Variables:"),t.createElement("div",{className:"flex flex-wrap gap-1"},s.variables.map((e,a)=>t.createElement("span",{key:a,className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded"},e)))),R&&t.createElement("div",null,t.createElement("h5",{className:"font-medium text-sm mb-2"},"Template Content:"),t.createElement("div",{className:"max-h-64 overflow-y-auto p-3 bg-gray-50 rounded border text-sm"},t.createElement("pre",{className:"whitespace-pre-wrap font-mono"},s.content))),s.confidence<.7&&t.createElement(C,null,t.createElement(P,{className:"h-4 w-4"}),t.createElement($,null,"This template was generated with lower confidence. Please review carefully and consider consulting a legal professional."))):t.createElement("div",{className:"text-center py-8"},t.createElement(k,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No template generated yet"),t.createElement("p",{className:"text-gray-500"},'Fill in the form and click "Generate Template" to create your custom legal document.'))))),t.createElement(i,null,t.createElement(m,null,t.createElement(p,{className:"text-sm flex items-center space-x-2"},t.createElement(j,{className:"h-4 w-4"}),t.createElement("span",null,"Tips for Better Templates"))),t.createElement(d,null,t.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},t.createElement("li",null,"• Be specific about the type of agreement you need"),t.createElement("li",null,'• Provide clear party descriptions (e.g., "Software Company" vs "Company A")'),t.createElement("li",null,"• Include specific terms like duration, amounts, and key obligations"),t.createElement("li",null,"• Mention any special requirements or unique clauses needed"),t.createElement("li",null,"• Choose the appropriate jurisdiction for your use case"),t.createElement("li",null,'• Use "Plain English" style for simpler, more readable templates')))))};export{TemplateGenerator as T,U as W,L as t};
