const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./jszip.min-BwzEJ3Q-.js","./react-vendor-92YuBQvb.js","./_commonjs-dynamic-modules-DT2jeOaC.js","./openai-DkM2Hj2j.js","./supabase-Br4R_luN.js","./PdfAnnotationsDemo-BfnrZeOF.js","./useAnnotations-jJTNIRf2.js","./pdfWorker-Bf4Y5Jto.js","./PdfAnnotationsDemo-BxwK8EBg.css","./Documents-CnIRxlmU.js","./search-BcQ7iBXo.js","./ellipsis-DO8wsauv.js","./AIAssistant-Cs5Dg_Y7.js","./Templates-V61Uo7EA.js","./TemplateGenerator-DrKYyB3B.js","./TemplateCustomize-Ct89Lzuz.js","./TemplateVersionManagement-CJXNuXXh.js","./square-pen-DBgNO8yg.js","./minus-CJdWo0zX.js","./TemplateAnalytics-DosrAuBM.js","./usePermissions-BEQPgmcy.js","./Admin-IGLByHaD.js"])))=>i.map(i=>d[i]);
var e,a,l,m,u,p,f,g,h,y,v,E,x,w,b,N,_,k,S,C,R,A,T,P,D,I,F,M,j,O,L,$,z,B,V,H,W,Z,K,G,Q,Y,J,X,ee,te,ae,re,oe,le,ie,ce,me,de,ue,pe,fe,ge,he,ye,ve,Ee,xe,we,be,Ne,_e,ke,Se,Ce,Re,Ae,Pe,De,Ie=Object.defineProperty,__typeError=e=>{throw TypeError(e)},__publicField=(e,a,l)=>((e,a,l)=>a in e?Ie(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l)(e,"symbol"!=typeof a?a+"":a,l),__accessCheck=(e,a,l)=>a.has(e)||__typeError("Cannot "+l),__privateGet=(e,a,l)=>(__accessCheck(e,a,"read from private field"),l?l.call(e):a.get(e)),__privateAdd=(e,a,l)=>a.has(e)?__typeError("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(e):a.set(e,l),__privateSet=(e,a,l,m)=>(__accessCheck(e,a,"write to private field"),m?m.call(e,l):a.set(e,l),l),__privateMethod=(e,a,l)=>(__accessCheck(e,a,"access private method"),l),__privateWrapper=(e,a,l,m)=>({set _(m){__privateSet(e,a,m,l)},get _(){return __privateGet(e,a,m)}});import{r as Fe,a as Me,R as je,G as Oe,b as Le,d as $e}from"./react-vendor-92YuBQvb.js";import{c as Ue,_ as ze}from"./supabase-Br4R_luN.js";!function polyfill(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&processPreload(e)}).observe(document,{childList:!0,subtree:!0})}function processPreload(e){if(e.ep)return;e.ep=!0;const a=function getFetchOpts(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var Be=Fe;De=Be.createRoot,Be.hydrateRoot;let qe=0;const Ve=new Map,addToRemoveQueue=e=>{if(Ve.has(e))return;const a=setTimeout(()=>{Ve.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);Ve.set(e,a)},reducer$1=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{const{toastId:l}=a;return l?addToRemoveQueue(l):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===l||void 0===l?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===a.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},He=[];let We={toasts:[]};function dispatch(e){We=reducer$1(We,e),He.forEach(e=>{e(We)})}function toast({...e}){const a=function genId(){return qe=(qe+1)%Number.MAX_SAFE_INTEGER,qe.toString()}(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:a});return dispatch({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:a,dismiss:dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function useToast(){const[e,a]=Me.useState(We);return Me.useEffect(()=>(He.push(a),()=>{const e=He.indexOf(a);e>-1&&He.splice(e,1)}),[e]),{...e,toast:toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}function composeEventHandlers$3(e,a,{checkForDefaultPrevented:l=!0}={}){return function handleEvent(m){if(e?.(m),!1===l||!m.defaultPrevented)return a?.(m)}}function composeRefs$2(...e){return a=>e.forEach(e=>function setRef$2(e,a){"function"==typeof e?e(a):null!=e&&(e.current=a)}(e,a))}function useComposedRefs$2(...e){return Me.useCallback(composeRefs$2(...e),e)}var Ze={exports:{}},Ke={},Ge=Me,Qe=Symbol.for("react.element"),Ye=Symbol.for("react.fragment"),Je=Object.prototype.hasOwnProperty,Xe=Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,et={key:!0,ref:!0,__self:!0,__source:!0};function q(e,a,l){var m,u={},p=null,f=null;for(m in void 0!==l&&(p=""+l),void 0!==a.key&&(p=""+a.key),void 0!==a.ref&&(f=a.ref),a)Je.call(a,m)&&!et.hasOwnProperty(m)&&(u[m]=a[m]);if(e&&e.defaultProps)for(m in a=e.defaultProps)void 0===u[m]&&(u[m]=a[m]);return{$$typeof:Qe,type:e,key:p,ref:f,props:u,_owner:Xe.current}}Ke.Fragment=Ye,Ke.jsx=q,Ke.jsxs=q,Ze.exports=Ke;var tt=Ze.exports;function composeContextScopes$6(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}var at=Me.forwardRef((e,a)=>{const{children:l,...m}=e,u=Me.Children.toArray(l),p=u.find(isSlottable$2);if(p){const e=p.props.children,l=u.map(a=>a===p?Me.Children.count(e)>1?Me.Children.only(null):Me.isValidElement(e)?e.props.children:null:a);return tt.jsx(rt,{...m,ref:a,children:Me.isValidElement(e)?Me.cloneElement(e,void 0,l):null})}return tt.jsx(rt,{...m,ref:a,children:l})});at.displayName="Slot";var rt=Me.forwardRef((e,a)=>{const{children:l,...m}=e;if(Me.isValidElement(l)){const e=function getElementRef$5(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(l);return Me.cloneElement(l,{...mergeProps$2(m,l.props),ref:a?composeRefs$2(a,e):e})}return Me.Children.count(l)>1?Me.Children.only(null):null});rt.displayName="SlotClone";var Slottable=({children:e})=>tt.jsx(tt.Fragment,{children:e});function isSlottable$2(e){return Me.isValidElement(e)&&e.type===Slottable}function mergeProps$2(e,a){const l={...a};for(const m in a){const u=e[m],p=a[m];/^on[A-Z]/.test(m)?u&&p?l[m]=(...e)=>{p(...e),u(...e)}:u&&(l[m]=u):"style"===m?l[m]={...u,...p}:"className"===m&&(l[m]=[u,p].filter(Boolean).join(" "))}return{...e,...l}}function createCollection$1(e){const a=e+"CollectionProvider",[l,m]=function createContextScope$6(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;function Provider2(a){const{scope:l,children:m,...f}=a,g=l?.[e][p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})}return l=[...l,m],Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e][p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$6(createScope,...a)]}(a),[u,p]=l(a,{collectionRef:{current:null},itemMap:new Map}),CollectionProvider=e=>{const{scope:a,children:l}=e,m=je.useRef(null),p=je.useRef(new Map).current;return tt.jsx(u,{scope:a,itemMap:p,collectionRef:m,children:l})};CollectionProvider.displayName=a;const f=e+"CollectionSlot",g=je.forwardRef((e,a)=>{const{scope:l,children:m}=e,u=useComposedRefs$2(a,p(f,l).collectionRef);return tt.jsx(at,{ref:u,children:m})});g.displayName=f;const h=e+"CollectionItemSlot",y="data-radix-collection-item",v=je.forwardRef((e,a)=>{const{scope:l,children:m,...u}=e,f=je.useRef(null),g=useComposedRefs$2(a,f),v=p(h,l);return je.useEffect(()=>(v.itemMap.set(f,{ref:f,...u}),()=>{v.itemMap.delete(f)})),tt.jsx(at,{[y]:"",ref:g,children:m})});return v.displayName=h,[{Provider:CollectionProvider,Slot:g,ItemSlot:v},function useCollection2(a){const l=p(e+"CollectionConsumer",a);return je.useCallback(()=>{const e=l.collectionRef.current;if(!e)return[];const a=Array.from(e.querySelectorAll(`[${y}]`));return Array.from(l.itemMap.values()).sort((e,l)=>a.indexOf(e.ref.current)-a.indexOf(l.ref.current))},[l.collectionRef,l.itemMap])},m]}function createContextScope$5(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;l=[...l,m];const Provider2=a=>{const{scope:l,children:m,...f}=a,g=l?.[e]?.[p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})};return Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e]?.[p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$5(createScope,...a)]}function composeContextScopes$5(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}var nt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{const l=Me.forwardRef((e,l)=>{const{asChild:m,...u}=e,p=m?at:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),tt.jsx(p,{...u,ref:l})});return l.displayName=`Primitive.${a}`,{...e,[a]:l}},{});function dispatchDiscreteCustomEvent(e,a){e&&Fe.flushSync(()=>e.dispatchEvent(a))}function useCallbackRef$3(e){const a=Me.useRef(e);return Me.useEffect(()=>{a.current=e}),Me.useMemo(()=>(...e)=>a.current?.(...e),[])}var st,ot="dismissableLayer.update",lt="dismissableLayer.pointerDownOutside",it="dismissableLayer.focusOutside",ct=Me.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mt=Me.forwardRef((e,a)=>{const{disableOutsidePointerEvents:l=!1,onEscapeKeyDown:m,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:f,onDismiss:g,...h}=e,y=Me.useContext(ct),[v,E]=Me.useState(null),x=v?.ownerDocument??globalThis?.document,[,w]=Me.useState({}),b=useComposedRefs$2(a,e=>E(e)),N=Array.from(y.layers),[_]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),k=N.indexOf(_),S=v?N.indexOf(v):-1,C=y.layersWithOutsidePointerEventsDisabled.size>0,R=S>=k,A=function usePointerDownOutside(e,a=globalThis?.document){const l=useCallbackRef$3(e),m=Me.useRef(!1),u=Me.useRef(()=>{});return Me.useEffect(()=>{const handlePointerDown=e=>{if(e.target&&!m.current){let handleAndDispatchPointerDownOutsideEvent2=function(){handleAndDispatchCustomEvent$1(lt,l,m,{discrete:!0})};const m={originalEvent:e};"touch"===e.pointerType?(a.removeEventListener("click",u.current),u.current=handleAndDispatchPointerDownOutsideEvent2,a.addEventListener("click",u.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent2()}else a.removeEventListener("click",u.current);m.current=!1},e=window.setTimeout(()=>{a.addEventListener("pointerdown",handlePointerDown)},0);return()=>{window.clearTimeout(e),a.removeEventListener("pointerdown",handlePointerDown),a.removeEventListener("click",u.current)}},[a,l]),{onPointerDownCapture:()=>m.current=!0}}(e=>{const a=e.target,l=[...y.branches].some(e=>e.contains(a));R&&!l&&(u?.(e),f?.(e),e.defaultPrevented||g?.())},x),T=function useFocusOutside(e,a=globalThis?.document){const l=useCallbackRef$3(e),m=Me.useRef(!1);return Me.useEffect(()=>{const handleFocus=e=>{if(e.target&&!m.current){handleAndDispatchCustomEvent$1(it,l,{originalEvent:e},{discrete:!1})}};return a.addEventListener("focusin",handleFocus),()=>a.removeEventListener("focusin",handleFocus)},[a,l]),{onFocusCapture:()=>m.current=!0,onBlurCapture:()=>m.current=!1}}(e=>{const a=e.target;[...y.branches].some(e=>e.contains(a))||(p?.(e),f?.(e),e.defaultPrevented||g?.())},x);return function useEscapeKeydown(e,a=globalThis?.document){const l=useCallbackRef$3(e);Me.useEffect(()=>{const handleKeyDown=e=>{"Escape"===e.key&&l(e)};return a.addEventListener("keydown",handleKeyDown,{capture:!0}),()=>a.removeEventListener("keydown",handleKeyDown,{capture:!0})},[l,a])}(e=>{S===y.layers.size-1&&(m?.(e),!e.defaultPrevented&&g&&(e.preventDefault(),g()))},x),Me.useEffect(()=>{if(v)return l&&(0===y.layersWithOutsidePointerEventsDisabled.size&&(st=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(v)),y.layers.add(v),dispatchUpdate(),()=>{l&&1===y.layersWithOutsidePointerEventsDisabled.size&&(x.body.style.pointerEvents=st)}},[v,x,l,y]),Me.useEffect(()=>()=>{v&&(y.layers.delete(v),y.layersWithOutsidePointerEventsDisabled.delete(v),dispatchUpdate())},[v,y]),Me.useEffect(()=>{const handleUpdate=()=>w({});return document.addEventListener(ot,handleUpdate),()=>document.removeEventListener(ot,handleUpdate)},[]),tt.jsx(nt.div,{...h,ref:b,style:{pointerEvents:C?R?"auto":"none":void 0,...e.style},onFocusCapture:composeEventHandlers$3(e.onFocusCapture,T.onFocusCapture),onBlurCapture:composeEventHandlers$3(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:composeEventHandlers$3(e.onPointerDownCapture,A.onPointerDownCapture)})});mt.displayName="DismissableLayer";var dt=Me.forwardRef((e,a)=>{const l=Me.useContext(ct),m=Me.useRef(null),u=useComposedRefs$2(a,m);return Me.useEffect(()=>{const e=m.current;if(e)return l.branches.add(e),()=>{l.branches.delete(e)}},[l.branches]),tt.jsx(nt.div,{...e,ref:u})});function dispatchUpdate(){const e=new CustomEvent(ot);document.dispatchEvent(e)}function handleAndDispatchCustomEvent$1(e,a,l,{discrete:m}){const u=l.originalEvent.target,p=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:l});a&&u.addEventListener(e,a,{once:!0}),m?dispatchDiscreteCustomEvent(u,p):u.dispatchEvent(p)}dt.displayName="DismissableLayerBranch";var ut=mt,pt=dt,gt=Boolean(globalThis?.document)?Me.useLayoutEffect:()=>{},ht=Me.forwardRef((e,a)=>{const{container:l,...m}=e,[u,p]=Me.useState(!1);gt(()=>p(!0),[]);const f=l||u&&globalThis?.document?.body;return f?Oe.createPortal(tt.jsx(nt.div,{...m,ref:a}),f):null});ht.displayName="Portal";var Presence$2=e=>{const{present:a,children:l}=e,m=function usePresence$2(e){const[a,l]=Me.useState(),m=Me.useRef({}),u=Me.useRef(e),p=Me.useRef("none"),f=e?"mounted":"unmounted",[g,h]=function useStateMachine$3(e,a){return Me.useReducer((e,l)=>a[e][l]??e,e)}(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Me.useEffect(()=>{const e=getAnimationName$2(m.current);p.current="mounted"===g?e:"none"},[g]),gt(()=>{const a=m.current,l=u.current;if(l!==e){const m=p.current,f=getAnimationName$2(a);if(e)h("MOUNT");else if("none"===f||"none"===a?.display)h("UNMOUNT");else{h(l&&m!==f?"ANIMATION_OUT":"UNMOUNT")}u.current=e}},[e,h]),gt(()=>{if(a){let e;const l=a.ownerDocument.defaultView??window,handleAnimationEnd=p=>{const f=getAnimationName$2(m.current).includes(p.animationName);if(p.target===a&&f&&(h("ANIMATION_END"),!u.current)){const m=a.style.animationFillMode;a.style.animationFillMode="forwards",e=l.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=m)})}},handleAnimationStart=e=>{e.target===a&&(p.current=getAnimationName$2(m.current))};return a.addEventListener("animationstart",handleAnimationStart),a.addEventListener("animationcancel",handleAnimationEnd),a.addEventListener("animationend",handleAnimationEnd),()=>{l.clearTimeout(e),a.removeEventListener("animationstart",handleAnimationStart),a.removeEventListener("animationcancel",handleAnimationEnd),a.removeEventListener("animationend",handleAnimationEnd)}}h("ANIMATION_END")},[a,h]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:Me.useCallback(e=>{e&&(m.current=getComputedStyle(e)),l(e)},[])}}(a),u="function"==typeof l?l({present:m.isPresent}):Me.Children.only(l),p=useComposedRefs$2(m.ref,function getElementRef$4(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(u));return"function"==typeof l||m.isPresent?Me.cloneElement(u,{ref:p}):null};function getAnimationName$2(e){return e?.animationName||"none"}function useControllableState$1({prop:e,defaultProp:a,onChange:l=()=>{}}){const[m,u]=function useUncontrolledState$1({defaultProp:e,onChange:a}){const l=Me.useState(e),[m]=l,u=Me.useRef(m),p=useCallbackRef$3(a);return Me.useEffect(()=>{u.current!==m&&(p(m),u.current=m)},[m,u,p]),l}({defaultProp:a,onChange:l}),p=void 0!==e,f=p?e:m,g=useCallbackRef$3(l);return[f,Me.useCallback(a=>{if(p){const l="function"==typeof a?a(e):a;l!==e&&g(l)}else u(a)},[p,e,u,g])]}Presence$2.displayName="Presence";var yt=Me.forwardRef((e,a)=>tt.jsx(nt.span,{...e,ref:a,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));yt.displayName="VisuallyHidden";var vt=yt,Et="ToastProvider",[xt,wt,bt]=createCollection$1("Toast"),[Nt,_t]=createContextScope$5("Toast",[bt]),[kt,St]=Nt(Et),ToastProvider$1=e=>{const{__scopeToast:a,label:l="Notification",duration:m=5e3,swipeDirection:u="right",swipeThreshold:p=50,children:f}=e,[g,h]=Me.useState(null),[y,v]=Me.useState(0),E=Me.useRef(!1),x=Me.useRef(!1);return l.trim()||console.error(`Invalid prop \`label\` supplied to \`${Et}\`. Expected non-empty \`string\`.`),tt.jsx(xt.Provider,{scope:a,children:tt.jsx(kt,{scope:a,label:l,duration:m,swipeDirection:u,swipeThreshold:p,toastCount:y,viewport:g,onViewportChange:h,onToastAdd:Me.useCallback(()=>v(e=>e+1),[]),onToastRemove:Me.useCallback(()=>v(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:E,isClosePausedRef:x,children:f})})};ToastProvider$1.displayName=Et;var Ct="ToastViewport",Rt=["F8"],At="toast.viewportPause",Tt="toast.viewportResume",Pt=Me.forwardRef((e,a)=>{const{__scopeToast:l,hotkey:m=Rt,label:u="Notifications ({hotkey})",...p}=e,f=St(Ct,l),g=wt(l),h=Me.useRef(null),y=Me.useRef(null),v=Me.useRef(null),E=Me.useRef(null),x=useComposedRefs$2(a,E,f.onViewportChange),w=m.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=f.toastCount>0;Me.useEffect(()=>{const handleKeyDown=e=>{0!==m.length&&m.every(a=>e[a]||e.code===a)&&E.current?.focus()};return document.addEventListener("keydown",handleKeyDown),()=>document.removeEventListener("keydown",handleKeyDown)},[m]),Me.useEffect(()=>{const e=h.current,a=E.current;if(b&&e&&a){const handlePause=()=>{if(!f.isClosePausedRef.current){const e=new CustomEvent(At);a.dispatchEvent(e),f.isClosePausedRef.current=!0}},handleResume=()=>{if(f.isClosePausedRef.current){const e=new CustomEvent(Tt);a.dispatchEvent(e),f.isClosePausedRef.current=!1}},handleFocusOutResume=a=>{!e.contains(a.relatedTarget)&&handleResume()},handlePointerLeaveResume=()=>{e.contains(document.activeElement)||handleResume()};return e.addEventListener("focusin",handlePause),e.addEventListener("focusout",handleFocusOutResume),e.addEventListener("pointermove",handlePause),e.addEventListener("pointerleave",handlePointerLeaveResume),window.addEventListener("blur",handlePause),window.addEventListener("focus",handleResume),()=>{e.removeEventListener("focusin",handlePause),e.removeEventListener("focusout",handleFocusOutResume),e.removeEventListener("pointermove",handlePause),e.removeEventListener("pointerleave",handlePointerLeaveResume),window.removeEventListener("blur",handlePause),window.removeEventListener("focus",handleResume)}}},[b,f.isClosePausedRef]);const N=Me.useCallback(({tabbingDirection:e})=>{const a=g().map(a=>{const l=a.ref.current,m=[l,...getTabbableCandidates$1(l)];return"forwards"===e?m:m.reverse()});return("forwards"===e?a.reverse():a).flat()},[g]);return Me.useEffect(()=>{const e=E.current;if(e){const handleKeyDown=a=>{const l=a.altKey||a.ctrlKey||a.metaKey;if("Tab"===a.key&&!l){const l=document.activeElement,m=a.shiftKey;if(a.target===e&&m)return void y.current?.focus();const u=N({tabbingDirection:m?"backwards":"forwards"}),p=u.findIndex(e=>e===l);focusFirst$4(u.slice(p+1))?a.preventDefault():m?y.current?.focus():v.current?.focus()}};return e.addEventListener("keydown",handleKeyDown),()=>e.removeEventListener("keydown",handleKeyDown)}},[g,N]),tt.jsxs(pt,{ref:h,role:"region","aria-label":u.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&tt.jsx(Ft,{ref:y,onFocusFromOutsideViewport:()=>{focusFirst$4(N({tabbingDirection:"forwards"}))}}),tt.jsx(xt.Slot,{scope:l,children:tt.jsx(nt.ol,{tabIndex:-1,...p,ref:x})}),b&&tt.jsx(Ft,{ref:v,onFocusFromOutsideViewport:()=>{focusFirst$4(N({tabbingDirection:"backwards"}))}})]})});Pt.displayName=Ct;var Dt="ToastFocusProxy",Ft=Me.forwardRef((e,a)=>{const{__scopeToast:l,onFocusFromOutsideViewport:m,...u}=e,p=St(Dt,l);return tt.jsx(yt,{"aria-hidden":!0,tabIndex:0,...u,ref:a,style:{position:"fixed"},onFocus:e=>{const a=e.relatedTarget;!p.viewport?.contains(a)&&m()}})});Ft.displayName=Dt;var Mt="Toast",jt=Me.forwardRef((e,a)=>{const{forceMount:l,open:m,defaultOpen:u,onOpenChange:p,...f}=e,[g=!0,h]=useControllableState$1({prop:m,defaultProp:u,onChange:p});return tt.jsx(Presence$2,{present:l||g,children:tt.jsx(Ut,{open:g,...f,ref:a,onClose:()=>h(!1),onPause:useCallbackRef$3(e.onPause),onResume:useCallbackRef$3(e.onResume),onSwipeStart:composeEventHandlers$3(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers$3(e.onSwipeMove,e=>{const{x:a,y:l}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${a}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${l}px`)}),onSwipeCancel:composeEventHandlers$3(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers$3(e.onSwipeEnd,e=>{const{x:a,y:l}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${a}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${l}px`),h(!1)})})})});jt.displayName=Mt;var[Lt,$t]=Nt(Mt,{onClose(){}}),Ut=Me.forwardRef((e,a)=>{const{__scopeToast:l,type:m="foreground",duration:u,open:p,onClose:f,onEscapeKeyDown:g,onPause:h,onResume:y,onSwipeStart:v,onSwipeMove:E,onSwipeCancel:x,onSwipeEnd:w,...b}=e,N=St(Mt,l),[_,k]=Me.useState(null),S=useComposedRefs$2(a,e=>k(e)),C=Me.useRef(null),R=Me.useRef(null),A=u||N.duration,T=Me.useRef(0),P=Me.useRef(A),D=Me.useRef(0),{onToastAdd:I,onToastRemove:F}=N,M=useCallbackRef$3(()=>{const e=_?.contains(document.activeElement);e&&N.viewport?.focus(),f()}),j=Me.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(D.current),T.current=(new Date).getTime(),D.current=window.setTimeout(M,e))},[M]);Me.useEffect(()=>{const e=N.viewport;if(e){const handleResume=()=>{j(P.current),y?.()},handlePause=()=>{const e=(new Date).getTime()-T.current;P.current=P.current-e,window.clearTimeout(D.current),h?.()};return e.addEventListener(At,handlePause),e.addEventListener(Tt,handleResume),()=>{e.removeEventListener(At,handlePause),e.removeEventListener(Tt,handleResume)}}},[N.viewport,A,h,y,j]),Me.useEffect(()=>{p&&!N.isClosePausedRef.current&&j(A)},[p,A,N.isClosePausedRef,j]),Me.useEffect(()=>(I(),()=>F()),[I,F]);const O=Me.useMemo(()=>_?getAnnounceTextContent(_):null,[_]);return N.viewport?tt.jsxs(tt.Fragment,{children:[O&&tt.jsx(ToastAnnounce,{__scopeToast:l,role:"status","aria-live":"foreground"===m?"assertive":"polite","aria-atomic":!0,children:O}),tt.jsx(Lt,{scope:l,onClose:M,children:Fe.createPortal(tt.jsx(xt.ItemSlot,{scope:l,children:tt.jsx(ut,{asChild:!0,onEscapeKeyDown:composeEventHandlers$3(g,()=>{N.isFocusedToastEscapeKeyDownRef.current||M(),N.isFocusedToastEscapeKeyDownRef.current=!1}),children:tt.jsx(nt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":p?"open":"closed","data-swipe-direction":N.swipeDirection,...b,ref:S,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{"Escape"===e.key&&(g?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(N.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:composeEventHandlers$3(e.onPointerDown,e=>{0===e.button&&(C.current={x:e.clientX,y:e.clientY})}),onPointerMove:composeEventHandlers$3(e.onPointerMove,e=>{if(!C.current)return;const a=e.clientX-C.current.x,l=e.clientY-C.current.y,m=Boolean(R.current),u=["left","right"].includes(N.swipeDirection),p=["left","up"].includes(N.swipeDirection)?Math.min:Math.max,f=u?p(0,a):0,g=u?0:p(0,l),h="touch"===e.pointerType?10:2,y={x:f,y:g},x={originalEvent:e,delta:y};m?(R.current=y,handleAndDispatchCustomEvent("toast.swipeMove",E,x,{discrete:!1})):isDeltaInDirection(y,N.swipeDirection,h)?(R.current=y,handleAndDispatchCustomEvent("toast.swipeStart",v,x,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(a)>h||Math.abs(l)>h)&&(C.current=null)}),onPointerUp:composeEventHandlers$3(e.onPointerUp,e=>{const a=R.current,l=e.target;if(l.hasPointerCapture(e.pointerId)&&l.releasePointerCapture(e.pointerId),R.current=null,C.current=null,a){const l=e.currentTarget,m={originalEvent:e,delta:a};isDeltaInDirection(a,N.swipeDirection,N.swipeThreshold)?handleAndDispatchCustomEvent("toast.swipeEnd",w,m,{discrete:!0}):handleAndDispatchCustomEvent("toast.swipeCancel",x,m,{discrete:!0}),l.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),N.viewport)})]}):null}),ToastAnnounce=e=>{const{__scopeToast:a,children:l,...m}=e,u=St(Mt,a),[p,f]=Me.useState(!1),[g,h]=Me.useState(!1);return function useNextFrame(e=()=>{}){const a=useCallbackRef$3(e);gt(()=>{let e=0,l=0;return e=window.requestAnimationFrame(()=>l=window.requestAnimationFrame(a)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(l)}},[a])}(()=>f(!0)),Me.useEffect(()=>{const e=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(e)},[]),g?null:tt.jsx(ht,{asChild:!0,children:tt.jsx(yt,{...m,children:p&&tt.jsxs(tt.Fragment,{children:[u.label," ",l]})})})},zt=Me.forwardRef((e,a)=>{const{__scopeToast:l,...m}=e;return tt.jsx(nt.div,{...m,ref:a})});zt.displayName="ToastTitle";var Bt=Me.forwardRef((e,a)=>{const{__scopeToast:l,...m}=e;return tt.jsx(nt.div,{...m,ref:a})});Bt.displayName="ToastDescription";var qt="ToastAction",Vt=Me.forwardRef((e,a)=>{const{altText:l,...m}=e;return l.trim()?tt.jsx(Gt,{altText:l,asChild:!0,children:tt.jsx(Zt,{...m,ref:a})}):(console.error(`Invalid prop \`altText\` supplied to \`${qt}\`. Expected non-empty \`string\`.`),null)});Vt.displayName=qt;var Wt="ToastClose",Zt=Me.forwardRef((e,a)=>{const{__scopeToast:l,...m}=e,u=$t(Wt,l);return tt.jsx(Gt,{asChild:!0,children:tt.jsx(nt.button,{type:"button",...m,ref:a,onClick:composeEventHandlers$3(e.onClick,u.onClose)})})});Zt.displayName=Wt;var Gt=Me.forwardRef((e,a)=>{const{__scopeToast:l,altText:m,...u}=e;return tt.jsx(nt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":m||void 0,...u,ref:a})});function getAnnounceTextContent(e){const a=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&a.push(e.textContent),function isHTMLElement$2(e){return e.nodeType===e.ELEMENT_NODE}(e)){const l=e.ariaHidden||e.hidden||"none"===e.style.display,m=""===e.dataset.radixToastAnnounceExclude;if(!l)if(m){const l=e.dataset.radixToastAnnounceAlt;l&&a.push(l)}else a.push(...getAnnounceTextContent(e))}}),a}function handleAndDispatchCustomEvent(e,a,l,{discrete:m}){const u=l.originalEvent.currentTarget,p=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:l});a&&u.addEventListener(e,a,{once:!0}),m?dispatchDiscreteCustomEvent(u,p):u.dispatchEvent(p)}var isDeltaInDirection=(e,a,l=0)=>{const m=Math.abs(e.x),u=Math.abs(e.y),p=m>u;return"left"===a||"right"===a?p&&m>l:!p&&u>l};function getTabbableCandidates$1(e){const a=[],l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const a="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||a?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;l.nextNode();)a.push(l.currentNode);return a}function focusFirst$4(e){const a=document.activeElement;return e.some(e=>e===a||(e.focus(),document.activeElement!==a))}var Qt=ToastProvider$1,Jt=Pt,Xt=jt,ea=zt,ta=Bt,aa=Vt,ra=Zt;function r$1(e){var a,l,m="";if("string"==typeof e||"number"==typeof e)m+=e;else if("object"==typeof e)if(Array.isArray(e)){var u=e.length;for(a=0;a<u;a++)e[a]&&(l=r$1(e[a]))&&(m&&(m+=" "),m+=l)}else for(l in e)e[l]&&(m&&(m+=" "),m+=l);return m}function clsx(){for(var e,a,l=0,m="",u=arguments.length;l<u;l++)(e=arguments[l])&&(a=r$1(e))&&(m&&(m+=" "),m+=a);return m}const falsyToString=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,na=clsx,cva=(e,a)=>l=>{var m;if(null==(null==a?void 0:a.variants))return na(e,null==l?void 0:l.class,null==l?void 0:l.className);const{variants:u,defaultVariants:p}=a,f=Object.keys(u).map(e=>{const a=null==l?void 0:l[e],m=null==p?void 0:p[e];if(null===a)return null;const f=falsyToString(a)||falsyToString(m);return u[e][f]}),g=l&&Object.entries(l).reduce((e,a)=>{let[l,m]=a;return void 0===m||(e[l]=m),e},{}),h=null==a||null===(m=a.compoundVariants)||void 0===m?void 0:m.reduce((e,a)=>{let{class:l,className:m,...u}=a;return Object.entries(u).every(e=>{let[a,l]=e;return Array.isArray(l)?l.includes({...p,...g}[a]):{...p,...g}[a]===l})?[...e,l,m]:e},[]);return na(e,f,h,null==l?void 0:l.class,null==l?void 0:l.className)},mergeClasses=(...e)=>e.filter((e,a,l)=>Boolean(e)&&""!==e.trim()&&l.indexOf(e)===a).join(" ").trim();
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var sa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Me.forwardRef(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:m,className:u="",children:p,iconNode:f,...g},h)=>Me.createElement("svg",{ref:h,...sa,width:a,height:a,stroke:e,strokeWidth:m?24*Number(l)/Number(a):l,className:mergeClasses("lucide",u),...g},[...f.map(([e,a])=>Me.createElement(e,a)),...Array.isArray(p)?p:[p]])),createLucideIcon=(e,a)=>{const l=Me.forwardRef(({className:l,...m},u)=>{return Me.createElement(oa,{ref:u,iconNode:a,className:mergeClasses(`lucide-${p=e,p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,l),...m});var p});return l.displayName=`${e}`,l},la=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ia=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ca=createLucideIcon("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),ma=createLucideIcon("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),da=createLucideIcon("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),ua=createLucideIcon("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),pa=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),fa=createLucideIcon("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),ga=createLucideIcon("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]),ha=createLucideIcon("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ya=createLucideIcon("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),va=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Ea=createLucideIcon("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),xa=createLucideIcon("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),wa=createLucideIcon("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ba=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Na=createLucideIcon("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_a=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ka=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Sa=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ca=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ra=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Aa=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ta=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Pa=createLucideIcon("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Da=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ia=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Fa=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ma=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ja=createLucideIcon("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Oa=createLucideIcon("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),La=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$a=createLucideIcon("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ua=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),za=createLucideIcon("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ba=createLucideIcon("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),qa=createLucideIcon("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Va=createLucideIcon("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Ha=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Wa=createLucideIcon("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),Za=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ka=createLucideIcon("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),Ga=createLucideIcon("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Qa=createLucideIcon("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Ya=createLucideIcon("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Ja=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Xa=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),er=createLucideIcon("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),tr=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ar=createLucideIcon("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),rr=createLucideIcon("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),nr=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),sr=createLucideIcon("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),or=createLucideIcon("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),lr=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ir=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),cr=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),mr=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),dr=createLucideIcon("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ur=createLucideIcon("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),pr=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),fr=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),gr=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),hr=createLucideIcon("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),yr=createLucideIcon("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),vr=createLucideIcon("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Er=createLucideIcon("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),xr=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),wr=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),br=createLucideIcon("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),Nr=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),_r=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),kr=createLucideIcon("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Sr=createLucideIcon("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Cr=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Rr=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ar=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Tr=createLucideIcon("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Pr=createLucideIcon("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Dr=createLucideIcon("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]),Ir=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Fr=createLucideIcon("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Mr=createLucideIcon("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),jr=createLucideIcon("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Or=createLucideIcon("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Lr=createLucideIcon("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),$r=createLucideIcon("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Ur=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),zr=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Br=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qr=createLucideIcon("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Vr=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hr=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Wr=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zr=createLucideIcon("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Kr=createLucideIcon("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Gr=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qr=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),createClassGroupUtils=e=>{const a=createClassMap(e),{conflictingClassGroups:l,conflictingClassGroupModifiers:m}=e;return{getClassGroupId:e=>{const l=e.split("-");return""===l[0]&&1!==l.length&&l.shift(),getGroupRecursive(l,a)||getGroupIdForArbitraryProperty(e)},getConflictingClassGroupIds:(e,a)=>{const u=l[e]||[];return a&&m[e]?[...u,...m[e]]:u}}},getGroupRecursive=(e,a)=>{if(0===e.length)return a.classGroupId;const l=e[0],m=a.nextPart.get(l),u=m?getGroupRecursive(e.slice(1),m):void 0;if(u)return u;if(0===a.validators.length)return;const p=e.join("-");return a.validators.find(({validator:e})=>e(p))?.classGroupId},Yr=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=e=>{if(Yr.test(e)){const a=Yr.exec(e)[1],l=a?.substring(0,a.indexOf(":"));if(l)return"arbitrary.."+l}},createClassMap=e=>{const{theme:a,prefix:l}=e,m={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(e.classGroups),l).forEach(([e,l])=>{processClassesRecursively(l,m,e,a)}),m},processClassesRecursively=(e,a,l,m)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?a:getPart(a,e)).classGroupId=l)}if("function"==typeof e)return isThemeGetter(e)?void processClassesRecursively(e(m),a,l,m):void a.validators.push({validator:e,classGroupId:l});Object.entries(e).forEach(([e,u])=>{processClassesRecursively(u,getPart(a,e),l,m)})})},getPart=(e,a)=>{let l=e;return a.split("-").forEach(e=>{l.nextPart.has(e)||l.nextPart.set(e,{nextPart:new Map,validators:[]}),l=l.nextPart.get(e)}),l},isThemeGetter=e=>e.isThemeGetter,getPrefixedClassGroupEntries=(e,a)=>a?e.map(([e,l])=>[e,l.map(e=>"string"==typeof e?a+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,l])=>[a+e,l])):e)]):e,createLruCache=e=>{if(e<1)return{get:()=>{},set:()=>{}};let a=0,l=new Map,m=new Map;const update=(u,p)=>{l.set(u,p),a++,a>e&&(a=0,m=l,l=new Map)};return{get(e){let a=l.get(e);return void 0!==a?a:void 0!==(a=m.get(e))?(update(e,a),a):void 0},set(e,a){l.has(e)?l.set(e,a):update(e,a)}}},createParseClassName=e=>{const{separator:a,experimentalParseClassName:l}=e,m=1===a.length,u=a[0],p=a.length,parseClassName=e=>{const l=[];let f,g=0,h=0;for(let E=0;E<e.length;E++){let y=e[E];if(0===g){if(y===u&&(m||e.slice(E,E+p)===a)){l.push(e.slice(h,E)),h=E+p;continue}if("/"===y){f=E;continue}}"["===y?g++:"]"===y&&g--}const y=0===l.length?e:e.substring(h),v=y.startsWith("!");return{modifiers:l,hasImportantModifier:v,baseClassName:v?y.substring(1):y,maybePostfixModifierPosition:f&&f>h?f-h:void 0}};return l?e=>l({className:e,parseClassName:parseClassName}):parseClassName},sortModifiers=e=>{if(e.length<=1)return e;const a=[];let l=[];return e.forEach(e=>{"["===e[0]?(a.push(...l.sort(),e),l=[]):l.push(e)}),a.push(...l.sort()),a},Jr=/\s+/;
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function twJoin(){let e,a,l=0,m="";for(;l<arguments.length;)(e=arguments[l++])&&(a=toValue(e))&&(m&&(m+=" "),m+=a);return m}const toValue=e=>{if("string"==typeof e)return e;let a,l="";for(let m=0;m<e.length;m++)e[m]&&(a=toValue(e[m]))&&(l&&(l+=" "),l+=a);return l};function createTailwindMerge(e,...a){let l,m,u,p=function initTailwindMerge(f){const g=a.reduce((e,a)=>a(e),e());return l=(e=>({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),...createClassGroupUtils(e)}))(g),m=l.cache.get,u=l.cache.set,p=tailwindMerge,tailwindMerge(f)};function tailwindMerge(e){const a=m(e);if(a)return a;const p=((e,a)=>{const{parseClassName:l,getClassGroupId:m,getConflictingClassGroupIds:u}=a,p=[],f=e.trim().split(Jr);let g="";for(let h=f.length-1;h>=0;h-=1){const e=f[h],{modifiers:a,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:E}=l(e);let x=Boolean(E),w=m(x?v.substring(0,E):v);if(!w){if(!x){g=e+(g.length>0?" "+g:g);continue}if(w=m(v),!w){g=e+(g.length>0?" "+g:g);continue}x=!1}const b=sortModifiers(a).join(":"),N=y?b+"!":b,_=N+w;if(p.includes(_))continue;p.push(_);const k=u(w,x);for(let l=0;l<k.length;++l){const e=k[l];p.push(N+e)}g=e+(g.length>0?" "+g:g)}return g})(e,l);return u(e,p),p}return function callTailwindMerge(){return p(twJoin.apply(null,arguments))}}const fromTheme=e=>{const themeGetter=a=>a[e]||[];return themeGetter.isThemeGetter=!0,themeGetter},Xr=/^\[(?:([a-z-]+):)?(.+)\]$/i,en=/^\d+\/\d+$/,tn=new Set(["px","full","screen"]),an=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,on=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=e=>isNumber$1(e)||tn.has(e)||en.test(e),isArbitraryLength=e=>getIsArbitraryValue(e,"length",isLengthOnly),isNumber$1=e=>Boolean(e)&&!Number.isNaN(Number(e)),isArbitraryNumber=e=>getIsArbitraryValue(e,"number",isNumber$1),isInteger=e=>Boolean(e)&&Number.isInteger(Number(e)),isPercent=e=>e.endsWith("%")&&isNumber$1(e.slice(0,-1)),isArbitraryValue=e=>Xr.test(e),isTshirtSize=e=>an.test(e),ln=new Set(["length","size","percentage"]),isArbitrarySize=e=>getIsArbitraryValue(e,ln,isNever),isArbitraryPosition=e=>getIsArbitraryValue(e,"position",isNever),mn=new Set(["image","url"]),isArbitraryImage=e=>getIsArbitraryValue(e,mn,isImage),isArbitraryShadow=e=>getIsArbitraryValue(e,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(e,a,l)=>{const m=Xr.exec(e);return!!m&&(m[1]?"string"==typeof a?m[1]===a:a.has(m[1]):l(m[2]))},isLengthOnly=e=>rn.test(e)&&!nn.test(e),isNever=()=>!1,isShadow=e=>sn.test(e),isImage=e=>on.test(e),dn=createTailwindMerge(()=>{const e=fromTheme("colors"),a=fromTheme("spacing"),l=fromTheme("blur"),m=fromTheme("brightness"),u=fromTheme("borderColor"),p=fromTheme("borderRadius"),f=fromTheme("borderSpacing"),g=fromTheme("borderWidth"),h=fromTheme("contrast"),y=fromTheme("grayscale"),v=fromTheme("hueRotate"),E=fromTheme("invert"),x=fromTheme("gap"),w=fromTheme("gradientColorStops"),b=fromTheme("gradientColorStopPositions"),N=fromTheme("inset"),_=fromTheme("margin"),k=fromTheme("opacity"),S=fromTheme("padding"),C=fromTheme("saturate"),R=fromTheme("scale"),A=fromTheme("sepia"),T=fromTheme("skew"),P=fromTheme("space"),D=fromTheme("translate"),getSpacingWithAutoAndArbitrary=()=>["auto",isArbitraryValue,a],getSpacingWithArbitrary=()=>[isArbitraryValue,a],getLengthWithEmptyAndArbitrary=()=>["",isLength,isArbitraryLength],getNumberWithAutoAndArbitrary=()=>["auto",isNumber$1,isArbitraryValue],getZeroAndEmpty=()=>["","0",isArbitraryValue],getNumberAndArbitrary=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:getNumberAndArbitrary(),borderColor:[e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:getSpacingWithArbitrary(),borderWidth:getLengthWithEmptyAndArbitrary(),contrast:getNumberAndArbitrary(),grayscale:getZeroAndEmpty(),hueRotate:getNumberAndArbitrary(),invert:getZeroAndEmpty(),gap:getSpacingWithArbitrary(),gradientColorStops:[e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:getSpacingWithAutoAndArbitrary(),margin:getSpacingWithAutoAndArbitrary(),opacity:getNumberAndArbitrary(),padding:getSpacingWithArbitrary(),saturate:getNumberAndArbitrary(),scale:getNumberAndArbitrary(),sepia:getZeroAndEmpty(),skew:getNumberAndArbitrary(),space:getSpacingWithArbitrary(),translate:getSpacingWithArbitrary()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",isArbitraryValue]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:getSpacingWithAutoAndArbitrary()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:getZeroAndEmpty()}],shrink:[{shrink:getZeroAndEmpty()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":getNumberWithAutoAndArbitrary()}],"col-end":[{"col-end":getNumberWithAutoAndArbitrary()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":getNumberWithAutoAndArbitrary()}],"row-end":[{"row-end":getNumberWithAutoAndArbitrary()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,a]}],"min-w":[{"min-w":[isArbitraryValue,a,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,a,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,a,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,a,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,a,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,a,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:getSpacingWithArbitrary()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[p]}],"rounded-s":[{"rounded-s":[p]}],"rounded-e":[{"rounded-e":[p]}],"rounded-t":[{"rounded-t":[p]}],"rounded-r":[{"rounded-r":[p]}],"rounded-b":[{"rounded-b":[p]}],"rounded-l":[{"rounded-l":[p]}],"rounded-ss":[{"rounded-ss":[p]}],"rounded-se":[{"rounded-se":[p]}],"rounded-ee":[{"rounded-ee":[p]}],"rounded-es":[{"rounded-es":[p]}],"rounded-tl":[{"rounded-tl":[p]}],"rounded-tr":[{"rounded-tr":[p]}],"rounded-br":[{"rounded-br":[p]}],"rounded-bl":[{"rounded-bl":[p]}],"border-w":[{border:[g]}],"border-w-x":[{"border-x":[g]}],"border-w-y":[{"border-y":[g]}],"border-w-s":[{"border-s":[g]}],"border-w-e":[{"border-e":[g]}],"border-w-t":[{"border-t":[g]}],"border-w-r":[{"border-r":[g]}],"border-w-b":[{"border-b":[g]}],"border-w-l":[{"border-l":[g]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[g]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[g]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:getLengthWithEmptyAndArbitrary()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[l]}],brightness:[{brightness:[m]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[y]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[E]}],saturate:[{saturate:[C]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[l]}],"backdrop-brightness":[{"backdrop-brightness":[m]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[y]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[E]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:getNumberAndArbitrary()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:getNumberAndArbitrary()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":getSpacingWithArbitrary()}],"scroll-mx":[{"scroll-mx":getSpacingWithArbitrary()}],"scroll-my":[{"scroll-my":getSpacingWithArbitrary()}],"scroll-ms":[{"scroll-ms":getSpacingWithArbitrary()}],"scroll-me":[{"scroll-me":getSpacingWithArbitrary()}],"scroll-mt":[{"scroll-mt":getSpacingWithArbitrary()}],"scroll-mr":[{"scroll-mr":getSpacingWithArbitrary()}],"scroll-mb":[{"scroll-mb":getSpacingWithArbitrary()}],"scroll-ml":[{"scroll-ml":getSpacingWithArbitrary()}],"scroll-p":[{"scroll-p":getSpacingWithArbitrary()}],"scroll-px":[{"scroll-px":getSpacingWithArbitrary()}],"scroll-py":[{"scroll-py":getSpacingWithArbitrary()}],"scroll-ps":[{"scroll-ps":getSpacingWithArbitrary()}],"scroll-pe":[{"scroll-pe":getSpacingWithArbitrary()}],"scroll-pt":[{"scroll-pt":getSpacingWithArbitrary()}],"scroll-pr":[{"scroll-pr":getSpacingWithArbitrary()}],"scroll-pb":[{"scroll-pb":getSpacingWithArbitrary()}],"scroll-pl":[{"scroll-pl":getSpacingWithArbitrary()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function cn(...e){return dn(clsx(e))}const un=Qt,pn=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Jt,{ref:l,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...a}));pn.displayName=Jt.displayName;const fn=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gn=Me.forwardRef(({className:e,variant:a,...l},m)=>Me.createElement(Xt,{ref:m,className:cn(fn({variant:a}),e),...l}));gn.displayName=Xt.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(aa,{ref:l,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...a})).displayName=aa.displayName;const hn=Me.forwardRef(({className:e,...a},l)=>Me.createElement(ra,{ref:l,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...a},Me.createElement(Gr,{className:"h-4 w-4"})));hn.displayName=ra.displayName;const yn=Me.forwardRef(({className:e,...a},l)=>Me.createElement(ea,{ref:l,className:cn("text-sm font-semibold",e),...a}));yn.displayName=ea.displayName;const vn=Me.forwardRef(({className:e,...a},l)=>Me.createElement(ta,{ref:l,className:cn("text-sm opacity-90",e),...a}));function Toaster$1(){const{toasts:e}=useToast();return React.createElement(un,null,e.map(function({id:e,title:a,description:l,action:m,...u}){return React.createElement(gn,{key:e,...u},React.createElement("div",{className:"grid gap-1"},a&&React.createElement(yn,null,a),l&&React.createElement(vn,null,l)),m,React.createElement(hn,null))}),React.createElement(pn,null))}vn.displayName=ta.displayName;var En=["light","dark"],xn=Me.createContext(void 0),wn={setTheme:e=>{},themes:[]};Me.memo(({forcedTheme:e,storageKey:a,attribute:l,enableSystem:m,enableColorScheme:u,defaultTheme:p,value:f,attrs:g,nonce:h})=>{let y="system"===p,v="class"===l?`var d=document.documentElement,c=d.classList;c.remove(${g.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${l}',s='setAttribute';`,E=u?En.includes(p)&&p?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${p}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",d=(e,a=!1,m=!0)=>{let p=f?f[e]:e,g=a?e+"|| ''":`'${p}'`,h="";return u&&m&&!a&&En.includes(e)&&(h+=`d.style.colorScheme = '${e}';`),"class"===l?h+=a||p?`c.add(${g})`:"null":p&&(h+=`d[s](n,${g})`),h},x=e?`!function(){${v}${d(e)}}()`:m?`!function(){try{${v}var e=localStorage.getItem('${a}');if('system'===e||(!e&&${y})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${d("dark")}}else{${d("light")}}}else if(e){${f?`var x=${JSON.stringify(f)};`:""}${d(f?"x[e]":"e",!0)}}${y?"":"else{"+d(p,!1,!1)+"}"}${E}}catch(e){}}()`:`!function(){try{${v}var e=localStorage.getItem('${a}');if(e){${f?`var x=${JSON.stringify(f)};`:""}${d(f?"x[e]":"e",!0)}}else{${d(p,!1,!1)};}${E}}catch(t){}}();`;return Me.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:x}})});var bn=Array(12).fill(0),It=({visible:e})=>je.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},je.createElement("div",{className:"sonner-spinner"},bn.map((e,a)=>je.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),Nn=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_n=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kn=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sn=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cn=1,Rn=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let a=this.subscribers.indexOf(e);this.subscribers.splice(a,1)}),this.publish=e=>{this.subscribers.forEach(a=>a(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var a;let{message:l,...m}=e,u="number"==typeof(null==e?void 0:e.id)||(null==(a=e.id)?void 0:a.length)>0?e.id:Cn++,p=this.toasts.find(e=>e.id===u),f=void 0===e.dismissible||e.dismissible;return p?this.toasts=this.toasts.map(a=>a.id===u?(this.publish({...a,...e,id:u,title:l}),{...a,...e,id:u,dismissible:f,title:l}):a):this.addToast({title:l,...m,dismissible:f,id:u}),u},this.dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(a=>a({id:e.id,dismiss:!0}))}),this.subscribers.forEach(a=>a({id:e,dismiss:!0})),e),this.message=(e,a)=>this.create({...a,message:e}),this.error=(e,a)=>this.create({...a,message:e,type:"error"}),this.success=(e,a)=>this.create({...a,type:"success",message:e}),this.info=(e,a)=>this.create({...a,type:"info",message:e}),this.warning=(e,a)=>this.create({...a,type:"warning",message:e}),this.loading=(e,a)=>this.create({...a,type:"loading",message:e}),this.promise=(e,a)=>{if(!a)return;let l;void 0!==a.loading&&(l=this.create({...a,promise:e,type:"loading",message:a.loading,description:"function"!=typeof a.description?a.description:void 0}));let m=e instanceof Promise?e:e(),u=void 0!==l;return m.then(async e=>{if(Ot(e)&&!e.ok){u=!1;let m="function"==typeof a.error?await a.error(`HTTP error! status: ${e.status}`):a.error,p="function"==typeof a.description?await a.description(`HTTP error! status: ${e.status}`):a.description;this.create({id:l,type:"error",message:m,description:p})}else if(void 0!==a.success){u=!1;let m="function"==typeof a.success?await a.success(e):a.success,p="function"==typeof a.description?await a.description(e):a.description;this.create({id:l,type:"success",message:m,description:p})}}).catch(async e=>{if(void 0!==a.error){u=!1;let m="function"==typeof a.error?await a.error(e):a.error,p="function"==typeof a.description?await a.description(e):a.description;this.create({id:l,type:"error",message:m,description:p})}}).finally(()=>{var e;u&&(this.dismiss(l),l=void 0),null==(e=a.finally)||e.call(a)}),l},this.custom=(e,a)=>{let l=(null==a?void 0:a.id)||Cn++;return this.create({jsx:e(l),id:l,...a}),l},this.subscribers=[],this.toasts=[]}},Ot=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Kt=(e,a)=>{let l=(null==a?void 0:a.id)||Cn++;return Rn.addToast({title:e,...a,id:l}),l},An=Object.assign(Kt,{success:Rn.success,info:Rn.info,warning:Rn.warning,error:Rn.error,custom:Rn.custom,message:Rn.message,promise:Rn.promise,dismiss:Rn.dismiss,loading:Rn.loading},{getHistory:()=>Rn.toasts});function U(e){return void 0!==e.label}!function ft(e,{insertAt:a}={}){if("undefined"==typeof document)return;let l=document.head||document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css","top"===a&&l.firstChild?l.insertBefore(m,l.firstChild):l.appendChild(m),m.styleSheet?m.styleSheet.cssText=e:m.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Tn=3,Pn=14;function ne(...e){return e.filter(Boolean).join(" ")}var se=e=>{var a,l,m,u,p,f,g,h,y,v;let{invert:E,toast:x,unstyled:w,interacting:b,setHeights:N,visibleToasts:_,heights:k,index:S,toasts:C,expanded:R,removeToast:A,defaultRichColors:T,closeButton:P,style:D,cancelButtonStyle:I,actionButtonStyle:F,className:M="",descriptionClassName:j="",duration:O,position:L,gap:$,loadingIcon:z,expandByDefault:B,classNames:V,icons:H,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:Z,cn:K}=e,[G,Q]=je.useState(!1),[Y,J]=je.useState(!1),[X,ee]=je.useState(!1),[te,ae]=je.useState(!1),[re,oe]=je.useState(0),[le,ie]=je.useState(0),ce=je.useRef(null),me=je.useRef(null),de=0===S,ue=S+1<=_,pe=x.type,fe=!1!==x.dismissible,ge=x.className||"",he=x.descriptionClassName||"",ye=je.useMemo(()=>k.findIndex(e=>e.toastId===x.id)||0,[k,x.id]),ve=je.useMemo(()=>{var e;return null!=(e=x.closeButton)?e:P},[x.closeButton,P]),Ee=je.useMemo(()=>x.duration||O||4e3,[x.duration,O]),xe=je.useRef(0),we=je.useRef(0),be=je.useRef(0),Ne=je.useRef(null),[_e,ke]=L.split("-"),Se=je.useMemo(()=>k.reduce((e,a,l)=>l>=ye?e:e+a.height,0),[k,ye]),Ce=(()=>{let[e,a]=je.useState(document.hidden);return je.useEffect(()=>{let t2=()=>{a(document.hidden)};return document.addEventListener("visibilitychange",t2),()=>window.removeEventListener("visibilitychange",t2)},[]),e})(),Re=x.invert||E,Ae="loading"===pe;we.current=je.useMemo(()=>ye*$+Se,[ye,Se]),je.useEffect(()=>{Q(!0)},[]),je.useLayoutEffect(()=>{if(!G)return;let e=me.current,a=e.style.height;e.style.height="auto";let l=e.getBoundingClientRect().height;e.style.height=a,ie(l),N(e=>e.find(e=>e.toastId===x.id)?e.map(e=>e.toastId===x.id?{...e,height:l}:e):[{toastId:x.id,height:l,position:x.position},...e])},[G,x.title,x.description,N,x.id]);let Pe=je.useCallback(()=>{J(!0),oe(we.current),N(e=>e.filter(e=>e.toastId!==x.id)),setTimeout(()=>{A(x)},200)},[x,A,N,we]);return je.useEffect(()=>{if(x.promise&&"loading"===pe||x.duration===1/0||"loading"===x.type)return;let e,a=Ee;return R||b||Z&&Ce?(()=>{if(be.current<xe.current){let e=(new Date).getTime()-xe.current;a-=e}be.current=(new Date).getTime()})():a!==1/0&&(xe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=x.onAutoClose)||e.call(x,x),Pe()},a)),()=>clearTimeout(e)},[R,b,B,x,Ee,Pe,x.promise,pe,Z,Ce]),je.useEffect(()=>{let e=me.current;if(e){let a=e.getBoundingClientRect().height;return ie(a),N(e=>[{toastId:x.id,height:a,position:x.position},...e]),()=>N(e=>e.filter(e=>e.toastId!==x.id))}},[N,x.id]),je.useEffect(()=>{x.delete&&Pe()},[Pe,x.delete]),je.createElement("li",{"aria-live":x.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:me,className:K(M,ge,null==V?void 0:V.toast,null==(a=null==x?void 0:x.classNames)?void 0:a.toast,null==V?void 0:V.default,null==V?void 0:V[pe],null==(l=null==x?void 0:x.classNames)?void 0:l[pe]),"data-sonner-toast":"","data-rich-colors":null!=(m=x.richColors)?m:T,"data-styled":!(x.jsx||x.unstyled||w),"data-mounted":G,"data-promise":!!x.promise,"data-removed":Y,"data-visible":ue,"data-y-position":_e,"data-x-position":ke,"data-index":S,"data-front":de,"data-swiping":X,"data-dismissible":fe,"data-type":pe,"data-invert":Re,"data-swipe-out":te,"data-expanded":!!(R||B&&G),style:{"--index":S,"--toasts-before":S,"--z-index":C.length-S,"--offset":`${Y?re:we.current}px`,"--initial-height":B?"auto":`${le}px`,...D,...x.style},onPointerDown:e=>{Ae||!fe||(ce.current=new Date,oe(we.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(ee(!0),Ne.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,a,l,m;if(te||!fe)return;Ne.current=null;let u=Number((null==(e=me.current)?void 0:e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),p=(new Date).getTime()-(null==(a=ce.current)?void 0:a.getTime()),f=Math.abs(u)/p;if(Math.abs(u)>=20||f>.11)return oe(we.current),null==(l=x.onDismiss)||l.call(x,x),Pe(),void ae(!0);null==(m=me.current)||m.style.setProperty("--swipe-amount","0px"),ee(!1)},onPointerMove:e=>{var a;if(!Ne.current||!fe)return;let l=e.clientY-Ne.current.y,m=e.clientX-Ne.current.x,u=("top"===_e?Math.min:Math.max)(0,l),p="touch"===e.pointerType?10:2;Math.abs(u)>p?null==(a=me.current)||a.style.setProperty("--swipe-amount",`${l}px`):Math.abs(m)>p&&(Ne.current=null)}},ve&&!x.jsx?je.createElement("button",{"aria-label":W,"data-disabled":Ae,"data-close-button":!0,onClick:Ae||!fe?()=>{}:()=>{var e;Pe(),null==(e=x.onDismiss)||e.call(x,x)},className:K(null==V?void 0:V.closeButton,null==(u=null==x?void 0:x.classNames)?void 0:u.closeButton)},je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),je.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,x.jsx||je.isValidElement(x.title)?x.jsx||x.title:je.createElement(je.Fragment,null,pe||x.icon||x.promise?je.createElement("div",{"data-icon":"",className:K(null==V?void 0:V.icon,null==(p=null==x?void 0:x.classNames)?void 0:p.icon)},x.promise||"loading"===x.type&&!x.icon?x.icon||function Yt(){return null!=H&&H.loading?je.createElement("div",{className:"sonner-loader","data-visible":"loading"===pe},H.loading):z?je.createElement("div",{className:"sonner-loader","data-visible":"loading"===pe},z):je.createElement(It,{visible:"loading"===pe})}():null,"loading"!==x.type?x.icon||(null==H?void 0:H[pe])||(e=>{switch(e){case"success":return Nn;case"info":return kn;case"warning":return _n;case"error":return Sn;default:return null}})(pe):null):null,je.createElement("div",{"data-content":"",className:K(null==V?void 0:V.content,null==(f=null==x?void 0:x.classNames)?void 0:f.content)},je.createElement("div",{"data-title":"",className:K(null==V?void 0:V.title,null==(g=null==x?void 0:x.classNames)?void 0:g.title)},x.title),x.description?je.createElement("div",{"data-description":"",className:K(j,he,null==V?void 0:V.description,null==(h=null==x?void 0:x.classNames)?void 0:h.description)},x.description):null),je.isValidElement(x.cancel)?x.cancel:x.cancel&&U(x.cancel)?je.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||I,onClick:e=>{var a,l;U(x.cancel)&&fe&&(null==(l=(a=x.cancel).onClick)||l.call(a,e),Pe())},className:K(null==V?void 0:V.cancelButton,null==(y=null==x?void 0:x.classNames)?void 0:y.cancelButton)},x.cancel.label):null,je.isValidElement(x.action)?x.action:x.action&&U(x.action)?je.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||F,onClick:e=>{var a,l;U(x.action)&&(e.defaultPrevented||(null==(l=(a=x.action).onClick)||l.call(a,e),Pe()))},className:K(null==V?void 0:V.actionButton,null==(v=null==x?void 0:x.classNames)?void 0:v.actionButton)},x.action.label):null))};function Ht(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}var Te=e=>{let{invert:a,position:l="bottom-right",hotkey:m=["altKey","KeyT"],expand:u,closeButton:p,className:f,offset:g,theme:h="light",richColors:y,duration:v,style:E,visibleToasts:x=Tn,toastOptions:w,dir:b=Ht(),gap:N=Pn,loadingIcon:_,icons:k,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:C,cn:R=ne}=e,[A,T]=je.useState([]),P=je.useMemo(()=>Array.from(new Set([l].concat(A.filter(e=>e.position).map(e=>e.position)))),[A,l]),[D,I]=je.useState([]),[F,M]=je.useState(!1),[j,O]=je.useState(!1),[L,$]=je.useState("system"!==h?h:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=je.useRef(null),B=m.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=je.useRef(null),H=je.useRef(!1),W=je.useCallback(e=>{var a;null!=(a=A.find(a=>a.id===e.id))&&a.delete||Rn.dismiss(e.id),T(a=>a.filter(({id:a})=>a!==e.id))},[A]);return je.useEffect(()=>Rn.subscribe(e=>{e.dismiss?T(a=>a.map(a=>a.id===e.id?{...a,delete:!0}:a)):setTimeout(()=>{Oe.flushSync(()=>{T(a=>{let l=a.findIndex(a=>a.id===e.id);return-1!==l?[...a.slice(0,l),{...a[l],...e},...a.slice(l+1)]:[e,...a]})})})}),[]),je.useEffect(()=>{"system"===h?("system"===h&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{$(e?"dark":"light")})):$(h)},[h]),je.useEffect(()=>{A.length<=1&&M(!1)},[A]),je.useEffect(()=>{let c=e=>{var a,l;m.every(a=>e[a]||e.code===a)&&(M(!0),null==(a=z.current)||a.focus()),"Escape"===e.code&&(document.activeElement===z.current||null!=(l=z.current)&&l.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[m]),je.useEffect(()=>{if(z.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,H.current=!1)}},[z.current]),A.length?je.createElement("section",{"aria-label":`${S} ${B}`,tabIndex:-1},P.map((e,l)=>{var m;let[h,S]=e.split("-");return je.createElement("ol",{key:e,dir:"auto"===b?Ht():b,tabIndex:-1,ref:z,className:f,"data-sonner-toaster":!0,"data-theme":L,"data-y-position":h,"data-x-position":S,style:{"--front-toast-height":`${(null==(m=D[0])?void 0:m.height)||0}px`,"--offset":"number"==typeof g?`${g}px`:g||"32px","--width":"356px","--gap":`${N}px`,...E},onBlur:e=>{H.current&&!e.currentTarget.contains(e.relatedTarget)&&(H.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||H.current||(H.current=!0,V.current=e.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{j||M(!1)},onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||O(!0)},onPointerUp:()=>O(!1)},A.filter(a=>!a.position&&0===l||a.position===e).map((l,m)=>{var f,g;return je.createElement(se,{key:l.id,icons:k,index:m,toast:l,defaultRichColors:y,duration:null!=(f=null==w?void 0:w.duration)?f:v,className:null==w?void 0:w.className,descriptionClassName:null==w?void 0:w.descriptionClassName,invert:a,visibleToasts:x,closeButton:null!=(g=null==w?void 0:w.closeButton)?g:p,interacting:j,position:e,style:null==w?void 0:w.style,unstyled:null==w?void 0:w.unstyled,classNames:null==w?void 0:w.classNames,cancelButtonStyle:null==w?void 0:w.cancelButtonStyle,actionButtonStyle:null==w?void 0:w.actionButtonStyle,removeToast:W,toasts:A.filter(e=>e.position==l.position),heights:D.filter(e=>e.position==l.position),setHeights:I,expandByDefault:u,gap:N,loadingIcon:_,expanded:F,pauseWhenPageIsHidden:C,cn:R})}))})):null};const Toaster=({...e})=>{const{theme:a="system"}=null!=(l=Me.useContext(xn))?l:wn;var l;return React.createElement(Te,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Dn=Le["useId".toString()]||(()=>{}),In=0;function useId$1(e){const[a,l]=Me.useState(Dn());return gt(()=>{l(e=>e??String(In++))},[e]),a?`radix-${a}`:""}const Fn=["top","right","bottom","left"],Mn=Math.min,jn=Math.max,On=Math.round,Ln=Math.floor,createCoords=e=>({x:e,y:e}),$n={left:"right",right:"left",bottom:"top",top:"bottom"},Un={start:"end",end:"start"};function clamp$2(e,a,l){return jn(e,Mn(a,l))}function evaluate(e,a){return"function"==typeof e?e(a):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return"x"===e?"y":"x"}function getAxisLength(e){return"y"===e?"height":"width"}function getSideAxis(e){return["top","bottom"].includes(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,e=>Un[e])}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,e=>$n[e])}function getPaddingObject(e){return"number"!=typeof e?function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){const{x:a,y:l,width:m,height:u}=e;return{width:m,height:u,top:l,left:a,right:a+m,bottom:l+u,x:a,y:l}}function computeCoordsFromPlacement(e,a,l){let{reference:m,floating:u}=e;const p=getSideAxis(a),f=getAlignmentAxis(a),g=getAxisLength(f),h=getSide(a),y="y"===p,v=m.x+m.width/2-u.width/2,E=m.y+m.height/2-u.height/2,x=m[g]/2-u[g]/2;let w;switch(h){case"top":w={x:v,y:m.y-u.height};break;case"bottom":w={x:v,y:m.y+m.height};break;case"right":w={x:m.x+m.width,y:E};break;case"left":w={x:m.x-u.width,y:E};break;default:w={x:m.x,y:m.y}}switch(getAlignment(a)){case"start":w[f]-=x*(l&&y?-1:1);break;case"end":w[f]+=x*(l&&y?-1:1)}return w}async function detectOverflow(e,a){var l;void 0===a&&(a={});const{x:m,y:u,platform:p,rects:f,elements:g,strategy:h}=e,{boundary:y="clippingAncestors",rootBoundary:v="viewport",elementContext:E="floating",altBoundary:x=!1,padding:w=0}=evaluate(a,e),b=getPaddingObject(w),N=g[x?"floating"===E?"reference":"floating":E],_=rectToClientRect(await p.getClippingRect({element:null==(l=await(null==p.isElement?void 0:p.isElement(N)))||l?N:N.contextElement||await(null==p.getDocumentElement?void 0:p.getDocumentElement(g.floating)),boundary:y,rootBoundary:v,strategy:h})),k="floating"===E?{x:m,y:u,width:f.floating.width,height:f.floating.height}:f.reference,S=await(null==p.getOffsetParent?void 0:p.getOffsetParent(g.floating)),C=await(null==p.isElement?void 0:p.isElement(S))&&await(null==p.getScale?void 0:p.getScale(S))||{x:1,y:1},R=rectToClientRect(p.convertOffsetParentRelativeRectToViewportRelativeRect?await p.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:k,offsetParent:S,strategy:h}):k);return{top:(_.top-R.top+b.top)/C.y,bottom:(R.bottom-_.bottom+b.bottom)/C.y,left:(_.left-R.left+b.left)/C.x,right:(R.right-_.right+b.right)/C.x}}function getSideOffsets(e,a){return{top:e.top-a.height,right:e.right-a.width,bottom:e.bottom-a.height,left:e.left-a.width}}function isAnySideFullyClipped(e){return Fn.some(a=>e[a]>=0)}function hasWindow(){return"undefined"!=typeof window}function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var a;return(null==e||null==(a=e.ownerDocument)?void 0:a.defaultView)||window}function getDocumentElement(e){var a;return null==(a=(isNode(e)?e.ownerDocument:e.document)||window.document)?void 0:a.documentElement}function isNode(e){return!!hasWindow()&&(e instanceof Node||e instanceof getWindow(e).Node)}function isElement(e){return!!hasWindow()&&(e instanceof Element||e instanceof getWindow(e).Element)}function isHTMLElement$1(e){return!!hasWindow()&&(e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement)}function isShadowRoot(e){return!(!hasWindow()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot)}function isOverflowElement(e){const{overflow:a,overflowX:l,overflowY:m,display:u}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(a+m+l)&&!["inline","contents"].includes(u)}function isTableElement(e){return["table","td","th"].includes(getNodeName(e))}function isTopLayer(e){return[":popover-open",":modal"].some(a=>{try{return e.matches(a)}catch(l){return!1}})}function isContainingBlock(e){const a=isWebKit(),l=isElement(e)?getComputedStyle$1(e):e;return"none"!==l.transform||"none"!==l.perspective||!!l.containerType&&"normal"!==l.containerType||!a&&!!l.backdropFilter&&"none"!==l.backdropFilter||!a&&!!l.filter&&"none"!==l.filter||["transform","perspective","filter"].some(e=>(l.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(l.contain||"").includes(e))}function isWebKit(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode(e){if("html"===getNodeName(e))return e;const a=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(a)?a.host:a}function getNearestOverflowAncestor(e){const a=getParentNode(e);return isLastTraversableNode(a)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement$1(a)&&isOverflowElement(a)?a:getNearestOverflowAncestor(a)}function getOverflowAncestors(e,a,l){var m;void 0===a&&(a=[]),void 0===l&&(l=!0);const u=getNearestOverflowAncestor(e),p=u===(null==(m=e.ownerDocument)?void 0:m.body),f=getWindow(u);if(p){const e=getFrameElement(f);return a.concat(f,f.visualViewport||[],isOverflowElement(u)?u:[],e&&l?getOverflowAncestors(e):[])}return a.concat(u,getOverflowAncestors(u,[],l))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function getCssDimensions(e){const a=getComputedStyle$1(e);let l=parseFloat(a.width)||0,m=parseFloat(a.height)||0;const u=isHTMLElement$1(e),p=u?e.offsetWidth:l,f=u?e.offsetHeight:m,g=On(l)!==p||On(m)!==f;return g&&(l=p,m=f),{width:l,height:m,$:g}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale(e){const a=unwrapElement(e);if(!isHTMLElement$1(a))return createCoords(1);const l=a.getBoundingClientRect(),{width:m,height:u,$:p}=getCssDimensions(a);let f=(p?On(l.width):l.width)/m,g=(p?On(l.height):l.height)/u;return f&&Number.isFinite(f)||(f=1),g&&Number.isFinite(g)||(g=1),{x:f,y:g}}const zn=createCoords(0);function getVisualOffsets(e){const a=getWindow(e);return isWebKit()&&a.visualViewport?{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}:zn}function getBoundingClientRect(e,a,l,m){void 0===a&&(a=!1),void 0===l&&(l=!1);const u=e.getBoundingClientRect(),p=unwrapElement(e);let f=createCoords(1);a&&(m?isElement(m)&&(f=getScale(m)):f=getScale(e));const g=function shouldAddVisualOffsets(e,a,l){return void 0===a&&(a=!1),!(!l||a&&l!==getWindow(e))&&a}(p,l,m)?getVisualOffsets(p):createCoords(0);let h=(u.left+g.x)/f.x,y=(u.top+g.y)/f.y,v=u.width/f.x,E=u.height/f.y;if(p){const e=getWindow(p),a=m&&isElement(m)?getWindow(m):m;let l=e,u=getFrameElement(l);for(;u&&m&&a!==l;){const e=getScale(u),a=u.getBoundingClientRect(),m=getComputedStyle$1(u),p=a.left+(u.clientLeft+parseFloat(m.paddingLeft))*e.x,f=a.top+(u.clientTop+parseFloat(m.paddingTop))*e.y;h*=e.x,y*=e.y,v*=e.x,E*=e.y,h+=p,y+=f,l=getWindow(u),u=getFrameElement(l)}}return rectToClientRect({width:v,height:E,x:h,y:y})}function getWindowScrollBarX(e,a){const l=getNodeScroll(e).scrollLeft;return a?a.left+l:getBoundingClientRect(getDocumentElement(e)).left+l}function getClientRectFromClippingAncestor(e,a,l){let m;if("viewport"===a)m=function getViewportRect(e,a){const l=getWindow(e),m=getDocumentElement(e),u=l.visualViewport;let p=m.clientWidth,f=m.clientHeight,g=0,h=0;if(u){p=u.width,f=u.height;const e=isWebKit();(!e||e&&"fixed"===a)&&(g=u.offsetLeft,h=u.offsetTop)}return{width:p,height:f,x:g,y:h}}(e,l);else if("document"===a)m=function getDocumentRect(e){const a=getDocumentElement(e),l=getNodeScroll(e),m=e.ownerDocument.body,u=jn(a.scrollWidth,a.clientWidth,m.scrollWidth,m.clientWidth),p=jn(a.scrollHeight,a.clientHeight,m.scrollHeight,m.clientHeight);let f=-l.scrollLeft+getWindowScrollBarX(e);const g=-l.scrollTop;return"rtl"===getComputedStyle$1(m).direction&&(f+=jn(a.clientWidth,m.clientWidth)-u),{width:u,height:p,x:f,y:g}}(getDocumentElement(e));else if(isElement(a))m=function getInnerBoundingClientRect(e,a){const l=getBoundingClientRect(e,!0,"fixed"===a),m=l.top+e.clientTop,u=l.left+e.clientLeft,p=isHTMLElement$1(e)?getScale(e):createCoords(1);return{width:e.clientWidth*p.x,height:e.clientHeight*p.y,x:u*p.x,y:m*p.y}}(a,l);else{const l=getVisualOffsets(e);m={...a,x:a.x-l.x,y:a.y-l.y}}return rectToClientRect(m)}function hasFixedPositionAncestor(e,a){const l=getParentNode(e);return!(l===a||!isElement(l)||isLastTraversableNode(l))&&("fixed"===getComputedStyle$1(l).position||hasFixedPositionAncestor(l,a))}function getRectRelativeToOffsetParent(e,a,l){const m=isHTMLElement$1(a),u=getDocumentElement(a),p="fixed"===l,f=getBoundingClientRect(e,!0,p,a);let g={scrollLeft:0,scrollTop:0};const h=createCoords(0);if(m||!m&&!p)if(("body"!==getNodeName(a)||isOverflowElement(u))&&(g=getNodeScroll(a)),m){const e=getBoundingClientRect(a,!0,p,a);h.x=e.x+a.clientLeft,h.y=e.y+a.clientTop}else u&&(h.x=getWindowScrollBarX(u));let y=0,v=0;if(u&&!m&&!p){const e=u.getBoundingClientRect();v=e.top+g.scrollTop,y=e.left+g.scrollLeft-getWindowScrollBarX(u,e)}return{x:f.left+g.scrollLeft-h.x-y,y:f.top+g.scrollTop-h.y-v,width:f.width,height:f.height}}function isStaticPositioned(e){return"static"===getComputedStyle$1(e).position}function getTrueOffsetParent(e,a){if(!isHTMLElement$1(e)||"fixed"===getComputedStyle$1(e).position)return null;if(a)return a(e);let l=e.offsetParent;return getDocumentElement(e)===l&&(l=l.ownerDocument.body),l}function getOffsetParent(e,a){const l=getWindow(e);if(isTopLayer(e))return l;if(!isHTMLElement$1(e)){let a=getParentNode(e);for(;a&&!isLastTraversableNode(a);){if(isElement(a)&&!isStaticPositioned(a))return a;a=getParentNode(a)}return l}let m=getTrueOffsetParent(e,a);for(;m&&isTableElement(m)&&isStaticPositioned(m);)m=getTrueOffsetParent(m,a);return m&&isLastTraversableNode(m)&&isStaticPositioned(m)&&!isContainingBlock(m)?l:m||function getContainingBlock(e){let a=getParentNode(e);for(;isHTMLElement$1(a)&&!isLastTraversableNode(a);){if(isContainingBlock(a))return a;if(isTopLayer(a))return null;a=getParentNode(a)}return null}(e)||l}const Bn={convertOffsetParentRelativeRectToViewportRelativeRect:function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:a,rect:l,offsetParent:m,strategy:u}=e;const p="fixed"===u,f=getDocumentElement(m),g=!!a&&isTopLayer(a.floating);if(m===f||g&&p)return l;let h={scrollLeft:0,scrollTop:0},y=createCoords(1);const v=createCoords(0),E=isHTMLElement$1(m);if((E||!E&&!p)&&(("body"!==getNodeName(m)||isOverflowElement(f))&&(h=getNodeScroll(m)),isHTMLElement$1(m))){const e=getBoundingClientRect(m);y=getScale(m),v.x=e.x+m.clientLeft,v.y=e.y+m.clientTop}return{width:l.width*y.x,height:l.height*y.y,x:l.x*y.x-h.scrollLeft*y.x+v.x,y:l.y*y.y-h.scrollTop*y.y+v.y}},getDocumentElement:getDocumentElement,getClippingRect:function getClippingRect(e){let{element:a,boundary:l,rootBoundary:m,strategy:u}=e;const p=[..."clippingAncestors"===l?isTopLayer(a)?[]:function getClippingElementAncestors(e,a){const l=a.get(e);if(l)return l;let m=getOverflowAncestors(e,[],!1).filter(e=>isElement(e)&&"body"!==getNodeName(e)),u=null;const p="fixed"===getComputedStyle$1(e).position;let f=p?getParentNode(e):e;for(;isElement(f)&&!isLastTraversableNode(f);){const a=getComputedStyle$1(f),l=isContainingBlock(f);l||"fixed"!==a.position||(u=null),(p?!l&&!u:!l&&"static"===a.position&&u&&["absolute","fixed"].includes(u.position)||isOverflowElement(f)&&!l&&hasFixedPositionAncestor(e,f))?m=m.filter(e=>e!==f):u=a,f=getParentNode(f)}return a.set(e,m),m}(a,this._c):[].concat(l),m],f=p[0],g=p.reduce((e,l)=>{const m=getClientRectFromClippingAncestor(a,l,u);return e.top=jn(m.top,e.top),e.right=Mn(m.right,e.right),e.bottom=Mn(m.bottom,e.bottom),e.left=jn(m.left,e.left),e},getClientRectFromClippingAncestor(a,f,u));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}},getOffsetParent:getOffsetParent,getElementRects:async function(e){const a=this.getOffsetParent||getOffsetParent,l=this.getDimensions,m=await l(e.floating);return{reference:getRectRelativeToOffsetParent(e.reference,await a(e.floating),e.strategy),floating:{x:0,y:0,width:m.width,height:m.height}}},getClientRects:function getClientRects(e){return Array.from(e.getClientRects())},getDimensions:function getDimensions(e){const{width:a,height:l}=getCssDimensions(e);return{width:a,height:l}},getScale:getScale,isElement:isElement,isRTL:function isRTL(e){return"rtl"===getComputedStyle$1(e).direction}};function autoUpdate(e,a,l,m){void 0===m&&(m={});const{ancestorScroll:u=!0,ancestorResize:p=!0,elementResize:f="function"==typeof ResizeObserver,layoutShift:g="function"==typeof IntersectionObserver,animationFrame:h=!1}=m,y=unwrapElement(e),v=u||p?[...y?getOverflowAncestors(y):[],...getOverflowAncestors(a)]:[];v.forEach(e=>{u&&e.addEventListener("scroll",l,{passive:!0}),p&&e.addEventListener("resize",l)});const E=y&&g?function observeMove(e,a){let l,m=null;const u=getDocumentElement(e);function cleanup(){var e;clearTimeout(l),null==(e=m)||e.disconnect(),m=null}return function refresh(p,f){void 0===p&&(p=!1),void 0===f&&(f=1),cleanup();const{left:g,top:h,width:y,height:v}=e.getBoundingClientRect();if(p||a(),!y||!v)return;const E={rootMargin:-Ln(h)+"px "+-Ln(u.clientWidth-(g+y))+"px "+-Ln(u.clientHeight-(h+v))+"px "+-Ln(g)+"px",threshold:jn(0,Mn(1,f))||1};let x=!0;function handleObserve(e){const a=e[0].intersectionRatio;if(a!==f){if(!x)return refresh();a?refresh(!1,a):l=setTimeout(()=>{refresh(!1,1e-7)},1e3)}x=!1}try{m=new IntersectionObserver(handleObserve,{...E,root:u.ownerDocument})}catch(w){m=new IntersectionObserver(handleObserve,E)}m.observe(e)}(!0),cleanup}(y,l):null;let x,w=-1,b=null;f&&(b=new ResizeObserver(e=>{let[m]=e;m&&m.target===y&&b&&(b.unobserve(a),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var e;null==(e=b)||e.observe(a)})),l()}),y&&!h&&b.observe(y),b.observe(a));let N=h?getBoundingClientRect(e):null;return h&&function frameLoop(){const a=getBoundingClientRect(e);!N||a.x===N.x&&a.y===N.y&&a.width===N.width&&a.height===N.height||l();N=a,x=requestAnimationFrame(frameLoop)}(),l(),()=>{var e;v.forEach(e=>{u&&e.removeEventListener("scroll",l),p&&e.removeEventListener("resize",l)}),null==E||E(),null==(e=b)||e.disconnect(),b=null,h&&cancelAnimationFrame(x)}}const offset$1=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(a){var l,m;const{x:u,y:p,placement:f,middlewareData:g}=a,h=await async function convertValueToCoords(e,a){const{placement:l,platform:m,elements:u}=e,p=await(null==m.isRTL?void 0:m.isRTL(u.floating)),f=getSide(l),g=getAlignment(l),h="y"===getSideAxis(l),y=["left","top"].includes(f)?-1:1,v=p&&h?-1:1,E=evaluate(a,e);let{mainAxis:x,crossAxis:w,alignmentAxis:b}="number"==typeof E?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return g&&"number"==typeof b&&(w="end"===g?-1*b:b),h?{x:w*v,y:x*y}:{x:x*y,y:w*v}}(a,e);return f===(null==(l=g.offset)?void 0:l.placement)&&null!=(m=g.arrow)&&m.alignmentOffset?{}:{x:u+h.x,y:p+h.y,data:{...h,placement:f}}}}},shift$1=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(a){const{x:l,y:m,placement:u}=a,{mainAxis:p=!0,crossAxis:f=!1,limiter:g={fn:e=>{let{x:a,y:l}=e;return{x:a,y:l}}},...h}=evaluate(e,a),y={x:l,y:m},v=await detectOverflow(a,h),E=getSideAxis(getSide(u)),x=getOppositeAxis(E);let w=y[x],b=y[E];if(p){const e="y"===x?"bottom":"right";w=clamp$2(w+v["y"===x?"top":"left"],w,w-v[e])}if(f){const e="y"===E?"bottom":"right";b=clamp$2(b+v["y"===E?"top":"left"],b,b-v[e])}const N=g.fn({...a,[x]:w,[E]:b});return{...N,data:{x:N.x-l,y:N.y-m,enabled:{[x]:p,[E]:f}}}}}},flip$1=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(a){var l,m;const{placement:u,middlewareData:p,rects:f,initialPlacement:g,platform:h,elements:y}=a,{mainAxis:v=!0,crossAxis:E=!0,fallbackPlacements:x,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:N=!0,..._}=evaluate(e,a);if(null!=(l=p.arrow)&&l.alignmentOffset)return{};const k=getSide(u),S=getSideAxis(g),C=getSide(g)===g,R=await(null==h.isRTL?void 0:h.isRTL(y.floating)),A=x||(C||!N?[getOppositePlacement(g)]:function getExpandedPlacements(e){const a=getOppositePlacement(e);return[getOppositeAlignmentPlacement(e),a,getOppositeAlignmentPlacement(a)]}(g)),T="none"!==b;!x&&T&&A.push(...function getOppositeAxisPlacements(e,a,l,m){const u=getAlignment(e);let p=function getSideList(e,a,l){const m=["left","right"],u=["right","left"],p=["top","bottom"],f=["bottom","top"];switch(e){case"top":case"bottom":return l?a?u:m:a?m:u;case"left":case"right":return a?p:f;default:return[]}}(getSide(e),"start"===l,m);return u&&(p=p.map(e=>e+"-"+u),a&&(p=p.concat(p.map(getOppositeAlignmentPlacement)))),p}(g,N,b,R));const P=[g,...A],D=await detectOverflow(a,_),I=[];let F=(null==(m=p.flip)?void 0:m.overflows)||[];if(v&&I.push(D[k]),E){const e=function getAlignmentSides(e,a,l){void 0===l&&(l=!1);const m=getAlignment(e),u=getAlignmentAxis(e),p=getAxisLength(u);let f="x"===u?m===(l?"end":"start")?"right":"left":"start"===m?"bottom":"top";return a.reference[p]>a.floating[p]&&(f=getOppositePlacement(f)),[f,getOppositePlacement(f)]}(u,f,R);I.push(D[e[0]],D[e[1]])}if(F=[...F,{placement:u,overflows:I}],!I.every(e=>e<=0)){var M,j;const e=((null==(M=p.flip)?void 0:M.index)||0)+1,a=P[e];if(a)return{data:{index:e,overflows:F},reset:{placement:a}};let l=null==(j=F.filter(e=>e.overflows[0]<=0).sort((e,a)=>e.overflows[1]-a.overflows[1])[0])?void 0:j.placement;if(!l)switch(w){case"bestFit":{var O;const e=null==(O=F.filter(e=>{if(T){const a=getSideAxis(e.placement);return a===S||"y"===a}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,a)=>e+a,0)]).sort((e,a)=>e[1]-a[1])[0])?void 0:O[0];e&&(l=e);break}case"initialPlacement":l=g}if(u!==l)return{reset:{placement:l}}}return{}}}},size$1=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(a){var l,m;const{placement:u,rects:p,platform:f,elements:g}=a,{apply:h=()=>{},...y}=evaluate(e,a),v=await detectOverflow(a,y),E=getSide(u),x=getAlignment(u),w="y"===getSideAxis(u),{width:b,height:N}=p.floating;let _,k;"top"===E||"bottom"===E?(_=E,k=x===(await(null==f.isRTL?void 0:f.isRTL(g.floating))?"start":"end")?"left":"right"):(k=E,_="end"===x?"top":"bottom");const S=N-v.top-v.bottom,C=b-v.left-v.right,R=Mn(N-v[_],S),A=Mn(b-v[k],C),T=!a.middlewareData.shift;let P=R,D=A;if(null!=(l=a.middlewareData.shift)&&l.enabled.x&&(D=C),null!=(m=a.middlewareData.shift)&&m.enabled.y&&(P=S),T&&!x){const e=jn(v.left,0),a=jn(v.right,0),l=jn(v.top,0),m=jn(v.bottom,0);w?D=b-2*(0!==e||0!==a?e+a:jn(v.left,v.right)):P=N-2*(0!==l||0!==m?l+m:jn(v.top,v.bottom))}await h({...a,availableWidth:D,availableHeight:P});const I=await f.getDimensions(g.floating);return b!==I.width||N!==I.height?{reset:{rects:!0}}:{}}}},hide$1=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(a){const{rects:l}=a,{strategy:m="referenceHidden",...u}=evaluate(e,a);switch(m){case"referenceHidden":{const e=getSideOffsets(await detectOverflow(a,{...u,elementContext:"reference"}),l.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:isAnySideFullyClipped(e)}}}case"escaped":{const e=getSideOffsets(await detectOverflow(a,{...u,altBoundary:!0}),l.floating);return{data:{escapedOffsets:e,escaped:isAnySideFullyClipped(e)}}}default:return{}}}}},arrow$2=e=>({name:"arrow",options:e,async fn(a){const{x:l,y:m,placement:u,rects:p,platform:f,elements:g,middlewareData:h}=a,{element:y,padding:v=0}=evaluate(e,a)||{};if(null==y)return{};const E=getPaddingObject(v),x={x:l,y:m},w=getAlignmentAxis(u),b=getAxisLength(w),N=await f.getDimensions(y),_="y"===w,k=_?"top":"left",S=_?"bottom":"right",C=_?"clientHeight":"clientWidth",R=p.reference[b]+p.reference[w]-x[w]-p.floating[b],A=x[w]-p.reference[w],T=await(null==f.getOffsetParent?void 0:f.getOffsetParent(y));let P=T?T[C]:0;P&&await(null==f.isElement?void 0:f.isElement(T))||(P=g.floating[C]||p.floating[b]);const D=R/2-A/2,I=P/2-N[b]/2-1,F=Mn(E[k],I),M=Mn(E[S],I),j=F,O=P-N[b]-M,L=P/2-N[b]/2+D,$=clamp$2(j,L,O),z=!h.arrow&&null!=getAlignment(u)&&L!==$&&p.reference[b]/2-(L<j?F:M)-N[b]/2<0,B=z?L<j?L-j:L-O:0;return{[w]:x[w]+B,data:{[w]:$,centerOffset:L-$-B,...z&&{alignmentOffset:B}},reset:z}}}),limitShift$1=function(e){return void 0===e&&(e={}),{options:e,fn(a){const{x:l,y:m,placement:u,rects:p,middlewareData:f}=a,{offset:g=0,mainAxis:h=!0,crossAxis:y=!0}=evaluate(e,a),v={x:l,y:m},E=getSideAxis(u),x=getOppositeAxis(E);let w=v[x],b=v[E];const N=evaluate(g,a),_="number"==typeof N?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(h){const e="y"===x?"height":"width",a=p.reference[x]-p.floating[e]+_.mainAxis,l=p.reference[x]+p.reference[e]-_.mainAxis;w<a?w=a:w>l&&(w=l)}if(y){var k,S;const e="y"===x?"width":"height",a=["top","left"].includes(getSide(u)),l=p.reference[E]-p.floating[e]+(a&&(null==(k=f.offset)?void 0:k[E])||0)+(a?0:_.crossAxis),m=p.reference[E]+p.reference[e]+(a?0:(null==(S=f.offset)?void 0:S[E])||0)-(a?_.crossAxis:0);b<l?b=l:b>m&&(b=m)}return{[x]:w,[E]:b}}}},computePosition=(e,a,l)=>{const m=new Map,u={platform:Bn,...l},p={...u.platform,_c:m};return(async(e,a,l)=>{const{placement:m="bottom",strategy:u="absolute",middleware:p=[],platform:f}=l,g=p.filter(Boolean),h=await(null==f.isRTL?void 0:f.isRTL(a));let y=await f.getElementRects({reference:e,floating:a,strategy:u}),{x:v,y:E}=computeCoordsFromPlacement(y,m,h),x=m,w={},b=0;for(let N=0;N<g.length;N++){const{name:l,fn:p}=g[N],{x:_,y:k,data:S,reset:C}=await p({x:v,y:E,initialPlacement:m,placement:x,strategy:u,middlewareData:w,rects:y,platform:f,elements:{reference:e,floating:a}});v=null!=_?_:v,E=null!=k?k:E,w={...w,[l]:{...w[l],...S}},C&&b<=50&&(b++,"object"==typeof C&&(C.placement&&(x=C.placement),C.rects&&(y=!0===C.rects?await f.getElementRects({reference:e,floating:a,strategy:u}):C.rects),({x:v,y:E}=computeCoordsFromPlacement(y,x,h))),N=-1)}return{x:v,y:E,placement:x,strategy:u,middlewareData:w}})(e,a,{...u,platform:p})};var qn="undefined"!=typeof document?Me.useLayoutEffect:Me.useEffect;function deepEqual$1(e,a){if(e===a)return!0;if(typeof e!=typeof a)return!1;if("function"==typeof e&&e.toString()===a.toString())return!0;let l,m,u;if(e&&a&&"object"==typeof e){if(Array.isArray(e)){if(l=e.length,l!==a.length)return!1;for(m=l;0!==m--;)if(!deepEqual$1(e[m],a[m]))return!1;return!0}if(u=Object.keys(e),l=u.length,l!==Object.keys(a).length)return!1;for(m=l;0!==m--;)if(!{}.hasOwnProperty.call(a,u[m]))return!1;for(m=l;0!==m--;){const l=u[m];if(("_owner"!==l||!e.$$typeof)&&!deepEqual$1(e[l],a[l]))return!1}return!0}return e!=e&&a!=a}function getDPR(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(e,a){const l=getDPR(e);return Math.round(a*l)/l}function useLatestRef(e){const a=Me.useRef(e);return qn(()=>{a.current=e}),a}const arrow$1=e=>({name:"arrow",options:e,fn(a){const{element:l,padding:m}="function"==typeof e?e(a):e;return l&&function isRef(e){return{}.hasOwnProperty.call(e,"current")}(l)?null!=l.current?arrow$2({element:l.current,padding:m}).fn(a):{}:l?arrow$2({element:l,padding:m}).fn(a):{}}}),offset=(e,a)=>({...offset$1(e),options:[e,a]}),shift=(e,a)=>({...shift$1(e),options:[e,a]}),limitShift=(e,a)=>({...limitShift$1(e),options:[e,a]}),flip=(e,a)=>({...flip$1(e),options:[e,a]}),size=(e,a)=>({...size$1(e),options:[e,a]}),hide=(e,a)=>({...hide$1(e),options:[e,a]}),arrow=(e,a)=>({...arrow$1(e),options:[e,a]});var Vn=Me.forwardRef((e,a)=>{const{children:l,width:m=10,height:u=5,...p}=e;return tt.jsx(nt.svg,{...p,ref:a,width:m,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?l:tt.jsx("polygon",{points:"0,0 30,0 15,10"})})});Vn.displayName="Arrow";var Hn=Vn;function composeContextScopes$4(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}function useSize(e){const[a,l]=Me.useState(void 0);return gt(()=>{if(e){l({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(a=>{if(!Array.isArray(a))return;if(!a.length)return;const m=a[0];let u,p;if("borderBoxSize"in m){const e=m.borderBoxSize,a=Array.isArray(e)?e[0]:e;u=a.inlineSize,p=a.blockSize}else u=e.offsetWidth,p=e.offsetHeight;l({width:u,height:p})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}l(void 0)},[e]),a}var Wn="Popper",[Zn,Kn]=function createContextScope$4(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;function Provider2(a){const{scope:l,children:m,...f}=a,g=l?.[e][p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})}return l=[...l,m],Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e][p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$4(createScope,...a)]}(Wn),[Gn,Qn]=Zn(Wn),Popper=e=>{const{__scopePopper:a,children:l}=e,[m,u]=Me.useState(null);return tt.jsx(Gn,{scope:a,anchor:m,onAnchorChange:u,children:l})};Popper.displayName=Wn;var Yn="PopperAnchor",Jn=Me.forwardRef((e,a)=>{const{__scopePopper:l,virtualRef:m,...u}=e,p=Qn(Yn,l),f=Me.useRef(null),g=useComposedRefs$2(a,f);return Me.useEffect(()=>{p.onAnchorChange(m?.current||f.current)}),m?null:tt.jsx(nt.div,{...u,ref:g})});Jn.displayName=Yn;var Xn="PopperContent",[es,ts]=Zn(Xn),as=Me.forwardRef((e,a)=>{const{__scopePopper:l,side:m="bottom",sideOffset:u=0,align:p="center",alignOffset:f=0,arrowPadding:g=0,avoidCollisions:h=!0,collisionBoundary:y=[],collisionPadding:v=0,sticky:E="partial",hideWhenDetached:x=!1,updatePositionStrategy:w="optimized",onPlaced:b,...N}=e,_=Qn(Xn,l),[k,S]=Me.useState(null),C=useComposedRefs$2(a,e=>S(e)),[R,A]=Me.useState(null),T=useSize(R),P=T?.width??0,D=T?.height??0,I=m+("center"!==p?"-"+p:""),F="number"==typeof v?v:{top:0,right:0,bottom:0,left:0,...v},M=Array.isArray(y)?y:[y],j=M.length>0,O={padding:F,boundary:M.filter(isNotNull),altBoundary:j},{refs:L,floatingStyles:$,placement:z,isPositioned:B,middlewareData:V}=function useFloating(e){void 0===e&&(e={});const{placement:a="bottom",strategy:l="absolute",middleware:m=[],platform:u,elements:{reference:p,floating:f}={},transform:g=!0,whileElementsMounted:h,open:y}=e,[v,E]=Me.useState({x:0,y:0,strategy:l,placement:a,middlewareData:{},isPositioned:!1}),[x,w]=Me.useState(m);deepEqual$1(x,m)||w(m);const[b,N]=Me.useState(null),[_,k]=Me.useState(null),S=Me.useCallback(e=>{e!==T.current&&(T.current=e,N(e))},[]),C=Me.useCallback(e=>{e!==P.current&&(P.current=e,k(e))},[]),R=p||b,A=f||_,T=Me.useRef(null),P=Me.useRef(null),D=Me.useRef(v),I=null!=h,F=useLatestRef(h),M=useLatestRef(u),j=useLatestRef(y),O=Me.useCallback(()=>{if(!T.current||!P.current)return;const e={placement:a,strategy:l,middleware:x};M.current&&(e.platform=M.current),computePosition(T.current,P.current,e).then(e=>{const a={...e,isPositioned:!1!==j.current};L.current&&!deepEqual$1(D.current,a)&&(D.current=a,Fe.flushSync(()=>{E(a)}))})},[x,a,l,M,j]);qn(()=>{!1===y&&D.current.isPositioned&&(D.current.isPositioned=!1,E(e=>({...e,isPositioned:!1})))},[y]);const L=Me.useRef(!1);qn(()=>(L.current=!0,()=>{L.current=!1}),[]),qn(()=>{if(R&&(T.current=R),A&&(P.current=A),R&&A){if(F.current)return F.current(R,A,O);O()}},[R,A,O,F,I]);const $=Me.useMemo(()=>({reference:T,floating:P,setReference:S,setFloating:C}),[S,C]),z=Me.useMemo(()=>({reference:R,floating:A}),[R,A]),B=Me.useMemo(()=>{const e={position:l,left:0,top:0};if(!z.floating)return e;const a=roundByDPR(z.floating,v.x),m=roundByDPR(z.floating,v.y);return g?{...e,transform:"translate("+a+"px, "+m+"px)",...getDPR(z.floating)>=1.5&&{willChange:"transform"}}:{position:l,left:a,top:m}},[l,g,z.floating,v.x,v.y]);return Me.useMemo(()=>({...v,update:O,refs:$,elements:z,floatingStyles:B}),[v,O,$,z,B])}({strategy:"fixed",placement:I,whileElementsMounted:(...e)=>autoUpdate(...e,{animationFrame:"always"===w}),elements:{reference:_.anchor},middleware:[offset({mainAxis:u+D,alignmentAxis:f}),h&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===E?limitShift():void 0,...O}),h&&flip({...O}),size({...O,apply:({elements:e,rects:a,availableWidth:l,availableHeight:m})=>{const{width:u,height:p}=a.reference,f=e.floating.style;f.setProperty("--radix-popper-available-width",`${l}px`),f.setProperty("--radix-popper-available-height",`${m}px`),f.setProperty("--radix-popper-anchor-width",`${u}px`),f.setProperty("--radix-popper-anchor-height",`${p}px`)}}),R&&arrow({element:R,padding:g}),transformOrigin({arrowWidth:P,arrowHeight:D}),x&&hide({strategy:"referenceHidden",...O})]}),[H,W]=getSideAndAlignFromPlacement(z),Z=useCallbackRef$3(b);gt(()=>{B&&Z?.()},[B,Z]);const K=V.arrow?.x,G=V.arrow?.y,Q=0!==V.arrow?.centerOffset,[Y,J]=Me.useState();return gt(()=>{k&&J(window.getComputedStyle(k).zIndex)},[k]),tt.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:B?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:tt.jsx(es,{scope:l,placedSide:H,onArrowChange:A,arrowX:K,arrowY:G,shouldHideArrow:Q,children:tt.jsx(nt.div,{"data-side":H,"data-align":W,...N,ref:C,style:{...N.style,animation:B?void 0:"none"}})})})});as.displayName=Xn;var rs="PopperArrow",ns={top:"bottom",right:"left",bottom:"top",left:"right"},ss=Me.forwardRef(function PopperArrow2(e,a){const{__scopePopper:l,...m}=e,u=ts(rs,l),p=ns[u.placedSide];return tt.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[p]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:tt.jsx(Hn,{...m,ref:a,style:{...m.style,display:"block"}})})});function isNotNull(e){return null!==e}ss.displayName=rs;var transformOrigin=e=>({name:"transformOrigin",options:e,fn(a){const{placement:l,rects:m,middlewareData:u}=a,p=0!==u.arrow?.centerOffset,f=p?0:e.arrowWidth,g=p?0:e.arrowHeight,[h,y]=getSideAndAlignFromPlacement(l),v={start:"0%",center:"50%",end:"100%"}[y],E=(u.arrow?.x??0)+f/2,x=(u.arrow?.y??0)+g/2;let w="",b="";return"bottom"===h?(w=p?v:`${E}px`,b=-g+"px"):"top"===h?(w=p?v:`${E}px`,b=`${m.floating.height+g}px`):"right"===h?(w=-g+"px",b=p?v:`${x}px`):"left"===h&&(w=`${m.floating.width+g}px`,b=p?v:`${x}px`),{data:{x:w,y:b}}}});function getSideAndAlignFromPlacement(e){const[a,l="center"]=e.split("-");return[a,l]}var os=Popper,ls=Jn,is=as,cs=ss,[ms,ds]=createContextScope$5("Tooltip",[Kn]),us=Kn(),ps="TooltipProvider",fs=700,gs="tooltip.open",[hs,ys]=ms(ps),TooltipProvider$1=e=>{const{__scopeTooltip:a,delayDuration:l=fs,skipDelayDuration:m=300,disableHoverableContent:u=!1,children:p}=e,[f,g]=Me.useState(!0),h=Me.useRef(!1),y=Me.useRef(0);return Me.useEffect(()=>{const e=y.current;return()=>window.clearTimeout(e)},[]),tt.jsx(hs,{scope:a,isOpenDelayed:f,delayDuration:l,onOpen:Me.useCallback(()=>{window.clearTimeout(y.current),g(!1)},[]),onClose:Me.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>g(!0),m)},[m]),isPointerInTransitRef:h,onPointerInTransitChange:Me.useCallback(e=>{h.current=e},[]),disableHoverableContent:u,children:p})};TooltipProvider$1.displayName=ps;var vs="Tooltip",[Es,xs]=ms(vs),Tooltip$1=e=>{const{__scopeTooltip:a,children:l,open:m,defaultOpen:u=!1,onOpenChange:p,disableHoverableContent:f,delayDuration:g}=e,h=ys(vs,e.__scopeTooltip),y=us(a),[v,E]=Me.useState(null),x=useId$1(),w=Me.useRef(0),b=f??h.disableHoverableContent,N=g??h.delayDuration,_=Me.useRef(!1),[k=!1,S]=useControllableState$1({prop:m,defaultProp:u,onChange:e=>{e?(h.onOpen(),document.dispatchEvent(new CustomEvent(gs))):h.onClose(),p?.(e)}}),C=Me.useMemo(()=>k?_.current?"delayed-open":"instant-open":"closed",[k]),R=Me.useCallback(()=>{window.clearTimeout(w.current),w.current=0,_.current=!1,S(!0)},[S]),A=Me.useCallback(()=>{window.clearTimeout(w.current),w.current=0,S(!1)},[S]),T=Me.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{_.current=!0,S(!0),w.current=0},N)},[N,S]);return Me.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),tt.jsx(os,{...y,children:tt.jsx(Es,{scope:a,contentId:x,open:k,stateAttribute:C,trigger:v,onTriggerChange:E,onTriggerEnter:Me.useCallback(()=>{h.isOpenDelayed?T():R()},[h.isOpenDelayed,T,R]),onTriggerLeave:Me.useCallback(()=>{b?A():(window.clearTimeout(w.current),w.current=0)},[A,b]),onOpen:R,onClose:A,disableHoverableContent:b,children:l})})};Tooltip$1.displayName=vs;var ws="TooltipTrigger",bs=Me.forwardRef((e,a)=>{const{__scopeTooltip:l,...m}=e,u=xs(ws,l),p=ys(ws,l),f=us(l),g=useComposedRefs$2(a,Me.useRef(null),u.onTriggerChange),h=Me.useRef(!1),y=Me.useRef(!1),v=Me.useCallback(()=>h.current=!1,[]);return Me.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),tt.jsx(ls,{asChild:!0,...f,children:tt.jsx(nt.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...m,ref:g,onPointerMove:composeEventHandlers$3(e.onPointerMove,e=>{"touch"!==e.pointerType&&(y.current||p.isPointerInTransitRef.current||(u.onTriggerEnter(),y.current=!0))}),onPointerLeave:composeEventHandlers$3(e.onPointerLeave,()=>{u.onTriggerLeave(),y.current=!1}),onPointerDown:composeEventHandlers$3(e.onPointerDown,()=>{h.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:composeEventHandlers$3(e.onFocus,()=>{h.current||u.onOpen()}),onBlur:composeEventHandlers$3(e.onBlur,u.onClose),onClick:composeEventHandlers$3(e.onClick,u.onClose)})})});bs.displayName=ws;var[Ns,_s]=ms("TooltipPortal",{forceMount:void 0}),ks="TooltipContent",Ss=Me.forwardRef((e,a)=>{const l=_s(ks,e.__scopeTooltip),{forceMount:m=l.forceMount,side:u="top",...p}=e,f=xs(ks,e.__scopeTooltip);return tt.jsx(Presence$2,{present:m||f.open,children:f.disableHoverableContent?tt.jsx(Ts,{side:u,...p,ref:a}):tt.jsx(Cs,{side:u,...p,ref:a})})}),Cs=Me.forwardRef((e,a)=>{const l=xs(ks,e.__scopeTooltip),m=ys(ks,e.__scopeTooltip),u=Me.useRef(null),p=useComposedRefs$2(a,u),[f,g]=Me.useState(null),{trigger:h,onClose:y}=l,v=u.current,{onPointerInTransitChange:E}=m,x=Me.useCallback(()=>{g(null),E(!1)},[E]),w=Me.useCallback((e,a)=>{const l=e.currentTarget,m={x:e.clientX,y:e.clientY},u=function getPaddedExitPoints(e,a,l=5){const m=[];switch(a){case"top":m.push({x:e.x-l,y:e.y+l},{x:e.x+l,y:e.y+l});break;case"bottom":m.push({x:e.x-l,y:e.y-l},{x:e.x+l,y:e.y-l});break;case"left":m.push({x:e.x+l,y:e.y-l},{x:e.x+l,y:e.y+l});break;case"right":m.push({x:e.x-l,y:e.y-l},{x:e.x-l,y:e.y+l})}return m}(m,function getExitSideFromRect(e,a){const l=Math.abs(a.top-e.y),m=Math.abs(a.bottom-e.y),u=Math.abs(a.right-e.x),p=Math.abs(a.left-e.x);switch(Math.min(l,m,u,p)){case p:return"left";case u:return"right";case l:return"top";case m:return"bottom";default:throw new Error("unreachable")}}(m,l.getBoundingClientRect())),p=function getHull(e){const a=e.slice();return a.sort((e,a)=>e.x<a.x?-1:e.x>a.x?1:e.y<a.y?-1:e.y>a.y?1:0),function getHullPresorted(e){if(e.length<=1)return e.slice();const a=[];for(let m=0;m<e.length;m++){const l=e[m];for(;a.length>=2;){const e=a[a.length-1],m=a[a.length-2];if(!((e.x-m.x)*(l.y-m.y)>=(e.y-m.y)*(l.x-m.x)))break;a.pop()}a.push(l)}a.pop();const l=[];for(let m=e.length-1;m>=0;m--){const a=e[m];for(;l.length>=2;){const e=l[l.length-1],m=l[l.length-2];if(!((e.x-m.x)*(a.y-m.y)>=(e.y-m.y)*(a.x-m.x)))break;l.pop()}l.push(a)}return l.pop(),1===a.length&&1===l.length&&a[0].x===l[0].x&&a[0].y===l[0].y?a:a.concat(l)}(a)}([...u,...function getPointsFromRect(e){const{top:a,right:l,bottom:m,left:u}=e;return[{x:u,y:a},{x:l,y:a},{x:l,y:m},{x:u,y:m}]}(a.getBoundingClientRect())]);g(p),E(!0)},[E]);return Me.useEffect(()=>()=>x(),[x]),Me.useEffect(()=>{if(h&&v){const handleTriggerLeave=e=>w(e,v),handleContentLeave=e=>w(e,h);return h.addEventListener("pointerleave",handleTriggerLeave),v.addEventListener("pointerleave",handleContentLeave),()=>{h.removeEventListener("pointerleave",handleTriggerLeave),v.removeEventListener("pointerleave",handleContentLeave)}}},[h,v,w,x]),Me.useEffect(()=>{if(f){const handleTrackPointerGrace=e=>{const a=e.target,l={x:e.clientX,y:e.clientY},m=h?.contains(a)||v?.contains(a),u=!function isPointInPolygon$1(e,a){const{x:l,y:m}=e;let u=!1;for(let p=0,f=a.length-1;p<a.length;f=p++){const e=a[p].x,g=a[p].y,h=a[f].x,y=a[f].y;g>m!=y>m&&l<(h-e)*(m-g)/(y-g)+e&&(u=!u)}return u}(l,f);m?x():u&&(x(),y())};return document.addEventListener("pointermove",handleTrackPointerGrace),()=>document.removeEventListener("pointermove",handleTrackPointerGrace)}},[h,v,f,y,x]),tt.jsx(Ts,{...e,ref:p})}),[Rs,As]=ms(vs,{isInside:!1}),Ts=Me.forwardRef((e,a)=>{const{__scopeTooltip:l,children:m,"aria-label":u,onEscapeKeyDown:p,onPointerDownOutside:f,...g}=e,h=xs(ks,l),y=us(l),{onClose:v}=h;return Me.useEffect(()=>(document.addEventListener(gs,v),()=>document.removeEventListener(gs,v)),[v]),Me.useEffect(()=>{if(h.trigger){const handleScroll2=e=>{const a=e.target;a?.contains(h.trigger)&&v()};return window.addEventListener("scroll",handleScroll2,{capture:!0}),()=>window.removeEventListener("scroll",handleScroll2,{capture:!0})}},[h.trigger,v]),tt.jsx(mt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:e=>e.preventDefault(),onDismiss:v,children:tt.jsxs(is,{"data-state":h.stateAttribute,...y,...g,ref:a,style:{...g.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[tt.jsx(Slottable,{children:m}),tt.jsx(Rs,{scope:l,isInside:!0,children:tt.jsx(vt,{id:h.contentId,role:"tooltip",children:u||m})})]})})});Ss.displayName=ks;var Ps="TooltipArrow";Me.forwardRef((e,a)=>{const{__scopeTooltip:l,...m}=e,u=us(l);return As(Ps,l).isInside?null:tt.jsx(cs,{...u,...m,ref:a})}).displayName=Ps;var Ds=Ss;const Is=TooltipProvider$1,Fs=Tooltip$1,Ms=bs,js=Me.forwardRef(({className:e,sideOffset:a=4,...l},m)=>Me.createElement(Ds,{ref:m,sideOffset:a,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...l}));js.displayName=Ds.displayName;var Os=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ls="undefined"==typeof window||"Deno"in globalThis;function noop$2(){}function isValidTimeout(e){return"number"==typeof e&&e>=0&&e!==1/0}function timeUntilStale(e,a){return Math.max(e+(a||0)-Date.now(),0)}function resolveStaleTime(e,a){return"function"==typeof e?e(a):e}function resolveEnabled(e,a){return"function"==typeof e?e(a):e}function matchQuery(e,a){const{type:l="all",exact:m,fetchStatus:u,predicate:p,queryKey:f,stale:g}=e;if(f)if(m){if(a.queryHash!==hashQueryKeyByOptions(f,a.options))return!1}else if(!partialMatchKey(a.queryKey,f))return!1;if("all"!==l){const e=a.isActive();if("active"===l&&!e)return!1;if("inactive"===l&&e)return!1}return("boolean"!=typeof g||a.isStale()===g)&&((!u||u===a.state.fetchStatus)&&!(p&&!p(a)))}function matchMutation(e,a){const{exact:l,status:m,predicate:u,mutationKey:p}=e;if(p){if(!a.options.mutationKey)return!1;if(l){if(hashKey(a.options.mutationKey)!==hashKey(p))return!1}else if(!partialMatchKey(a.options.mutationKey,p))return!1}return(!m||a.state.status===m)&&!(u&&!u(a))}function hashQueryKeyByOptions(e,a){return(a?.queryKeyHashFn||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(e,a)=>isPlainObject$1(a)?Object.keys(a).sort().reduce((e,l)=>(e[l]=a[l],e),{}):a)}function partialMatchKey(e,a){return e===a||typeof e==typeof a&&(!(!e||!a||"object"!=typeof e||"object"!=typeof a)&&!Object.keys(a).some(l=>!partialMatchKey(e[l],a[l])))}function replaceEqualDeep(e,a){if(e===a)return e;const l=isPlainArray(e)&&isPlainArray(a);if(l||isPlainObject$1(e)&&isPlainObject$1(a)){const m=l?e:Object.keys(e),u=m.length,p=l?a:Object.keys(a),f=p.length,g=l?[]:{};let h=0;for(let y=0;y<f;y++){const u=l?y:p[y];(!l&&m.includes(u)||l)&&void 0===e[u]&&void 0===a[u]?(g[u]=void 0,h++):(g[u]=replaceEqualDeep(e[u],a[u]),g[u]===e[u]&&void 0!==e[u]&&h++)}return u===f&&h===u?e:g}return a}function shallowEqualObjects(e,a){if(!a||Object.keys(e).length!==Object.keys(a).length)return!1;for(const l in e)if(e[l]!==a[l])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject$1(e){if(!hasObjectPrototype(e))return!1;const a=e.constructor;if(void 0===a)return!0;const l=a.prototype;return!!hasObjectPrototype(l)&&(!!l.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function hasObjectPrototype(e){return"[object Object]"===Object.prototype.toString.call(e)}function replaceData(e,a,l){return"function"==typeof l.structuralSharing?l.structuralSharing(e,a):!1!==l.structuralSharing?replaceEqualDeep(e,a):a}function addToEnd(e,a,l=0){const m=[...e,a];return l&&m.length>l?m.slice(1):m}function addToStart(e,a,l=0){const m=[a,...e];return l&&m.length>l?m.slice(0,-1):m}var $s=Symbol();function ensureQueryFn(e,a){return!e.queryFn&&a?.initialPromise?()=>a.initialPromise:e.queryFn&&e.queryFn!==$s?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Us=new(m=class extends Os{constructor(){super(),__privateAdd(this,e),__privateAdd(this,a),__privateAdd(this,l),__privateSet(this,l,e=>{if(!Ls&&window.addEventListener){const listener=()=>e();return window.addEventListener("visibilitychange",listener,!1),()=>{window.removeEventListener("visibilitychange",listener)}}})}onSubscribe(){__privateGet(this,a)||this.setEventListener(__privateGet(this,l))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=__privateGet(this,a))||e.call(this),__privateSet(this,a,void 0))}setEventListener(e){var m;__privateSet(this,l,e),null==(m=__privateGet(this,a))||m.call(this),__privateSet(this,a,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(a){__privateGet(this,e)!==a&&(__privateSet(this,e,a),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){return"boolean"==typeof __privateGet(this,e)?__privateGet(this,e):"hidden"!==globalThis.document?.visibilityState}},e=new WeakMap,a=new WeakMap,l=new WeakMap,m),zs=new(g=class extends Os{constructor(){super(),__privateAdd(this,u,!0),__privateAdd(this,p),__privateAdd(this,f),__privateSet(this,f,e=>{if(!Ls&&window.addEventListener){const onlineListener=()=>e(!0),offlineListener=()=>e(!1);return window.addEventListener("online",onlineListener,!1),window.addEventListener("offline",offlineListener,!1),()=>{window.removeEventListener("online",onlineListener),window.removeEventListener("offline",offlineListener)}}})}onSubscribe(){__privateGet(this,p)||this.setEventListener(__privateGet(this,f))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=__privateGet(this,p))||e.call(this),__privateSet(this,p,void 0))}setEventListener(e){var a;__privateSet(this,f,e),null==(a=__privateGet(this,p))||a.call(this),__privateSet(this,p,e(this.setOnline.bind(this)))}setOnline(e){__privateGet(this,u)!==e&&(__privateSet(this,u,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return __privateGet(this,u)}},u=new WeakMap,p=new WeakMap,f=new WeakMap,g);function pendingThenable(){let e,a;const l=new Promise((l,m)=>{e=l,a=m});function finalize(e){Object.assign(l,e),delete l.resolve,delete l.reject}return l.status="pending",l.catch(()=>{}),l.resolve=a=>{finalize({status:"fulfilled",value:a}),e(a)},l.reject=e=>{finalize({status:"rejected",reason:e}),a(e)},l}function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return"online"!==(e??"online")||zs.isOnline()}var Bs=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function isCancelledError(e){return e instanceof Bs}function createRetryer(e){let a,l=!1,m=0,u=!1;const p=pendingThenable(),canContinue=()=>Us.isFocused()&&("always"===e.networkMode||zs.isOnline())&&e.canRun(),canStart=()=>canFetch(e.networkMode)&&e.canRun(),resolve=l=>{u||(u=!0,e.onSuccess?.(l),a?.(),p.resolve(l))},reject=l=>{u||(u=!0,e.onError?.(l),a?.(),p.reject(l))},pause=()=>new Promise(l=>{a=e=>{(u||canContinue())&&l(e)},e.onPause?.()}).then(()=>{a=void 0,u||e.onContinue?.()}),run=()=>{if(u)return;let a;const p=0===m?e.initialPromise:void 0;try{a=p??e.fn()}catch(f){a=Promise.reject(f)}Promise.resolve(a).then(resolve).catch(a=>{if(u)return;const p=e.retry??(Ls?0:3),f=e.retryDelay??defaultRetryDelay,g="function"==typeof f?f(m,a):f,h=!0===p||"number"==typeof p&&m<p||"function"==typeof p&&p(m,a);!l&&h?(m++,e.onFail?.(m,a),function sleep(e){return new Promise(a=>{setTimeout(a,e)})}(g).then(()=>canContinue()?void 0:pause()).then(()=>{l?reject(a):run()})):reject(a)})};return{promise:p,cancel:a=>{u||(reject(new Bs(a)),e.abort?.())},continue:()=>(a?.(),p),cancelRetry:()=>{l=!0},continueRetry:()=>{l=!1},canStart:canStart,start:()=>(canStart()?run():pause().then(run),p)}}var qs=function createNotifyManager(){let e=[],a=0,notifyFn=e=>{e()},batchNotifyFn=e=>{e()},scheduleFn=e=>setTimeout(e,0);const schedule=l=>{a?e.push(l):scheduleFn(()=>{notifyFn(l)})};return{batch:l=>{let m;a++;try{m=l()}finally{a--,a||(()=>{const a=e;e=[],a.length&&scheduleFn(()=>{batchNotifyFn(()=>{a.forEach(e=>{notifyFn(e)})})})})()}return m},batchCalls:e=>(...a)=>{schedule(()=>{e(...a)})},schedule:schedule,setNotifyFunction:e=>{notifyFn=e},setBatchNotifyFunction:e=>{batchNotifyFn=e},setScheduler:e=>{scheduleFn=e}}}(),Vs=(y=class{constructor(){__privateAdd(this,h)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&__privateSet(this,h,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ls?1/0:3e5))}clearGcTimeout(){__privateGet(this,h)&&(clearTimeout(__privateGet(this,h)),__privateSet(this,h,void 0))}},h=new WeakMap,y),Hs=(S=class extends Vs{constructor(e){super(),__privateAdd(this,_),__privateAdd(this,v),__privateAdd(this,E),__privateAdd(this,x),__privateAdd(this,w),__privateAdd(this,b),__privateAdd(this,N),__privateSet(this,N,!1),__privateSet(this,b,e.defaultOptions),this.setOptions(e.options),this.observers=[],__privateSet(this,x,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,__privateSet(this,v,function getDefaultState$1(e){const a="function"==typeof e.initialData?e.initialData():e.initialData,l=void 0!==a,m=l?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:l?m??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:l?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??__privateGet(this,v),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return __privateGet(this,w)?.promise}setOptions(e){this.options={...__privateGet(this,b),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||__privateGet(this,x).remove(this)}setData(e,a){const l=replaceData(this.state.data,e,this.options);return __privateMethod(this,_,k).call(this,{data:l,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual}),l}setState(e,a){__privateMethod(this,_,k).call(this,{type:"setState",state:e,setStateOptions:a})}cancel(e){const a=__privateGet(this,w)?.promise;return __privateGet(this,w)?.cancel(e),a?a.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(__privateGet(this,v))}isActive(){return this.observers.some(e=>!1!==resolveEnabled(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$s||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),__privateGet(this,w)?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),__privateGet(this,w)?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),__privateGet(this,x).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(__privateGet(this,w)&&(__privateGet(this,N)?__privateGet(this,w).cancel({revert:!0}):__privateGet(this,w).cancelRetry()),this.scheduleGc()),__privateGet(this,x).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||__privateMethod(this,_,k).call(this,{type:"invalidate"})}fetch(e,a){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&a?.cancelRefetch)this.cancel({silent:!0});else if(__privateGet(this,w))return __privateGet(this,w).continueRetry(),__privateGet(this,w).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const l=new AbortController,addSignalProperty=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(__privateSet(this,N,!0),l.signal)})},m={fetchOptions:a,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=ensureQueryFn(this.options,a),l={queryKey:this.queryKey,meta:this.meta};return addSignalProperty(l),__privateSet(this,N,!1),this.options.persister?this.options.persister(e,l,this):e(l)}};addSignalProperty(m),this.options.behavior?.onFetch(m,this),__privateSet(this,E,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===m.fetchOptions?.meta||__privateMethod(this,_,k).call(this,{type:"fetch",meta:m.fetchOptions?.meta});const onError3=e=>{isCancelledError(e)&&e.silent||__privateMethod(this,_,k).call(this,{type:"error",error:e}),isCancelledError(e)||(__privateGet(this,x).config.onError?.(e,this),__privateGet(this,x).config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return __privateSet(this,w,createRetryer({initialPromise:a?.initialPromise,fn:m.fetchFn,abort:l.abort.bind(l),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(a){return void onError3(a)}__privateGet(this,x).config.onSuccess?.(e,this),__privateGet(this,x).config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else onError3(new Error(`${this.queryHash} data is undefined`))},onError:onError3,onFail:(e,a)=>{__privateMethod(this,_,k).call(this,{type:"failed",failureCount:e,error:a})},onPause:()=>{__privateMethod(this,_,k).call(this,{type:"pause"})},onContinue:()=>{__privateMethod(this,_,k).call(this,{type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0})),__privateGet(this,w).start()}},v=new WeakMap,E=new WeakMap,x=new WeakMap,w=new WeakMap,b=new WeakMap,N=new WeakMap,_=new WeakSet,k=function(e){this.state=(a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fetchState(a.data,this.options),fetchMeta:e.meta??null};case"success":return{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=e.error;return isCancelledError(l)&&l.revert&&__privateGet(this,E)?{...__privateGet(this,E),fetchStatus:"idle"}:{...a,error:l,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}})(this.state),qs.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),__privateGet(this,x).notify({query:this,type:"updated",action:e})})},S);function fetchState(e,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(a.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var Ws=(R=class extends Os{constructor(e={}){super(),__privateAdd(this,C),this.config=e,__privateSet(this,C,new Map)}build(e,a,l){const m=a.queryKey,u=a.queryHash??hashQueryKeyByOptions(m,a);let p=this.get(u);return p||(p=new Hs({cache:this,queryKey:m,queryHash:u,options:e.defaultQueryOptions(a),state:l,defaultOptions:e.getQueryDefaults(m)}),this.add(p)),p}add(e){__privateGet(this,C).has(e.queryHash)||(__privateGet(this,C).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=__privateGet(this,C).get(e.queryHash);a&&(e.destroy(),a===e&&__privateGet(this,C).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return __privateGet(this,C).get(e)}getAll(){return[...__privateGet(this,C).values()]}find(e){const a={exact:!0,...e};return this.getAll().find(e=>matchQuery(a,e))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(a=>matchQuery(e,a)):a}notify(e){qs.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){qs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},C=new WeakMap,R),Zs=(F=class extends Vs{constructor(e){super(),__privateAdd(this,D),__privateAdd(this,A),__privateAdd(this,T),__privateAdd(this,P),this.mutationId=e.mutationId,__privateSet(this,T,e.mutationCache),__privateSet(this,A,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){__privateGet(this,A).includes(e)||(__privateGet(this,A).push(e),this.clearGcTimeout(),__privateGet(this,T).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){__privateSet(this,A,__privateGet(this,A).filter(a=>a!==e)),this.scheduleGc(),__privateGet(this,T).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){__privateGet(this,A).length||("pending"===this.state.status?this.scheduleGc():__privateGet(this,T).remove(this))}continue(){return __privateGet(this,P)?.continue()??this.execute(this.state.variables)}async execute(e){__privateSet(this,P,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,a)=>{__privateMethod(this,D,I).call(this,{type:"failed",failureCount:e,error:a})},onPause:()=>{__privateMethod(this,D,I).call(this,{type:"pause"})},onContinue:()=>{__privateMethod(this,D,I).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>__privateGet(this,T).canRun(this)}));const a="pending"===this.state.status,l=!__privateGet(this,P).canStart();try{if(!a){__privateMethod(this,D,I).call(this,{type:"pending",variables:e,isPaused:l}),await(__privateGet(this,T).config.onMutate?.(e,this));const a=await(this.options.onMutate?.(e));a!==this.state.context&&__privateMethod(this,D,I).call(this,{type:"pending",context:a,variables:e,isPaused:l})}const m=await __privateGet(this,P).start();return await(__privateGet(this,T).config.onSuccess?.(m,e,this.state.context,this)),await(this.options.onSuccess?.(m,e,this.state.context)),await(__privateGet(this,T).config.onSettled?.(m,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(m,null,e,this.state.context)),__privateMethod(this,D,I).call(this,{type:"success",data:m}),m}catch(m){try{throw await(__privateGet(this,T).config.onError?.(m,e,this.state.context,this)),await(this.options.onError?.(m,e,this.state.context)),await(__privateGet(this,T).config.onSettled?.(void 0,m,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,m,e,this.state.context)),m}finally{__privateMethod(this,D,I).call(this,{type:"error",error:m})}}finally{__privateGet(this,T).runNext(this)}}},A=new WeakMap,T=new WeakMap,P=new WeakMap,D=new WeakSet,I=function(e){this.state=(a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),qs.batch(()=>{__privateGet(this,A).forEach(a=>{a.onMutationUpdate(e)}),__privateGet(this,T).notify({mutation:this,type:"updated",action:e})})},F);var Ks=(O=class extends Os{constructor(e={}){super(),__privateAdd(this,M),__privateAdd(this,j),this.config=e,__privateSet(this,M,new Map),__privateSet(this,j,Date.now())}build(e,a,l){const m=new Zs({mutationCache:this,mutationId:++__privateWrapper(this,j)._,options:e.defaultMutationOptions(a),state:l});return this.add(m),m}add(e){const a=scopeFor(e),l=__privateGet(this,M).get(a)??[];l.push(e),__privateGet(this,M).set(a,l),this.notify({type:"added",mutation:e})}remove(e){const a=scopeFor(e);if(__privateGet(this,M).has(a)){const l=__privateGet(this,M).get(a)?.filter(a=>a!==e);l&&(0===l.length?__privateGet(this,M).delete(a):__privateGet(this,M).set(a,l))}this.notify({type:"removed",mutation:e})}canRun(e){const a=__privateGet(this,M).get(scopeFor(e))?.find(e=>"pending"===e.state.status);return!a||a===e}runNext(e){const a=__privateGet(this,M).get(scopeFor(e))?.find(a=>a!==e&&a.state.isPaused);return a?.continue()??Promise.resolve()}clear(){qs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...__privateGet(this,M).values()].flat()}find(e){const a={exact:!0,...e};return this.getAll().find(e=>matchMutation(a,e))}findAll(e={}){return this.getAll().filter(a=>matchMutation(e,a))}notify(e){qs.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return qs.batch(()=>Promise.all(e.map(e=>e.continue().catch(noop$2))))}},M=new WeakMap,j=new WeakMap,O);function scopeFor(e){return e.options.scope?.id??String(e.mutationId)}function infiniteQueryBehavior(e){return{onFetch:(a,l)=>{const m=a.options,u=a.fetchOptions?.meta?.fetchMore?.direction,p=a.state.data?.pages||[],f=a.state.data?.pageParams||[];let g={pages:[],pageParams:[]},h=0;const fetchFn=async()=>{let l=!1;const y=ensureQueryFn(a.options,a.fetchOptions),fetchPage=async(e,m,u)=>{if(l)return Promise.reject();if(null==m&&e.pages.length)return Promise.resolve(e);const p={queryKey:a.queryKey,pageParam:m,direction:u?"backward":"forward",meta:a.options.meta};var f;f=p,Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(a.signal.aborted?l=!0:a.signal.addEventListener("abort",()=>{l=!0}),a.signal)});const g=await y(p),{maxPages:h}=a.options,v=u?addToStart:addToEnd;return{pages:v(e.pages,g,h),pageParams:v(e.pageParams,m,h)}};if(u&&p.length){const e="backward"===u,a={pages:p,pageParams:f},l=(e?getPreviousPageParam:getNextPageParam)(m,a);g=await fetchPage(a,l,e)}else{const a=e??p.length;do{const e=0===h?f[0]??m.initialPageParam:getNextPageParam(m,g);if(h>0&&null==e)break;g=await fetchPage(g,e),h++}while(h<a)}return g};a.options.persister?a.fetchFn=()=>a.options.persister?.(fetchFn,{queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},l):a.fetchFn=fetchFn}}}function getNextPageParam(e,{pages:a,pageParams:l}){const m=a.length-1;return a.length>0?e.getNextPageParam(a[m],a,l[m],l):void 0}function getPreviousPageParam(e,{pages:a,pageParams:l}){return a.length>0?e.getPreviousPageParam?.(a[0],a,l[0],l):void 0}var Gs=(K=class{constructor(e={}){__privateAdd(this,L),__privateAdd(this,$),__privateAdd(this,z),__privateAdd(this,B),__privateAdd(this,V),__privateAdd(this,H),__privateAdd(this,W),__privateAdd(this,Z),__privateSet(this,L,e.queryCache||new Ws),__privateSet(this,$,e.mutationCache||new Ks),__privateSet(this,z,e.defaultOptions||{}),__privateSet(this,B,new Map),__privateSet(this,V,new Map),__privateSet(this,H,0)}mount(){__privateWrapper(this,H)._++,1===__privateGet(this,H)&&(__privateSet(this,W,Us.subscribe(async e=>{e&&(await this.resumePausedMutations(),__privateGet(this,L).onFocus())})),__privateSet(this,Z,zs.subscribe(async e=>{e&&(await this.resumePausedMutations(),__privateGet(this,L).onOnline())})))}unmount(){var e,a;__privateWrapper(this,H)._--,0===__privateGet(this,H)&&(null==(e=__privateGet(this,W))||e.call(this),__privateSet(this,W,void 0),null==(a=__privateGet(this,Z))||a.call(this),__privateSet(this,Z,void 0))}isFetching(e){return __privateGet(this,L).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return __privateGet(this,$).findAll({...e,status:"pending"}).length}getQueryData(e){const a=this.defaultQueryOptions({queryKey:e});return __privateGet(this,L).get(a.queryHash)?.state.data}ensureQueryData(e){const a=this.getQueryData(e.queryKey);if(void 0===a)return this.fetchQuery(e);{const l=this.defaultQueryOptions(e),m=__privateGet(this,L).build(this,l);return e.revalidateIfStale&&m.isStaleByTime(resolveStaleTime(l.staleTime,m))&&this.prefetchQuery(l),Promise.resolve(a)}}getQueriesData(e){return __privateGet(this,L).findAll(e).map(({queryKey:e,state:a})=>[e,a.data])}setQueryData(e,a,l){const m=this.defaultQueryOptions({queryKey:e}),u=__privateGet(this,L).get(m.queryHash),p=u?.state.data,f=function functionalUpdate(e,a){return"function"==typeof e?e(a):e}(a,p);if(void 0!==f)return __privateGet(this,L).build(this,m).setData(f,{...l,manual:!0})}setQueriesData(e,a,l){return qs.batch(()=>__privateGet(this,L).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,a,l)]))}getQueryState(e){const a=this.defaultQueryOptions({queryKey:e});return __privateGet(this,L).get(a.queryHash)?.state}removeQueries(e){const a=__privateGet(this,L);qs.batch(()=>{a.findAll(e).forEach(e=>{a.remove(e)})})}resetQueries(e,a){const l=__privateGet(this,L),m={type:"active",...e};return qs.batch(()=>(l.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(m,a)))}cancelQueries(e={},a={}){const l={revert:!0,...a},m=qs.batch(()=>__privateGet(this,L).findAll(e).map(e=>e.cancel(l)));return Promise.all(m).then(noop$2).catch(noop$2)}invalidateQueries(e={},a={}){return qs.batch(()=>{if(__privateGet(this,L).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const l={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(l,a)})}refetchQueries(e={},a){const l={...a,cancelRefetch:a?.cancelRefetch??!0},m=qs.batch(()=>__privateGet(this,L).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let a=e.fetch(void 0,l);return l.throwOnError||(a=a.catch(noop$2)),"paused"===e.state.fetchStatus?Promise.resolve():a}));return Promise.all(m).then(noop$2)}fetchQuery(e){const a=this.defaultQueryOptions(e);void 0===a.retry&&(a.retry=!1);const l=__privateGet(this,L).build(this,a);return l.isStaleByTime(resolveStaleTime(a.staleTime,l))?l.fetch(a):Promise.resolve(l.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$2).catch(noop$2)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zs.isOnline()?__privateGet(this,$).resumePausedMutations():Promise.resolve()}getQueryCache(){return __privateGet(this,L)}getMutationCache(){return __privateGet(this,$)}getDefaultOptions(){return __privateGet(this,z)}setDefaultOptions(e){__privateSet(this,z,e)}setQueryDefaults(e,a){__privateGet(this,B).set(hashKey(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){const a=[...__privateGet(this,B).values()];let l={};return a.forEach(a=>{partialMatchKey(e,a.queryKey)&&(l={...l,...a.defaultOptions})}),l}setMutationDefaults(e,a){__privateGet(this,V).set(hashKey(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){const a=[...__privateGet(this,V).values()];let l={};return a.forEach(a=>{partialMatchKey(e,a.mutationKey)&&(l={...l,...a.defaultOptions})}),l}defaultQueryOptions(e){if(e._defaulted)return e;const a={...__privateGet(this,z).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=hashQueryKeyByOptions(a.queryKey,a)),void 0===a.refetchOnReconnect&&(a.refetchOnReconnect="always"!==a.networkMode),void 0===a.throwOnError&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),!0!==a.enabled&&a.queryFn===$s&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...__privateGet(this,z).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){__privateGet(this,L).clear(),__privateGet(this,$).clear()}},L=new WeakMap,$=new WeakMap,z=new WeakMap,B=new WeakMap,V=new WeakMap,H=new WeakMap,W=new WeakMap,Z=new WeakMap,K),Qs=(be=class extends Os{constructor(e,a){super(),__privateAdd(this,ue),__privateAdd(this,G),__privateAdd(this,Q),__privateAdd(this,Y),__privateAdd(this,J),__privateAdd(this,X),__privateAdd(this,ee),__privateAdd(this,te),__privateAdd(this,ae),__privateAdd(this,re),__privateAdd(this,oe),__privateAdd(this,le),__privateAdd(this,ie),__privateAdd(this,ce),__privateAdd(this,me),__privateAdd(this,de,new Set),this.options=a,__privateSet(this,G,e),__privateSet(this,ae,null),__privateSet(this,te,pendingThenable()),this.options.experimental_prefetchInRender||__privateGet(this,te).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(__privateGet(this,Q).addObserver(this),shouldFetchOnMount(__privateGet(this,Q),this.options)?__privateMethod(this,ue,pe).call(this):this.updateResult(),__privateMethod(this,ue,ye).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(__privateGet(this,Q),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(__privateGet(this,Q),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,__privateMethod(this,ue,ve).call(this),__privateMethod(this,ue,Ee).call(this),__privateGet(this,Q).removeObserver(this)}setOptions(e,a){const l=this.options,m=__privateGet(this,Q);if(this.options=__privateGet(this,G).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof resolveEnabled(this.options.enabled,__privateGet(this,Q)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");__privateMethod(this,ue,xe).call(this),__privateGet(this,Q).setOptions(this.options),l._defaulted&&!shallowEqualObjects(this.options,l)&&__privateGet(this,G).getQueryCache().notify({type:"observerOptionsUpdated",query:__privateGet(this,Q),observer:this});const u=this.hasListeners();u&&shouldFetchOptionally(__privateGet(this,Q),m,this.options,l)&&__privateMethod(this,ue,pe).call(this),this.updateResult(a),!u||__privateGet(this,Q)===m&&resolveEnabled(this.options.enabled,__privateGet(this,Q))===resolveEnabled(l.enabled,__privateGet(this,Q))&&resolveStaleTime(this.options.staleTime,__privateGet(this,Q))===resolveStaleTime(l.staleTime,__privateGet(this,Q))||__privateMethod(this,ue,fe).call(this);const p=__privateMethod(this,ue,ge).call(this);!u||__privateGet(this,Q)===m&&resolveEnabled(this.options.enabled,__privateGet(this,Q))===resolveEnabled(l.enabled,__privateGet(this,Q))&&p===__privateGet(this,me)||__privateMethod(this,ue,he).call(this,p)}getOptimisticResult(e){const a=__privateGet(this,G).getQueryCache().build(__privateGet(this,G),e),l=this.createResult(a,e);return function shouldAssignObserverCurrentProperties(e,a){if(!shallowEqualObjects(e.getCurrentResult(),a))return!0;return!1}(this,l)&&(__privateSet(this,J,l),__privateSet(this,ee,this.options),__privateSet(this,X,__privateGet(this,Q).state)),l}getCurrentResult(){return __privateGet(this,J)}trackResult(e,a){const l={};return Object.keys(e).forEach(m=>{Object.defineProperty(l,m,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(m),a?.(m),e[m])})}),l}trackProp(e){__privateGet(this,de).add(e)}getCurrentQuery(){return __privateGet(this,Q)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=__privateGet(this,G).defaultQueryOptions(e),l=__privateGet(this,G).getQueryCache().build(__privateGet(this,G),a);return l.fetch().then(()=>this.createResult(l,a))}fetch(e){return __privateMethod(this,ue,pe).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),__privateGet(this,J)))}createResult(e,a){const l=__privateGet(this,Q),m=this.options,u=__privateGet(this,J),p=__privateGet(this,X),f=__privateGet(this,ee),g=e!==l?e.state:__privateGet(this,Y),{state:h}=e;let y,v={...h},E=!1;if(a._optimisticResults){const u=this.hasListeners(),p=!u&&shouldFetchOnMount(e,a),f=u&&shouldFetchOptionally(e,l,a,m);(p||f)&&(v={...v,...fetchState(h.data,e.options)}),"isRestoring"===a._optimisticResults&&(v.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:b}=v;if(a.select&&void 0!==v.data)if(u&&v.data===p?.data&&a.select===__privateGet(this,re))y=__privateGet(this,oe);else try{__privateSet(this,re,a.select),y=a.select(v.data),y=replaceData(u?.data,y,a),__privateSet(this,oe,y),__privateSet(this,ae,null)}catch(A){__privateSet(this,ae,A)}else y=v.data;if(void 0!==a.placeholderData&&void 0===y&&"pending"===b){let e;if(u?.isPlaceholderData&&a.placeholderData===f?.placeholderData)e=u.data;else if(e="function"==typeof a.placeholderData?a.placeholderData(__privateGet(this,le)?.state.data,__privateGet(this,le)):a.placeholderData,a.select&&void 0!==e)try{e=a.select(e),__privateSet(this,ae,null)}catch(A){__privateSet(this,ae,A)}void 0!==e&&(b="success",y=replaceData(u?.data,e,a),E=!0)}__privateGet(this,ae)&&(x=__privateGet(this,ae),y=__privateGet(this,oe),w=Date.now(),b="error");const N="fetching"===v.fetchStatus,_="pending"===b,k="error"===b,S=_&&N,C=void 0!==y,R={status:b,fetchStatus:v.fetchStatus,isPending:_,isSuccess:"success"===b,isError:k,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:v.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>g.dataUpdateCount||v.errorUpdateCount>g.errorUpdateCount,isFetching:N,isRefetching:N&&!_,isLoadingError:k&&!C,isPaused:"paused"===v.fetchStatus,isPlaceholderData:E,isRefetchError:k&&C,isStale:isStale(e,a),refetch:this.refetch,promise:__privateGet(this,te)};if(this.options.experimental_prefetchInRender){const finalizeThenableIfPossible=e=>{"error"===R.status?e.reject(R.error):void 0!==R.data&&e.resolve(R.data)},recreateThenable=()=>{const e=__privateSet(this,te,R.promise=pendingThenable());finalizeThenableIfPossible(e)},a=__privateGet(this,te);switch(a.status){case"pending":e.queryHash===l.queryHash&&finalizeThenableIfPossible(a);break;case"fulfilled":"error"!==R.status&&R.data===a.value||recreateThenable();break;case"rejected":"error"===R.status&&R.error===a.reason||recreateThenable()}}return R}updateResult(e){const a=__privateGet(this,J),l=this.createResult(__privateGet(this,Q),this.options);if(__privateSet(this,X,__privateGet(this,Q).state),__privateSet(this,ee,this.options),void 0!==__privateGet(this,X).data&&__privateSet(this,le,__privateGet(this,Q)),shallowEqualObjects(l,a))return;__privateSet(this,J,l);const m={};!1!==e?.listeners&&(()=>{if(!a)return!0;const{notifyOnChangeProps:e}=this.options,l="function"==typeof e?e():e;if("all"===l||!l&&!__privateGet(this,de).size)return!0;const m=new Set(l??__privateGet(this,de));return this.options.throwOnError&&m.add("error"),Object.keys(__privateGet(this,J)).some(e=>{const l=e;return __privateGet(this,J)[l]!==a[l]&&m.has(l)})})()&&(m.listeners=!0),__privateMethod(this,ue,we).call(this,{...m,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&__privateMethod(this,ue,ye).call(this)}},G=new WeakMap,Q=new WeakMap,Y=new WeakMap,J=new WeakMap,X=new WeakMap,ee=new WeakMap,te=new WeakMap,ae=new WeakMap,re=new WeakMap,oe=new WeakMap,le=new WeakMap,ie=new WeakMap,ce=new WeakMap,me=new WeakMap,de=new WeakMap,ue=new WeakSet,pe=function(e){__privateMethod(this,ue,xe).call(this);let a=__privateGet(this,Q).fetch(this.options,e);return e?.throwOnError||(a=a.catch(noop$2)),a},fe=function(){__privateMethod(this,ue,ve).call(this);const e=resolveStaleTime(this.options.staleTime,__privateGet(this,Q));if(Ls||__privateGet(this,J).isStale||!isValidTimeout(e))return;const a=timeUntilStale(__privateGet(this,J).dataUpdatedAt,e);__privateSet(this,ie,setTimeout(()=>{__privateGet(this,J).isStale||this.updateResult()},a+1))},ge=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(__privateGet(this,Q)):this.options.refetchInterval)??!1},he=function(e){__privateMethod(this,ue,Ee).call(this),__privateSet(this,me,e),!Ls&&!1!==resolveEnabled(this.options.enabled,__privateGet(this,Q))&&isValidTimeout(__privateGet(this,me))&&0!==__privateGet(this,me)&&__privateSet(this,ce,setInterval(()=>{(this.options.refetchIntervalInBackground||Us.isFocused())&&__privateMethod(this,ue,pe).call(this)},__privateGet(this,me)))},ye=function(){__privateMethod(this,ue,fe).call(this),__privateMethod(this,ue,he).call(this,__privateMethod(this,ue,ge).call(this))},ve=function(){__privateGet(this,ie)&&(clearTimeout(__privateGet(this,ie)),__privateSet(this,ie,void 0))},Ee=function(){__privateGet(this,ce)&&(clearInterval(__privateGet(this,ce)),__privateSet(this,ce,void 0))},xe=function(){const e=__privateGet(this,G).getQueryCache().build(__privateGet(this,G),this.options);if(e===__privateGet(this,Q))return;const a=__privateGet(this,Q);__privateSet(this,Q,e),__privateSet(this,Y,e.state),this.hasListeners()&&(a?.removeObserver(this),e.addObserver(this))},we=function(e){qs.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(__privateGet(this,J))}),__privateGet(this,G).getQueryCache().notify({query:__privateGet(this,Q),type:"observerResultsUpdated"})})},be);function shouldFetchOnMount(e,a){return function shouldLoadOnMount(e,a){return!1!==resolveEnabled(a.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===a.retryOnMount)}(e,a)||void 0!==e.state.data&&shouldFetchOn(e,a,a.refetchOnMount)}function shouldFetchOn(e,a,l){if(!1!==resolveEnabled(a.enabled,e)){const m="function"==typeof l?l(e):l;return"always"===m||!1!==m&&isStale(e,a)}return!1}function shouldFetchOptionally(e,a,l,m){return(e!==a||!1===resolveEnabled(m.enabled,e))&&(!l.suspense||"error"!==e.state.status)&&isStale(e,l)}function isStale(e,a){return!1!==resolveEnabled(a.enabled,e)&&e.isStaleByTime(resolveStaleTime(a.staleTime,e))}var Ys=(Pe=class extends Os{constructor(e,a){super(),__privateAdd(this,Ce),__privateAdd(this,Ne),__privateAdd(this,_e),__privateAdd(this,ke),__privateAdd(this,Se),__privateSet(this,Ne,e),this.setOptions(a),this.bindMethods(),__privateMethod(this,Ce,Re).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const a=this.options;this.options=__privateGet(this,Ne).defaultMutationOptions(e),shallowEqualObjects(this.options,a)||__privateGet(this,Ne).getMutationCache().notify({type:"observerOptionsUpdated",mutation:__privateGet(this,ke),observer:this}),a?.mutationKey&&this.options.mutationKey&&hashKey(a.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():"pending"===__privateGet(this,ke)?.state.status&&__privateGet(this,ke).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||__privateGet(this,ke)?.removeObserver(this)}onMutationUpdate(e){__privateMethod(this,Ce,Re).call(this),__privateMethod(this,Ce,Ae).call(this,e)}getCurrentResult(){return __privateGet(this,_e)}reset(){__privateGet(this,ke)?.removeObserver(this),__privateSet(this,ke,void 0),__privateMethod(this,Ce,Re).call(this),__privateMethod(this,Ce,Ae).call(this)}mutate(e,a){return __privateSet(this,Se,a),__privateGet(this,ke)?.removeObserver(this),__privateSet(this,ke,__privateGet(this,Ne).getMutationCache().build(__privateGet(this,Ne),this.options)),__privateGet(this,ke).addObserver(this),__privateGet(this,ke).execute(e)}},Ne=new WeakMap,_e=new WeakMap,ke=new WeakMap,Se=new WeakMap,Ce=new WeakSet,Re=function(){const e=__privateGet(this,ke)?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};__privateSet(this,_e,{...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},Ae=function(e){qs.batch(()=>{if(__privateGet(this,Se)&&this.hasListeners()){const a=__privateGet(this,_e).variables,l=__privateGet(this,_e).context;"success"===e?.type?(__privateGet(this,Se).onSuccess?.(e.data,a,l),__privateGet(this,Se).onSettled?.(e.data,null,a,l)):"error"===e?.type&&(__privateGet(this,Se).onError?.(e.error,a,l),__privateGet(this,Se).onSettled?.(void 0,e.error,a,l))}this.listeners.forEach(e=>{e(__privateGet(this,_e))})})},Pe),Js=Me.createContext(void 0),useQueryClient=e=>{const a=Me.useContext(Js);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a},QueryClientProvider=({client:e,children:a})=>(Me.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),tt.jsx(Js.Provider,{value:e,children:a})),Xs=Me.createContext(!1);Xs.Provider;var eo=Me.createContext(function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function shouldThrowError(e,a){return"function"==typeof e?e(...a):!!e}function noop$1(){}var to,ao,fetchOptimistic=(e,a,l)=>a.fetchOptimistic(e).catch(()=>{l.clearReset()});function useBaseQuery(e,a,l){const m=useQueryClient(),u=Me.useContext(Xs),p=Me.useContext(eo),f=m.defaultQueryOptions(e);m.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=u?"isRestoring":"optimistic",(e=>{e.suspense&&(void 0===e.staleTime&&(e.staleTime=1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(f),((e,a)=>{(e.suspense||e.throwOnError)&&(a.isReset()||(e.retryOnMount=!1))})(f,p),(e=>{Me.useEffect(()=>{e.clearReset()},[e])})(p);const g=!m.getQueryCache().get(f.queryHash),[h]=Me.useState(()=>new a(m,f)),y=h.getOptimisticResult(f);if(Me.useSyncExternalStore(Me.useCallback(e=>{const a=u?()=>{}:h.subscribe(qs.batchCalls(e));return h.updateResult(),a},[h,u]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Me.useEffect(()=>{h.setOptions(f,{listeners:!1})},[f,h]),((e,a)=>e?.suspense&&a.isPending)(f,y))throw fetchOptimistic(f,h,p);if((({result:e,errorResetBoundary:a,throwOnError:l,query:m})=>e.isError&&!a.isReset()&&!e.isFetching&&m&&shouldThrowError(l,[e.error,m]))({result:y,errorResetBoundary:p,throwOnError:f.throwOnError,query:m.getQueryCache().get(f.queryHash)}))throw y.error;if(m.getDefaultOptions().queries?._experimental_afterQuery?.(f,y),f.experimental_prefetchInRender&&!Ls&&((e,a)=>e.isLoading&&e.isFetching&&!a)(y,u)){const e=g?fetchOptimistic(f,h,p):m.getQueryCache().get(f.queryHash)?.promise;e?.catch(noop$1).finally(()=>{h.updateResult()})}return f.notifyOnChangeProps?y:h.trackResult(y)}function useQuery(e,a){return useBaseQuery(e,Qs)}function useMutation(e,a){const l=useQueryClient(),[m]=Me.useState(()=>new Ys(l,e));Me.useEffect(()=>{m.setOptions(e)},[m,e]);const u=Me.useSyncExternalStore(Me.useCallback(e=>m.subscribe(qs.batchCalls(e)),[m]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),p=Me.useCallback((e,a)=>{m.mutate(e,a).catch(noop$1)},[m]);if(u.error&&shouldThrowError(m.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:p,mutateAsync:u.mutate}}
/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(e[m]=l[m])}return e},_extends$2.apply(this,arguments)}(ao=to||(to={})).Pop="POP",ao.Push="PUSH",ao.Replace="REPLACE";const ro="popstate";function createBrowserHistory(e){return void 0===e&&(e={}),function getUrlBasedHistory(e,a,l,m){void 0===m&&(m={});let{window:u=document.defaultView,v5Compat:p=!1}=m,f=u.history,g=to.Pop,h=null,y=getIndex();null==y&&(y=0,f.replaceState(_extends$2({},f.state,{idx:y}),""));function getIndex(){return(f.state||{idx:null}).idx}function handlePop(){g=to.Pop;let e=getIndex(),a=null==e?null:e-y;y=e,h&&h({action:g,location:v.location,delta:a})}function push(e,a){g=to.Push;let l=createLocation(v.location,e,a);y=getIndex()+1;let m=getHistoryState(l,y),E=v.createHref(l);try{f.pushState(m,"",E)}catch(x){if(x instanceof DOMException&&"DataCloneError"===x.name)throw x;u.location.assign(E)}p&&h&&h({action:g,location:v.location,delta:1})}function replace2(e,a){g=to.Replace;let l=createLocation(v.location,e,a);y=getIndex();let m=getHistoryState(l,y),u=v.createHref(l);f.replaceState(m,"",u),p&&h&&h({action:g,location:v.location,delta:0})}function createURL(e){let a="null"!==u.location.origin?u.location.origin:u.location.href,l="string"==typeof e?e:createPath(e);return l=l.replace(/ $/,"%20"),invariant(a,"No window.location.(origin|href) available to create URL for href: "+l),new URL(l,a)}let v={get action(){return g},get location(){return e(u,f)},listen(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(ro,handlePop),h=e,()=>{u.removeEventListener(ro,handlePop),h=null}},createHref:e=>a(u,e),createURL:createURL,encodeLocation(e){let a=createURL(e);return{pathname:a.pathname,search:a.search,hash:a.hash}},push:push,replace:replace2,go:e=>f.go(e)};return v}(function createBrowserLocation(e,a){let{pathname:l,search:m,hash:u}=e.location;return createLocation("",{pathname:l,search:m,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")},function createBrowserHref(e,a){return"string"==typeof a?a:createPath(a)},0,e)}function invariant(e,a){if(!1===e||null==e)throw new Error(a)}function warning(e,a){if(!e){"undefined"!=typeof console&&console.warn(a);try{throw new Error(a)}catch(l){}}}function getHistoryState(e,a){return{usr:e.state,key:e.key,idx:a}}function createLocation(e,a,l,m){return void 0===l&&(l=null),_extends$2({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof a?parsePath(a):a,{state:l,key:a&&a.key||m||Math.random().toString(36).substr(2,8)})}function createPath(e){let{pathname:a="/",search:l="",hash:m=""}=e;return l&&"?"!==l&&(a+="?"===l.charAt(0)?l:"?"+l),m&&"#"!==m&&(a+="#"===m.charAt(0)?m:"#"+m),a}function parsePath(e){let a={};if(e){let l=e.indexOf("#");l>=0&&(a.hash=e.substr(l),e=e.substr(0,l));let m=e.indexOf("?");m>=0&&(a.search=e.substr(m),e=e.substr(0,m)),e&&(a.pathname=e)}return a}var no,so;function matchRoutes(e,a,l){return void 0===l&&(l="/"),function matchRoutesImpl(e,a,l,m){let u="string"==typeof a?parsePath(a):a,p=stripBasename(u.pathname||"/",l);if(null==p)return null;let f=flattenRoutes(e);!function rankRouteBranches(e){e.sort((e,a)=>e.score!==a.score?a.score-e.score:function compareIndexes(e,a){let l=e.length===a.length&&e.slice(0,-1).every((e,l)=>e===a[l]);return l?e[e.length-1]-a[a.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),a.routesMeta.map(e=>e.childrenIndex)))}(f);let g=null;for(let h=0;null==g&&h<f.length;++h){let e=decodePath(p);g=matchRouteBranch(f[h],e,m)}return g}(e,a,l,!1)}function flattenRoutes(e,a,l,m){void 0===a&&(a=[]),void 0===l&&(l=[]),void 0===m&&(m="");let flattenRoute=(e,u,p)=>{let f={relativePath:void 0===p?e.path||"":p,caseSensitive:!0===e.caseSensitive,childrenIndex:u,route:e};f.relativePath.startsWith("/")&&(invariant(f.relativePath.startsWith(m),'Absolute route path "'+f.relativePath+'" nested under path "'+m+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),f.relativePath=f.relativePath.slice(m.length));let g=joinPaths([m,f.relativePath]),h=l.concat(f);e.children&&e.children.length>0&&(invariant(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+g+'".'),flattenRoutes(e.children,a,h,g)),(null!=e.path||e.index)&&a.push({path:g,score:computeScore(g,e.index),routesMeta:h})};return e.forEach((e,a)=>{var l;if(""!==e.path&&null!=(l=e.path)&&l.includes("?"))for(let m of explodeOptionalSegments(e.path))flattenRoute(e,a,m);else flattenRoute(e,a)}),a}function explodeOptionalSegments(e){let a=e.split("/");if(0===a.length)return[];let[l,...m]=a,u=l.endsWith("?"),p=l.replace(/\?$/,"");if(0===m.length)return u?[p,""]:[p];let f=explodeOptionalSegments(m.join("/")),g=[];return g.push(...f.map(e=>""===e?p:[p,e].join("/"))),u&&g.push(...f),g.map(a=>e.startsWith("/")&&""===a?"/":a)}(so=no||(no={})).data="data",so.deferred="deferred",so.redirect="redirect",so.error="error";const oo=/^:[\w-]+$/,lo=3,io=2,co=1,mo=10,uo=-2,isSplat=e=>"*"===e;function computeScore(e,a){let l=e.split("/"),m=l.length;return l.some(isSplat)&&(m+=uo),a&&(m+=io),l.filter(e=>!isSplat(e)).reduce((e,a)=>e+(oo.test(a)?lo:""===a?co:mo),m)}function matchRouteBranch(e,a,l){let{routesMeta:m}=e,u={},p="/",f=[];for(let g=0;g<m.length;++g){let e=m[g],h=g===m.length-1,y="/"===p?a:a.slice(p.length)||"/",v=matchPath({path:e.relativePath,caseSensitive:e.caseSensitive,end:h},y),E=e.route;if(!v&&h&&l&&!m[m.length-1].route.index&&(v=matchPath({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},y)),!v)return null;Object.assign(u,v.params),f.push({params:u,pathname:joinPaths([p,v.pathname]),pathnameBase:normalizePathname(joinPaths([p,v.pathnameBase])),route:E}),"/"!==v.pathnameBase&&(p=joinPaths([p,v.pathnameBase]))}return f}function matchPath(e,a){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[l,m]=function compilePath(e,a,l){void 0===a&&(a=!1);void 0===l&&(l=!0);warning("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let m=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,a,l)=>(m.push({paramName:a,isOptional:null!=l}),l?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(m.push({paramName:"*"}),u+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?u+="\\/*$":""!==e&&"/"!==e&&(u+="(?:(?=\\/|$))");let p=new RegExp(u,a?void 0:"i");return[p,m]}(e.path,e.caseSensitive,e.end),u=a.match(l);if(!u)return null;let p=u[0],f=p.replace(/(.)\/+$/,"$1"),g=u.slice(1);return{params:m.reduce((e,a,l)=>{let{paramName:m,isOptional:u}=a;if("*"===m){let e=g[l]||"";f=p.slice(0,p.length-e.length).replace(/(.)\/+$/,"$1")}const h=g[l];return e[m]=u&&!h?void 0:(h||"").replace(/%2F/g,"/"),e},{}),pathname:p,pathnameBase:f,pattern:e}}function decodePath(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(a){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+a+")."),e}}function stripBasename(e,a){if("/"===a)return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,m=e.charAt(l);return m&&"/"!==m?null:e.slice(l)||"/"}function getInvalidPathError(e,a,l,m){return"Cannot include a '"+e+"' character in a manually specified `to."+a+"` field ["+JSON.stringify(m)+"].  Please separate it out to the `to."+l+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function getResolveToMatches(e,a){let l=function getPathContributingMatches(e){return e.filter((e,a)=>0===a||e.route.path&&e.route.path.length>0)}(e);return a?l.map((e,a)=>a===l.length-1?e.pathname:e.pathnameBase):l.map(e=>e.pathnameBase)}function resolveTo(e,a,l,m){let u;void 0===m&&(m=!1),"string"==typeof e?u=parsePath(e):(u=_extends$2({},e),invariant(!u.pathname||!u.pathname.includes("?"),getInvalidPathError("?","pathname","search",u)),invariant(!u.pathname||!u.pathname.includes("#"),getInvalidPathError("#","pathname","hash",u)),invariant(!u.search||!u.search.includes("#"),getInvalidPathError("#","search","hash",u)));let p,f=""===e||""===u.pathname,g=f?"/":u.pathname;if(null==g)p=l;else{let e=a.length-1;if(!m&&g.startsWith("..")){let a=g.split("/");for(;".."===a[0];)a.shift(),e-=1;u.pathname=a.join("/")}p=e>=0?a[e]:"/"}let h=function resolvePath(e,a){void 0===a&&(a="/");let{pathname:l,search:m="",hash:u=""}="string"==typeof e?parsePath(e):e,p=l?l.startsWith("/")?l:function resolvePathname(e,a){let l=a.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?l.length>1&&l.pop():"."!==e&&l.push(e)}),l.length>1?l.join("/"):"/"}(l,a):a;return{pathname:p,search:normalizeSearch(m),hash:normalizeHash(u)}}(u,p),y=g&&"/"!==g&&g.endsWith("/"),v=(f||"."===g)&&l.endsWith("/");return h.pathname.endsWith("/")||!y&&!v||(h.pathname+="/"),h}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",normalizeHash=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const po=["post","put","patch","delete"];new Set(po);const fo=["get",...po];
/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(e[m]=l[m])}return e},_extends$1.apply(this,arguments)}new Set(fo);const go=Me.createContext(null),ho=Me.createContext(null),yo=Me.createContext(null),vo=Me.createContext(null),Eo=Me.createContext({outlet:null,matches:[],isDataRoute:!1}),xo=Me.createContext(null);function useInRouterContext(){return null!=Me.useContext(vo)}function useLocation(){return useInRouterContext()||invariant(!1),Me.useContext(vo).location}function useIsomorphicLayoutEffect$1(e){Me.useContext(yo).static||Me.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=Me.useContext(Eo);return e?function useNavigateStable(){let{router:e}=function useDataRouterContext(e){let a=Me.useContext(go);return a||invariant(!1),a}(bo.UseNavigateStable),a=useCurrentRouteId(No.UseNavigateStable),l=Me.useRef(!1);useIsomorphicLayoutEffect$1(()=>{l.current=!0});let m=Me.useCallback(function(m,u){void 0===u&&(u={}),l.current&&("number"==typeof m?e.navigate(m):e.navigate(m,_extends$1({fromRouteId:a},u)))},[e,a]);return m}():function useNavigateUnstable(){useInRouterContext()||invariant(!1);let e=Me.useContext(go),{basename:a,future:l,navigator:m}=Me.useContext(yo),{matches:u}=Me.useContext(Eo),{pathname:p}=useLocation(),f=JSON.stringify(getResolveToMatches(u,l.v7_relativeSplatPath)),g=Me.useRef(!1);useIsomorphicLayoutEffect$1(()=>{g.current=!0});let h=Me.useCallback(function(l,u){if(void 0===u&&(u={}),!g.current)return;if("number"==typeof l)return void m.go(l);let h=resolveTo(l,JSON.parse(f),p,"path"===u.relative);null==e&&"/"!==a&&(h.pathname="/"===h.pathname?a:joinPaths([a,h.pathname])),(u.replace?m.replace:m.push)(h,u.state,u)},[a,m,f,p,e]);return h}()}function useParams(){let{matches:e}=Me.useContext(Eo),a=e[e.length-1];return a?a.params:{}}function useResolvedPath(e,a){let{relative:l}=void 0===a?{}:a,{future:m}=Me.useContext(yo),{matches:u}=Me.useContext(Eo),{pathname:p}=useLocation(),f=JSON.stringify(getResolveToMatches(u,m.v7_relativeSplatPath));return Me.useMemo(()=>resolveTo(e,JSON.parse(f),p,"path"===l),[e,f,p,l])}function useRoutes(e,a){return function useRoutesImpl(e,a,l,m){useInRouterContext()||invariant(!1);let{navigator:u}=Me.useContext(yo),{matches:p}=Me.useContext(Eo),f=p[p.length-1],g=f?f.params:{};!f||f.pathname;let h=f?f.pathnameBase:"/";f&&f.route;let y,v=useLocation();if(a){var E;let e="string"==typeof a?parsePath(a):a;"/"===h||(null==(E=e.pathname)?void 0:E.startsWith(h))||invariant(!1),y=e}else y=v;let x=y.pathname||"/",w=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=matchRoutes(e,{pathname:w}),N=function _renderMatches(e,a,l,m){var u;void 0===a&&(a=[]);void 0===l&&(l=null);void 0===m&&(m=null);if(null==e){var p;if(!l)return null;if(l.errors)e=l.matches;else{if(!(null!=(p=m)&&p.v7_partialHydration&&0===a.length&&!l.initialized&&l.matches.length>0))return null;e=l.matches}}let f=e,g=null==(u=l)?void 0:u.errors;if(null!=g){let e=f.findIndex(e=>e.route.id&&void 0!==(null==g?void 0:g[e.route.id]));e>=0||invariant(!1),f=f.slice(0,Math.min(f.length,e+1))}let h=!1,y=-1;if(l&&m&&m.v7_partialHydration)for(let v=0;v<f.length;v++){let e=f[v];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(y=v),e.route.id){let{loaderData:a,errors:m}=l,u=e.route.loader&&void 0===a[e.route.id]&&(!m||void 0===m[e.route.id]);if(e.route.lazy||u){h=!0,f=y>=0?f.slice(0,y+1):[f[0]];break}}}return f.reduceRight((e,m,u)=>{let p,v=!1,E=null,x=null;l&&(p=g&&m.route.id?g[m.route.id]:void 0,E=m.route.errorElement||wo,h&&(y<0&&0===u?(v=!0,x=null):y===u&&(v=!0,x=m.route.hydrateFallbackElement||null)));let w=a.concat(f.slice(0,u+1)),getChildren=()=>{let a;return a=p?E:v?x:m.route.Component?Me.createElement(m.route.Component,null):m.route.element?m.route.element:e,Me.createElement(RenderedRoute,{match:m,routeContext:{outlet:e,matches:w,isDataRoute:null!=l},children:a})};return l&&(m.route.ErrorBoundary||m.route.errorElement||0===u)?Me.createElement(RenderErrorBoundary,{location:l.location,revalidation:l.revalidation,component:E,error:p,children:getChildren(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):getChildren()},null)}(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},g,e.params),pathname:joinPaths([h,u.encodeLocation?u.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:joinPaths([h,u.encodeLocation?u.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),p,l,m);if(a&&N)return Me.createElement(vo.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:to.Pop}},N);return N}(e,a)}function DefaultErrorComponent(){let e=function useRouteError(){var e;let a=Me.useContext(xo),l=function useDataRouterState(e){let a=Me.useContext(ho);return a||invariant(!1),a}(No.UseRouteError),m=useCurrentRouteId(No.UseRouteError);if(void 0!==a)return a;return null==(e=l.errors)?void 0:e[m]}(),a=function isRouteErrorResponse(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),l=e instanceof Error?e.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Me.createElement(Me.Fragment,null,Me.createElement("h2",null,"Unexpected Application Error!"),Me.createElement("h3",{style:{fontStyle:"italic"}},a),l?Me.createElement("pre",{style:m},l):null,null)}const wo=Me.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends Me.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||"idle"!==a.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){console.error("React Router caught the following error during render",e,a)}render(){return void 0!==this.state.error?Me.createElement(Eo.Provider,{value:this.props.routeContext},Me.createElement(xo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:a,match:l,children:m}=e,u=Me.useContext(go);return u&&u.static&&u.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=l.route.id),Me.createElement(Eo.Provider,{value:a},m)}var bo=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bo||{}),No=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(No||{});function useCurrentRouteId(e){let a=function useRouteContext(e){let a=Me.useContext(Eo);return a||invariant(!1),a}(),l=a.matches[a.matches.length-1];return l.route.id||invariant(!1),l.route.id}function Navigate(e){let{to:a,replace:l,state:m,relative:u}=e;useInRouterContext()||invariant(!1);let{future:p,static:f}=Me.useContext(yo),{matches:g}=Me.useContext(Eo),{pathname:h}=useLocation(),y=useNavigate(),v=resolveTo(a,getResolveToMatches(g,p.v7_relativeSplatPath),h,"path"===u),E=JSON.stringify(v);return Me.useEffect(()=>y(JSON.parse(E),{replace:l,state:m,relative:u}),[y,E,u,l,m]),null}function Route(e){invariant(!1)}function Router(e){let{basename:a="/",children:l=null,location:m,navigationType:u=to.Pop,navigator:p,static:f=!1,future:g}=e;useInRouterContext()&&invariant(!1);let h=a.replace(/^\/*/,"/"),y=Me.useMemo(()=>({basename:h,navigator:p,static:f,future:_extends$1({v7_relativeSplatPath:!1},g)}),[h,g,p,f]);"string"==typeof m&&(m=parsePath(m));let{pathname:v="/",search:E="",hash:x="",state:w=null,key:b="default"}=m,N=Me.useMemo(()=>{let e=stripBasename(v,h);return null==e?null:{location:{pathname:e,search:E,hash:x,state:w,key:b},navigationType:u}},[h,v,E,x,w,b,u]);return null==N?null:Me.createElement(yo.Provider,{value:y},Me.createElement(vo.Provider,{children:l,value:N}))}function Routes(e){let{children:a,location:l}=e;return useRoutes(createRoutesFromChildren(a),l)}function createRoutesFromChildren(e,a){void 0===a&&(a=[]);let l=[];return Me.Children.forEach(e,(e,m)=>{if(!Me.isValidElement(e))return;let u=[...a,m];if(e.type===Me.Fragment)return void l.push.apply(l,createRoutesFromChildren(e.props.children,u));e.type!==Route&&invariant(!1),e.props.index&&e.props.children&&invariant(!1);let p={id:e.props.id||u.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(p.children=createRoutesFromChildren(e.props.children,u)),l.push(p)}),l}
/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(e[m]=l[m])}return e},_extends.apply(this,arguments)}function createSearchParams(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((a,l)=>{let m=e[l];return a.concat(Array.isArray(m)?m.map(e=>[l,e]):[[l,m]])},[]))}new Promise(()=>{});const _o=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(mE){}const ko=Le.startTransition;function BrowserRouter(e){let{basename:a,children:l,future:m,window:u}=e,p=Me.useRef();null==p.current&&(p.current=createBrowserHistory({window:u,v5Compat:!0}));let f=p.current,[g,h]=Me.useState({action:f.action,location:f.location}),{v7_startTransition:y}=m||{},v=Me.useCallback(e=>{y&&ko?ko(()=>h(e)):h(e)},[h,y]);return Me.useLayoutEffect(()=>f.listen(v),[f,v]),Me.createElement(Router,{basename:a,children:l,location:g.location,navigationType:g.action,navigator:f,future:m})}const So="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Co=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ro=Me.forwardRef(function LinkWithRef(e,a){let l,{onClick:m,relative:u,reloadDocument:p,replace:f,state:g,target:h,to:y,preventScrollReset:v,viewTransition:E}=e,x=function _objectWithoutPropertiesLoose$1(e,a){if(null==e)return{};var l,m,u={},p=Object.keys(e);for(m=0;m<p.length;m++)l=p[m],a.indexOf(l)>=0||(u[l]=e[l]);return u}(e,_o),{basename:w}=Me.useContext(yo),b=!1;if("string"==typeof y&&Co.test(y)&&(l=y,So))try{let e=new URL(window.location.href),a=y.startsWith("//")?new URL(e.protocol+y):new URL(y),l=stripBasename(a.pathname,w);a.origin===e.origin&&null!=l?y=l+a.search+a.hash:b=!0}catch(mE){}let N=function useHref(e,a){let{relative:l}=void 0===a?{}:a;useInRouterContext()||invariant(!1);let{basename:m,navigator:u}=Me.useContext(yo),{hash:p,pathname:f,search:g}=useResolvedPath(e,{relative:l}),h=f;return"/"!==m&&(h="/"===f?m:joinPaths([m,f])),u.createHref({pathname:h,search:g,hash:p})}(y,{relative:u}),_=function useLinkClickHandler(e,a){let{target:l,replace:m,state:u,preventScrollReset:p,relative:f,viewTransition:g}=void 0===a?{}:a,h=useNavigate(),y=useLocation(),v=useResolvedPath(e,{relative:f});return Me.useCallback(a=>{if(function shouldProcessLinkClick(e,a){return!(0!==e.button||a&&"_self"!==a||function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(a,l)){a.preventDefault();let l=void 0!==m?m:createPath(y)===createPath(v);h(e,{replace:l,state:u,preventScrollReset:p,relative:f,viewTransition:g})}},[y,h,v,m,u,l,e,p,f,g])}(y,{replace:f,state:g,target:h,preventScrollReset:v,relative:u,viewTransition:E});return Me.createElement("a",_extends({},x,{href:l||N,onClick:b||p?m:function handleClick(e){m&&m(e),e.defaultPrevented||_(e)},ref:a,target:h}))});var Ao,To,Po,Do;function useSearchParams(e){let a=Me.useRef(createSearchParams(e)),l=Me.useRef(!1),m=useLocation(),u=Me.useMemo(()=>function getSearchParamsForLocation(e,a){let l=createSearchParams(e);return a&&a.forEach((e,m)=>{l.has(m)||a.getAll(m).forEach(e=>{l.append(m,e)})}),l}(m.search,l.current?null:a.current),[m.search]),p=useNavigate(),f=Me.useCallback((e,a)=>{const m=createSearchParams("function"==typeof e?e(u):e);l.current=!0,p("?"+m,a)},[p,u]);return[u,f]}function getAuthRedirectUrls(){return[...new Set(["https://craftchatbot.com"])]}function isValidRedirectUrl(e){try{const a=getAuthRedirectUrls(),l=new URL(e);return a.some(e=>new URL(e).origin===l.origin)}catch{return!1}}(To=Ao||(Ao={})).UseScrollRestoration="useScrollRestoration",To.UseSubmit="useSubmit",To.UseSubmitFetcher="useSubmitFetcher",To.UseFetcher="useFetcher",To.useViewTransitionState="useViewTransitionState",(Do=Po||(Po={})).UseFetcher="useFetcher",Do.UseFetchers="useFetchers",Do.UseScrollRestoration="useScrollRestoration",getAuthRedirectUrls();const authConfig_getSiteUrl=()=>"https://craftchatbot.com",authConfig_getRedirectUrls=()=>getAuthRedirectUrls(),authConfig_getSignInOptions=e=>({redirectTo:e&&isValidRedirectUrl(e)?e:"https://craftchatbot.com/dashboard"}),authConfig_getSignUpOptions=e=>({redirectTo:e&&isValidRedirectUrl(e)?e:"https://craftchatbot.com/dashboard"}),authConfig_getPasswordResetOptions=e=>({redirectTo:e&&isValidRedirectUrl(e)?e:"https://craftchatbot.com/auth/reset-password"}),Io="https://kvlaydeyqidlfpfutbmp.supabase.co",Fo="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2bGF5ZGV5cWlkbGZwZnV0Ym1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyODgzNzAsImV4cCI6MjA2NTg2NDM3MH0.XVSO5W_0v6wW-MYlM7i0MTNKprOWp_O4ON-5LqqVnzw";if(console.log(" SUPABASE CONFIG CHECK:",{SUPA_URL:Io,SUPA_KEY_LENGTH:208,HAS_URL:!0,HAS_KEY:!0,ENV_MODE:"production",URL_VALID:Io?.includes("supabase.co"),KEY_VALID:!0,TIMESTAMP:(new Date).toISOString()}),Io.includes("placeholder"))throw new Error(" CRITICAL: Invalid or missing VITE_SUPABASE_URL");if(Fo.includes("placeholder"))throw new Error(" CRITICAL: Invalid or missing VITE_SUPABASE_ANON_KEY");const Mo=Ue(Io,Fo,{auth:{persistSession:!0,detectSessionInUrl:!0,autoRefreshToken:!0,flowType:"pkce",debug:!1},realtime:{enabled:!1},global:{headers:{"X-Client-Info":"lawmatterssg-webapp","X-Client-Version":"1.0.0"}},db:{schema:"public"}});"undefined"!=typeof window&&(window.supabase=void 0,console.log(" Supabase client created successfully (SERVER-CONTROLLED SESSIONS):",{url:Io,timestamp:(new Date).toISOString(),clientReady:!0,persistSession:!1,autoRefreshToken:!1,architecture:"cookie-only-sessions"}));const jo=Object.freeze(Object.defineProperty({__proto__:null,supabase:Mo},Symbol.toStringTag,{value:"Module"})),Oo={async getCurrentProfile(){console.log(" getCurrentProfile - Starting profile fetch...");try{const{data:{user:e},error:a}=await Mo.auth.getUser();if(a)throw console.error(" getCurrentProfile - Auth error:",a),a;if(!e)throw console.error(" getCurrentProfile - No user authenticated"),new Error("User not authenticated");console.log(" getCurrentProfile - Auth User ID:",e.id),console.log(" getCurrentProfile - Auth User Email:",e.email),console.log(" Testing Supabase connection...");const{data:l,error:m}=await Mo.from("profiles").select("count").limit(1);console.log(" Supabase connection test:",{testData:l,testError:m});const{data:u,error:p}=await Mo.from("profiles").select("*").eq("id",e.id).single();if(console.log(" getCurrentProfile - Profile Query Result:",{data:u?{id:u.id,email:u.email,role:u.role,subscription_tier:u.subscription_tier}:null,error:p?{message:p.message,code:p.code,details:p.details,hint:p.hint}:null,userId:e.id,queryUsed:`SELECT * FROM profiles WHERE id = '${e.id}'`}),p){if(console.error("Profile query error:",p),e.email){console.log("Trying fallback: searching profile by email...");const{data:a,error:l}=await Mo.from("profiles").select("*").eq("email",e.email).single();if(console.log("Email-based profile query result:",{emailData:a,emailError:l}),l)throw console.error("Email-based profile query also failed:",l),p;return a}throw p}if(!u)throw console.error(" getCurrentProfile - Profile data is null despite no error"),new Error("Profile data is null");return console.log(" getCurrentProfile - Profile fetched successfully:",{email:u.email,role:u.role,subscription_tier:u.subscription_tier,id:u.id,roleType:typeof u.role,isSuperAdmin:"super_admin"===u.role}),u}catch(e){throw console.error(" getCurrentProfile - Unexpected error:",e),e}},async updateProfile(e){const{data:a,error:l}=await Mo.from("profiles").update(e).select().single();if(l)throw l;return a},async getUserUsage(){const{data:{user:e},error:a}=await Mo.auth.getUser();if(a)throw a;if(!e)throw new Error("User not authenticated");const{data:l,error:m}=await Mo.from("user_usage").select("*").eq("user_id",e.id).single();if(m)throw m;return l},async checkUsageLimit(e){const a=await Mo.auth.getUser();if(!a.data.user)throw new Error("User not authenticated");const{data:l,error:m}=await Mo.rpc("check_usage_limits",{user_id:a.data.user.id,operation_type:e});if(m)throw m;return l},async incrementUsage(e){const a=await Mo.auth.getUser();if(!a.data.user)throw new Error("User not authenticated");const{error:l}=await Mo.rpc("increment_usage",{user_id:a.data.user.id,operation_type:e});if(l)throw l}},Lo=Me.createContext(void 0),useAuth=()=>{const e=Me.useContext(Lo);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},useSafeAuth=()=>{const e=Me.useContext(Lo);return void 0===e?{user:null,profile:null,session:null,loading:!1,requiresTwoFactor:!1,signIn:async()=>{throw new Error("Authentication not available")},signUp:async()=>{throw new Error("Authentication not available")},signOut:async()=>{throw new Error("Authentication not available")},resetPassword:async()=>{throw new Error("Authentication not available")},updatePassword:async()=>{throw new Error("Authentication not available")},refreshProfile:async()=>{throw new Error("Authentication not available")},forceRefreshProfile:async()=>{throw new Error("Authentication not available")},verifyTwoFactor:async()=>{throw new Error("Authentication not available")},isTwoFactorEnabled:()=>!1}:e},AuthProvider=({children:e})=>{const[a,l]=Me.useState(null),[m,u]=Me.useState(null),[p,f]=Me.useState(null),[g,h]=Me.useState(!0),[y,v]=Me.useState(!1),E=Me.useRef(!0),x=Me.useRef(!1),persistProfile=e=>{try{if(e){const a={id:e.id,email:e.email,role:e.role,subscription_tier:e.subscription_tier,first_name:e.first_name,last_name:e.last_name,cached_at:Date.now()};sessionStorage.setItem("user-profile-cache",JSON.stringify(a))}else sessionStorage.removeItem("user-profile-cache")}catch(a){console.warn("Profile cache error:",a)}},loadCachedProfile=()=>{try{const e=sessionStorage.getItem("user-profile-cache");if(e){const a=JSON.parse(e),l=Date.now()-(a.cached_at||0);if(l<6e5)return a;sessionStorage.removeItem("user-profile-cache")}}catch(e){console.warn("Cache load error:",e),sessionStorage.removeItem("user-profile-cache")}return null},safeSetProfile=e=>{if(e)u(e),persistProfile(e);else{const e=loadCachedProfile();e?(u(e),persistProfile(e)):(u(null),persistProfile(null))}};Me.useEffect(()=>{let e,a=!0;return(async()=>{console.log(" AUTH INIT: Starting server-controlled session initialization...");try{if("true"===sessionStorage.getItem("force-signout")){console.log(" AUTH INIT: Force sign out requested - clearing all data...");try{return["user-profile-cache","force-signout"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(mE){}}),console.log(" Force sign out completed"),void(a&&(f(null),l(null),u(null),v(!1)))}catch(mE){console.warn("Force sign out failed:",mE)}}const g=loadCachedProfile();g&&a&&(console.log(" AUTH INIT: Using cached profile:",g.role),u(g)),e=setTimeout(()=>{a&&(console.warn(" AUTH INIT: MAXIMUM LOADING TIMEOUT (5s) - forcing loading to false"),h(!1),E.current=!1)},5e3),console.log(" AUTH INIT: Getting current Supabase session...");try{const{data:{session:e},error:u}=await Mo.auth.getSession();if(!a)return;if(u)console.error(" AUTH INIT: Session error:",u),f(null),l(null),safeSetProfile(null);else if(e&&e.user){console.log(" AUTH INIT: Valid session found for user:",e.user.email),f(e),l(e.user);try{const e=await Oo.getCurrentProfile();e&&a?(console.log(" AUTH INIT: Profile loaded:",e.role),safeSetProfile(e)):safeSetProfile(null)}catch(m){console.error(" AUTH INIT: Profile load failed:",m),safeSetProfile(null)}}else console.log(" AUTH INIT: No valid session found"),f(null),l(null),safeSetProfile(null)}catch(p){console.error(" AUTH INIT: Session validation failed:",p),a&&(f(null),l(null),safeSetProfile(null))}}catch(g){if(console.error(" AUTH INIT: Critical error (handled gracefully):",g),a){f(null),l(null);loadCachedProfile()||safeSetProfile(null)}}finally{a&&(console.log(" AUTH INIT: Initialization complete, guaranteed loading cleanup"),h(!1),E.current=!1),timeoutId&&clearTimeout(timeoutId),e&&clearTimeout(e)}})(),()=>{a=!1,timeoutId&&clearTimeout(timeoutId),e&&clearTimeout(e)}},[]),Me.useEffect(()=>{let e=null;try{const{data:{subscription:a}}=Mo.auth.onAuthStateChange(async(e,a)=>{if(console.log(" AUTH LISTENER: State change -",e,a?.user?.email||"no user"),x.current)console.log(" AUTH LISTENER: Skipping event processing - sign out in progress");else{if(a?.user&&a.expires_at){if(new Date(1e3*a.expires_at)<=new Date)return console.warn(" AUTH LISTENER: Session expired, clearing state"),f(null),l(null),u(null),persistProfile(null),void h(!1)}if("SIGNED_OUT"===e&&null===a)return console.log(" AUTH LISTENER: Storage cleared or session revoked"),f(null),l(null),u(null),persistProfile(null),void h(!1);if(f(a),l(a?.user??null),"SIGNED_IN"===e&&a?.user){console.log(" AUTH LISTENER: User signed in, loading profile...");try{const e=await Oo.getCurrentProfile();e&&(console.log(" AUTH LISTENER: Profile loaded on sign in:",e.role),safeSetProfile(e))}catch(m){console.warn(" AUTH LISTENER: Profile load error on sign in:",m)}}else"SIGNED_OUT"===e&&(console.log(" AUTH LISTENER: User signed out, clearing profile"),u(null),persistProfile(null));E.current||(console.log(" AUTH LISTENER: Clearing loading state after event processing"),h(!1)),E.current=!1}});e=a}catch(a){console.error(" AUTH LISTENER: Setup error:",a),h(!1)}return()=>{e&&e.unsubscribe()}},[]);const loadProfile=async(e=0)=>{try{console.log(" AuthContext - Loading user profile from database...",e>0?`(retry ${e})`:"");const{data:{user:a}}=await Mo.auth.getUser();console.log(" AuthContext - Current auth user:",a?.email,a?.id);const l=await Oo.getCurrentProfile();l?(console.log(" AuthContext - Profile loaded successfully:",{email:l.email,role:l.role,subscription_tier:l.subscription_tier,id:l.id,roleType:typeof l.role,isSuperAdmin:"super_admin"===l.role}),safeSetProfile(l)):(console.warn(" AuthContext - Profile data is null or undefined"),safeSetProfile(null))}catch(a){if(console.error(" AuthContext - Error loading profile:",a),console.error(" AuthContext - Error details:",{message:a instanceof Error?a.message:"Unknown error",stack:a instanceof Error?a.stack:void 0}),e<2){const a=1e3*Math.pow(2,e);console.log(`Retrying profile load in ${a}ms...`),setTimeout(()=>loadProfile(e+1),a)}else console.error("Failed to load profile after retries, setting to null"),safeSetProfile(null)}},signIn=async(e,a)=>{try{console.log(" Starting standard Supabase sign-in...");const{data:u,error:p}=await Mo.auth.signInWithPassword({email:e,password:a});if(p)throw console.error(" Sign-in failed:",p),p;if(u.session&&u.user){console.log(" Sign-in successful for:",u.user.email),f(u.session),l(u.user);try{const e=await Oo.getCurrentProfile();safeSetProfile(e),console.log(" Profile loaded:",e?.role)}catch(m){console.error(" Profile load failed:",m),safeSetProfile(null)}}return{}}catch(u){throw console.error(" Sign-in failed:",u),u}},signUp=async(e,a,l)=>{const{error:m}=await Mo.auth.signUp({email:e,password:a,options:{data:l,...authConfig_getSignUpOptions()}});if(m)throw m},signOut=async()=>{console.log(" SIGN OUT - Starting bulletproof sign out process...");try{console.log(" Setting sign out in progress flag..."),x.current=!0,console.log(" Clearing all auth storage...");["sb-kvlaydeyqidlfpfutbmp-auth-token","supabase.auth.token","auth-token","user-session","auth-state","user-profile-cache","supabase-auth-token","auth-session"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(mE){}});const e=[];for(let a=0;a<localStorage.length;a++){const l=localStorage.key(a);l&&l.startsWith("sb-")&&e.push(l)}e.forEach(e=>localStorage.removeItem(e)),console.log(" Storage cleared"),console.log(" Clearing React auth state..."),h(!1),f(null),l(null),u(null),v(!1),console.log(" React state cleared"),persistProfile(null),console.log(" Profile cache cleared"),console.log(" Attempting Supabase sign out...");try{await Mo.auth.signOut(),console.log(" Supabase sign out completed")}catch(mE){console.warn(" Supabase sign out failed (local state already cleared):",mE)}console.log(" Forcing immediate redirect to homepage..."),x.current=!1,window.location.replace("/")}catch(e){console.error(" Sign out error:",e),console.log(" Error during sign out - forcing emergency cleanup..."),h(!1),f(null),l(null),u(null),v(!1),x.current=!1,window.location.replace("/")}},emergencyLogout=()=>{console.log(" EMERGENCY LOGOUT ACTIVATED "),localStorage.clear(),sessionStorage.clear(),window.location.replace("/")},emergencyLoadingClear=()=>{console.log(" EMERGENCY LOADING CLEAR ACTIVATED "),h(!1),console.log("Loading state forcefully cleared")};Me.useEffect(()=>{"undefined"!=typeof window&&(window.emergencyLogout=emergencyLogout,window.emergencyLoadingClear=emergencyLoadingClear,console.log(" Emergency functions available: window.emergencyLogout(), window.emergencyLoadingClear()"))},[]),"undefined"!=typeof window&&(window.emergencyLogout=emergencyLogout);const resetPassword=async e=>{const{error:a}=await Mo.auth.resetPasswordForEmail(e,authConfig_getPasswordResetOptions());if(a)throw a},updatePassword=async e=>{try{const{error:a}=await Mo.auth.updateUser({password:e});if(a)throw a;console.log("Password updated successfully")}catch(a){throw console.error("Password update error:",a),a}},refreshProfile=async()=>{a&&await loadProfile()},verifyTwoFactor=async(e,a)=>{if(!(a?/^\d{8}$/.test(a):/^\d{6}$/.test(e)))throw new Error("Invalid verification code");v(!1),console.log("2FA verification successful")},isTwoFactorEnabled=()=>!1,resendVerificationEmail=async e=>{try{const{error:a}=await Mo.auth.resend({type:"signup",email:e,options:{emailRedirectTo:`${window.location.origin}/auth/confirm`}});if(a)throw console.error("Error resending verification email:",a),a;console.log("Verification email resent successfully")}catch(a){throw console.error("Resend verification email error:",a),a}},forceRefreshProfile=async()=>{console.log("Force refreshing user profile from database...");try{const e=await Oo.getCurrentProfile();return safeSetProfile(e),console.log("Profile force refreshed successfully:",e?.email,"Role:",e?.role,"Tier:",e?.subscription_tier),e}catch(e){throw console.error("Error force refreshing profile:",e),e}},w=Me.useMemo(()=>({user:a,profile:m,session:p,loading:g,requiresTwoFactor:y,signIn:signIn,signUp:signUp,signOut:signOut,resetPassword:resetPassword,updatePassword:updatePassword,refreshProfile:refreshProfile,forceRefreshProfile:forceRefreshProfile,verifyTwoFactor:verifyTwoFactor,isTwoFactorEnabled:isTwoFactorEnabled,resendVerificationEmail:resendVerificationEmail}),[a,m,p,g,y,signIn,signUp,signOut,resetPassword,updatePassword,refreshProfile,forceRefreshProfile,verifyTwoFactor,isTwoFactorEnabled,resendVerificationEmail]);return je.createElement(Lo.Provider,{value:w},e)},$o=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Uo=Me.forwardRef(({className:e,variant:a,size:l,asChild:m=!1,...u},p)=>{const f=m?at:"button";return Me.createElement(f,{className:cn($o({variant:a,size:l,className:e})),ref:p,...u})});Uo.displayName="Button";const zo=Me.forwardRef(({className:e,type:a,...l},m)=>Me.createElement("input",{type:a,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:m,...l}));zo.displayName="Input";var Bo="focusScope.autoFocusOnMount",qo="focusScope.autoFocusOnUnmount",Vo={bubbles:!1,cancelable:!0},Ho=Me.forwardRef((e,a)=>{const{loop:l=!1,trapped:m=!1,onMountAutoFocus:u,onUnmountAutoFocus:p,...f}=e,[g,h]=Me.useState(null),y=useCallbackRef$3(u),v=useCallbackRef$3(p),E=Me.useRef(null),x=useComposedRefs$2(a,e=>h(e)),w=Me.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Me.useEffect(()=>{if(m){let handleFocusIn2=function(e){if(w.paused||!g)return;const a=e.target;g.contains(a)?E.current=a:focus(E.current,{select:!0})},handleFocusOut2=function(e){if(w.paused||!g)return;const a=e.relatedTarget;null!==a&&(g.contains(a)||focus(E.current,{select:!0}))},handleMutations2=function(e){if(document.activeElement===document.body)for(const a of e)a.removedNodes.length>0&&focus(g)};document.addEventListener("focusin",handleFocusIn2),document.addEventListener("focusout",handleFocusOut2);const e=new MutationObserver(handleMutations2);return g&&e.observe(g,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn2),document.removeEventListener("focusout",handleFocusOut2),e.disconnect()}}},[m,g,w.paused]),Me.useEffect(()=>{if(g){Wo.add(w);const e=document.activeElement;if(!g.contains(e)){const a=new CustomEvent(Bo,Vo);g.addEventListener(Bo,y),g.dispatchEvent(a),a.defaultPrevented||(!function focusFirst$3(e,{select:a=!1}={}){const l=document.activeElement;for(const m of e)if(focus(m,{select:a}),document.activeElement!==l)return}(function removeLinks(e){return e.filter(e=>"A"!==e.tagName)}(getTabbableCandidates(g)),{select:!0}),document.activeElement===e&&focus(g))}return()=>{g.removeEventListener(Bo,y),setTimeout(()=>{const a=new CustomEvent(qo,Vo);g.addEventListener(qo,v),g.dispatchEvent(a),a.defaultPrevented||focus(e??document.body,{select:!0}),g.removeEventListener(qo,v),Wo.remove(w)},0)}}},[g,y,v,w]);const b=Me.useCallback(e=>{if(!l&&!m)return;if(w.paused)return;const a="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,u=document.activeElement;if(a&&u){const a=e.currentTarget,[m,p]=function getTabbableEdges(e){const a=getTabbableCandidates(e),l=findVisible(a,e),m=findVisible(a.reverse(),e);return[l,m]}(a);m&&p?e.shiftKey||u!==p?e.shiftKey&&u===m&&(e.preventDefault(),l&&focus(p,{select:!0})):(e.preventDefault(),l&&focus(m,{select:!0})):u===a&&e.preventDefault()}},[l,m,w.paused]);return tt.jsx(nt.div,{tabIndex:-1,...f,ref:x,onKeyDown:b})});function getTabbableCandidates(e){const a=[],l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const a="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||a?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;l.nextNode();)a.push(l.currentNode);return a}function findVisible(e,a){for(const l of e)if(!isHidden(l,{upTo:a}))return l}function isHidden(e,{upTo:a}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==a&&e===a)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function focus(e,{select:a=!1}={}){if(e&&e.focus){const l=document.activeElement;e.focus({preventScroll:!0}),e!==l&&function isSelectableInput(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&a&&e.select()}}Ho.displayName="FocusScope";var Wo=function createFocusScopesStack(){let e=[];return{add(a){const l=e[0];a!==l&&l?.pause(),e=arrayRemove(e,a),e.unshift(a)},remove(a){e=arrayRemove(e,a),e[0]?.resume()}}}();function arrayRemove(e,a){const l=[...e],m=l.indexOf(a);return-1!==m&&l.splice(m,1),l}var Zo=0;function useFocusGuards(){Me.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",e[1]??createFocusGuard()),Zo++,()=>{1===Zo&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Zo--}},[])}function createFocusGuard(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var __assign=function(){return __assign=Object.assign||function __assign2(e){for(var a,l=1,m=arguments.length;l<m;l++)for(var u in a=arguments[l])Object.prototype.hasOwnProperty.call(a,u)&&(e[u]=a[u]);return e},__assign.apply(this,arguments)};function __rest(e,a){var l={};for(var m in e)Object.prototype.hasOwnProperty.call(e,m)&&a.indexOf(m)<0&&(l[m]=e[m]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(m=Object.getOwnPropertySymbols(e);u<m.length;u++)a.indexOf(m[u])<0&&Object.prototype.propertyIsEnumerable.call(e,m[u])&&(l[m[u]]=e[m[u]])}return l}function __awaiter(e,a,l,m){return new(l||(l=Promise))(function(u,p){function fulfilled(e){try{step(m.next(e))}catch(mE){p(mE)}}function rejected(e){try{step(m.throw(e))}catch(mE){p(mE)}}function step(e){e.done?u(e.value):function adopt(e){return e instanceof l?e:new l(function(a){a(e)})}(e.value).then(fulfilled,rejected)}step((m=m.apply(e,a||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var Ko="right-scroll-bar-position",Go="width-before-scroll-bar";function assignRef(e,a){return"function"==typeof e?e(a):e&&(e.current=a),e}var Qo="undefined"!=typeof window?Me.useLayoutEffect:Me.useEffect,Yo=new WeakMap;function useMergeRefs(e,a){var l=function useCallbackRef$2(e,a){var l=Me.useState(function(){return{value:e,callback:a,facade:{get current(){return l.value},set current(e){var a=l.value;a!==e&&(l.value=e,l.callback(e,a))}}}})[0];return l.callback=a,l.facade}(null,function(a){return e.forEach(function(e){return assignRef(e,a)})});return Qo(function(){var a=Yo.get(l);if(a){var m=new Set(a),u=new Set(e),p=l.current;m.forEach(function(e){u.has(e)||assignRef(e,null)}),u.forEach(function(e){m.has(e)||assignRef(e,p)})}Yo.set(l,e)},[e]),l}function ItoI(e){return e}var SideCar$1=function(e){var a=e.sideCar,l=__rest(e,["sideCar"]);if(!a)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var m=a.read();if(!m)throw new Error("Sidecar medium not found");return Me.createElement(m,__assign({},l))};SideCar$1.isSideCarExport=!0;var Jo=function createSidecarMedium(e){void 0===e&&(e={});var a=function innerCreateMedium(e,a){void 0===a&&(a=ItoI);var l=[],m=!1;return{read:function(){if(m)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:e},useMedium:function(e){var u=a(e,m);return l.push(u),function(){l=l.filter(function(e){return e!==u})}},assignSyncMedium:function(e){for(m=!0;l.length;){var a=l;l=[],a.forEach(e)}l={push:function(a){return e(a)},filter:function(){return l}}},assignMedium:function(e){m=!0;var a=[];if(l.length){var u=l;l=[],u.forEach(e),a=l}var executeQueue=function(){var l=a;a=[],l.forEach(e)},cycle=function(){return Promise.resolve().then(executeQueue)};cycle(),l={push:function(e){a.push(e),cycle()},filter:function(e){return a=a.filter(e),l}}}}}(null);return a.options=__assign({async:!0,ssr:!1},e),a}(),nothing=function(){},Xo=Me.forwardRef(function(e,a){var l=Me.useRef(null),m=Me.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),u=m[0],p=m[1],f=e.forwardProps,g=e.children,h=e.className,y=e.removeScrollBar,v=e.enabled,E=e.shards,x=e.sideCar,w=e.noIsolation,b=e.inert,N=e.allowPinchZoom,_=e.as,k=void 0===_?"div":_,S=e.gapMode,C=__rest(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,A=useMergeRefs([l,a]),T=__assign(__assign({},C),u);return Me.createElement(Me.Fragment,null,v&&Me.createElement(R,{sideCar:Jo,removeScrollBar:y,shards:E,noIsolation:w,inert:b,setCallbacks:p,allowPinchZoom:!!N,lockRef:l,gapMode:S}),f?Me.cloneElement(Me.Children.only(g),__assign(__assign({},T),{ref:A})):Me.createElement(k,__assign({},T,{className:h,ref:A}),g))});Xo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Xo.classNames={fullWidth:Go,zeroRight:Ko};function makeStyleTag(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var a=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return a&&e.setAttribute("nonce",a),e}var stylesheetSingleton=function(){var e=0,a=null;return{add:function(l){0==e&&(a=makeStyleTag())&&(!function injectStyles(e,a){e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a))}(a,l),function insertStyleTag(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(a)),e++},remove:function(){! --e&&a&&(a.parentNode&&a.parentNode.removeChild(a),a=null)}}},styleSingleton=function(){var e,a=(e=stylesheetSingleton(),function(a,l){Me.useEffect(function(){return e.add(a),function(){e.remove()}},[a&&l])});return function(e){var l=e.styles,m=e.dynamic;return a(l,m),null}},el={left:0,top:0,right:0,gap:0},parse=function(e){return parseInt(e||"",10)||0},getGapWidth=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return el;var a=function(e){var a=window.getComputedStyle(document.body),l=a["padding"===e?"paddingLeft":"marginLeft"],m=a["padding"===e?"paddingTop":"marginTop"],u=a["padding"===e?"paddingRight":"marginRight"];return[parse(l),parse(m),parse(u)]}(e),l=document.documentElement.clientWidth,m=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,m-l+a[2]-a[0])}},tl=styleSingleton(),al="data-scroll-locked",getStyles=function(e,a,l,m){var u=e.left,p=e.top,f=e.right,g=e.gap;return void 0===l&&(l="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(m,";\n   padding-right: ").concat(g,"px ").concat(m,";\n  }\n  body[").concat(al,"] {\n    overflow: hidden ").concat(m,";\n    overscroll-behavior: contain;\n    ").concat([a&&"position: relative ".concat(m,";"),"margin"===l&&"\n    padding-left: ".concat(u,"px;\n    padding-top: ").concat(p,"px;\n    padding-right: ").concat(f,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(g,"px ").concat(m,";\n    "),"padding"===l&&"padding-right: ".concat(g,"px ").concat(m,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Ko," {\n    right: ").concat(g,"px ").concat(m,";\n  }\n  \n  .").concat(Go," {\n    margin-right: ").concat(g,"px ").concat(m,";\n  }\n  \n  .").concat(Ko," .").concat(Ko," {\n    right: 0 ").concat(m,";\n  }\n  \n  .").concat(Go," .").concat(Go," {\n    margin-right: 0 ").concat(m,";\n  }\n  \n  body[").concat(al,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(g,"px;\n  }\n")},getCurrentUseCounter=function(){var e=parseInt(document.body.getAttribute(al)||"0",10);return isFinite(e)?e:0},RemoveScrollBar=function(e){var a=e.noRelative,l=e.noImportant,m=e.gapMode,u=void 0===m?"margin":m;Me.useEffect(function(){return document.body.setAttribute(al,(getCurrentUseCounter()+1).toString()),function(){var e=getCurrentUseCounter()-1;e<=0?document.body.removeAttribute(al):document.body.setAttribute(al,e.toString())}},[]);var p=Me.useMemo(function(){return getGapWidth(u)},[u]);return Me.createElement(tl,{styles:getStyles(p,!a,u,l?"":"!important")})},rl=!1;if("undefined"!=typeof window)try{var nl=Object.defineProperty({},"passive",{get:function(){return rl=!0,!0}});window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch(dE){rl=!1}var sl=!!rl&&{passive:!1},elementCanBeScrolled=function(e,a){if(!(e instanceof Element))return!1;var l=window.getComputedStyle(e);return"hidden"!==l[a]&&!(l.overflowY===l.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===l[a])},locationCouldBeScrolled=function(e,a){var l=a.ownerDocument,m=a;do{if("undefined"!=typeof ShadowRoot&&m instanceof ShadowRoot&&(m=m.host),elementCouldBeScrolled(e,m)){var u=getScrollVariables(e,m);if(u[1]>u[2])return!0}m=m.parentNode}while(m&&m!==l.body);return!1},elementCouldBeScrolled=function(e,a){return"v"===e?function(e){return elementCanBeScrolled(e,"overflowY")}(a):function(e){return elementCanBeScrolled(e,"overflowX")}(a)},getScrollVariables=function(e,a){return"v"===e?[(l=a).scrollTop,l.scrollHeight,l.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(a);var l},getTouchXY=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(e){return[e.deltaX,e.deltaY]},extractRef=function(e){return e&&"current"in e?e.current:e},generateStyle=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},ol=0,ll=[];function getOutermostShadowParent(e){for(var a=null;null!==e;)e instanceof ShadowRoot&&(a=e.host,e=e.host),e=e.parentNode;return a}const il=function exportSidecar(e,a){return e.useMedium(a),SideCar$1}(Jo,function RemoveScrollSideCar(e){var a=Me.useRef([]),l=Me.useRef([0,0]),m=Me.useRef(),u=Me.useState(ol++)[0],p=Me.useState(styleSingleton)[0],f=Me.useRef(e);Me.useEffect(function(){f.current=e},[e]),Me.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var a=function __spreadArray(e,a,l){if(l||2===arguments.length)for(var m,u=0,p=a.length;u<p;u++)!m&&u in a||(m||(m=Array.prototype.slice.call(a,0,u)),m[u]=a[u]);return e.concat(m||Array.prototype.slice.call(a))}([e.lockRef.current],(e.shards||[]).map(extractRef),!0).filter(Boolean);return a.forEach(function(e){return e.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),a.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var g=Me.useCallback(function(e,a){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!f.current.allowPinchZoom;var u,p=getTouchXY(e),g=l.current,h="deltaX"in e?e.deltaX:g[0]-p[0],y="deltaY"in e?e.deltaY:g[1]-p[1],v=e.target,E=Math.abs(h)>Math.abs(y)?"h":"v";if("touches"in e&&"h"===E&&"range"===v.type)return!1;var x=locationCouldBeScrolled(E,v);if(!x)return!0;if(x?u=E:(u="v"===E?"h":"v",x=locationCouldBeScrolled(E,v)),!x)return!1;if(!m.current&&"changedTouches"in e&&(h||y)&&(m.current=u),!u)return!0;var w=m.current||u;return function(e,a,l,m,u){var p=function(e,a){return"h"===e&&"rtl"===a?-1:1}(e,window.getComputedStyle(a).direction),f=p*m,g=l.target,h=a.contains(g),y=!1,v=f>0,E=0,x=0;do{var w=getScrollVariables(e,g),b=w[0],N=w[1]-w[2]-p*b;(b||N)&&elementCouldBeScrolled(e,g)&&(E+=N,x+=b),g=g instanceof ShadowRoot?g.host:g.parentNode}while(!h&&g!==document.body||h&&(a.contains(g)||a===g));return v&&(Math.abs(E)<1||!u)?y=!0:v||!(Math.abs(x)<1)&&u||(y=!0),y}(w,a,e,"h"===w?h:y,!0)},[]),h=Me.useCallback(function(e){var l=e;if(ll.length&&ll[ll.length-1]===p){var m="deltaY"in l?getDeltaXY(l):getTouchXY(l),u=a.current.filter(function(e){return e.name===l.type&&(e.target===l.target||l.target===e.shadowParent)&&(a=e.delta,u=m,a[0]===u[0]&&a[1]===u[1]);var a,u})[0];if(u&&u.should)l.cancelable&&l.preventDefault();else if(!u){var h=(f.current.shards||[]).map(extractRef).filter(Boolean).filter(function(e){return e.contains(l.target)});(h.length>0?g(l,h[0]):!f.current.noIsolation)&&l.cancelable&&l.preventDefault()}}},[]),y=Me.useCallback(function(e,l,m,u){var p={name:e,delta:l,target:m,should:u,shadowParent:getOutermostShadowParent(m)};a.current.push(p),setTimeout(function(){a.current=a.current.filter(function(e){return e!==p})},1)},[]),v=Me.useCallback(function(e){l.current=getTouchXY(e),m.current=void 0},[]),E=Me.useCallback(function(a){y(a.type,getDeltaXY(a),a.target,g(a,e.lockRef.current))},[]),x=Me.useCallback(function(a){y(a.type,getTouchXY(a),a.target,g(a,e.lockRef.current))},[]);Me.useEffect(function(){return ll.push(p),e.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:x}),document.addEventListener("wheel",h,sl),document.addEventListener("touchmove",h,sl),document.addEventListener("touchstart",v,sl),function(){ll=ll.filter(function(e){return e!==p}),document.removeEventListener("wheel",h,sl),document.removeEventListener("touchmove",h,sl),document.removeEventListener("touchstart",v,sl)}},[]);var w=e.removeScrollBar,b=e.inert;return Me.createElement(Me.Fragment,null,b?Me.createElement(p,{styles:generateStyle(u)}):null,w?Me.createElement(RemoveScrollBar,{gapMode:e.gapMode}):null)});var cl=Me.forwardRef(function(e,a){return Me.createElement(Xo,__assign({},e,{ref:a,sideCar:il}))});cl.classNames=Xo.classNames;var ml=new WeakMap,dl=new WeakMap,ul={},pl=0,unwrapHost=function(e){return e&&(e.host||unwrapHost(e.parentNode))},applyAttributeToOthers=function(e,a,l,m){var u=function(e,a){return a.map(function(a){if(e.contains(a))return a;var l=unwrapHost(a);return l&&e.contains(l)?l:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(a,Array.isArray(e)?e:[e]);ul[l]||(ul[l]=new WeakMap);var p=ul[l],f=[],g=new Set,h=new Set(u),keep=function(e){e&&!g.has(e)&&(g.add(e),keep(e.parentNode))};u.forEach(keep);var deep=function(e){e&&!h.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(g.has(e))deep(e);else try{var a=e.getAttribute(m),u=null!==a&&"false"!==a,h=(ml.get(e)||0)+1,y=(p.get(e)||0)+1;ml.set(e,h),p.set(e,y),f.push(e),1===h&&u&&dl.set(e,!0),1===y&&e.setAttribute(l,"true"),u||e.setAttribute(m,"true")}catch(mE){console.error("aria-hidden: cannot operate on ",e,mE)}})};return deep(a),g.clear(),pl++,function(){f.forEach(function(e){var a=ml.get(e)-1,u=p.get(e)-1;ml.set(e,a),p.set(e,u),a||(dl.has(e)||e.removeAttribute(m),dl.delete(e)),u||e.removeAttribute(l)}),--pl||(ml=new WeakMap,ml=new WeakMap,dl=new WeakMap,ul={})}},hideOthers=function(e,a,l){void 0===l&&(l="data-aria-hidden");var m=Array.from(Array.isArray(e)?e:[e]),u=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return u?(m.push.apply(m,Array.from(u.querySelectorAll("[aria-live]"))),applyAttributeToOthers(m,u,l,"aria-hidden")):function(){return null}},fl="Dialog",[gl,hl]=createContextScope$5(fl),[yl,vl]=gl(fl),Dialog$1=e=>{const{__scopeDialog:a,children:l,open:m,defaultOpen:u,onOpenChange:p,modal:f=!0}=e,g=Me.useRef(null),h=Me.useRef(null),[y=!1,v]=useControllableState$1({prop:m,defaultProp:u,onChange:p});return tt.jsx(yl,{scope:a,triggerRef:g,contentRef:h,contentId:useId$1(),titleId:useId$1(),descriptionId:useId$1(),open:y,onOpenChange:v,onOpenToggle:Me.useCallback(()=>v(e=>!e),[v]),modal:f,children:l})};Dialog$1.displayName=fl;var El="DialogTrigger",xl=Me.forwardRef((e,a)=>{const{__scopeDialog:l,...m}=e,u=vl(El,l),p=useComposedRefs$2(a,u.triggerRef);return tt.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":getState$3(u.open),...m,ref:p,onClick:composeEventHandlers$3(e.onClick,u.onOpenToggle)})});xl.displayName=El;var wl="DialogPortal",[bl,Nl]=gl(wl,{forceMount:void 0}),DialogPortal$1=e=>{const{__scopeDialog:a,forceMount:l,children:m,container:u}=e,p=vl(wl,a);return tt.jsx(bl,{scope:a,forceMount:l,children:Me.Children.map(m,e=>tt.jsx(Presence$2,{present:l||p.open,children:tt.jsx(ht,{asChild:!0,container:u,children:e})}))})};DialogPortal$1.displayName=wl;var _l="DialogOverlay",kl=Me.forwardRef((e,a)=>{const l=Nl(_l,e.__scopeDialog),{forceMount:m=l.forceMount,...u}=e,p=vl(_l,e.__scopeDialog);return p.modal?tt.jsx(Presence$2,{present:m||p.open,children:tt.jsx(Sl,{...u,ref:a})}):null});kl.displayName=_l;var Sl=Me.forwardRef((e,a)=>{const{__scopeDialog:l,...m}=e,u=vl(_l,l);return tt.jsx(cl,{as:at,allowPinchZoom:!0,shards:[u.contentRef],children:tt.jsx(nt.div,{"data-state":getState$3(u.open),...m,ref:a,style:{pointerEvents:"auto",...m.style}})})}),Cl="DialogContent",Rl=Me.forwardRef((e,a)=>{const l=Nl(Cl,e.__scopeDialog),{forceMount:m=l.forceMount,...u}=e,p=vl(Cl,e.__scopeDialog);return tt.jsx(Presence$2,{present:m||p.open,children:p.modal?tt.jsx(Al,{...u,ref:a}):tt.jsx(Tl,{...u,ref:a})})});Rl.displayName=Cl;var Al=Me.forwardRef((e,a)=>{const l=vl(Cl,e.__scopeDialog),m=Me.useRef(null),u=useComposedRefs$2(a,l.contentRef,m);return Me.useEffect(()=>{const e=m.current;if(e)return hideOthers(e)},[]),tt.jsx(Pl,{...e,ref:u,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers$3(e.onCloseAutoFocus,e=>{e.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers$3(e.onPointerDownOutside,e=>{const a=e.detail.originalEvent,l=0===a.button&&!0===a.ctrlKey;(2===a.button||l)&&e.preventDefault()}),onFocusOutside:composeEventHandlers$3(e.onFocusOutside,e=>e.preventDefault())})}),Tl=Me.forwardRef((e,a)=>{const l=vl(Cl,e.__scopeDialog),m=Me.useRef(!1),u=Me.useRef(!1);return tt.jsx(Pl,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(m.current||l.triggerRef.current?.focus(),a.preventDefault()),m.current=!1,u.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(m.current=!0,"pointerdown"===a.detail.originalEvent.type&&(u.current=!0));const p=a.target,f=l.triggerRef.current?.contains(p);f&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&u.current&&a.preventDefault()}})}),Pl=Me.forwardRef((e,a)=>{const{__scopeDialog:l,trapFocus:m,onOpenAutoFocus:u,onCloseAutoFocus:p,...f}=e,g=vl(Cl,l),h=Me.useRef(null),y=useComposedRefs$2(a,h);return useFocusGuards(),tt.jsxs(tt.Fragment,{children:[tt.jsx(Ho,{asChild:!0,loop:!0,trapped:m,onMountAutoFocus:u,onUnmountAutoFocus:p,children:tt.jsx(mt,{role:"dialog",id:g.contentId,"aria-describedby":g.descriptionId,"aria-labelledby":g.titleId,"data-state":getState$3(g.open),...f,ref:y,onDismiss:()=>g.onOpenChange(!1)})}),tt.jsxs(tt.Fragment,{children:[tt.jsx(TitleWarning,{titleId:g.titleId}),tt.jsx(DescriptionWarning,{contentRef:h,descriptionId:g.descriptionId})]})]})}),Dl="DialogTitle",Il=Me.forwardRef((e,a)=>{const{__scopeDialog:l,...m}=e,u=vl(Dl,l);return tt.jsx(nt.h2,{id:u.titleId,...m,ref:a})});Il.displayName=Dl;var Fl="DialogDescription",Ml=Me.forwardRef((e,a)=>{const{__scopeDialog:l,...m}=e,u=vl(Fl,l);return tt.jsx(nt.p,{id:u.descriptionId,...m,ref:a})});Ml.displayName=Fl;var jl="DialogClose",Ol=Me.forwardRef((e,a)=>{const{__scopeDialog:l,...m}=e,u=vl(jl,l);return tt.jsx(nt.button,{type:"button",...m,ref:a,onClick:composeEventHandlers$3(e.onClick,()=>u.onOpenChange(!1))})});function getState$3(e){return e?"open":"closed"}Ol.displayName=jl;var Ll="DialogTitleWarning",[$l,Ul]=function createContext2(e,a){const l=Me.createContext(a),Provider2=e=>{const{children:a,...m}=e,u=Me.useMemo(()=>m,Object.values(m));return tt.jsx(l.Provider,{value:u,children:a})};return Provider2.displayName=e+"Provider",[Provider2,function useContext2(m){const u=Me.useContext(l);if(u)return u;if(void 0!==a)return a;throw new Error(`\`${m}\` must be used within \`${e}\``)}]}(Ll,{contentName:Cl,titleName:Dl,docsSlug:"dialog"}),TitleWarning=({titleId:e})=>{const a=Ul(Ll),l=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return Me.useEffect(()=>{if(e){document.getElementById(e)||console.error(l)}},[l,e]),null},DescriptionWarning=({contentRef:e,descriptionId:a})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ul("DialogDescriptionWarning").contentName}}.`;return Me.useEffect(()=>{const m=e.current?.getAttribute("aria-describedby");if(a&&m){document.getElementById(a)||console.warn(l)}},[l,e,a]),null},zl=Dialog$1,Bl=xl,ql=DialogPortal$1,Vl=kl,Hl=Rl,Wl=Il,Zl=Ml,Kl=Ol;const Gl=zl,Ql=Bl,Yl=ql,Jl=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Vl,{className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:l}));Jl.displayName=Vl.displayName;const Xl=cva("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ei=Me.forwardRef(({side:e="right",className:a,children:l,...m},u)=>Me.createElement(Yl,null,Me.createElement(Jl,null),Me.createElement(Hl,{ref:u,className:cn(Xl({side:e}),a),...m},l,Me.createElement(Kl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary"},Me.createElement(Gr,{className:"h-4 w-4"}),Me.createElement("span",{className:"sr-only"},"Close")))));ei.displayName=Hl.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(Wl,{ref:l,className:cn("text-lg font-semibold text-foreground",e),...a})).displayName=Wl.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(Zl,{ref:l,className:cn("text-sm text-muted-foreground",e),...a})).displayName=Zl.displayName;const Navigation=()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState(""),[u,p]=Me.useState(!1),f=useNavigate(),{user:g,loading:h,signOut:y}=useSafeAuth(),handleSignOut=async()=>{console.log("Navigation handleSignOut called");try{console.log("Calling signOut from auth context..."),await y(),console.log("SignOut completed successfully")}catch(e){console.error("Sign out failed:",e),console.log("Forcing page reload as final fallback..."),window.location.href="/"}},handleSearch=e=>{e.preventDefault(),l.trim()&&(f(`/legal-qa?q=${encodeURIComponent(l)}`),m(""),p(!1))},v=[{name:"Home",href:"/"},{name:"Free Analysis",href:"/analyze",icon:Ha,highlight:!0},{name:"Templates",href:"/templates",icon:Wa},{name:"Law Firms",href:"/law-firms",icon:xa},{name:"Documents",href:"/documents",icon:Ha},{name:"Legal Q&A",href:"/legal-qa",icon:gr},{name:"Pricing",href:"/pricing"}];return React.createElement("nav",{className:"bg-white shadow-lg fixed w-full top-0 z-50"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex justify-between items-center h-16"},React.createElement("div",{className:"flex-shrink-0"},React.createElement(Ro,{to:"/",className:"text-2xl font-bold text-blue-900 hover:text-blue-800 transition-colors"},"LegalHelpSG")),React.createElement("div",{className:"hidden lg:flex items-center space-x-4 flex-1"},React.createElement("div",{className:"flex items-baseline space-x-3 ml-8"},v.map(e=>React.createElement(Ro,{key:e.name,to:e.href,className:"px-2 py-2 rounded-md text-sm font-medium transition-colors flex items-center space-x-1 "+(e.highlight?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 hover:text-blue-600")},e.icon&&React.createElement(e.icon,{className:"h-4 w-4"}),React.createElement("span",null,e.name)))),React.createElement("div",{className:"relative hidden xl:block"},u?React.createElement("form",{onSubmit:handleSearch,className:"flex items-center"},React.createElement("div",{className:"relative"},React.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),React.createElement(zo,{type:"text",placeholder:"Search legal topics...",value:l,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 w-48 border-gray-300 focus:border-blue-500 focus:ring-blue-500",autoFocus:!0,onBlur:()=>{l.trim()||p(!1)}})),React.createElement(Uo,{type:"submit",size:"sm",className:"ml-2 bg-blue-600 hover:bg-blue-700"},"Search")):React.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"flex items-center space-x-2"},React.createElement(Cr,{className:"h-4 w-4"}),React.createElement("span",null,"Search")))),React.createElement("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4"},g?React.createElement(React.Fragment,null,React.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>f("/dashboard"),className:"px-4 py-2 text-sm font-medium whitespace-nowrap border-gray-300 hover:border-blue-600 hover:text-blue-600"},"Dashboard"),React.createElement(Uo,{variant:"outline",size:"sm",onClick:e=>{console.log("Desktop Sign Out button clicked"),e.preventDefault(),handleSignOut()},className:"px-4 py-2 text-sm font-medium whitespace-nowrap border-red-300 hover:border-red-600 hover:text-red-600"},"Sign Out")):React.createElement(React.Fragment,null,React.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>f("/auth/login"),className:"px-4 py-2 text-sm font-medium whitespace-nowrap border-gray-300 hover:border-blue-600 hover:text-blue-600",disabled:h},h?"Loading...":"Sign In"),React.createElement(Uo,{size:"sm",onClick:()=>f("/auth/register"),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 text-sm font-medium whitespace-nowrap",disabled:h},h?"Loading...":"Get Started"))),React.createElement("div",{className:"lg:hidden ml-2"},React.createElement(Gl,{open:e,onOpenChange:a},React.createElement(Ql,{asChild:!0},React.createElement(Uo,{variant:"ghost",size:"icon",className:"p-2"},React.createElement(fr,{className:"h-5 w-5"}))),React.createElement(ei,{side:"right",className:"w-[300px] sm:w-[400px]"},React.createElement("div",{className:"flex flex-col space-y-4 mt-8"},React.createElement("form",{onSubmit:handleSearch,className:"mb-4"},React.createElement("div",{className:"relative"},React.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),React.createElement(zo,{type:"text",placeholder:"Search legal topics...",value:l,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 w-full border-gray-300 focus:border-blue-500 focus:ring-blue-500"})),React.createElement(Uo,{type:"submit",className:"w-full mt-2 bg-blue-600 hover:bg-blue-700"},"Search")),v.map(e=>React.createElement(Ro,{key:e.name,to:e.href,className:"px-3 py-2 rounded-md text-lg font-medium transition-colors flex items-center space-x-2 "+(e.highlight?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 hover:text-blue-600"),onClick:()=>a(!1)},e.icon&&React.createElement(e.icon,{className:"h-5 w-5"}),React.createElement("span",null,e.name))),React.createElement("div",{className:"border-t pt-4 mt-4"},g?React.createElement("div",{className:"space-y-2 mt-4"},React.createElement(Uo,{onClick:()=>{f("/dashboard"),a(!1)},className:"w-full bg-blue-600 hover:bg-blue-700"},React.createElement(Hr,{className:"h-4 w-4 mr-2"}),"Dashboard"),React.createElement(Uo,{variant:"outline",onClick:e=>{console.log("Mobile Sign Out button clicked"),e.preventDefault(),handleSignOut(),a(!1)},className:"w-full border-red-300 hover:border-red-600 hover:text-red-600"},"Sign Out")):React.createElement("div",{className:"space-y-2 mt-4"},React.createElement(Uo,{variant:"outline",onClick:()=>{f("/auth/login"),a(!1)},className:"w-full",disabled:h},h?"Loading...":"Sign In"),React.createElement(Uo,{onClick:()=>{f("/auth/register"),a(!1)},className:"w-full bg-blue-600 hover:bg-blue-700",disabled:h},h?"Loading...":"Get Started"))))))))))},ti={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALLOWED_FILE_TYPES:"pdf,doc,docx,txt",VITE_API_URL:"https://craftchatbot.com/api",VITE_APP_NAME:"LawMattersSG",VITE_APP_URL:"https://craftchatbot.com",VITE_DEBUG_MODE:"false",VITE_ENABLE_2FA:"true",VITE_ENABLE_AI_CHAT:"true",VITE_ENABLE_DOCUMENT_ANALYSIS:"true",VITE_ENABLE_LAW_FIRM_DIRECTORY:"true",VITE_ENABLE_LAZY_LOADING:"true",VITE_ENABLE_OFFLINE_MODE:"false",VITE_ENABLE_SERVICE_WORKER:"true",VITE_ENABLE_TEMPLATE_GENERATION:"true",VITE_ENVIRONMENT:"production",VITE_LOG_LEVEL:"error",VITE_MAX_FILE_SIZE_MB:"10",VITE_MAX_FILE_SIZE_PREMIUM_MB:"50",VITE_MAX_LOGIN_ATTEMPTS:"5",VITE_POSTHOG_HOST:"https://app.posthog.com",VITE_POSTHOG_KEY:"your-posthog-key",VITE_RATE_LIMIT_REQUESTS_PER_HOUR:"2000",VITE_RATE_LIMIT_REQUESTS_PER_MINUTE:"100",VITE_SESSION_TIMEOUT:"3600",VITE_STRIPE_PUBLISHABLE_KEY:"your-stripe-publishable-key",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2bGF5ZGV5cWlkbGZwZnV0Ym1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyODgzNzAsImV4cCI6MjA2NTg2NDM3MH0.XVSO5W_0v6wW-MYlM7i0MTNKprOWp_O4ON-5LqqVnzw",VITE_SUPABASE_URL:"https://kvlaydeyqidlfpfutbmp.supabase.co"};function getEnvVar(e,a){const l=ti[e];if(void 0===l&&void 0===a)throw new Error(`Environment variable ${e} is required but not set`);return l??a??""}function getBooleanEnvVar(e,a=!1){return"true"===getEnvVar(e,a.toString()).toLowerCase()}function getNumberEnvVar(e,a){const l=getEnvVar(e,a.toString()),m=parseInt(l,10);if(isNaN(m))throw new Error(`Environment variable ${e} must be a valid number`);return m}const ai={supabase:{url:getEnvVar("VITE_SUPABASE_URL","https://placeholder.supabase.co"),anonKey:getEnvVar("VITE_SUPABASE_ANON_KEY","placeholder-key"),serviceRoleKey:getEnvVar("SUPABASE_SERVICE_ROLE_KEY","")},openai:{apiKey:getEnvVar("OPENAI_API_KEY",""),model:getEnvVar("OPENAI_MODEL","gpt-4-turbo"),maxTokens:getNumberEnvVar("OPENAI_MAX_TOKENS",4e3),temperature:getNumberEnvVar("OPENAI_TEMPERATURE",.1)},stripe:{publishableKey:getEnvVar("VITE_STRIPE_PUBLISHABLE_KEY",""),secretKey:getEnvVar("STRIPE_SECRET_KEY",""),webhookSecret:getEnvVar("STRIPE_WEBHOOK_SECRET","")},email:{sendgridApiKey:getEnvVar("SENDGRID_API_KEY",""),resendApiKey:getEnvVar("RESEND_API_KEY",""),fromEmail:getEnvVar("SENDGRID_FROM_EMAIL","noreply@lawmatterssg.com")},app:{name:getEnvVar("VITE_APP_NAME","LawMattersSG"),url:getEnvVar("VITE_APP_URL","http://localhost:8082"),apiUrl:getEnvVar("VITE_API_URL","http://localhost:8082/api"),environment:getEnvVar("VITE_ENVIRONMENT","development")},analytics:{posthogKey:getEnvVar("VITE_POSTHOG_KEY",""),posthogHost:getEnvVar("VITE_POSTHOG_HOST","https://app.posthog.com"),sentryDsn:getEnvVar("SENTRY_DSN","")},fileUpload:{maxFileSizeMB:getNumberEnvVar("VITE_MAX_FILE_SIZE_MB",10),maxFileSizePremiumMB:getNumberEnvVar("VITE_MAX_FILE_SIZE_PREMIUM_MB",50),allowedFileTypes:function getArrayEnvVar(e,a=[]){return getEnvVar(e,a.join(",")).split(",").map(e=>e.trim()).filter(Boolean)}("VITE_ALLOWED_FILE_TYPES",["pdf","doc","docx","txt"])},rateLimit:{requestsPerMinute:getNumberEnvVar("VITE_RATE_LIMIT_REQUESTS_PER_MINUTE",60),requestsPerHour:getNumberEnvVar("VITE_RATE_LIMIT_REQUESTS_PER_HOUR",1e3)},features:{aiChat:getBooleanEnvVar("VITE_ENABLE_AI_CHAT",!0),documentAnalysis:getBooleanEnvVar("VITE_ENABLE_DOCUMENT_ANALYSIS",!0),templateGeneration:getBooleanEnvVar("VITE_ENABLE_TEMPLATE_GENERATION",!1),lawFirmDirectory:getBooleanEnvVar("VITE_ENABLE_LAW_FIRM_DIRECTORY",!1)},debug:{enabled:getBooleanEnvVar("VITE_DEBUG_MODE",!1),logLevel:getEnvVar("VITE_LOG_LEVEL","info")}};!function validateConfig(){const e=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(e=>{const a=ti[e];return!a||""===a.trim()});if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}\nPlease check your .env file and ensure all required variables are set.`)}();const ri={free:{name:"Free",price:0,period:"forever",limits:{dailyAiRequests:10,monthlyAiRequests:10,dailyDocumentUploads:1,monthlyDocumentUploads:1,customDocumentDownloads:0,maxFileSize:10485760,maxDocuments:50},features:["Law firm directory access (basic)","10 AI queries per month","1 document download per month","Save bookmarks","Premium contract templates","Document analysis with AI","Priority support"]},premium:{name:"Premium",price:19,period:"month",popular:!0,limits:{dailyAiRequests:50,monthlyAiRequests:50,dailyDocumentUploads:10,monthlyDocumentUploads:10,customDocumentDownloads:3,maxFileSize:52428800,maxDocuments:500},features:["All features from Free plan","50 AI queries per month","10 document downloads per month","Access to all premium templates","Advanced document analysis with AI","Priority dashboard and analytics","Priority support"]},pro:{name:"Pro",price:159,period:"month",limits:{dailyAiRequests:500,monthlyAiRequests:500,dailyDocumentUploads:50,monthlyDocumentUploads:20,customDocumentDownloads:20,maxFileSize:104857600,maxDocuments:2e3},features:["Everything in Premium plan","500 AI queries per month","20 customized legal document downloads","Unlimited AI queries","Unlimited document downloads","Custom document templates","API access for integrations","Dedicated account manager"]},enterprise:{name:"Enterprise",price:null,period:"custom",limits:{dailyAiRequests:-1,monthlyAiRequests:-1,dailyDocumentUploads:-1,monthlyDocumentUploads:-1,customDocumentDownloads:-1,maxFileSize:524288e3,maxDocuments:-1},features:["All features from Premium plan","Unlimited AI queries","Unlimited document downloads","Custom document templates","API access for integrations","Document extraction and bulk uploads","Dedicated account manager"]}},ni={contract:"Contract",legal_brief:"Legal Brief",court_filing:"Court Filing",agreement:"Agreement",other:"Other"},si={pending:"Pending",processing:"Processing",completed:"Completed",failed:"Failed"},oi={maxSize:{free:10485760,premium:52428800,pro:104857600,enterprise:524288e3},allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],allowedExtensions:ai.fileUpload.allowedFileTypes.map(e=>`.${e}`)},li={premium:{monthly:"price_premium_monthly",yearly:"price_premium_yearly"},pro:{monthly:"price_pro_monthly",yearly:"price_pro_yearly"}},ii={home:"/",login:"/auth/login",register:"/auth/register",forgotPassword:"/auth/forgot-password",resetPassword:"/auth/reset-password",dashboard:"/dashboard",documents:"/dashboard/documents",templates:"/dashboard/templates",aiChat:"/dashboard/ai-chat",profile:"/dashboard/profile",subscription:"/dashboard/subscription",security:"/dashboard/security",lawFirms:"/law-firms",pricing:"/pricing",subscribe:"/subscribe",paymentSuccess:"/payment/success",paymentFailure:"/payment/failure",admin:"/admin",adminUsers:"/admin/users",adminAnalytics:"/admin/analytics",publicAnalysis:"/analyze",publicAnalysisResult:"/analyze/result",templateMarketplace:"/templates",templateBrowser:"/templates/browse",templatePreview:"/templates/preview",templateCustomize:"/templates/customize",templateGenerate:"/templates/generate",templateDownload:"/templates/download"},ci={rateLimits:{documentsPerHour:3,documentsPerDay:10,maxFileSize:10485760,allowedFileTypes:["application/pdf","image/jpeg","image/png","image/webp"],sessionDuration:36e5},features:{basicOCR:!0,textExtraction:!0,documentSummary:!0,keywordExtraction:!0,documentClassification:!1,legalInsights:!1,entityExtraction:!1,complianceCheck:!1},storage:{bucket:"public-documents",retentionHours:24,maxStoragePerSession:52428800},conversionPrompts:{showAfterAnalysis:!0,showAdvancedFeatures:!0,highlightPremiumBenefits:!0}},mi={categories:[{id:"employment",name:"Employment",description:"Employment contracts, agreements, and HR documents",icon:"briefcase",subcategories:["contracts","policies","termination","benefits"]},{id:"business",name:"Business",description:"Business formation, partnerships, and commercial agreements",icon:"building",subcategories:["incorporation","partnerships","commercial","licensing"]},{id:"property",name:"Property",description:"Real estate, leases, and property-related documents",icon:"home",subcategories:["purchase","lease","rental","development"]},{id:"family",name:"Family",description:"Family law, wills, and personal legal documents",icon:"users",subcategories:["wills","divorce","custody","adoption"]},{id:"intellectual-property",name:"Intellectual Property",description:"Patents, trademarks, and IP protection documents",icon:"lightbulb",subcategories:["patents","trademarks","copyright","licensing"]},{id:"compliance",name:"Compliance",description:"Regulatory compliance and legal compliance documents",icon:"shield",subcategories:["gdpr","financial","healthcare","environmental"]}],accessLevels:{public:{name:"Public",description:"Free templates available to all users",features:["basic_customization","pdf_download","preview"],limitations:["watermark","basic_fields_only"]},premium:{name:"Premium",description:"Advanced templates for premium subscribers",features:["advanced_customization","multiple_formats","legal_review","version_history"],limitations:[]},enterprise:{name:"Enterprise",description:"Custom templates for enterprise clients",features:["custom_branding","api_access","bulk_generation","priority_support"],limitations:[]}},generation:{maxCustomFields:50,supportedFormats:["pdf","docx","html"],aiModels:["gpt-4","claude-3"],maxGenerationTime:3e4,retryAttempts:3},singapore:{jurisdiction:"Singapore",language:"English",currency:"SGD",legalSystem:"Common Law",regulatoryBodies:["ACRA","MAS","MOM","URA","IRAS","AGC"],complianceStandards:["Companies Act","Employment Act","Personal Data Protection Act","Securities and Futures Act"]},validation:{requiredFields:["title","description","category","jurisdiction"],maxTitleLength:100,maxDescriptionLength:500,minPreviewLength:100,allowedFileTypes:["pdf","docx","txt"],maxFileSize:5242880},pricing:{free:{templatesPerMonth:3,customizationLevel:"basic",downloadFormats:["pdf"],support:"community"},premium:{templatesPerMonth:50,customizationLevel:"advanced",downloadFormats:["pdf","docx","html"],support:"email"},enterprise:{templatesPerMonth:"unlimited",customizationLevel:"full",downloadFormats:["pdf","docx","html","xml"],support:"priority"}}};const di=new class PlatformStatsService{constructor(){__publicField(this,"cache",null),__publicField(this,"cacheExpiry",0),__publicField(this,"CACHE_DURATION",3e5)}async getStats(){if(this.cache&&Date.now()<this.cacheExpiry)return this.cache;try{const{data:e,error:a}=await Mo.rpc("get_platform_statistics");if(!a&&e){const a={legalProfessionals:e.legalProfessionals,documentsProcessed:e.documentsProcessed,questionsAnswered:e.questionsAnswered,templatesDownloaded:e.templatesDownloaded,activeLawFirms:e.activeLawFirms,totalUsers:e.totalUsers};return this.cache=a,this.cacheExpiry=Date.now()+this.CACHE_DURATION,a}console.warn("Database function failed, using individual queries:",a);const[l,m,u,p,f,g]=await Promise.all([this.getLegalProfessionalsCount(),this.getDocumentsProcessedCount(),this.getQuestionsAnsweredCount(),this.getTemplatesDownloadedCount(),this.getActiveLawFirmsCount(),this.getTotalUsersCount()]),h={legalProfessionals:l,documentsProcessed:m,questionsAnswered:u,templatesDownloaded:p,activeLawFirms:f,totalUsers:g};return this.cache=h,this.cacheExpiry=Date.now()+this.CACHE_DURATION,h}catch(e){return console.error("Error fetching platform stats:",e),this.getFallbackStats()}}async getLegalProfessionalsCount(){try{let l=0,m=0;try{l=(await Mo.from("legal_experts").select("*",{count:"exact",head:!0}).eq("verification_status","verified")).count||0}catch(e){console.warn("Legal experts table not accessible:",e)}try{m=(await Mo.from("law_firm_team_members").select("*",{count:"exact",head:!0}).eq("is_active",!0)).count||0}catch(a){console.warn("Law firm team members table not accessible:",a)}const u=l+m;return u>0?u:500}catch(l){return console.error("Error getting legal professionals count:",l),500}}async getDocumentsProcessedCount(){return await this.safeQuery(()=>Mo.from("uploaded_documents").select("*",{count:"exact",head:!0}),5e3,"Uploaded documents count")+await this.safeQuery(()=>Mo.from("public_document_analyses").select("*",{count:"exact",head:!0}),5e3,"Public document analyses count")}async getQuestionsAnsweredCount(){try{let e=await Mo.from("legal_questions").select("*",{count:"exact",head:!0}).eq("moderation_status","approved").gt("answer_count",0);return e.error&&(e=await Mo.from("legal_questions").select("*",{count:"exact",head:!0}).gt("answer_count",0)),e.error&&(e=await Mo.from("legal_questions").select("*",{count:"exact",head:!0}).eq("status","answered")),e.count||15e3}catch(e){return console.error("Error getting questions answered count:",e),15e3}}async getTemplatesDownloadedCount(){return await this.safeQuery(()=>Mo.from("template_downloads").select("*",{count:"exact",head:!0}),5e3,"Template downloads count")}async getActiveLawFirmsCount(){try{let e=await Mo.from("law_firms").select("*",{count:"exact",head:!0}).eq("verified",!0).eq("is_active",!0);return e.error&&(e=await Mo.from("law_firms").select("*",{count:"exact",head:!0}).eq("verified",!0)),e.count||150}catch(e){return console.error("Error getting active law firms count:",e),150}}async getTotalUsersCount(){return await this.safeQuery(()=>Mo.from("profiles").select("*",{count:"exact",head:!0}),25e3,"Total users count")}getFallbackStats(){return{legalProfessionals:500,documentsProcessed:1e4,questionsAnswered:15e3,templatesDownloaded:5e3,activeLawFirms:150,totalUsers:25e3}}async safeQuery(e,a,l){try{const m=await e();return m.error?(console.warn(`${l} query failed:`,m.error.message),a):m.count??a}catch(m){return console.warn(`${l} query error:`,m),a}}formatStatNumber(e){return e>=1e6?Math.floor(e/1e5)/10+"M+":e>=1e3?Math.floor(e/100)/10+"K+":`${e}+`}clearCache(){this.cache=null,this.cacheExpiry=0}},Hero=()=>{const[e,a]=Me.useState(""),[l,m]=Me.useState({legalProfessionals:500,documentsProcessed:1e4,questionsAnswered:15e3}),[u,p]=Me.useState(!0),f=useNavigate();Me.useEffect(()=>{(async()=>{try{const e=await di.getStats();m({legalProfessionals:e.legalProfessionals,documentsProcessed:e.documentsProcessed,questionsAnswered:e.questionsAnswered})}catch(e){console.error("Error loading platform stats:",e)}finally{p(!1)}})()},[]);return React.createElement("section",{id:"home",className:"relative bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 pt-16"},React.createElement("div",{className:"absolute inset-0 bg-black opacity-10"}),React.createElement("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center"},React.createElement("div",{className:"text-white"},React.createElement("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6"},"AI-Powered Legal Solutions for"," ",React.createElement("span",{className:"text-yellow-300 block"},"Singapore")),React.createElement("p",{className:"text-xl text-blue-100 mb-8 leading-relaxed"},"Find the right law firm, get instant legal answers, and access legal document analysis - all in one place."),React.createElement("div",{className:"flex flex-col sm:flex-row gap-4 mb-8"},React.createElement("div",{className:"flex-1 relative"},React.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),React.createElement(zo,{type:"text",placeholder:"I need help understanding Singapore's Employment Act...",value:e,onChange:e=>a(e.target.value),className:"pl-10 py-3 text-gray-900 bg-white border-0 focus:ring-2 focus:ring-yellow-400"})),React.createElement(Uo,{size:"lg",onClick:()=>{e.trim()&&f(`/legal-qa?q=${encodeURIComponent(e)}`)},className:"bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-semibold px-8"},"Search")),React.createElement("div",{className:"mb-8"},React.createElement("p",{className:"text-sm text-blue-200 mb-2"},"Popular:"),React.createElement("div",{className:"flex flex-wrap gap-2"},["Tenant Rights","Company Incorporation","Employment Act","Divorce Proceedings"].map(e=>React.createElement("button",{key:e,onClick:()=>a(e),className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded-full text-sm text-blue-100 transition-colors"},e)))),React.createElement("div",{className:"flex flex-col sm:flex-row gap-4 mb-8"},React.createElement(Uo,{size:"lg",onClick:()=>f(ii.publicAnalysis),className:"bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-semibold"},React.createElement(Qr,{className:"mr-2 h-5 w-5"}),"Free Document Analysis"),React.createElement(Uo,{size:"lg",onClick:()=>f("/legal-qa"),className:"bg-blue-600 hover:bg-blue-700 text-white"},"Ask Legal Question",React.createElement(gr,{className:"ml-2 h-5 w-5"})),React.createElement(Uo,{size:"lg",variant:"outline",onClick:()=>f("/law-firms"),className:"border-white text-white hover:bg-white hover:text-blue-900"},"Find Law Firms",React.createElement(xa,{className:"ml-2 h-5 w-5"}))),React.createElement("div",{className:"grid grid-cols-3 gap-8 pt-8 border-t border-blue-700"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"flex items-center justify-center mb-2"},React.createElement(xa,{className:"h-8 w-8 text-yellow-300"})),React.createElement("div",{className:"text-2xl font-bold"},u?React.createElement("div",{className:"animate-pulse bg-blue-600 h-8 w-16 mx-auto rounded"}):di.formatStatNumber(l.legalProfessionals)),React.createElement("div",{className:"text-sm text-blue-200"},"Legal Professionals")),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"flex items-center justify-center mb-2"},React.createElement(Ha,{className:"h-8 w-8 text-yellow-300"})),React.createElement("div",{className:"text-2xl font-bold"},u?React.createElement("div",{className:"animate-pulse bg-blue-600 h-8 w-16 mx-auto rounded"}):di.formatStatNumber(l.documentsProcessed)),React.createElement("div",{className:"text-sm text-blue-200"},"Documents Simplified")),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"flex items-center justify-center mb-2"},React.createElement(gr,{className:"h-8 w-8 text-yellow-300"})),React.createElement("div",{className:"text-2xl font-bold"},u?React.createElement("div",{className:"animate-pulse bg-blue-600 h-8 w-16 mx-auto rounded"}):di.formatStatNumber(l.questionsAnswered)),React.createElement("div",{className:"text-sm text-blue-200"},"Questions Answered")))),React.createElement("div",{className:"hidden lg:block"},React.createElement("div",{className:"relative"},React.createElement("div",{className:"bg-white rounded-lg shadow-2xl p-8 transform rotate-2 hover:rotate-0 transition-transform duration-300"},React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-4"},"How can I help you today?"),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"p-4 bg-gray-50 rounded-lg"},React.createElement("p",{className:"text-sm text-gray-600 mb-2"},"I need help understanding Singapore's Employment Act..."),React.createElement("div",{className:"flex items-center text-xs text-gray-500"},React.createElement(Cr,{className:"h-3 w-3 mr-1"}),React.createElement("span",null,"Popular: Tenant Rights  Company Incorporation"))),React.createElement("div",{className:"text-center"},React.createElement("p",{className:"text-sm text-gray-600 mb-3"},"The Employment Act is Singapore's main labor law that provides basic terms and working conditions for employees. The Act was last amended in April 2019 to extend coverage to all employees regardless of salary level, with exceptions for public servants, domestic workers, and seafarers. Key provisions include..."),React.createElement(Uo,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white"},"Try the AI Legal Assistant ")))))))))},ui=Me.forwardRef(({className:e,...a},l)=>Me.createElement("div",{ref:l,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));ui.displayName="Card";const pi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("div",{ref:l,className:cn("flex flex-col space-y-1.5 p-6",e),...a}));pi.displayName="CardHeader";const fi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("h3",{ref:l,className:cn("text-2xl font-semibold leading-none tracking-tight",e),...a}));fi.displayName="CardTitle";const gi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("p",{ref:l,className:cn("text-sm text-muted-foreground",e),...a}));gi.displayName="CardDescription";const hi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("div",{ref:l,className:cn("p-6 pt-0",e),...a}));hi.displayName="CardContent";const yi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("div",{ref:l,className:cn("flex items-center p-6 pt-0",e),...a}));yi.displayName="CardFooter";const vi=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:e,variant:a,...l}){return Me.createElement("div",{className:cn(vi({variant:a}),e),...l})}const FreeAnalysisPromo=()=>{const e=useNavigate(),a=[{icon:Qr,title:"Instant Analysis",description:"Get document insights in seconds with AI-powered analysis"},{icon:Ir,title:"Secure & Private",description:"Your documents are automatically deleted after 24 hours"},{icon:Fa,title:"No Registration",description:"Start analyzing immediately without creating an account"},{icon:Ha,title:"Multiple Formats",description:"Support for PDF, JPEG, PNG, and WebP files up to 10MB"}];return je.createElement("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100"},je.createElement("div",{className:"container mx-auto px-4"},je.createElement("div",{className:"text-center mb-16"},je.createElement(Badge,{className:"mb-4 bg-yellow-100 text-yellow-800 border-yellow-300"}," Free Tool Available"),je.createElement("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6"},"Try Our Free Document Analysis"),je.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8"},"Get instant insights from your legal documents with our AI-powered analysis tool. No registration required, completely free to try."),je.createElement(Uo,{size:"lg",onClick:()=>e(ii.publicAnalysis),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg"},je.createElement(Qr,{className:"mr-2 h-5 w-5"}),"Analyze Document Now",je.createElement(ia,{className:"ml-2 h-5 w-5"}))),je.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16"},a.map(e=>je.createElement(ui,{key:e.title,className:"text-center border-0 shadow-lg hover:shadow-xl transition-shadow"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex justify-center mb-4"},je.createElement("div",{className:"p-3 bg-blue-100 rounded-full"},je.createElement(e.icon,{className:"h-6 w-6 text-blue-600"}))),je.createElement("h3",{className:"font-semibold text-gray-900 mb-2"},e.title),je.createElement("p",{className:"text-sm text-gray-600"},e.description))))),je.createElement("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16"},je.createElement("div",null,je.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-6"},"What You Get with Free Analysis"),je.createElement("div",{className:"space-y-3"},["Extract text from PDFs and images","Generate document summaries","Identify key terms and concepts","Basic document classification","No credit card required","Try before you subscribe"].map(e=>je.createElement("div",{key:e,className:"flex items-start gap-3"},je.createElement(Ta,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),je.createElement("span",{className:"text-gray-700"},e)))),je.createElement("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},je.createElement("div",{className:"flex items-start gap-3"},je.createElement(jr,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Want More?"),je.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Upgrade to get advanced legal insights, unlimited analysis, and permanent storage."),je.createElement(Uo,{variant:"link",className:"p-0 h-auto text-blue-600 hover:text-blue-700",onClick:()=>e(ii.pricing)},"View Pricing Plans "))))),je.createElement("div",{className:"relative"},je.createElement(ui,{className:"shadow-2xl"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center gap-3 mb-4"},je.createElement(Ha,{className:"h-5 w-5 text-blue-600"}),je.createElement("span",{className:"font-medium text-gray-900"},"Sample Analysis Result")),je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("h4",{className:"text-sm font-medium text-gray-900 mb-1"},"Document Type"),je.createElement(Badge,{variant:"secondary"},"Employment Contract")),je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("h4",{className:"text-sm font-medium text-gray-900 mb-2"},"Key Terms Found"),je.createElement("div",{className:"flex flex-wrap gap-1"},["salary","probation","termination","benefits"].map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-xs"},e)))),je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("h4",{className:"text-sm font-medium text-gray-900 mb-1"},"Summary"),je.createElement("p",{className:"text-xs text-gray-600"},"This employment contract outlines the terms and conditions of employment including salary, benefits, and termination clauses..."))),je.createElement(Uo,{className:"w-full mt-4 bg-blue-600 hover:bg-blue-700",onClick:()=>e(ii.publicAnalysis)},"Try With Your Document"))))),je.createElement("div",{className:"text-center mb-12"},je.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-8"},"What Users Are Saying"),je.createElement("div",{className:"grid md:grid-cols-2 gap-6 max-w-4xl mx-auto"},[{name:"Sarah Chen",role:"Small Business Owner",content:"The free analysis helped me understand my lease agreement before signing. Very helpful!",rating:5},{name:"Michael Tan",role:"Freelancer",content:"Quick and easy way to get insights from legal documents. Saved me time and money.",rating:5}].map(e=>je.createElement(ui,{key:e.name,className:"border-0 shadow-lg"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex justify-center mb-3"},[...Array(e.rating)].map((e,a)=>je.createElement(jr,{key:a,className:"h-4 w-4 text-yellow-400 fill-current"}))),je.createElement("p",{className:"text-gray-700 mb-4 italic"},'"',e.content,'"'),je.createElement("div",{className:"text-center"},je.createElement("div",{className:"font-medium text-gray-900"},e.name),je.createElement("div",{className:"text-sm text-gray-600"},e.role))))))),je.createElement("div",{className:"text-center"},je.createElement("div",{className:"grid grid-cols-3 gap-8 max-w-2xl mx-auto"},je.createElement("div",null,je.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},"1,000+"),je.createElement("div",{className:"text-sm text-gray-600"},"Documents Analyzed")),je.createElement("div",null,je.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},"95%"),je.createElement("div",{className:"text-sm text-gray-600"},"Accuracy Rate")),je.createElement("div",null,je.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},"30s"),je.createElement("div",{className:"text-sm text-gray-600"},"Average Analysis Time"))))))},Ei=[{icon:xa,title:"Law Firm Directory",description:"Find the perfect law firm with our comprehensive directory. Filter by practice area, location, and ratings.",features:["Advanced Search Filters","Verified Reviews & Ratings","Direct Contact Information","Specialization Matching"],action:"Browse Directory",link:"/law-firms"},{icon:Ha,title:"Legal Document Analysis",description:"Upload your documents for instant AI-powered analysis, summary, and interpretation.",features:["AI Document Summary","Legal Risk Assessment","Key Terms Extraction","Compliance Checking"],action:"Analyze Documents",link:"/dashboard/documents"},{icon:gr,title:"Legal Q&A",description:"Get instant answers to your legal questions from our AI assistant trained on Singapore law.",features:["24/7 AI Legal Assistant","Singapore Law Expertise","Case Law References","Personalized Advice"],action:"Ask a Question",link:"/dashboard/ai-assistant"},{icon:Ua,title:"Document Templates",description:"Access a library of legal document templates specific to Singapore's legal system.",features:["Singapore-Specific Templates","Customizable Forms","Legal Compliance Validation","Instant Download"],action:"Browse Templates",link:"/dashboard/templates"},{icon:Cr,title:"Case Summaries",description:"Explore our database of court case summaries, without lengthy and easy to understand.",features:["Simplified Case Summaries","Search by Legal Topic","Recent Court Decisions","Legal Precedents"],action:"Explore Cases",link:"/case-summaries"},{icon:pa,title:"Singapore-Specific Resources",description:"All resources are tailored specifically to Singapore's legal system and requirements.",features:["Local Legal Updates","Regulatory Changes","Government Resources","Legal Glossary"],action:"Learn More",link:"/resources"}],PlatformFeatures=()=>{const e=useNavigate();return React.createElement("section",{id:"features",className:"py-20 bg-gray-50"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"text-center mb-16"},React.createElement("h2",{className:"text-4xl font-bold text-gray-900 mb-4"},"Everything You Need In One Place"),React.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"LegalHelpSG combines AI technology with comprehensive legal resources to give you the most efficient legal help experience.")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Ei.map(a=>React.createElement(ui,{key:a.title,className:"group hover:shadow-xl transition-all duration-300 hover:-translate-y-2"},React.createElement(pi,null,React.createElement("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg mb-4 group-hover:bg-blue-600 transition-colors"},React.createElement(a.icon,{className:"h-6 w-6 text-blue-600 group-hover:text-white transition-colors"})),React.createElement(fi,{className:"text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors"},a.title),React.createElement(gi,{className:"text-gray-600"},a.description)),React.createElement(hi,null,React.createElement("ul",{className:"space-y-2 mb-6"},a.features.map(e=>React.createElement("li",{key:e,className:"flex items-center text-sm text-gray-700"},React.createElement("div",{className:"h-1.5 w-1.5 bg-blue-600 rounded-full mr-3"}),e))),React.createElement(Uo,{variant:"outline",className:"w-full group-hover:bg-blue-600 group-hover:text-white group-hover:border-blue-600 transition-colors",onClick:()=>e(a.link)},a.action))))),React.createElement("div",{className:"text-center mt-12"},React.createElement(Uo,{size:"lg",className:"bg-blue-600 hover:bg-blue-700"},"Get Started"))))},xi=[{step:"Step 1",icon:Cr,title:"Identify Your Legal Need",description:"Browse our legal topics, use our search function, or start with a question to identify your specific legal need.",features:["Search by legal topic or question","Browse categories and case types","Get instant topic suggestions","Access legal glossary"],color:"blue"},{step:"Step 2",icon:Wr,title:"Access Resources or Find Experts",description:"Use our AI-powered tools to get information, download templates, or find the right legal professional.",features:["AI legal assistant for instant answers","Download customizable legal templates","Find qualified lawyers by specialty","Access case summaries and precedents"],color:"green"},{step:"Step 3",icon:Ta,title:"Take Informed Action",description:"With clear information and the right resources, you can make confident decisions about your legal matters.",features:["Make informed legal decisions","Connect with verified professionals","Download completed documents","Track your legal progress"],color:"purple"}],HowItWorks=()=>React.createElement("section",{id:"how-it-works",className:"py-20 bg-white"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"text-center mb-16"},React.createElement("h2",{className:"text-4xl font-bold text-gray-900 mb-4"},"How It Works"),React.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"LegalLinkSG makes accessing legal information and services easy for everyone")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12"},xi.map((e,a)=>React.createElement("div",{key:e.title,className:"relative"},React.createElement(ui,{className:"h-full hover:shadow-lg transition-shadow duration-300"},React.createElement(pi,{className:"text-center"},React.createElement("div",{className:`flex items-center justify-center w-16 h-16 bg-${e.color}-100 rounded-full mx-auto mb-4`},React.createElement(e.icon,{className:`h-8 w-8 text-${e.color}-600`})),React.createElement("div",{className:`text-sm font-semibold text-${e.color}-600 mb-2`},e.step),React.createElement(fi,{className:"text-xl font-bold text-gray-900"},e.title),React.createElement(gi,{className:"text-gray-600"},e.description)),React.createElement(hi,null,React.createElement("ul",{className:"space-y-2"},e.features.map(a=>React.createElement("li",{key:a,className:"flex items-start text-sm text-gray-700"},React.createElement("div",{className:`h-1.5 w-1.5 bg-${e.color}-600 rounded-full mt-2 mr-3 flex-shrink-0`}),a))))),a<xi.length-1&&React.createElement("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2 z-10"},React.createElement(ia,{className:"h-8 w-8 text-gray-400"}))))),React.createElement("div",{className:"text-center"},React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-4"},"Ready to get started?"),React.createElement("p",{className:"text-gray-600 mb-8"},"Join thousands of Singaporeans who are already using LegalLinkSG to navigate their legal matters."),React.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"},React.createElement(Uo,{size:"lg",className:"bg-blue-600 hover:bg-blue-700"},"Get Started Free"),React.createElement(Uo,{size:"lg",variant:"outline"},"Browse Law Firms"))))),AboutSection=()=>React.createElement("section",{id:"about",className:"py-20 bg-white"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center"},React.createElement("div",null,React.createElement("h2",{className:"text-4xl font-bold text-gray-900 mb-6"},"Trusted Legal Partners Since 1998"),React.createElement("p",{className:"text-lg text-gray-600 mb-8 leading-relaxed"},"LawMatters has been Singapore's premier legal firm for over two decades. We've built our reputation on delivering exceptional legal services with integrity, expertise, and unwavering commitment to our clients' success."),React.createElement("div",{className:"space-y-4 mb-8"},React.createElement("div",{className:"flex items-start"},React.createElement(Ta,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900"},"Client-Focused Approach"),React.createElement("p",{className:"text-gray-600"},"We prioritize understanding your unique needs and objectives."))),React.createElement("div",{className:"flex items-start"},React.createElement(Ta,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900"},"Proven Track Record"),React.createElement("p",{className:"text-gray-600"},"Over 500 successful cases with a 95% client satisfaction rate."))),React.createElement("div",{className:"flex items-start"},React.createElement(Ta,{className:"h-6 w-6 text-green-500 mt-1 mr-3 flex-shrink-0"}),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900"},"Expert Legal Team"),React.createElement("p",{className:"text-gray-600"},"Qualified lawyers with specialized expertise across multiple practice areas.")))),React.createElement(Uo,{size:"lg",className:"bg-blue-600 hover:bg-blue-700"},"Meet Our Team")),React.createElement("div",{className:"grid grid-cols-2 gap-6"},React.createElement("div",{className:"bg-blue-50 p-6 rounded-lg text-center"},React.createElement(ca,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-2"},"25+"),React.createElement("p",{className:"text-gray-600"},"Years of Excellence")),React.createElement("div",{className:"bg-green-50 p-6 rounded-lg text-center"},React.createElement(Wr,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-2"},"1000+"),React.createElement("p",{className:"text-gray-600"},"Satisfied Clients")),React.createElement("div",{className:"bg-purple-50 p-6 rounded-lg text-center"},React.createElement(Ta,{className:"h-12 w-12 text-purple-600 mx-auto mb-4"}),React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-2"},"500+"),React.createElement("p",{className:"text-gray-600"},"Cases Won")),React.createElement("div",{className:"bg-orange-50 p-6 rounded-lg text-center"},React.createElement(Fa,{className:"h-12 w-12 text-orange-600 mx-auto mb-4"}),React.createElement("h3",{className:"text-2xl font-bold text-gray-900 mb-2"},"24/7"),React.createElement("p",{className:"text-gray-600"},"Client Support")))))),wi=[{name:"Sarah Chen",role:"CEO, TechStart Singapore",content:"LawMatters provided exceptional guidance during our company's acquisition. Their expertise in corporate law and attention to detail made the complex process seamless.",rating:5,image:"/placeholder.svg"},{name:"Michael Tan",role:"Property Developer",content:"The real estate legal team at LawMatters helped us navigate multiple property transactions with professionalism and efficiency. Highly recommended!",rating:5,image:"/placeholder.svg"},{name:"Lisa Wong",role:"Small Business Owner",content:"When I needed employment law advice, LawMatters provided clear, actionable guidance that protected my business. Their team is knowledgeable and responsive.",rating:5,image:"/placeholder.svg"}],Testimonials=()=>React.createElement("section",{id:"testimonials",className:"py-20 bg-gray-50"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"text-center mb-16"},React.createElement("h2",{className:"text-4xl font-bold text-gray-900 mb-4"},"What Our Clients Say"),React.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Don't just take our word for it. Here's what our satisfied clients have to say about our legal services and expertise.")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},wi.map((e,a)=>React.createElement(ui,{key:a,className:"hover:shadow-lg transition-shadow duration-300"},React.createElement(hi,{className:"p-6"},React.createElement("div",{className:"flex items-center mb-4"},React.createElement(br,{className:"h-8 w-8 text-blue-600 opacity-50"}),React.createElement("div",{className:"flex ml-auto"},[...Array(e.rating)].map((e,a)=>React.createElement(jr,{key:a,className:"h-4 w-4 text-yellow-400 fill-current"})))),React.createElement("p",{className:"text-gray-700 mb-6 leading-relaxed"},'"',e.content,'"'),React.createElement("div",{className:"flex items-center"},React.createElement("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white font-bold mr-4"},e.name.charAt(0)),React.createElement("div",null,React.createElement("h4",{className:"font-semibold text-gray-900"},e.name),React.createElement("p",{className:"text-sm text-gray-600"},e.role))))))),React.createElement("div",{className:"text-center mt-12"},React.createElement("p",{className:"text-gray-600 mb-4"},"Join hundreds of satisfied clients"),React.createElement("div",{className:"flex justify-center items-center space-x-1"},[...Array(5)].map((e,a)=>React.createElement(jr,{key:a,className:"h-6 w-6 text-yellow-400 fill-current"})),React.createElement("span",{className:"ml-2 text-gray-900 font-semibold"},"4.9/5 Client Rating"))))),bi=Me.forwardRef(({className:e,...a},l)=>Me.createElement("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));bi.displayName="Textarea";const ContactSection=()=>{const[e,a]=Me.useState({name:"",email:"",phone:"",subject:"",message:""}),{toast:l}=useToast(),handleChange=e=>{a(a=>({...a,[e.target.name]:e.target.value}))};return React.createElement("section",{id:"contact",className:"py-20 bg-white"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"text-center mb-16"},React.createElement("h2",{className:"text-4xl font-bold text-gray-900 mb-4"},"Get In Touch"),React.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Ready to discuss your legal needs? Contact us today for a free consultation and let us help you navigate your legal challenges.")),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},React.createElement("div",{className:"lg:col-span-2"},React.createElement(ui,null,React.createElement(pi,null,React.createElement(fi,null,"Send Us a Message")),React.createElement(hi,null,React.createElement("form",{onSubmit:e=>{e.preventDefault(),l({title:"Message Sent!",description:"We'll get back to you within 24 hours."}),a({name:"",email:"",phone:"",subject:"",message:""})},className:"space-y-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",null,React.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2"},"Full Name *"),React.createElement(zo,{id:"name",name:"name",type:"text",required:!0,value:e.name,onChange:handleChange,placeholder:"Enter your full name"})),React.createElement("div",null,React.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2"},"Email Address *"),React.createElement(zo,{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:handleChange,placeholder:"Enter your email"}))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",null,React.createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number"),React.createElement(zo,{id:"phone",name:"phone",type:"tel",value:e.phone,onChange:handleChange,placeholder:"Enter your phone number"})),React.createElement("div",null,React.createElement("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2"},"Subject *"),React.createElement(zo,{id:"subject",name:"subject",type:"text",required:!0,value:e.subject,onChange:handleChange,placeholder:"Legal matter subject"}))),React.createElement("div",null,React.createElement("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2"},"Message *"),React.createElement(bi,{id:"message",name:"message",required:!0,value:e.message,onChange:handleChange,placeholder:"Please describe your legal matter...",className:"min-h-[120px]"})),React.createElement(Uo,{type:"submit",size:"lg",className:"w-full bg-blue-600 hover:bg-blue-700"},"Send Message"))))),React.createElement("div",{className:"space-y-6"},React.createElement(ui,null,React.createElement(hi,{className:"p-6"},React.createElement("div",{className:"flex items-start space-x-4"},React.createElement("div",{className:"bg-blue-100 p-3 rounded-lg"},React.createElement(xr,{className:"h-6 w-6 text-blue-600"})),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900 mb-1"},"Phone"),React.createElement("p",{className:"text-gray-600"},"+65 6123 4567"),React.createElement("p",{className:"text-gray-600"},"+65 6765 4321"))))),React.createElement(ui,null,React.createElement(hi,{className:"p-6"},React.createElement("div",{className:"flex items-start space-x-4"},React.createElement("div",{className:"bg-green-100 p-3 rounded-lg"},React.createElement(mr,{className:"h-6 w-6 text-green-600"})),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900 mb-1"},"Email"),React.createElement("p",{className:"text-gray-600"},"info@lawmatters.sg"),React.createElement("p",{className:"text-gray-600"},"consultation@lawmatters.sg"))))),React.createElement(ui,null,React.createElement(hi,{className:"p-6"},React.createElement("div",{className:"flex items-start space-x-4"},React.createElement("div",{className:"bg-purple-100 p-3 rounded-lg"},React.createElement(dr,{className:"h-6 w-6 text-purple-600"})),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900 mb-1"},"Address"),React.createElement("p",{className:"text-gray-600"},"123 Raffles Place",React.createElement("br",null),"#45-67 Tower One",React.createElement("br",null),"Singapore 048624"))))),React.createElement(ui,null,React.createElement(hi,{className:"p-6"},React.createElement("div",{className:"flex items-start space-x-4"},React.createElement("div",{className:"bg-orange-100 p-3 rounded-lg"},React.createElement(Fa,{className:"h-6 w-6 text-orange-600"})),React.createElement("div",null,React.createElement("h3",{className:"font-semibold text-gray-900 mb-1"},"Office Hours"),React.createElement("p",{className:"text-gray-600"},"Mon - Fri: 9:00 AM - 6:00 PM",React.createElement("br",null),"Sat: 9:00 AM - 1:00 PM",React.createElement("br",null),"Sun: Closed")))))))))},Footer=()=>React.createElement("footer",{className:"bg-gray-900 text-white"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},React.createElement("div",{className:"lg:col-span-1"},React.createElement("h3",{className:"text-2xl font-bold mb-4"},"LawMatters"),React.createElement("p",{className:"text-gray-300 mb-6"},"Singapore's trusted legal partner for over 25 years. We provide expert legal solutions with integrity and excellence."),React.createElement("div",{className:"flex space-x-4"},React.createElement("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors"},React.createElement(Va,{className:"h-6 w-6"})),React.createElement("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors"},React.createElement(sr,{className:"h-6 w-6"})),React.createElement("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors"},React.createElement(qr,{className:"h-6 w-6"})))),React.createElement("div",null,React.createElement("h4",{className:"text-lg font-semibold mb-4"},"Practice Areas"),React.createElement("ul",{className:"space-y-2 text-gray-300"},React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Corporate Law")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Employment Law")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Real Estate Law")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Family Law")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Criminal Defense")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Commercial Litigation")))),React.createElement("div",null,React.createElement("h4",{className:"text-lg font-semibold mb-4"},"Quick Links"),React.createElement("ul",{className:"space-y-2 text-gray-300"},React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"About Us")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Our Team")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Case Studies")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Legal Resources")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Privacy Policy")),React.createElement("li",null,React.createElement("a",{href:"#",className:"hover:text-blue-400 transition-colors"},"Terms of Service")))),React.createElement("div",null,React.createElement("h4",{className:"text-lg font-semibold mb-4"},"Contact Info"),React.createElement("div",{className:"space-y-3 text-gray-300"},React.createElement("div",{className:"flex items-center"},React.createElement(xr,{className:"h-5 w-5 mr-3 text-blue-400"}),React.createElement("span",null,"+65 6123 4567")),React.createElement("div",{className:"flex items-center"},React.createElement(mr,{className:"h-5 w-5 mr-3 text-blue-400"}),React.createElement("span",null,"info@lawmatters.sg")),React.createElement("div",{className:"flex items-start"},React.createElement(dr,{className:"h-5 w-5 mr-3 mt-1 text-blue-400"}),React.createElement("span",null,"123 Raffles Place",React.createElement("br",null),"#45-67 Tower One",React.createElement("br",null),"Singapore 048624"))))),React.createElement("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-300"},React.createElement("p",null," 2024 LawMatters Singapore. All rights reserved.")))),AuthDebug=()=>{const{user:e,profile:a,session:l,loading:m,signOut:u}=useSafeAuth(),clearSession=async()=>{try{await Mo.auth.signOut(),window.location.reload()}catch(e){console.error("Error clearing session:",e)}};return je.createElement(ui,{className:"fixed bottom-4 right-4 w-80 z-50 bg-white border-2 border-blue-500"},je.createElement(pi,null,je.createElement(fi,{className:"text-sm"},"Auth Debug Info")),je.createElement(hi,{className:"text-xs space-y-2"},je.createElement("div",null,je.createElement("strong",null,"Loading:")," ",m?"true":"false"),je.createElement("div",null,je.createElement("strong",null,"User:")," ",e?e.email:"null"),je.createElement("div",null,je.createElement("strong",null,"Session:")," ",l?"exists":"null"),je.createElement("div",null,je.createElement("strong",null,"Profile:")," ",a?`${a.first_name} ${a.last_name}`:"null"),je.createElement("div",null,je.createElement("strong",null,"User ID:")," ",e?.id||"null"),je.createElement("div",{className:"mt-2 space-x-2"},je.createElement(Uo,{onClick:clearSession,size:"sm",variant:"outline"},"Clear Session"),e&&je.createElement(Uo,{onClick:async()=>{try{await u()}catch(e){console.warn("Sign out failed:",e),await clearSession()}},size:"sm",variant:"outline"},"Sign Out"))))},Ni=cva("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),_i=Me.forwardRef(({className:e,variant:a,...l},m)=>Me.createElement("div",{ref:m,role:"alert",className:cn(Ni({variant:a}),e),...l}));_i.displayName="Alert";Me.forwardRef(({className:e,...a},l)=>Me.createElement("h5",{ref:l,className:cn("mb-1 font-medium leading-none tracking-tight",e),...a})).displayName="AlertTitle";const ki=Me.forwardRef(({className:e,...a},l)=>Me.createElement("div",{ref:l,className:cn("text-sm [&_p]:leading-relaxed",e),...a}));ki.displayName="AlertDescription";class ErrorBoundary extends je.Component{constructor(e){super(e),__publicField(this,"maxRetries",3),__publicField(this,"isAuthRelatedError",(e,a)=>{const l=e.message?.toLowerCase()||"",m=e.stack?.toLowerCase()||"",u=a?.componentStack?.toLowerCase()||"";return l.includes("auth")||l.includes("supabase")||l.includes("session")||l.includes("useauth")||l.includes("authcontext")||m.includes("authcontext")||u.includes("authcontext")||u.includes("authprovider")}),__publicField(this,"resetError",()=>{this.state.retryCount<this.maxRetries?this.setState(e=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:e.retryCount+1})):window.location.href="/"}),__publicField(this,"handleAuthRecovery",()=>{console.log(" ErrorBoundary: Auth recovery initiated");["sb-kvlaydeyqidlfpfutbmp-auth-token","supabase.auth.token","auth-token","user-profile-cache","user-session","auth-state"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(mE){console.warn("Failed to clear auth key during recovery:",e)}}),window.location.href="/auth/login"}),__publicField(this,"getErrorMessage",()=>{const{error:e,errorInfo:a}=this.state,{level:l}=this.props;return this.isAuthRelatedError(e||new Error,a)||"auth"===l?e?.message?.includes("AuthSessionMissingError")||e?.message?.includes("session missing")?{title:"Authentication Session Expired",description:"Your authentication session has expired or is missing. Please sign in again.",suggestion:"Clear your browser data and sign in again if the problem persists.",isAuthError:!0}:e?.message?.includes("supabase is not defined")?{title:"Authentication Service Error",description:"The authentication service failed to initialize properly.",suggestion:"This is usually a temporary issue. Try refreshing the page.",isAuthError:!0}:{title:"Authentication Service Unavailable",description:"The authentication system is temporarily unavailable. You can still browse the site as a guest.",suggestion:"Try refreshing the page or continue without signing in.",isAuthError:!0}:e?.message?.includes("createContext")?{title:"Component Loading Error",description:"A component failed to load properly. This might be a temporary issue.",suggestion:"Please try refreshing the page.",isAuthError:!1}:{title:"Something went wrong",description:"We encountered an unexpected error. Please try refreshing the page or go back to the homepage.",suggestion:"If the problem persists, please contact support.",isAuthError:!1}}),this.state={hasError:!1,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e,retryCount:0}}componentDidCatch(e,a){console.error(" ErrorBoundary caught an error:",e,a);const l=this.isAuthRelatedError(e,a);l&&console.error(" AUTH ERROR DETECTED in ErrorBoundary:",{message:e.message,stack:e.stack,componentStack:a.componentStack,timestamp:(new Date).toISOString()}),this.setState({error:e,errorInfo:a}),this.props.onError&&this.props.onError(e,a);try{"undefined"!=typeof window&&window.__errorTracker&&window.__errorTracker.logError({type:"error",message:`React Error Boundary (${this.props.level||"unknown"}): ${e.message}`,stack:e.stack,componentStack:a.componentStack,level:this.props.level||"component",isAuthError:l})}catch(m){console.warn("Error tracking failed:",m)}}render(){if(this.state.hasError){const e=this.getErrorMessage();if(this.props.fallback){const e=this.props.fallback;return je.createElement(e,{error:this.state.error||new Error("Unknown error"),resetError:this.resetError})}return"component"===this.props.level?je.createElement(_i,{className:"my-4"},je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,e.description,je.createElement(Uo,{onClick:this.resetError,variant:"outline",size:"sm",className:"ml-2",disabled:this.state.retryCount>=this.maxRetries},je.createElement(Nr,{className:"h-3 w-3 mr-1"}),this.state.retryCount>=this.maxRetries?"Max retries reached":"Retry"))):"auth"===this.props.level||e.isAuthError?je.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 my-4"},je.createElement("div",{className:"flex items-start"},je.createElement(Ir,{className:"h-5 w-5 text-red-600 mt-0.5"}),je.createElement("div",{className:"ml-3 flex-1"},je.createElement("h3",{className:"text-sm font-medium text-red-800"},e.title),je.createElement("p",{className:"text-sm text-red-700 mt-1"},e.description),je.createElement("div",{className:"mt-3 flex space-x-2 flex-wrap gap-2"},je.createElement(Uo,{onClick:this.handleAuthRecovery,variant:"outline",size:"sm",className:"bg-white"},je.createElement(Ir,{className:"h-3 w-3 mr-1"}),"Clear Auth & Sign In"),je.createElement(Uo,{onClick:this.resetError,variant:"outline",size:"sm",disabled:this.state.retryCount>=this.maxRetries},je.createElement(Nr,{className:"h-3 w-3 mr-1"}),this.state.retryCount>=this.maxRetries?"Max retries":"Retry"),je.createElement(Uo,{onClick:()=>window.location.href="/",variant:"outline",size:"sm"},"Continue as Guest"))))):je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100"},je.createElement(Br,{className:"h-6 w-6 text-red-600"})),je.createElement(fi,{className:"text-xl font-semibold text-gray-900"},e.title),je.createElement(gi,{className:"text-gray-600"},e.description)),je.createElement(hi,{className:"space-y-4"},!!this.props.showDetails&&this.state.error&&je.createElement("div",{className:"rounded-md bg-red-50 p-4"},je.createElement("h4",{className:"text-sm font-medium text-red-800 mb-2"},"Error Details:"),je.createElement("p",{className:"text-xs text-red-700 font-mono break-all"},this.state.error.message),this.state.error.stack&&je.createElement("details",{className:"mt-2"},je.createElement("summary",{className:"text-xs text-red-700 cursor-pointer"},"Stack Trace"),je.createElement("pre",{className:"text-xs text-red-700 mt-1 whitespace-pre-wrap break-all"},this.state.error.stack))),je.createElement("div",{className:"flex space-x-3"},je.createElement(Uo,{onClick:this.resetError,className:"flex-1",variant:"outline",disabled:this.state.retryCount>=this.maxRetries},je.createElement(Nr,{className:"h-4 w-4 mr-2"}),this.state.retryCount>=this.maxRetries?"Max Retries":`Try Again (${this.maxRetries-this.state.retryCount} left)`),je.createElement(Uo,{onClick:()=>window.location.href="/",className:"flex-1"},je.createElement(er,{className:"h-4 w-4 mr-2"}),"Go Home")),je.createElement("p",{className:"text-xs text-gray-500 text-center"},e.suggestion))))}return this.props.children}}const AuthErrorBoundary=({children:e})=>je.createElement(ErrorBoundary,{level:"auth",onError:(e,a)=>{console.warn("Authentication error caught:",e.message),e.message.includes("useAuth must be used within an AuthProvider")&&console.warn("Component tried to use auth context without provider - providing fallback")}},e),Index=()=>{const{user:e,loading:a}=useSafeAuth();return console.log("Index page - Auth state:",{user:e?.email||"No user",loading:a}),React.createElement("div",{className:"min-h-screen bg-white"},React.createElement(Navigation,null),React.createElement(Hero,null),React.createElement(FreeAnalysisPromo,null),React.createElement(PlatformFeatures,null),React.createElement(HowItWorks,null),React.createElement(AboutSection,null),React.createElement(Testimonials,null),React.createElement(ContactSection,null),React.createElement(Footer,null),React.createElement(AuthErrorBoundary,null,React.createElement(AuthDebug,null)))};function usePrevious(e){const a=Me.useRef({value:e,previous:e});return Me.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}var Si="Switch",[Ci,Ri]=createContextScope$5(Si),[Ai,Ti]=Ci(Si),Pi=Me.forwardRef((e,a)=>{const{__scopeSwitch:l,name:m,checked:u,defaultChecked:p,required:f,disabled:g,value:h="on",onCheckedChange:y,form:v,...E}=e,[x,w]=Me.useState(null),b=useComposedRefs$2(a,e=>w(e)),N=Me.useRef(!1),_=!x||(v||!!x.closest("form")),[k=!1,S]=useControllableState$1({prop:u,defaultProp:p,onChange:y});return tt.jsxs(Ai,{scope:l,checked:k,disabled:g,children:[tt.jsx(nt.button,{type:"button",role:"switch","aria-checked":k,"aria-required":f,"data-state":getState$2(k),"data-disabled":g?"":void 0,disabled:g,value:h,...E,ref:b,onClick:composeEventHandlers$3(e.onClick,e=>{S(e=>!e),_&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),_&&tt.jsx(BubbleInput$1,{control:x,bubbles:!N.current,name:m,value:h,checked:k,required:f,disabled:g,form:v,style:{transform:"translateX(-100%)"}})]})});Pi.displayName=Si;var Di="SwitchThumb",Ii=Me.forwardRef((e,a)=>{const{__scopeSwitch:l,...m}=e,u=Ti(Di,l);return tt.jsx(nt.span,{"data-state":getState$2(u.checked),"data-disabled":u.disabled?"":void 0,...m,ref:a})});Ii.displayName=Di;var BubbleInput$1=e=>{const{control:a,checked:l,bubbles:m=!0,...u}=e,p=Me.useRef(null),f=usePrevious(l),g=useSize(a);return Me.useEffect(()=>{const e=p.current,a=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(a,"checked").set;if(f!==l&&u){const a=new Event("click",{bubbles:m});u.call(e,l),e.dispatchEvent(a)}},[f,l,m]),tt.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...u,tabIndex:-1,ref:p,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState$2(e){return e?"checked":"unchecked"}var Fi=Pi,Mi=Ii;const ji=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Fi,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:l},Me.createElement(Mi,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})));ji.displayName=Fi.displayName;const Pricing=()=>{const[e,a]=Me.useState(!1),{user:l}=useAuth(),m=useNavigate(),u=[{key:"free",...ri.free,icon:jr,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200"},{key:"premium",...ri.premium,icon:Qr,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",popular:!0},{key:"pro",...ri.pro,icon:Oa,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},{key:"enterprise",...ri.enterprise,icon:xa,color:"text-gray-800",bgColor:"bg-gray-100",borderColor:"border-gray-300"}];return je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"},je.createElement("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6"},"Simple, Transparent Pricing"),je.createElement("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto"},"Choose the plan that works best for your legal needs, with no hidden fees or long-term commitments."),je.createElement("div",{className:"flex items-center justify-center space-x-4 mb-12"},je.createElement("span",{className:"text-sm font-medium "+(e?"text-gray-500":"text-gray-900")},"Monthly"),je.createElement(ji,{checked:e,onCheckedChange:a,className:"data-[state=checked]:bg-blue-600"}),je.createElement("span",{className:"text-sm font-medium "+(e?"text-gray-900":"text-gray-500")},"Annual"),je.createElement(Badge,{variant:"secondary",className:"ml-2 bg-green-100 text-green-800"},"Save 20%")))),je.createElement("section",{className:"py-20 -mt-10"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},u.map(a=>{const u=a.icon,p=(a=>null===a.price||0===a.price?null:e?"Save 20%":null)(a);return je.createElement(ui,{key:a.key,className:`relative ${a.borderColor} ${a.popular?"ring-2 ring-blue-500 shadow-xl scale-105":"shadow-lg"} transition-all duration-300 hover:shadow-xl hover:-translate-y-1`},a.popular&&je.createElement("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2"},je.createElement(Badge,{className:"bg-blue-600 text-white px-4 py-1"},"Most Popular")),je.createElement(pi,{className:`text-center ${a.bgColor} rounded-t-lg`},je.createElement("div",{className:`inline-flex items-center justify-center w-12 h-12 ${a.color} mb-4 mx-auto`},je.createElement(u,{className:"h-8 w-8"})),je.createElement(fi,{className:"text-2xl font-bold text-gray-900"},a.name),je.createElement("div",{className:"mt-4"},je.createElement("span",{className:"text-4xl font-bold text-gray-900"},(a=>null===a.price?"Custom":0===a.price?"Free":`$${e?10*a.price:a.price}`)(a)),je.createElement("span",{className:"text-gray-600 ml-1"},(a=>null===a.price||0===a.price?"":e?"/year":"/month")(a)),p&&je.createElement("div",{className:"mt-1"},je.createElement(Badge,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs"},p)))),je.createElement(hi,{className:"p-6"},je.createElement("ul",{className:"space-y-3 mb-8"},a.features.map((e,a)=>je.createElement("li",{key:a,className:"flex items-start"},je.createElement(_a,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),je.createElement("span",{className:"text-sm text-gray-700"},e)))),je.createElement(Uo,{onClick:()=>(a=>{l?"free"!==a?"enterprise"!==a?m(`/subscribe/${a}${e?"?billing=yearly":""}`):window.location.href="mailto:sales@lawmatterssg.com?subject=Enterprise Plan Inquiry":m("/dashboard"):m("/auth/login")})(a.key),className:"w-full "+(a.popular?"bg-blue-600 hover:bg-blue-700 text-white":"free"===a.key?"bg-gray-100 hover:bg-gray-200 text-gray-900":"bg-gray-900 hover:bg-gray-800 text-white"),size:"lg"},"free"===a.key?"Sign Up Free":"enterprise"===a.key?"Contact Sales":l?"Subscribe Now":"Get Started")))})))),je.createElement("section",{className:"py-20 bg-gray-50"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"text-center mb-16"},je.createElement("h2",{className:"text-3xl font-bold text-gray-900 mb-4"},"Compare All Features"),je.createElement("p",{className:"text-lg text-gray-600"},"See exactly what's included in each plan")),je.createElement("div",{className:"overflow-x-auto"},je.createElement("table",{className:"w-full bg-white rounded-lg shadow-lg"},je.createElement("thead",null,je.createElement("tr",{className:"border-b border-gray-200"},je.createElement("th",{className:"text-left py-4 px-6 font-semibold text-gray-900"},"Features"),je.createElement("th",{className:"text-center py-4 px-6 font-semibold text-gray-900"},"Free"),je.createElement("th",{className:"text-center py-4 px-6 font-semibold text-blue-600"},"Premium"),je.createElement("th",{className:"text-center py-4 px-6 font-semibold text-purple-600"},"Pro"),je.createElement("th",{className:"text-center py-4 px-6 font-semibold text-gray-900"},"Enterprise"))),je.createElement("tbody",{className:"divide-y divide-gray-200"},je.createElement("tr",null,je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"AI Queries"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},"10/month"),je.createElement("td",{className:"py-4 px-6 text-center text-blue-600"},"50/month"),je.createElement("td",{className:"py-4 px-6 text-center text-purple-600"},"500/month"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-900"},"Unlimited")),je.createElement("tr",{className:"bg-gray-50"},je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Document Downloads"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},"1/month"),je.createElement("td",{className:"py-4 px-6 text-center text-blue-600"},"10/month"),je.createElement("td",{className:"py-4 px-6 text-center text-purple-600"},"20/month"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-900"},"Unlimited")),je.createElement("tr",null,je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Custom Legal Document Downloads"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-blue-600"},"3/month"),je.createElement("td",{className:"py-4 px-6 text-center text-purple-600"},"20/month"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-900"},"Unlimited")),je.createElement("tr",{className:"bg-gray-50"},je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Premium Templates"),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},"")),je.createElement("tr",null,je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Document Analysis"),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},"")),je.createElement("tr",{className:"bg-gray-50"},je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"API Access"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},"")),je.createElement("tr",null,je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Priority Support"),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},"")),je.createElement("tr",{className:"bg-gray-50"},je.createElement("td",{className:"py-4 px-6 font-medium text-gray-900"},"Dedicated Account Manager"),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-gray-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""),je.createElement("td",{className:"py-4 px-6 text-center text-green-600"},""))))))),je.createElement("section",{className:"py-20"},je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"text-center mb-16"},je.createElement("h2",{className:"text-3xl font-bold text-gray-900 mb-4"},"Frequently Asked Questions")),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Can I change plans later?"),je.createElement("p",{className:"text-gray-600"},"Yes, you can upgrade, downgrade, or cancel your plan at any time. Changes to your subscription take effect immediately.")),je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"How do the monthly limits work?"),je.createElement("p",{className:"text-gray-600"},"Usage limits reset on the first day of each billing cycle. Unused queries or downloads don't roll over to the next month.")),je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Is my payment information secure?"),je.createElement("p",{className:"text-gray-600"},"Yes, we use Stripe for all payment processing. Your payment information is never stored on our servers and is protected by bank-level security.")),je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"What's your refund policy?"),je.createElement("p",{className:"text-gray-600"},"If you're not satisfied, contact us within 14 days of your purchase for a full refund. No questions asked."))))),je.createElement(Footer,null))},LawFirmMap=({lawFirms:e,selectedFirm:a,onFirmSelect:l,className:m=""})=>{const[u,p]=Me.useState(!1),[f,g]=Me.useState({lat:1.3521,lng:103.8198}),[h,y]=Me.useState(null);Me.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const{latitude:a,longitude:l}=e.coords;y({lat:a,lng:l}),g({lat:a,lng:l})},e=>{console.log("Location access denied or unavailable:",e)})},[]);return je.createElement("div",{className:`${m} ${u?"fixed inset-0 z-50 bg-white":""}`},je.createElement(ui,{className:"h-full "+(u?"rounded-none border-0":"")},je.createElement(pi,{className:"pb-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement(fi,{className:"text-lg font-semibold"},"Law Firms Near You"),je.createElement("div",{className:"flex items-center space-x-2"},h&&je.createElement(Badge,{variant:"outline",className:"text-xs"},je.createElement(vr,{className:"h-3 w-3 mr-1"}),"Location enabled"),je.createElement(Uo,{size:"sm",variant:"outline",onClick:()=>p(!u)},u?je.createElement(hr,{className:"h-4 w-4"}):je.createElement(pr,{className:"h-4 w-4"}))))),je.createElement(hi,{className:"p-0 flex-1"},je.createElement("div",{className:(u?"h-screen":"h-96")+" relative"},je.createElement("div",{className:"relative w-full h-full bg-gray-100 rounded-lg overflow-hidden"},je.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50"},je.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement(dr,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),je.createElement("h3",{className:"text-lg font-semibold text-gray-700 mb-2"},"Interactive Map"),je.createElement("p",{className:"text-gray-500 text-sm"},e.length," law firms in Singapore"))),e.map((e,m)=>je.createElement("div",{key:e.id,className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all duration-200 "+(a?.id===e.id?"scale-125 z-20":"hover:scale-110 z-10"),style:{left:20+15*m%60+"%",top:30+10*m%40+"%"},onClick:()=>l(e)},je.createElement("div",{className:"relative "+(a?.id===e.id?"text-red-600":"text-blue-600 hover:text-red-600")},je.createElement(dr,{className:"h-8 w-8 fill-current"}),je.createElement("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 bg-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center border-2 border-current"},e.id)))),h&&je.createElement("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-30",style:{left:"50%",top:"50%"}},je.createElement("div",{className:"relative"},je.createElement("div",{className:"w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-lg"}),je.createElement("div",{className:"absolute inset-0 w-4 h-4 bg-blue-500 rounded-full animate-ping opacity-75"})))),je.createElement("div",{className:"absolute top-4 right-4 flex flex-col space-y-2"},je.createElement(Uo,{size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm",onClick:()=>p(!u)},u?je.createElement(hr,{className:"h-4 w-4"}):je.createElement(pr,{className:"h-4 w-4"})),h&&je.createElement(Uo,{size:"sm",variant:"outline",className:"bg-white/90 backdrop-blur-sm",onClick:()=>g(h)},je.createElement(vr,{className:"h-4 w-4"}))))),a&&je.createElement("div",{className:"p-4 border-t bg-gray-50"},je.createElement("div",{className:"flex items-start justify-between mb-3"},je.createElement("div",null,je.createElement("h4",{className:"font-semibold text-gray-900"},a.name),je.createElement("p",{className:"text-sm text-gray-600 mt-1"},a.description)),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("span",{className:"text-sm font-medium"},a.rating),je.createElement("span",{className:"text-xs text-gray-500"},"(",a.reviews,")"))),je.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},a.specialties.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"secondary",className:"text-xs"},e))),je.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(dr,{className:"h-4 w-4"}),je.createElement("span",null,a.location)),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Wr,{className:"h-4 w-4"}),je.createElement("span",null,a.lawyers," Lawyers")),h&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(vr,{className:"h-4 w-4"}),je.createElement("span",null,(e=>{if(!h)return"";return`${((e,a,l,m)=>{const u=(l-e)*Math.PI/180,p=(m-a)*Math.PI/180,f=Math.sin(u/2)*Math.sin(u/2)+Math.cos(e*Math.PI/180)*Math.cos(l*Math.PI/180)*Math.sin(p/2)*Math.sin(p/2);return 2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))*6371})(h.lat,h.lng,e.coordinates.lat,e.coordinates.lng).toFixed(1)} km away`})(a))),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Fa,{className:"h-4 w-4"}),je.createElement("span",null,"Est. ",a.established))),je.createElement("div",{className:"flex space-x-2"},je.createElement(Uo,{size:"sm",className:"flex-1 bg-blue-600 hover:bg-blue-700"},"View Profile"),je.createElement(Uo,{size:"sm",variant:"outline",className:"flex-1"},"Get Directions"))))))},LawFirms$1=()=>{const[e,a]=Me.useState(""),[l,m]=Me.useState(""),[u,p]=Me.useState(""),[f,g]=Me.useState(null),[h,y]=Me.useState("list"),v=[{id:1,name:"Singapore Legal Associates",description:"Full-service law firm specializing in corporate and commercial law",specialties:["Corporate Law","Commercial Litigation","M&A"],location:"Central Business District",address:"1 Raffles Place, #40-01, One Raffles Place, Singapore 048616",coordinates:{lat:1.2844,lng:103.851},rating:4.8,reviews:124,phone:"+65 6234 5678",email:"contact@sla.com.sg",lawyers:15,established:"1995"},{id:2,name:"Family Law Partners",description:"Dedicated family law practice with compassionate approach",specialties:["Family Law","Divorce","Child Custody"],location:"Orchard",address:"391 Orchard Road, #12-01, Ngee Ann City Tower A, Singapore 238873",coordinates:{lat:1.3048,lng:103.8318},rating:4.9,reviews:89,phone:"+65 6345 6789",email:"info@flp.com.sg",lawyers:8,established:"2001"},{id:3,name:"Employment Rights Advocates",description:"Protecting employee and employer rights across Singapore",specialties:["Employment Law","HR Compliance","Workplace Disputes"],location:"Raffles Place",address:"6 Battery Road, #25-01, Singapore 049909",coordinates:{lat:1.2858,lng:103.8518},rating:4.7,reviews:156,phone:"+65 6456 7890",email:"help@era.com.sg",lawyers:12,established:"2008"}];return je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement(Navigation,null),je.createElement("section",{className:"bg-blue-900 text-white pt-24 pb-16"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"text-center"},je.createElement("h1",{className:"text-4xl md:text-5xl font-bold mb-6"},"Find Legal Professionals"),je.createElement("p",{className:"text-xl text-blue-100 mb-8 max-w-3xl mx-auto"},"Search our directory of qualified Singaporean lawyers and law firms. Filter by practice area, location, and ratings."),je.createElement("div",{className:"max-w-4xl mx-auto"},je.createElement("div",{className:"flex flex-col md:flex-row gap-4 bg-white p-4 rounded-lg"},je.createElement("div",{className:"flex-1 relative"},je.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),je.createElement(zo,{type:"text",placeholder:"Search by firm name, lawyer, or legal topic...",value:e,onChange:e=>a(e.target.value),className:"pl-10 border-0 focus:ring-2 focus:ring-blue-500"})),je.createElement("select",{value:l,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"},["All Locations","Central Business District","Orchard","Raffles Place","Marina Bay"].map(e=>je.createElement("option",{key:e,value:e},e))),je.createElement("select",{value:u,onChange:e=>p(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"},["All Specialties","Corporate Law","Family Law","Employment Law","Real Estate Law","Criminal Defense"].map(e=>je.createElement("option",{key:e,value:e},e))),je.createElement(Uo,{className:"bg-blue-600 hover:bg-blue-700 px-8"},"Search")))))),je.createElement("section",{className:"py-16"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"flex justify-between items-center mb-8"},je.createElement("h2",{className:"text-2xl font-bold text-gray-900"},v.length," Law Firms Found"),je.createElement("div",{className:"flex items-center space-x-4"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Uo,{variant:"list"===h?"default":"outline",size:"sm",onClick:()=>y("list"),className:"flex items-center space-x-2"},je.createElement(or,{className:"h-4 w-4"}),je.createElement("span",null,"List")),je.createElement(Uo,{variant:"map"===h?"default":"outline",size:"sm",onClick:()=>y("map"),className:"flex items-center space-x-2"},je.createElement(ur,{className:"h-4 w-4"}),je.createElement("span",null,"Map"))),je.createElement(Uo,{variant:"outline",className:"flex items-center space-x-2"},je.createElement(Za,{className:"h-4 w-4"}),je.createElement("span",null,"More Filters")))),"list"===h&&je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},v.map(e=>je.createElement(ui,{key:e.id,className:"hover:shadow-lg transition-shadow"},je.createElement(pi,null,je.createElement("div",{className:"flex justify-between items-start"},je.createElement("div",null,je.createElement(fi,{className:"text-xl font-bold text-gray-900 mb-2"},e.name),je.createElement(gi,{className:"text-gray-600 mb-4"},e.description)),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("span",{className:"font-semibold"},e.rating),je.createElement("span",{className:"text-gray-500"},"(",e.reviews,")"))),je.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},e.specialties.map(e=>je.createElement(Badge,{key:e,variant:"secondary"},e)))),je.createElement(hi,null,je.createElement("div",{className:"space-y-3 mb-6"},je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(dr,{className:"h-4 w-4"}),je.createElement("span",null,e.location)),je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(Wr,{className:"h-4 w-4"}),je.createElement("span",null,e.lawyers," Lawyers")),je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(Fa,{className:"h-4 w-4"}),je.createElement("span",null,"Established ",e.established))),je.createElement("div",{className:"flex flex-col sm:flex-row gap-3"},je.createElement(Uo,{className:"flex-1 bg-blue-600 hover:bg-blue-700"},"View Profile"),je.createElement(Uo,{variant:"outline",className:"flex-1"},"Contact Firm")))))),"map"===h&&je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-1 space-y-4 max-h-[600px] overflow-y-auto"},v.map(e=>je.createElement(ui,{key:e.id,className:"cursor-pointer transition-all duration-200 "+(f?.id===e.id?"ring-2 ring-blue-500 shadow-lg":"hover:shadow-md"),onClick:()=>g(e)},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex justify-between items-start mb-2"},je.createElement("h3",{className:"font-semibold text-gray-900 text-sm"},e.name),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(jr,{className:"h-3 w-3 text-yellow-400 fill-current"}),je.createElement("span",{className:"text-xs font-medium"},e.rating))),je.createElement("p",{className:"text-xs text-gray-600 mb-2"},e.description),je.createElement("div",{className:"flex items-center space-x-2 text-xs text-gray-500"},je.createElement(dr,{className:"h-3 w-3"}),je.createElement("span",null,e.location)))))),je.createElement("div",{className:"lg:col-span-2"},je.createElement(LawFirmMap,{lawFirms:v,selectedFirm:f,onFirmSelect:g,className:"h-[600px]"}))),je.createElement("div",{className:"text-center mt-12"},je.createElement(Uo,{variant:"outline",size:"lg"},"Load More Results")))),je.createElement(Footer,null))};function clamp$1(e,[a,l]){return Math.min(l,Math.max(a,e))}var Oi=Me.createContext(void 0);function useDirection$2(e){const a=Me.useContext(Oi);return e||a||"ltr"}var Li=[" ","Enter","ArrowUp","ArrowDown"],$i=[" ","Enter"],Ui="Select",[zi,Bi,qi]=createCollection$1(Ui),[Vi,Hi]=createContextScope$5(Ui,[qi,Kn]),Wi=Kn(),[Zi,Ki]=Vi(Ui),[Gi,Qi]=Vi(Ui),Select$1=e=>{const{__scopeSelect:a,children:l,open:m,defaultOpen:u,onOpenChange:p,value:f,defaultValue:g,onValueChange:h,dir:y,name:v,autoComplete:E,disabled:x,required:w,form:b}=e,N=Wi(a),[_,k]=Me.useState(null),[S,C]=Me.useState(null),[R,A]=Me.useState(!1),T=useDirection$2(y),[P=!1,D]=useControllableState$1({prop:m,defaultProp:u,onChange:p}),[I,F]=useControllableState$1({prop:f,defaultProp:g,onChange:h}),M=Me.useRef(null),j=!_||(b||!!_.closest("form")),[O,L]=Me.useState(new Set),$=Array.from(O).map(e=>e.props.value).join(";");return tt.jsx(os,{...N,children:tt.jsxs(Zi,{required:w,scope:a,trigger:_,onTriggerChange:k,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:A,contentId:useId$1(),value:I,onValueChange:F,open:P,onOpenChange:D,dir:T,triggerPointerDownPosRef:M,disabled:x,children:[tt.jsx(zi.Provider,{scope:a,children:tt.jsx(Gi,{scope:e.__scopeSelect,onNativeOptionAdd:Me.useCallback(e=>{L(a=>new Set(a).add(e))},[]),onNativeOptionRemove:Me.useCallback(e=>{L(a=>{const l=new Set(a);return l.delete(e),l})},[]),children:l})}),j?tt.jsxs(Fc,{"aria-hidden":!0,required:w,tabIndex:-1,name:v,autoComplete:E,value:I,onChange:e=>F(e.target.value),disabled:x,form:b,children:[void 0===I?tt.jsx("option",{value:""}):null,Array.from(O)]},$):null]})})};Select$1.displayName=Ui;var Yi="SelectTrigger",Ji=Me.forwardRef((e,a)=>{const{__scopeSelect:l,disabled:m=!1,...u}=e,p=Wi(l),f=Ki(Yi,l),g=f.disabled||m,h=useComposedRefs$2(a,f.onTriggerChange),y=Bi(l),v=Me.useRef("touch"),[E,x,w]=useTypeaheadSearch(e=>{const a=y().filter(e=>!e.disabled),l=a.find(e=>e.value===f.value),m=findNextItem(a,e,l);void 0!==m&&f.onValueChange(m.value)}),handleOpen=e=>{g||(f.onOpenChange(!0),w()),e&&(f.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return tt.jsx(ls,{asChild:!0,...p,children:tt.jsx(nt.button,{type:"button",role:"combobox","aria-controls":f.contentId,"aria-expanded":f.open,"aria-required":f.required,"aria-autocomplete":"none",dir:f.dir,"data-state":f.open?"open":"closed",disabled:g,"data-disabled":g?"":void 0,"data-placeholder":shouldShowPlaceholder(f.value)?"":void 0,...u,ref:h,onClick:composeEventHandlers$3(u.onClick,e=>{e.currentTarget.focus(),"mouse"!==v.current&&handleOpen(e)}),onPointerDown:composeEventHandlers$3(u.onPointerDown,e=>{v.current=e.pointerType;const a=e.target;a.hasPointerCapture(e.pointerId)&&a.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(handleOpen(e),e.preventDefault())}),onKeyDown:composeEventHandlers$3(u.onKeyDown,e=>{const a=""!==E.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),a&&" "===e.key||Li.includes(e.key)&&(handleOpen(),e.preventDefault())})})})});Ji.displayName=Yi;var Xi="SelectValue",ec=Me.forwardRef((e,a)=>{const{__scopeSelect:l,className:m,style:u,children:p,placeholder:f="",...g}=e,h=Ki(Xi,l),{onValueNodeHasChildrenChange:y}=h,v=void 0!==p,E=useComposedRefs$2(a,h.onValueNodeChange);return gt(()=>{y(v)},[y,v]),tt.jsx(nt.span,{...g,ref:E,style:{pointerEvents:"none"},children:shouldShowPlaceholder(h.value)?tt.jsx(tt.Fragment,{children:f}):p})});ec.displayName=Xi;var tc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,children:m,...u}=e;return tt.jsx(nt.span,{"aria-hidden":!0,...u,ref:a,children:m||""})});tc.displayName="SelectIcon";var SelectPortal=e=>tt.jsx(ht,{asChild:!0,...e});SelectPortal.displayName="SelectPortal";var ac="SelectContent",rc=Me.forwardRef((e,a)=>{const l=Ki(ac,e.__scopeSelect),[m,u]=Me.useState();if(gt(()=>{u(new DocumentFragment)},[]),!l.open){const a=m;return a?Fe.createPortal(tt.jsx(sc,{scope:e.__scopeSelect,children:tt.jsx(zi.Slot,{scope:e.__scopeSelect,children:tt.jsx("div",{children:e.children})})}),a):null}return tt.jsx(lc,{...e,ref:a})});rc.displayName=ac;var nc=10,[sc,oc]=Vi(ac),lc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,position:m="item-aligned",onCloseAutoFocus:u,onEscapeKeyDown:p,onPointerDownOutside:f,side:g,sideOffset:h,align:y,alignOffset:v,arrowPadding:E,collisionBoundary:x,collisionPadding:w,sticky:b,hideWhenDetached:N,avoidCollisions:_,...k}=e,S=Ki(ac,l),[C,R]=Me.useState(null),[A,T]=Me.useState(null),P=useComposedRefs$2(a,e=>R(e)),[D,I]=Me.useState(null),[F,M]=Me.useState(null),j=Bi(l),[O,L]=Me.useState(!1),$=Me.useRef(!1);Me.useEffect(()=>{if(C)return hideOthers(C)},[C]),useFocusGuards();const z=Me.useCallback(e=>{const[a,...l]=j().map(e=>e.ref.current),[m]=l.slice(-1),u=document.activeElement;for(const p of e){if(p===u)return;if(p?.scrollIntoView({block:"nearest"}),p===a&&A&&(A.scrollTop=0),p===m&&A&&(A.scrollTop=A.scrollHeight),p?.focus(),document.activeElement!==u)return}},[j,A]),B=Me.useCallback(()=>z([D,C]),[z,D,C]);Me.useEffect(()=>{O&&B()},[O,B]);const{onOpenChange:V,triggerPointerDownPosRef:H}=S;Me.useEffect(()=>{if(C){let e={x:0,y:0};const handlePointerMove=a=>{e={x:Math.abs(Math.round(a.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(a.pageY)-(H.current?.y??0))}},handlePointerUp=a=>{e.x<=10&&e.y<=10?a.preventDefault():C.contains(a.target)||V(!1),document.removeEventListener("pointermove",handlePointerMove),H.current=null};return null!==H.current&&(document.addEventListener("pointermove",handlePointerMove),document.addEventListener("pointerup",handlePointerUp,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",handlePointerMove),document.removeEventListener("pointerup",handlePointerUp,{capture:!0})}}},[C,V,H]),Me.useEffect(()=>{const close=()=>V(!1);return window.addEventListener("blur",close),window.addEventListener("resize",close),()=>{window.removeEventListener("blur",close),window.removeEventListener("resize",close)}},[V]);const[W,Z]=useTypeaheadSearch(e=>{const a=j().filter(e=>!e.disabled),l=a.find(e=>e.ref.current===document.activeElement),m=findNextItem(a,e,l);m&&setTimeout(()=>m.ref.current.focus())}),K=Me.useCallback((e,a,l)=>{const m=!$.current&&!l;(void 0!==S.value&&S.value===a||m)&&(I(e),m&&($.current=!0))},[S.value]),G=Me.useCallback(()=>C?.focus(),[C]),Q=Me.useCallback((e,a,l)=>{const m=!$.current&&!l;(void 0!==S.value&&S.value===a||m)&&M(e)},[S.value]),Y="popper"===m?cc:ic,J=Y===cc?{side:g,sideOffset:h,align:y,alignOffset:v,arrowPadding:E,collisionBoundary:x,collisionPadding:w,sticky:b,hideWhenDetached:N,avoidCollisions:_}:{};return tt.jsx(sc,{scope:l,content:C,viewport:A,onViewportChange:T,itemRefCallback:K,selectedItem:D,onItemLeave:G,itemTextRefCallback:Q,focusSelectedItem:B,selectedItemText:F,position:m,isPositioned:O,searchRef:W,children:tt.jsx(cl,{as:at,allowPinchZoom:!0,children:tt.jsx(Ho,{asChild:!0,trapped:S.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:composeEventHandlers$3(u,e=>{S.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:tt.jsx(mt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:tt.jsx(Y,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:e=>e.preventDefault(),...k,...J,onPlaced:()=>L(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:composeEventHandlers$3(k.onKeyDown,e=>{const a=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),a||1!==e.key.length||Z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let a=j().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(a=a.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const l=e.target,m=a.indexOf(l);a=a.slice(m+1)}setTimeout(()=>z(a)),e.preventDefault()}})})})})})})});lc.displayName="SelectContentImpl";var ic=Me.forwardRef((e,a)=>{const{__scopeSelect:l,onPlaced:m,...u}=e,p=Ki(ac,l),f=oc(ac,l),[g,h]=Me.useState(null),[y,v]=Me.useState(null),E=useComposedRefs$2(a,e=>v(e)),x=Bi(l),w=Me.useRef(!1),b=Me.useRef(!0),{viewport:N,selectedItem:_,selectedItemText:k,focusSelectedItem:S}=f,C=Me.useCallback(()=>{if(p.trigger&&p.valueNode&&g&&y&&N&&_&&k){const e=p.trigger.getBoundingClientRect(),a=y.getBoundingClientRect(),l=p.valueNode.getBoundingClientRect(),u=k.getBoundingClientRect();if("rtl"!==p.dir){const m=u.left-a.left,p=l.left-m,f=e.left-p,h=e.width+f,y=Math.max(h,a.width),v=window.innerWidth-nc,E=clamp$1(p,[nc,Math.max(nc,v-y)]);g.style.minWidth=h+"px",g.style.left=E+"px"}else{const m=a.right-u.right,p=window.innerWidth-l.right-m,f=window.innerWidth-e.right-p,h=e.width+f,y=Math.max(h,a.width),v=window.innerWidth-nc,E=clamp$1(p,[nc,Math.max(nc,v-y)]);g.style.minWidth=h+"px",g.style.right=E+"px"}const f=x(),h=window.innerHeight-2*nc,v=N.scrollHeight,E=window.getComputedStyle(y),b=parseInt(E.borderTopWidth,10),S=parseInt(E.paddingTop,10),C=parseInt(E.borderBottomWidth,10),R=b+S+v+parseInt(E.paddingBottom,10)+C,A=Math.min(5*_.offsetHeight,R),T=window.getComputedStyle(N),P=parseInt(T.paddingTop,10),D=parseInt(T.paddingBottom,10),I=e.top+e.height/2-nc,F=h-I,M=_.offsetHeight/2,j=b+S+(_.offsetTop+M),O=R-j;if(j<=I){const e=f.length>0&&_===f[f.length-1].ref.current;g.style.bottom="0px";const a=y.clientHeight-N.offsetTop-N.offsetHeight,l=j+Math.max(F,M+(e?D:0)+a+C);g.style.height=l+"px"}else{const e=f.length>0&&_===f[0].ref.current;g.style.top="0px";const a=Math.max(I,b+N.offsetTop+(e?P:0)+M)+O;g.style.height=a+"px",N.scrollTop=j-I+N.offsetTop}g.style.margin=`${nc}px 0`,g.style.minHeight=A+"px",g.style.maxHeight=h+"px",m?.(),requestAnimationFrame(()=>w.current=!0)}},[x,p.trigger,p.valueNode,g,y,N,_,k,p.dir,m]);gt(()=>C(),[C]);const[R,A]=Me.useState();gt(()=>{y&&A(window.getComputedStyle(y).zIndex)},[y]);const T=Me.useCallback(e=>{e&&!0===b.current&&(C(),S?.(),b.current=!1)},[C,S]);return tt.jsx(mc,{scope:l,contentWrapper:g,shouldExpandOnScrollRef:w,onScrollButtonChange:T,children:tt.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:tt.jsx(nt.div,{...u,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...u.style}})})})});ic.displayName="SelectItemAlignedPosition";var cc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,align:m="start",collisionPadding:u=nc,...p}=e,f=Wi(l);return tt.jsx(is,{...f,...p,ref:a,align:m,collisionPadding:u,style:{boxSizing:"border-box",...p.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cc.displayName="SelectPopperPosition";var[mc,dc]=Vi(ac,{}),uc="SelectViewport",pc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,nonce:m,...u}=e,p=oc(uc,l),f=dc(uc,l),g=useComposedRefs$2(a,p.onViewportChange),h=Me.useRef(0);return tt.jsxs(tt.Fragment,{children:[tt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:m}),tt.jsx(zi.Slot,{scope:l,children:tt.jsx(nt.div,{"data-radix-select-viewport":"",role:"presentation",...u,ref:g,style:{position:"relative",flex:1,overflow:"hidden auto",...u.style},onScroll:composeEventHandlers$3(u.onScroll,e=>{const a=e.currentTarget,{contentWrapper:l,shouldExpandOnScrollRef:m}=f;if(m?.current&&l){const e=Math.abs(h.current-a.scrollTop);if(e>0){const m=window.innerHeight-2*nc,u=parseFloat(l.style.minHeight),p=parseFloat(l.style.height),f=Math.max(u,p);if(f<m){const u=f+e,p=Math.min(m,u),g=u-p;l.style.height=p+"px","0px"===l.style.bottom&&(a.scrollTop=g>0?g:0,l.style.justifyContent="flex-end")}}}h.current=a.scrollTop})})})]})});pc.displayName=uc;var fc="SelectGroup",[gc,hc]=Vi(fc);Me.forwardRef((e,a)=>{const{__scopeSelect:l,...m}=e,u=useId$1();return tt.jsx(gc,{scope:l,id:u,children:tt.jsx(nt.div,{role:"group","aria-labelledby":u,...m,ref:a})})}).displayName=fc;var yc="SelectLabel",vc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,...m}=e,u=hc(yc,l);return tt.jsx(nt.div,{id:u.id,...m,ref:a})});vc.displayName=yc;var Ec="SelectItem",[xc,wc]=Vi(Ec),bc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,value:m,disabled:u=!1,textValue:p,...f}=e,g=Ki(Ec,l),h=oc(Ec,l),y=g.value===m,[v,E]=Me.useState(p??""),[x,w]=Me.useState(!1),b=useComposedRefs$2(a,e=>h.itemRefCallback?.(e,m,u)),N=useId$1(),_=Me.useRef("touch"),handleSelect=()=>{u||(g.onValueChange(m),g.onOpenChange(!1))};if(""===m)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return tt.jsx(xc,{scope:l,value:m,disabled:u,textId:N,isSelected:y,onItemTextChange:Me.useCallback(e=>{E(a=>a||(e?.textContent??"").trim())},[]),children:tt.jsx(zi.ItemSlot,{scope:l,value:m,disabled:u,textValue:v,children:tt.jsx(nt.div,{role:"option","aria-labelledby":N,"data-highlighted":x?"":void 0,"aria-selected":y&&x,"data-state":y?"checked":"unchecked","aria-disabled":u||void 0,"data-disabled":u?"":void 0,tabIndex:u?void 0:-1,...f,ref:b,onFocus:composeEventHandlers$3(f.onFocus,()=>w(!0)),onBlur:composeEventHandlers$3(f.onBlur,()=>w(!1)),onClick:composeEventHandlers$3(f.onClick,()=>{"mouse"!==_.current&&handleSelect()}),onPointerUp:composeEventHandlers$3(f.onPointerUp,()=>{"mouse"===_.current&&handleSelect()}),onPointerDown:composeEventHandlers$3(f.onPointerDown,e=>{_.current=e.pointerType}),onPointerMove:composeEventHandlers$3(f.onPointerMove,e=>{_.current=e.pointerType,u?h.onItemLeave?.():"mouse"===_.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers$3(f.onPointerLeave,e=>{e.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:composeEventHandlers$3(f.onKeyDown,e=>{""!==h.searchRef?.current&&" "===e.key||($i.includes(e.key)&&handleSelect()," "===e.key&&e.preventDefault())})})})})});bc.displayName=Ec;var Nc="SelectItemText",_c=Me.forwardRef((e,a)=>{const{__scopeSelect:l,className:m,style:u,...p}=e,f=Ki(Nc,l),g=oc(Nc,l),h=wc(Nc,l),y=Qi(Nc,l),[v,E]=Me.useState(null),x=useComposedRefs$2(a,e=>E(e),h.onItemTextChange,e=>g.itemTextRefCallback?.(e,h.value,h.disabled)),w=v?.textContent,b=Me.useMemo(()=>tt.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:N,onNativeOptionRemove:_}=y;return gt(()=>(N(b),()=>_(b)),[N,_,b]),tt.jsxs(tt.Fragment,{children:[tt.jsx(nt.span,{id:h.textId,...p,ref:x}),h.isSelected&&f.valueNode&&!f.valueNodeHasChildren?Fe.createPortal(p.children,f.valueNode):null]})});_c.displayName=Nc;var kc="SelectItemIndicator",Sc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,...m}=e;return wc(kc,l).isSelected?tt.jsx(nt.span,{"aria-hidden":!0,...m,ref:a}):null});Sc.displayName=kc;var Cc="SelectScrollUpButton",Rc=Me.forwardRef((e,a)=>{const l=oc(Cc,e.__scopeSelect),m=dc(Cc,e.__scopeSelect),[u,p]=Me.useState(!1),f=useComposedRefs$2(a,m.onScrollButtonChange);return gt(()=>{if(l.viewport&&l.isPositioned){let handleScroll2=function(){const a=e.scrollTop>0;p(a)};const e=l.viewport;return handleScroll2(),e.addEventListener("scroll",handleScroll2),()=>e.removeEventListener("scroll",handleScroll2)}},[l.viewport,l.isPositioned]),u?tt.jsx(Pc,{...e,ref:f,onAutoScroll:()=>{const{viewport:e,selectedItem:a}=l;e&&a&&(e.scrollTop=e.scrollTop-a.offsetHeight)}}):null});Rc.displayName=Cc;var Ac="SelectScrollDownButton",Tc=Me.forwardRef((e,a)=>{const l=oc(Ac,e.__scopeSelect),m=dc(Ac,e.__scopeSelect),[u,p]=Me.useState(!1),f=useComposedRefs$2(a,m.onScrollButtonChange);return gt(()=>{if(l.viewport&&l.isPositioned){let handleScroll2=function(){const a=e.scrollHeight-e.clientHeight,l=Math.ceil(e.scrollTop)<a;p(l)};const e=l.viewport;return handleScroll2(),e.addEventListener("scroll",handleScroll2),()=>e.removeEventListener("scroll",handleScroll2)}},[l.viewport,l.isPositioned]),u?tt.jsx(Pc,{...e,ref:f,onAutoScroll:()=>{const{viewport:e,selectedItem:a}=l;e&&a&&(e.scrollTop=e.scrollTop+a.offsetHeight)}}):null});Tc.displayName=Ac;var Pc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,onAutoScroll:m,...u}=e,p=oc("SelectScrollButton",l),f=Me.useRef(null),g=Bi(l),h=Me.useCallback(()=>{null!==f.current&&(window.clearInterval(f.current),f.current=null)},[]);return Me.useEffect(()=>()=>h(),[h]),gt(()=>{const e=g().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[g]),tt.jsx(nt.div,{"aria-hidden":!0,...u,ref:a,style:{flexShrink:0,...u.style},onPointerDown:composeEventHandlers$3(u.onPointerDown,()=>{null===f.current&&(f.current=window.setInterval(m,50))}),onPointerMove:composeEventHandlers$3(u.onPointerMove,()=>{p.onItemLeave?.(),null===f.current&&(f.current=window.setInterval(m,50))}),onPointerLeave:composeEventHandlers$3(u.onPointerLeave,()=>{h()})})}),Dc=Me.forwardRef((e,a)=>{const{__scopeSelect:l,...m}=e;return tt.jsx(nt.div,{"aria-hidden":!0,...m,ref:a})});Dc.displayName="SelectSeparator";var Ic="SelectArrow";function shouldShowPlaceholder(e){return""===e||void 0===e}Me.forwardRef((e,a)=>{const{__scopeSelect:l,...m}=e,u=Wi(l),p=Ki(Ic,l),f=oc(Ic,l);return p.open&&"popper"===f.position?tt.jsx(cs,{...u,...m,ref:a}):null}).displayName=Ic;var Fc=Me.forwardRef((e,a)=>{const{value:l,...m}=e,u=Me.useRef(null),p=useComposedRefs$2(a,u),f=usePrevious(l);return Me.useEffect(()=>{const e=u.current,a=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(a,"value").set;if(f!==l&&m){const a=new Event("change",{bubbles:!0});m.call(e,l),e.dispatchEvent(a)}},[f,l]),tt.jsx(yt,{asChild:!0,children:tt.jsx("select",{...m,ref:p,defaultValue:l})})});function useTypeaheadSearch(e){const a=useCallbackRef$3(e),l=Me.useRef(""),m=Me.useRef(0),u=Me.useCallback(e=>{const u=l.current+e;a(u),function updateSearch(e){l.current=e,window.clearTimeout(m.current),""!==e&&(m.current=window.setTimeout(()=>updateSearch(""),1e3))}(u)},[a]),p=Me.useCallback(()=>{l.current="",window.clearTimeout(m.current)},[]);return Me.useEffect(()=>()=>window.clearTimeout(m.current),[]),[l,u,p]}function findNextItem(e,a,l){const m=a.length>1&&Array.from(a).every(e=>e===a[0])?a[0]:a,u=l?e.indexOf(l):-1;let p=function wrapArray$3(e,a){return e.map((l,m)=>e[(a+m)%e.length])}(e,Math.max(u,0));1===m.length&&(p=p.filter(e=>e!==l));const f=p.find(e=>e.textValue.toLowerCase().startsWith(m.toLowerCase()));return f!==l?f:void 0}Fc.displayName="BubbleSelect";var Mc=Ji,jc=tc,Oc=SelectPortal,Lc=rc,$c=pc,Uc=vc,zc=bc,Bc=_c,qc=Sc,Vc=Rc,Hc=Tc,Wc=Dc;const Zc=Select$1,Kc=ec,Gc=Me.forwardRef(({className:e,children:a,...l},m)=>Me.createElement(Mc,{ref:m,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...l},a,Me.createElement(jc,{asChild:!0},Me.createElement(ka,{className:"h-4 w-4 opacity-50"}))));Gc.displayName=Mc.displayName;const Qc=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Vc,{ref:l,className:cn("flex cursor-default items-center justify-center py-1",e),...a},Me.createElement(Ra,{className:"h-4 w-4"})));Qc.displayName=Vc.displayName;const Yc=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Hc,{ref:l,className:cn("flex cursor-default items-center justify-center py-1",e),...a},Me.createElement(ka,{className:"h-4 w-4"})));Yc.displayName=Hc.displayName;const Jc=Me.forwardRef(({className:e,children:a,position:l="popper",...m},u)=>Me.createElement(Oc,null,Me.createElement(Lc,{ref:u,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:l,...m},Me.createElement(Qc,null),Me.createElement($c,{className:cn("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},a),Me.createElement(Yc,null))));Jc.displayName=Lc.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(Uc,{ref:l,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=Uc.displayName;const Xc=Me.forwardRef(({className:e,children:a,...l},m)=>Me.createElement(zc,{ref:m,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...l},Me.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Me.createElement(qc,null,Me.createElement(_a,{className:"h-4 w-4"}))),Me.createElement(Bc,null,a)));Xc.displayName=zc.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(Wc,{ref:l,className:cn("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=Wc.displayName;var em="Checkbox",[tm,am]=createContextScope$5(em),[rm,nm]=tm(em),sm=Me.forwardRef((e,a)=>{const{__scopeCheckbox:l,name:m,checked:u,defaultChecked:p,required:f,disabled:g,value:h="on",onCheckedChange:y,form:v,...E}=e,[x,w]=Me.useState(null),b=useComposedRefs$2(a,e=>w(e)),N=Me.useRef(!1),_=!x||(v||!!x.closest("form")),[k=!1,S]=useControllableState$1({prop:u,defaultProp:p,onChange:y}),C=Me.useRef(k);return Me.useEffect(()=>{const e=x?.form;if(e){const reset=()=>S(C.current);return e.addEventListener("reset",reset),()=>e.removeEventListener("reset",reset)}},[x,S]),tt.jsxs(rm,{scope:l,state:k,disabled:g,children:[tt.jsx(nt.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate$1(k)?"mixed":k,"aria-required":f,"data-state":getState$1(k),"data-disabled":g?"":void 0,disabled:g,value:h,...E,ref:b,onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:composeEventHandlers$3(e.onClick,e=>{S(e=>!!isIndeterminate$1(e)||!e),_&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),_&&tt.jsx(BubbleInput,{control:x,bubbles:!N.current,name:m,value:h,checked:k,required:f,disabled:g,form:v,style:{transform:"translateX(-100%)"},defaultChecked:!isIndeterminate$1(p)&&p})]})});sm.displayName=em;var om="CheckboxIndicator",lm=Me.forwardRef((e,a)=>{const{__scopeCheckbox:l,forceMount:m,...u}=e,p=nm(om,l);return tt.jsx(Presence$2,{present:m||isIndeterminate$1(p.state)||!0===p.state,children:tt.jsx(nt.span,{"data-state":getState$1(p.state),"data-disabled":p.disabled?"":void 0,...u,ref:a,style:{pointerEvents:"none",...e.style}})})});lm.displayName=om;var BubbleInput=e=>{const{control:a,checked:l,bubbles:m=!0,defaultChecked:u,...p}=e,f=Me.useRef(null),g=usePrevious(l),h=useSize(a);Me.useEffect(()=>{const e=f.current,a=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(a,"checked").set;if(g!==l&&u){const a=new Event("click",{bubbles:m});e.indeterminate=isIndeterminate$1(l),u.call(e,!isIndeterminate$1(l)&&l),e.dispatchEvent(a)}},[g,l,m]);const y=Me.useRef(!isIndeterminate$1(l)&&l);return tt.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:u??y.current,...p,tabIndex:-1,ref:f,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function isIndeterminate$1(e){return"indeterminate"===e}function getState$1(e){return isIndeterminate$1(e)?"indeterminate":e?"checked":"unchecked"}var im=sm,cm=lm;const mm=Me.forwardRef(({className:e,...a},l)=>Me.createElement(im,{ref:l,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a},Me.createElement(cm,{className:cn("flex items-center justify-center text-current")},Me.createElement(_a,{className:"h-4 w-4"}))));mm.displayName=im.displayName;const dm={async getLawFirms(e={}){let a=Mo.from("law_firms").select("*").eq("verified",!0).order("rating",{ascending:!1});e.practiceAreas&&e.practiceAreas.length>0&&(a=a.overlaps("practice_areas",e.practiceAreas)),e.location&&(a=a.ilike("address",`%${e.location}%`)),e.rating&&(a=a.gte("rating",e.rating)),e.search&&(a=a.or(`name.ilike.%${e.search}%,description.ilike.%${e.search}%`));const{data:l,error:m}=await a;if(m)throw console.error("Error fetching law firms:",m),new Error("Failed to fetch law firms");return l||[]},async getLawFirm(e){const{data:a,error:l}=await Mo.from("law_firms").select("*").eq("id",e).single();if(l)throw console.error("Error fetching law firm:",l),new Error("Failed to fetch law firm");if(!a)throw new Error("Law firm not found");return a},async createLawFirm(e){const{data:a,error:l}=await Mo.from("law_firms").insert({...e,verified:!1}).select().single();if(l)throw console.error("Error creating law firm:",l),new Error("Failed to create law firm");return a},async updateLawFirm(e,a){const{data:l,error:m}=await Mo.from("law_firms").update(a).eq("id",e).select().single();if(m)throw console.error("Error updating law firm:",m),new Error("Failed to update law firm");return l},async verifyLawFirm(e,a=!0){const{data:l,error:m}=await Mo.from("law_firms").update({verified:a}).eq("id",e).select().single();if(m)throw console.error("Error verifying law firm:",m),new Error("Failed to verify law firm");return l},async deleteLawFirm(e){const{error:a}=await Mo.from("law_firms").delete().eq("id",e);if(a)throw console.error("Error deleting law firm:",a),new Error("Failed to delete law firm")},async getLawFirmReviews(e){const{data:a,error:l}=await Mo.from("law_firm_reviews").select("\n        *,\n        user:profiles(full_name, avatar_url)\n      ").eq("law_firm_id",e).eq("status","approved").order("created_at",{ascending:!1});if(l)throw console.error("Error fetching reviews:",l),new Error("Failed to fetch reviews");return a||[]},async createReview(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User not authenticated");const{data:l,error:m}=await Mo.from("law_firm_reviews").insert({...e,user_id:a.id,status:"pending"}).select().single();if(m)throw console.error("Error creating review:",m),new Error("Failed to create review");return l},async updateReview(e,a){const{data:l,error:m}=await Mo.from("law_firm_reviews").update(a).eq("id",e).select().single();if(m)throw console.error("Error updating review:",m),new Error("Failed to update review");return l},async deleteReview(e){const{error:a}=await Mo.from("law_firm_reviews").delete().eq("id",e);if(a)throw console.error("Error deleting review:",a),new Error("Failed to delete review")},async moderateReview(e,a){const{data:l,error:m}=await Mo.from("law_firm_reviews").update({status:a}).eq("id",e).select().single();if(m)throw console.error("Error moderating review:",m),new Error("Failed to moderate review");return l},async voteOnReview(e,a){const{data:{user:l}}=await Mo.auth.getUser();if(!l)throw new Error("User not authenticated");const{data:m,error:u}=await Mo.from("law_firm_review_votes").upsert({review_id:e,user_id:l.id,is_helpful:a}).select().single();if(u)throw console.error("Error voting on review:",u),new Error("Failed to vote on review");return m},async removeVoteOnReview(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User not authenticated");const{error:l}=await Mo.from("law_firm_review_votes").delete().eq("review_id",e).eq("user_id",a.id);if(l)throw console.error("Error removing vote:",l),new Error("Failed to remove vote")},async getPracticeAreas(){const{data:e,error:a}=await Mo.from("law_firms").select("practice_areas").eq("verified",!0);if(a)throw console.error("Error fetching practice areas:",a),new Error("Failed to fetch practice areas");const l=e?.flatMap(e=>e.practice_areas)||[];return[...new Set(l)].sort()},async searchLawFirms(e,a={}){return this.getLawFirms({...a,search:e})},async getLawFirmProfile(e){const{data:a,error:l}=await Mo.from("law_firms").select("*").eq("id",e).eq("verified",!0).single();if(l)throw console.error("Error fetching law firm profile:",l),new Error("Failed to fetch law firm profile");const{data:m}=await Mo.from("law_firm_team_members").select("*").eq("law_firm_id",e).eq("is_active",!0).order("order_index"),{data:u}=await Mo.from("law_firm_gallery").select("*").eq("law_firm_id",e).order("order_index"),{data:p}=await Mo.from("law_firm_reviews").select("\n        *,\n        user:profiles(full_name, avatar_url)\n      ").eq("law_firm_id",e).eq("status","approved").order("created_at",{ascending:!1}).limit(5);return{...a,team_members:m||[],gallery:u||[],recent_reviews:p||[]}},async getTeamMembers(e){const{data:a,error:l}=await Mo.from("law_firm_team_members").select("*").eq("law_firm_id",e).eq("is_active",!0).order("order_index");if(l)throw console.error("Error fetching team members:",l),new Error("Failed to fetch team members");return a||[]},async createTeamMember(e){const{data:a,error:l}=await Mo.from("law_firm_team_members").insert(e).select().single();if(l)throw console.error("Error creating team member:",l),new Error("Failed to create team member");return a},async updateTeamMember(e,a){const{data:l,error:m}=await Mo.from("law_firm_team_members").update(a).eq("id",e).select().single();if(m)throw console.error("Error updating team member:",m),new Error("Failed to update team member");return l},async deleteTeamMember(e){const{error:a}=await Mo.from("law_firm_team_members").update({is_active:!1}).eq("id",e);if(a)throw console.error("Error deleting team member:",a),new Error("Failed to delete team member")},async getGalleryImages(e){const{data:a,error:l}=await Mo.from("law_firm_gallery").select("*").eq("law_firm_id",e).order("order_index");if(l)throw console.error("Error fetching gallery images:",l),new Error("Failed to fetch gallery images");return a||[]},async addGalleryImage(e){const{data:a,error:l}=await Mo.from("law_firm_gallery").insert(e).select().single();if(l)throw console.error("Error adding gallery image:",l),new Error("Failed to add gallery image");return a},async updateGalleryImage(e,a){const{data:l,error:m}=await Mo.from("law_firm_gallery").update(a).eq("id",e).select().single();if(m)throw console.error("Error updating gallery image:",m),new Error("Failed to update gallery image");return l},async deleteGalleryImage(e){const{error:a}=await Mo.from("law_firm_gallery").delete().eq("id",e);if(a)throw console.error("Error deleting gallery image:",a),new Error("Failed to delete gallery image")},async createBooking(e){const{data:a,error:l}=await Mo.from("law_firm_bookings").insert(e).select("\n        *,\n        user:profiles(full_name, email, phone),\n        team_member:law_firm_team_members(*)\n      ").single();if(l)throw console.error("Error creating booking:",l),new Error("Failed to create booking");return a},async getUserBookings(e){const{data:a,error:l}=await Mo.from("law_firm_bookings").select("\n        *,\n        law_firm:law_firms(name, phone, email),\n        team_member:law_firm_team_members(name, title, email, phone)\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(l)throw console.error("Error fetching user bookings:",l),new Error("Failed to fetch user bookings");return a||[]},async getLawFirmBookings(e){const{data:a,error:l}=await Mo.from("law_firm_bookings").select("\n        *,\n        user:profiles(full_name, email, phone),\n        team_member:law_firm_team_members(name, title)\n      ").eq("law_firm_id",e).order("created_at",{ascending:!1});if(l)throw console.error("Error fetching law firm bookings:",l),new Error("Failed to fetch law firm bookings");return a||[]},async updateBookingStatus(e,a,l){const m={status:a};l&&(m.notes=l);const{data:u,error:p}=await Mo.from("law_firm_bookings").update(m).eq("id",e).select("\n        *,\n        user:profiles(full_name, email, phone),\n        team_member:law_firm_team_members(name, title)\n      ").single();if(p)throw console.error("Error updating booking status:",p),new Error("Failed to update booking status");return u},async getTopRatedLawFirms(e=10){const{data:a,error:l}=await Mo.from("law_firms").select("*").eq("verified",!0).gte("rating",4).order("rating",{ascending:!1}).limit(e);if(l)throw console.error("Error fetching top-rated law firms:",l),new Error("Failed to fetch top-rated law firms");return a||[]},async getRecentLawFirms(e=5){const{data:a,error:l}=await Mo.from("law_firms").select("*").eq("verified",!0).order("created_at",{ascending:!1}).limit(e);if(l)throw console.error("Error fetching recent law firms:",l),new Error("Failed to fetch recent law firms");return a||[]}},um=["Corporate Law","Employment Law","Intellectual Property","Real Estate","Family Law","Criminal Law","Immigration Law","Tax Law","Banking & Finance","Litigation","Mergers & Acquisitions","Compliance & Regulatory"],LawFirmDirectory=({onFirmSelect:e,className:a=""})=>{const[l,m]=Me.useState([]),[u,p]=Me.useState([]),[f,g]=Me.useState(!0),[h,y]=Me.useState(""),[v,E]=Me.useState([]),[x,w]=Me.useState(0),[b,N]=Me.useState(!1),[_,k]=Me.useState("grid"),[S,C]=Me.useState("rating"),[R,A]=Me.useState(""),[T,P]=Me.useState(""),[D,I]=Me.useState(""),[F,M]=Me.useState(""),[j,O]=Me.useState(!1),[L,$]=Me.useState(!1);Me.useEffect(()=>{loadLawFirms()},[]),Me.useEffect(()=>{filterAndSortFirms()},[l,h,v,x,b,S,R,T,D,F,j]);const loadLawFirms=async()=>{try{g(!0);const e=await dm.getLawFirms();m(e)}catch(e){console.error("Error loading law firms:",e),An.error("Failed to load law firms")}finally{g(!1)}},filterAndSortFirms=()=>{let e=[...l];if(h.trim()){const a=h.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)||e.practice_areas.some(e=>e.toLowerCase().includes(a))||e.address.toLowerCase().includes(a))}if(v.length>0&&(e=e.filter(e=>v.some(a=>e.practice_areas.includes(a)))),x>0&&(e=e.filter(e=>e.rating>=x)),b&&(e=e.filter(e=>e.verified)),R.trim()){const a=R.toLowerCase();e=e.filter(e=>e.address.toLowerCase().includes(a))}T&&(e=e.filter(e=>e.firm_size===T)),D&&(e=e.filter(e=>e.fee_structure===D)),F&&(e=e.filter(e=>e.languages?.includes(F))),j&&(e=e.filter(e=>!0===e.accepts_legal_aid)),e.sort((e,a)=>{switch(S){case"rating":return a.rating-e.rating;case"name":return e.name.localeCompare(a.name);case"newest":return new Date(a.created_at).getTime()-new Date(e.created_at).getTime();case"reviews":return(a.total_reviews||0)-(e.total_reviews||0);default:return 0}}),p(e)},renderStars=e=>Array.from({length:5},(a,l)=>je.createElement(jr,{key:l,className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")})),LawFirmCard=({firm:a})=>je.createElement(ui,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e?.(a)},je.createElement(pi,{className:"pb-3"},je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1 min-w-0"},je.createElement(fi,{className:"text-lg font-semibold truncate flex items-center space-x-2"},je.createElement("span",null,a.name),a.verified&&je.createElement(ma,{className:"h-4 w-4 text-blue-500"})),je.createElement("div",{className:"flex items-center space-x-1 mt-1"},renderStars(a.rating),je.createElement("span",{className:"text-sm text-gray-600 ml-2"},a.rating.toFixed(1)))))),je.createElement(hi,{className:"space-y-3"},je.createElement(gi,{className:"line-clamp-2"},a.description),je.createElement("div",{className:"space-y-2 text-sm"},je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(dr,{className:"h-4 w-4 flex-shrink-0"}),je.createElement("span",{className:"truncate"},a.address)),je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(xr,{className:"h-4 w-4 flex-shrink-0"}),je.createElement("span",null,a.phone)),je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(mr,{className:"h-4 w-4 flex-shrink-0"}),je.createElement("span",{className:"truncate"},a.email)),a.website&&je.createElement("div",{className:"flex items-center space-x-2 text-gray-600"},je.createElement(Ga,{className:"h-4 w-4 flex-shrink-0"}),je.createElement("span",{className:"truncate"},a.website))),je.createElement("div",null,je.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1"},"Practice Areas:"),je.createElement("div",{className:"flex flex-wrap gap-1"},a.practice_areas.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"secondary",className:"text-xs"},e)),a.practice_areas.length>3&&je.createElement(Badge,{variant:"secondary",className:"text-xs"},"+",a.practice_areas.length-3," more"))),je.createElement("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500"},a.firm_size&&je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(Wr,{className:"h-3 w-3"}),je.createElement("span",{className:"capitalize"},a.firm_size)),a.consultation_fee&&je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(DollarSign,{className:"h-3 w-3"}),je.createElement("span",null,"$",a.consultation_fee)),a.accepts_legal_aid&&je.createElement(Badge,{variant:"outline",className:"text-xs"},"Legal Aid"),a.total_reviews&&a.total_reviews>0&&je.createElement("span",null,"(",a.total_reviews," reviews)")))),LawFirmListItem=({firm:a})=>je.createElement(ui,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e?.(a)},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center space-x-3"},je.createElement(Wr,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("h3",{className:"text-sm font-medium truncate"},a.name),a.verified&&je.createElement(ma,{className:"h-4 w-4 text-blue-500"})),je.createElement("p",{className:"text-sm text-gray-500 truncate"},a.description),je.createElement("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500"},je.createElement("span",null,a.address),je.createElement("span",null,a.phone))))),je.createElement("div",{className:"flex items-center space-x-4"},je.createElement("div",{className:"flex items-center space-x-1"},renderStars(a.rating),je.createElement("span",{className:"text-sm text-gray-600 ml-1"},a.rating.toFixed(1))),je.createElement("div",{className:"flex flex-wrap gap-1"},a.practice_areas.slice(0,2).map((e,a)=>je.createElement(Badge,{key:a,variant:"outline",className:"text-xs"},e)))))));return je.createElement("div",{className:`space-y-6 ${a}`},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Law Firm Directory"),je.createElement("p",{className:"text-gray-600"},"Find and connect with verified legal professionals in Singapore")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Uo,{variant:"grid"===_?"default":"outline",size:"sm",onClick:()=>k("grid")},je.createElement(Ya,{className:"h-4 w-4"})),je.createElement(Uo,{variant:"list"===_?"default":"outline",size:"sm",onClick:()=>k("list")},je.createElement(or,{className:"h-4 w-4"})))),je.createElement(ui,null,je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"flex flex-col md:flex-row gap-4"},je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"relative"},je.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),je.createElement(zo,{placeholder:"Search law firms...",value:h,onChange:e=>y(e.target.value),className:"pl-10"}))),je.createElement("div",{className:"w-full md:w-48"},je.createElement(Zc,{value:S,onValueChange:e=>C(e)},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Sort by"})),je.createElement(Jc,null,je.createElement(Xc,{value:"rating"},"Highest Rated"),je.createElement(Xc,{value:"name"},"Name A-Z"),je.createElement(Xc,{value:"newest"},"Newest First"),je.createElement(Xc,{value:"reviews"},"Most Reviews")))),je.createElement(Uo,{variant:"outline",onClick:()=>$(!L),className:"w-full md:w-auto"},"Advanced Filters")),L&&je.createElement("div",{className:"border-t pt-4 space-y-4"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Location"),je.createElement(zo,{placeholder:"Enter location...",value:R,onChange:e=>A(e.target.value)})),je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Firm Size"),je.createElement(Zc,{value:T,onValueChange:P},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Any size"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"Any size"),je.createElement(Xc,{value:"solo"},"Solo Practice"),je.createElement(Xc,{value:"small"},"Small (2-10 lawyers)"),je.createElement(Xc,{value:"medium"},"Medium (11-50 lawyers)"),je.createElement(Xc,{value:"large"},"Large (50+ lawyers)")))),je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Fee Structure"),je.createElement(Zc,{value:D,onValueChange:I},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Any structure"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"Any structure"),je.createElement(Xc,{value:"hourly"},"Hourly Rate"),je.createElement(Xc,{value:"fixed"},"Fixed Fee"),je.createElement(Xc,{value:"contingency"},"Contingency"),je.createElement(Xc,{value:"mixed"},"Mixed")))),je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Language"),je.createElement(Zc,{value:F,onValueChange:M},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Any language"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"Any language"),je.createElement(Xc,{value:"English"},"English"),je.createElement(Xc,{value:"Mandarin"},"Mandarin"),je.createElement(Xc,{value:"Malay"},"Malay"),je.createElement(Xc,{value:"Tamil"},"Tamil"),je.createElement(Xc,{value:"Hindi"},"Hindi"),je.createElement(Xc,{value:"Japanese"},"Japanese"),je.createElement(Xc,{value:"Korean"},"Korean"))))),je.createElement("div",{className:"flex flex-wrap gap-4"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mm,{id:"legal-aid",checked:j,onCheckedChange:O}),je.createElement("label",{htmlFor:"legal-aid",className:"text-sm text-gray-700"},"Accepts Legal Aid")))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Practice Areas"),je.createElement("div",{className:"max-h-32 overflow-y-auto space-y-1"},um.map(e=>je.createElement("div",{key:e,className:"flex items-center space-x-2"},je.createElement(mm,{id:e,checked:v.includes(e),onCheckedChange:()=>(e=>{E(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])})(e)}),je.createElement("label",{htmlFor:e,className:"text-sm text-gray-600"},e))))),je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Minimum Rating"),je.createElement(Zc,{value:x.toString(),onValueChange:e=>w(Number(e))},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Any rating"})),je.createElement(Jc,null,je.createElement(Xc,{value:"0"},"Any rating"),je.createElement(Xc,{value:"3"},"3+ stars"),je.createElement(Xc,{value:"4"},"4+ stars"),je.createElement(Xc,{value:"4.5"},"4.5+ stars")))),je.createElement("div",null,je.createElement("label",{className:"text-sm font-medium text-gray-700 mb-2 block"},"Other Filters"),je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mm,{id:"verified",checked:b,onCheckedChange:N}),je.createElement("label",{htmlFor:"verified",className:"text-sm text-gray-600"},"Verified firms only"))))),(h||v.length>0||x>0||b||R||T||D||F||j)&&je.createElement("div",{className:"flex justify-end"},je.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>{y(""),E([]),w(0),N(!1),A(""),P(""),I(""),M(""),O(!1)}},"Clear All Filters"))))),je.createElement("div",null,je.createElement("div",{className:"flex items-center justify-between mb-4"},je.createElement("p",{className:"text-sm text-gray-600"},f?"Loading...":`${u.length} law firm${1===u.length?"":"s"} found`)),f?je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},[...Array(6)].map((e,a)=>je.createElement(ui,{key:a,className:"animate-pulse"},je.createElement(pi,null,je.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"})),je.createElement(hi,null,je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"h-3 bg-gray-200 rounded"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-5/6"})))))):u.length>0?"grid"===_?je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},u.map(e=>je.createElement(LawFirmCard,{key:e.id,firm:e}))):je.createElement("div",{className:"space-y-3"},u.map(e=>je.createElement(LawFirmListItem,{key:e.id,firm:e}))):je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(Wr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No law firms found"),je.createElement("p",{className:"text-gray-500"},"Try adjusting your search criteria or browse different practice areas.")))))};function composeEventHandlers$2(e,a,{checkForDefaultPrevented:l=!0}={}){return function handleEvent(m){if(e?.(m),!1===l||!m.defaultPrevented)return a?.(m)}}function createContextScope$3(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;l=[...l,m];const Provider2=a=>{const{scope:l,children:m,...f}=a,g=l?.[e]?.[p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})};return Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e]?.[p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$3(createScope,...a)]}function composeContextScopes$3(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}function setRef$1(e,a){if("function"==typeof e)return e(a);null!=e&&(e.current=a)}function composeRefs$1(...e){return a=>{let l=!1;const m=e.map(e=>{const m=setRef$1(e,a);return l||"function"!=typeof m||(l=!0),m});if(l)return()=>{for(let a=0;a<m.length;a++){const l=m[a];"function"==typeof l?l():setRef$1(e[a],null)}}}}function useComposedRefs$1(...e){return Me.useCallback(composeRefs$1(...e),e)}function createSlot$1(e){const a=createSlotClone$1(e),l=Me.forwardRef((e,l)=>{const{children:m,...u}=e,p=Me.Children.toArray(m),f=p.find(isSlottable$1);if(f){const e=f.props.children,m=p.map(a=>a===f?Me.Children.count(e)>1?Me.Children.only(null):Me.isValidElement(e)?e.props.children:null:a);return tt.jsx(a,{...u,ref:l,children:Me.isValidElement(e)?Me.cloneElement(e,void 0,m):null})}return tt.jsx(a,{...u,ref:l,children:m})});return l.displayName=`${e}.Slot`,l}function createSlotClone$1(e){const a=Me.forwardRef((e,a)=>{const{children:l,...m}=e;if(Me.isValidElement(l)){const e=function getElementRef$3(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(l),u=function mergeProps$1(e,a){const l={...a};for(const m in a){const u=e[m],p=a[m];/^on[A-Z]/.test(m)?u&&p?l[m]=(...e)=>{const a=p(...e);return u(...e),a}:u&&(l[m]=u):"style"===m?l[m]={...u,...p}:"className"===m&&(l[m]=[u,p].filter(Boolean).join(" "))}return{...e,...l}}(m,l.props);return l.type!==Me.Fragment&&(u.ref=a?composeRefs$1(a,e):e),Me.cloneElement(l,u)}return Me.Children.count(l)>1?Me.Children.only(null):null});return a.displayName=`${e}.SlotClone`,a}var pm=Symbol("radix.slottable");function isSlottable$1(e){return Me.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===pm}var fm=globalThis?.document?Me.useLayoutEffect:()=>{},gm=Le[" useId ".trim().toString()]||(()=>{}),hm=0;function useId(e){const[a,l]=Me.useState(gm());return fm(()=>{e||l(e=>e??String(hm++))},[e]),e||(a?`radix-${a}`:"")}var ym=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{const l=createSlot$1(`Primitive.${a}`),m=Me.forwardRef((e,m)=>{const{asChild:u,...p}=e,f=u?l:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),tt.jsx(f,{...p,ref:m})});return m.displayName=`Primitive.${a}`,{...e,[a]:m}},{});var vm=Le[" useInsertionEffect ".trim().toString()]||fm;function useControllableState({prop:e,defaultProp:a,onChange:l=()=>{},caller:m}){const[u,p,f]=function useUncontrolledState({defaultProp:e,onChange:a}){const[l,m]=Me.useState(e),u=Me.useRef(l),p=Me.useRef(a);return vm(()=>{p.current=a},[a]),Me.useEffect(()=>{u.current!==l&&(p.current?.(l),u.current=l)},[l,u]),[l,m,p]}({defaultProp:a,onChange:l}),g=void 0!==e,h=g?e:u;{const a=Me.useRef(void 0!==e);Me.useEffect(()=>{const e=a.current;if(e!==g){const a=e?"controlled":"uncontrolled",l=g?"controlled":"uncontrolled";console.warn(`${m} is changing from ${a} to ${l}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}a.current=g},[g,m])}const y=Me.useCallback(a=>{if(g){const l=function isFunction$1(e){return"function"==typeof e}(a)?a(e):a;l!==e&&f.current?.(l)}else p(a)},[g,e,p,f]);return[h,y]}var Em=Me.createContext(void 0);function useDirection$1(e){const a=Me.useContext(Em);return e||a||"ltr"}var xm="rovingFocusGroup.onEntryFocus",wm={bubbles:!1,cancelable:!0},bm="RovingFocusGroup",[Nm,_m,km]=function createCollection(e){const a=e+"CollectionProvider",[l,m]=createContextScope$3(a),[u,p]=l(a,{collectionRef:{current:null},itemMap:new Map}),CollectionProvider=e=>{const{scope:a,children:l}=e,m=je.useRef(null),p=je.useRef(new Map).current;return tt.jsx(u,{scope:a,itemMap:p,collectionRef:m,children:l})};CollectionProvider.displayName=a;const f=e+"CollectionSlot",g=createSlot$1(f),h=je.forwardRef((e,a)=>{const{scope:l,children:m}=e,u=useComposedRefs$1(a,p(f,l).collectionRef);return tt.jsx(g,{ref:u,children:m})});h.displayName=f;const y=e+"CollectionItemSlot",v="data-radix-collection-item",E=createSlot$1(y),x=je.forwardRef((e,a)=>{const{scope:l,children:m,...u}=e,f=je.useRef(null),g=useComposedRefs$1(a,f),h=p(y,l);return je.useEffect(()=>(h.itemMap.set(f,{ref:f,...u}),()=>{h.itemMap.delete(f)})),tt.jsx(E,{[v]:"",ref:g,children:m})});return x.displayName=y,[{Provider:CollectionProvider,Slot:h,ItemSlot:x},function useCollection2(a){const l=p(e+"CollectionConsumer",a);return je.useCallback(()=>{const e=l.collectionRef.current;if(!e)return[];const a=Array.from(e.querySelectorAll(`[${v}]`));return Array.from(l.itemMap.values()).sort((e,l)=>a.indexOf(e.ref.current)-a.indexOf(l.ref.current))},[l.collectionRef,l.itemMap])},m]}(bm),[Sm,Cm]=createContextScope$3(bm,[km]),[Rm,Am]=Sm(bm),Tm=Me.forwardRef((e,a)=>tt.jsx(Nm.Provider,{scope:e.__scopeRovingFocusGroup,children:tt.jsx(Nm.Slot,{scope:e.__scopeRovingFocusGroup,children:tt.jsx(Pm,{...e,ref:a})})}));Tm.displayName=bm;var Pm=Me.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:l,orientation:m,loop:u=!1,dir:p,currentTabStopId:f,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:h,onEntryFocus:y,preventScrollOnEntryFocus:v=!1,...E}=e,x=Me.useRef(null),w=useComposedRefs$1(a,x),b=useDirection$1(p),[N,_]=useControllableState({prop:f,defaultProp:g??null,onChange:h,caller:bm}),[k,S]=Me.useState(!1),C=function useCallbackRef$1(e){const a=Me.useRef(e);return Me.useEffect(()=>{a.current=e}),Me.useMemo(()=>(...e)=>a.current?.(...e),[])}(y),R=_m(l),A=Me.useRef(!1),[T,P]=Me.useState(0);return Me.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(xm,C),()=>e.removeEventListener(xm,C)},[C]),tt.jsx(Rm,{scope:l,orientation:m,dir:b,loop:u,currentTabStopId:N,onItemFocus:Me.useCallback(e=>_(e),[_]),onItemShiftTab:Me.useCallback(()=>S(!0),[]),onFocusableItemAdd:Me.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:Me.useCallback(()=>P(e=>e-1),[]),children:tt.jsx(ym.div,{tabIndex:k||0===T?-1:0,"data-orientation":m,...E,ref:w,style:{outline:"none",...e.style},onMouseDown:composeEventHandlers$2(e.onMouseDown,()=>{A.current=!0}),onFocus:composeEventHandlers$2(e.onFocus,e=>{const a=!A.current;if(e.target===e.currentTarget&&a&&!k){const a=new CustomEvent(xm,wm);if(e.currentTarget.dispatchEvent(a),!a.defaultPrevented){const e=R().filter(e=>e.focusable);focusFirst$2([e.find(e=>e.active),e.find(e=>e.id===N),...e].filter(Boolean).map(e=>e.ref.current),v)}}A.current=!1}),onBlur:composeEventHandlers$2(e.onBlur,()=>S(!1))})})}),Dm="RovingFocusGroupItem",Im=Me.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:l,focusable:m=!0,active:u=!1,tabStopId:p,children:f,...g}=e,h=useId(),y=p||h,v=Am(Dm,l),E=v.currentTabStopId===y,x=_m(l),{onFocusableItemAdd:w,onFocusableItemRemove:b,currentTabStopId:N}=v;return Me.useEffect(()=>{if(m)return w(),()=>b()},[m,w,b]),tt.jsx(Nm.ItemSlot,{scope:l,id:y,focusable:m,active:u,children:tt.jsx(ym.span,{tabIndex:E?0:-1,"data-orientation":v.orientation,...g,ref:a,onMouseDown:composeEventHandlers$2(e.onMouseDown,e=>{m?v.onItemFocus(y):e.preventDefault()}),onFocus:composeEventHandlers$2(e.onFocus,()=>v.onItemFocus(y)),onKeyDown:composeEventHandlers$2(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void v.onItemShiftTab();if(e.target!==e.currentTarget)return;const a=function getFocusIntent$1(e,a,l){const m=function getDirectionAwareKey$1(e,a){return"rtl"!==a?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,l);return"vertical"===a&&["ArrowLeft","ArrowRight"].includes(m)||"horizontal"===a&&["ArrowUp","ArrowDown"].includes(m)?void 0:Fm[m]}(e,v.orientation,v.dir);if(void 0!==a){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let l=x().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===a)l.reverse();else if("prev"===a||"next"===a){"prev"===a&&l.reverse();const m=l.indexOf(e.currentTarget);l=v.loop?function wrapArray$2(e,a){return e.map((l,m)=>e[(a+m)%e.length])}(l,m+1):l.slice(m+1)}setTimeout(()=>focusFirst$2(l))}}),children:"function"==typeof f?f({isCurrentTabStop:E,hasTabStop:null!=N}):f})})});Im.displayName=Dm;var Fm={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function focusFirst$2(e,a=!1){const l=document.activeElement;for(const m of e){if(m===l)return;if(m.focus({preventScroll:a}),document.activeElement!==l)return}}var Mm=Tm,jm=Im;var Presence$1=e=>{const{present:a,children:l}=e,m=function usePresence$1(e){const[a,l]=Me.useState(),m=Me.useRef(null),u=Me.useRef(e),p=Me.useRef("none"),f=e?"mounted":"unmounted",[g,h]=function useStateMachine$2(e,a){return Me.useReducer((e,l)=>a[e][l]??e,e)}(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Me.useEffect(()=>{const e=getAnimationName$1(m.current);p.current="mounted"===g?e:"none"},[g]),fm(()=>{const a=m.current,l=u.current;if(l!==e){const m=p.current,f=getAnimationName$1(a);if(e)h("MOUNT");else if("none"===f||"none"===a?.display)h("UNMOUNT");else{h(l&&m!==f?"ANIMATION_OUT":"UNMOUNT")}u.current=e}},[e,h]),fm(()=>{if(a){let e;const l=a.ownerDocument.defaultView??window,handleAnimationEnd=p=>{const f=getAnimationName$1(m.current).includes(p.animationName);if(p.target===a&&f&&(h("ANIMATION_END"),!u.current)){const m=a.style.animationFillMode;a.style.animationFillMode="forwards",e=l.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=m)})}},handleAnimationStart=e=>{e.target===a&&(p.current=getAnimationName$1(m.current))};return a.addEventListener("animationstart",handleAnimationStart),a.addEventListener("animationcancel",handleAnimationEnd),a.addEventListener("animationend",handleAnimationEnd),()=>{l.clearTimeout(e),a.removeEventListener("animationstart",handleAnimationStart),a.removeEventListener("animationcancel",handleAnimationEnd),a.removeEventListener("animationend",handleAnimationEnd)}}h("ANIMATION_END")},[a,h]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:Me.useCallback(e=>{m.current=e?getComputedStyle(e):null,l(e)},[])}}(a),u="function"==typeof l?l({present:m.isPresent}):Me.Children.only(l),p=useComposedRefs$1(m.ref,function getElementRef$2(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(u));return"function"==typeof l||m.isPresent?Me.cloneElement(u,{ref:p}):null};function getAnimationName$1(e){return e?.animationName||"none"}Presence$1.displayName="Presence";var Om="Tabs",[Lm,$m]=createContextScope$3(Om,[Cm]),Um=Cm(),[zm,Bm]=Lm(Om),qm=Me.forwardRef((e,a)=>{const{__scopeTabs:l,value:m,onValueChange:u,defaultValue:p,orientation:f="horizontal",dir:g,activationMode:h="automatic",...y}=e,v=useDirection$1(g),[E,x]=useControllableState({prop:m,onChange:u,defaultProp:p??"",caller:Om});return tt.jsx(zm,{scope:l,baseId:useId(),value:E,onValueChange:x,orientation:f,dir:v,activationMode:h,children:tt.jsx(ym.div,{dir:v,"data-orientation":f,...y,ref:a})})});qm.displayName=Om;var Vm="TabsList",Hm=Me.forwardRef((e,a)=>{const{__scopeTabs:l,loop:m=!0,...u}=e,p=Bm(Vm,l),f=Um(l);return tt.jsx(Mm,{asChild:!0,...f,orientation:p.orientation,dir:p.dir,loop:m,children:tt.jsx(ym.div,{role:"tablist","aria-orientation":p.orientation,...u,ref:a})})});Hm.displayName=Vm;var Wm="TabsTrigger",Zm=Me.forwardRef((e,a)=>{const{__scopeTabs:l,value:m,disabled:u=!1,...p}=e,f=Bm(Wm,l),g=Um(l),h=makeTriggerId(f.baseId,m),y=makeContentId(f.baseId,m),v=m===f.value;return tt.jsx(jm,{asChild:!0,...g,focusable:!u,active:v,children:tt.jsx(ym.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":y,"data-state":v?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:h,...p,ref:a,onMouseDown:composeEventHandlers$2(e.onMouseDown,e=>{u||0!==e.button||!1!==e.ctrlKey?e.preventDefault():f.onValueChange(m)}),onKeyDown:composeEventHandlers$2(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&f.onValueChange(m)}),onFocus:composeEventHandlers$2(e.onFocus,()=>{const e="manual"!==f.activationMode;v||u||!e||f.onValueChange(m)})})})});Zm.displayName=Wm;var Km="TabsContent",Gm=Me.forwardRef((e,a)=>{const{__scopeTabs:l,value:m,forceMount:u,children:p,...f}=e,g=Bm(Km,l),h=makeTriggerId(g.baseId,m),y=makeContentId(g.baseId,m),v=m===g.value,E=Me.useRef(v);return Me.useEffect(()=>{const e=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(e)},[]),tt.jsx(Presence$1,{present:u||v,children:({present:l})=>tt.jsx(ym.div,{"data-state":v?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":h,hidden:!l,id:y,tabIndex:0,...f,ref:a,style:{...e.style,animationDuration:E.current?"0s":void 0},children:l&&p})})});function makeTriggerId(e,a){return`${e}-trigger-${a}`}function makeContentId(e,a){return`${e}-content-${a}`}Gm.displayName=Km;var Qm=Hm,Ym=Zm,Jm=Gm;const Xm=qm,ed=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Qm,{ref:l,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));ed.displayName=Qm.displayName;const td=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Ym,{ref:l,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));td.displayName=Ym.displayName;const ad=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Jm,{ref:l,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));ad.displayName=Jm.displayName;var rd="Avatar",[nd,sd]=createContextScope$5(rd),[od,ld]=nd(rd),id=Me.forwardRef((e,a)=>{const{__scopeAvatar:l,...m}=e,[u,p]=Me.useState("idle");return tt.jsx(od,{scope:l,imageLoadingStatus:u,onImageLoadingStatusChange:p,children:tt.jsx(nt.span,{...m,ref:a})})});id.displayName=rd;var cd="AvatarImage",md=Me.forwardRef((e,a)=>{const{__scopeAvatar:l,src:m,onLoadingStatusChange:u=()=>{},...p}=e,f=ld(cd,l),g=function useImageLoadingStatus(e,a){const[l,m]=Me.useState("idle");return gt(()=>{if(!e)return void m("error");let l=!0;const u=new window.Image,updateStatus=e=>()=>{l&&m(e)};return m("loading"),u.onload=updateStatus("loaded"),u.onerror=updateStatus("error"),u.src=e,a&&(u.referrerPolicy=a),()=>{l=!1}},[e,a]),l}(m,p.referrerPolicy),h=useCallbackRef$3(e=>{u(e),f.onImageLoadingStatusChange(e)});return gt(()=>{"idle"!==g&&h(g)},[g,h]),"loaded"===g?tt.jsx(nt.img,{...p,ref:a,src:m}):null});md.displayName=cd;var dd="AvatarFallback",ud=Me.forwardRef((e,a)=>{const{__scopeAvatar:l,delayMs:m,...u}=e,p=ld(dd,l),[f,g]=Me.useState(void 0===m);return Me.useEffect(()=>{if(void 0!==m){const e=window.setTimeout(()=>g(!0),m);return()=>window.clearTimeout(e)}},[m]),f&&"loaded"!==p.imageLoadingStatus?tt.jsx(nt.span,{...u,ref:a}):null});ud.displayName=dd;var pd=id,fd=md,gd=ud;const hd=Me.forwardRef(({className:e,...a},l)=>Me.createElement(pd,{ref:l,className:cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a}));hd.displayName=pd.displayName;const yd=Me.forwardRef(({className:e,...a},l)=>Me.createElement(fd,{ref:l,className:cn("aspect-square h-full w-full",e),...a}));yd.displayName=fd.displayName;const vd=Me.forwardRef(({className:e,...a},l)=>Me.createElement(gd,{ref:l,className:cn("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a}));function toDate(e){const a=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===a?new e.constructor(+e):"number"==typeof e||"[object Number]"===a||"string"==typeof e||"[object String]"===a?new Date(e):new Date(NaN)}function constructFrom(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}vd.displayName=gd.displayName;const Ed=6048e5,xd=864e5,wd=43200;let bd={};function getDefaultOptions(){return bd}function getTimezoneOffsetInMilliseconds(e){const a=toDate(e),l=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return l.setUTCFullYear(a.getFullYear()),+e-+l}function compareAsc(e,a){const l=toDate(e),m=toDate(a),u=l.getTime()-m.getTime();return u<0?-1:u>0?1:u}function isLastDayOfMonth(e){const a=toDate(e);return+function endOfDay(e){const a=toDate(e);return a.setHours(23,59,59,999),a}(a)===+function endOfMonth(e){const a=toDate(e),l=a.getMonth();return a.setFullYear(a.getFullYear(),l+1,0),a.setHours(23,59,59,999),a}(a)}function differenceInMonths(e,a){const l=toDate(e),m=toDate(a),u=compareAsc(l,m),p=Math.abs(function differenceInCalendarMonths(e,a){const l=toDate(e),m=toDate(a);return 12*(l.getFullYear()-m.getFullYear())+(l.getMonth()-m.getMonth())}(l,m));let f;if(p<1)f=0;else{1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-u*p);let a=compareAsc(l,m)===-u;isLastDayOfMonth(toDate(e))&&1===p&&1===compareAsc(e,m)&&(a=!1),f=u*(p-Number(a))}return 0===f?0:f}function differenceInSeconds(e,a,l){const m=function differenceInMilliseconds(e,a){return+toDate(e)-+toDate(a)}(e,a)/1e3;return function getRoundingMethod(e){return a=>{const l=(e?Math[e]:Math.trunc)(a);return 0===l?0:l}}(l?.roundingMethod)(m)}const Nd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function buildFormatLongFn(e){return(a={})=>{const l=a.width?String(a.width):e.defaultWidth;return e.formats[l]||e.formats[e.defaultWidth]}}const _d={date:buildFormatLongFn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:buildFormatLongFn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},kd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function buildLocalizeFn(e){return(a,l)=>{let m;if("formatting"===(l?.context?String(l.context):"standalone")&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,u=l?.width?String(l.width):a;m=e.formattingValues[u]||e.formattingValues[a]}else{const a=e.defaultWidth,u=l?.width?String(l.width):e.defaultWidth;m=e.values[u]||e.values[a]}return m[e.argumentCallback?e.argumentCallback(a):a]}}const Sd={ordinalNumber:(e,a)=>{const l=Number(e),m=l%100;if(m>20||m<10)switch(m%10){case 1:return l+"st";case 2:return l+"nd";case 3:return l+"rd"}return l+"th"},era:buildLocalizeFn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:buildLocalizeFn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:buildLocalizeFn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:buildLocalizeFn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function buildMatchFn(e){return(a,l={})=>{const m=l.width,u=m&&e.matchPatterns[m]||e.matchPatterns[e.defaultMatchWidth],p=a.match(u);if(!p)return null;const f=p[0],g=m&&e.parsePatterns[m]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(g)?function findIndex(e,a){for(let l=0;l<e.length;l++)if(a(e[l]))return l;return}(g,e=>e.test(f)):function findKey(e,a){for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)&&a(e[l]))return l;return}(g,e=>e.test(f));let y;y=e.valueCallback?e.valueCallback(h):h,y=l.valueCallback?l.valueCallback(y):y;return{value:y,rest:a.slice(f.length)}}}const Cd={ordinalNumber:function buildMatchPatternFn(e){return(a,l={})=>{const m=a.match(e.matchPattern);if(!m)return null;const u=m[0],p=a.match(e.parsePattern);if(!p)return null;let f=e.valueCallback?e.valueCallback(p[0]):p[0];f=l.valueCallback?l.valueCallback(f):f;return{value:f,rest:a.slice(u.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:buildMatchFn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:buildMatchFn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Rd={code:"en-US",formatDistance:(e,a,l)=>{let m;const u=Nd[e];return m="string"==typeof u?u:1===a?u.one:u.other.replace("{{count}}",a.toString()),l?.addSuffix?l.comparison&&l.comparison>0?"in "+m:m+" ago":m},formatLong:_d,formatRelative:(e,a,l,m)=>kd[e],localize:Sd,match:Cd,options:{weekStartsOn:0,firstWeekContainsDate:1}};function formatDistanceToNow(e,a){return function formatDistance(e,a,l){const m=getDefaultOptions(),u=l?.locale??m.locale??Rd,p=compareAsc(e,a);if(isNaN(p))throw new RangeError("Invalid time value");const f=Object.assign({},l,{addSuffix:l?.addSuffix,comparison:p});let g,h;p>0?(g=toDate(a),h=toDate(e)):(g=toDate(e),h=toDate(a));const y=differenceInSeconds(h,g),v=(getTimezoneOffsetInMilliseconds(h)-getTimezoneOffsetInMilliseconds(g))/1e3,E=Math.round((y-v)/60);let x;if(E<2)return l?.includeSeconds?y<5?u.formatDistance("lessThanXSeconds",5,f):y<10?u.formatDistance("lessThanXSeconds",10,f):y<20?u.formatDistance("lessThanXSeconds",20,f):y<40?u.formatDistance("halfAMinute",0,f):y<60?u.formatDistance("lessThanXMinutes",1,f):u.formatDistance("xMinutes",1,f):0===E?u.formatDistance("lessThanXMinutes",1,f):u.formatDistance("xMinutes",E,f);if(E<45)return u.formatDistance("xMinutes",E,f);if(E<90)return u.formatDistance("aboutXHours",1,f);if(E<1440){const e=Math.round(E/60);return u.formatDistance("aboutXHours",e,f)}if(E<2520)return u.formatDistance("xDays",1,f);if(E<wd){const e=Math.round(E/1440);return u.formatDistance("xDays",e,f)}if(E<86400)return x=Math.round(E/wd),u.formatDistance("aboutXMonths",x,f);if(x=differenceInMonths(h,g),x<12){const e=Math.round(E/wd);return u.formatDistance("xMonths",e,f)}{const e=x%12,a=Math.trunc(x/12);return e<3?u.formatDistance("aboutXYears",a,f):e<9?u.formatDistance("overXYears",a,f):u.formatDistance("almostXYears",a+1,f)}}(e,function constructNow(e){return constructFrom(e,Date.now())}(e),a)}const LawFirmReviews=({lawFirmId:e,reviews:a})=>{const{user:l}=useAuth(),[m,u]=Me.useState(a),[p,f]=Me.useState(!1),[g,h]=Me.useState(!1),renderStars=e=>Array.from({length:5},(a,l)=>je.createElement(jr,{key:l,className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")}));Me.useEffect(()=>{u(a)},[a]);const y=(()=>{const e={5:0,4:0,3:0,2:0,1:0};return m.forEach(a=>{e[a.rating]++}),e})(),v=m.length,E=v>0?m.reduce((e,a)=>e+a.rating,0)/v:0;return je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,{className:"flex flex-row items-center justify-between"},je.createElement(fi,null,"Client Reviews"),l&&je.createElement(Uo,{onClick:()=>h(!0)},je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Write Review")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"text-4xl font-bold text-gray-900 mb-2"},E.toFixed(1)),je.createElement("div",{className:"flex items-center justify-center space-x-1 mb-2"},renderStars(E)),je.createElement("p",{className:"text-gray-600"},"Based on ",v," review",1!==v?"s":"")),je.createElement("div",{className:"space-y-2"},[5,4,3,2,1].map(e=>{const a=y[e],l=v>0?a/v*100:0;return je.createElement("div",{key:e,className:"flex items-center space-x-2"},je.createElement("span",{className:"text-sm w-8"},e),je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("div",{className:"flex-1 bg-gray-200 rounded-full h-2"},je.createElement("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${l}%`}})),je.createElement("span",{className:"text-sm text-gray-600 w-8"},a))}))))),je.createElement("div",{className:"space-y-4"},m.length>0?m.map(a=>je.createElement(ui,{key:a.id},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(hd,null,je.createElement(vd,null,a.user?a.user.full_name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")),je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},a.user?.full_name||"Anonymous"),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"flex items-center space-x-1"},renderStars(a.rating)),je.createElement("span",{className:"text-sm text-gray-500"},formatDistanceToNow(new Date(a.created_at),{addSuffix:!0})),a.verified_client&&je.createElement(Badge,{variant:"outline",className:"text-xs"},"Verified Client")))),je.createElement("h5",{className:"font-medium text-gray-900 mb-2"},a.title),je.createElement("p",{className:"text-gray-700 mb-3"},a.content),je.createElement("div",{className:"flex items-center space-x-4"},je.createElement(Uo,{variant:"ghost",size:"sm",className:"text-gray-500",onClick:()=>(async(a,m)=>{if(l)try{await dm.voteOnReview(a,m);const l=await dm.getLawFirmReviews(e);u(l),An.success("Thank you for your feedback!")}catch(p){console.error("Error voting on review:",p),An.error("Failed to submit vote")}else An.error("Please log in to vote on reviews")})(a.id,!0),disabled:!l},je.createElement($r,{className:"h-4 w-4 mr-1"}),"Helpful (",a.helpful_count,")"))))))):je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(gr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No reviews yet"),je.createElement("p",{className:"text-gray-500 mb-4"},"Be the first to review this law firm."),l&&je.createElement(Uo,{onClick:()=>h(!0)},je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Write First Review")))),m.length>0&&m.length>=5&&je.createElement("div",{className:"text-center"},je.createElement(Uo,{variant:"outline",onClick:async()=>{try{f(!0);const a=await dm.getLawFirmReviews(e);u(a)}catch(a){console.error("Error loading reviews:",a),An.error("Failed to load reviews")}finally{f(!1)}},disabled:p},p?"Loading...":"Load All Reviews")),g&&je.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,null,je.createElement(fi,null,"Write a Review")),je.createElement(hi,null,je.createElement("p",{className:"text-gray-600 mb-4"},"Review form will be implemented in the next phase."),je.createElement(Uo,{onClick:()=>h(!1),className:"w-full"},"Close")))))};var Ad=Me.forwardRef((e,a)=>tt.jsx(nt.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Ad.displayName="Label";var Td=Ad;const Pd=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Dd=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Td,{ref:l,className:cn(Pd(),e),...a}));Dd.displayName=Td.displayName;const LawFirmBookingForm=({lawFirm:e,teamMembers:a,onClose:l,onBookingCreated:m})=>{const{user:u}=useAuth(),[p,f]=Me.useState(!1),[g,h]=Me.useState({consultation_type:"initial",team_member_id:"",preferred_date:"",preferred_time:"",duration_minutes:60,message:"",contact_phone:"",alternative_dates:["",""],special_requirements:"",meeting_type:"in_person"});Me.useState([]),Me.useState(!1);const handleInputChange=(e,a)=>{h(l=>({...l,[e]:a}))};return je.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},je.createElement(ui,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto"},je.createElement(pi,{className:"flex flex-row items-center justify-between"},je.createElement(fi,null,"Book Consultation"),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:l},je.createElement(Gr,{className:"h-4 w-4"}))),je.createElement(hi,null,je.createElement("form",{onSubmit:async a=>{if(a.preventDefault(),u)try{f(!0),await dm.createBooking({law_firm_id:e.id,user_id:u.id,team_member_id:g.team_member_id||void 0,consultation_type:g.consultation_type,preferred_date:g.preferred_date,preferred_time:g.preferred_time,duration_minutes:g.duration_minutes,message:g.message||void 0,contact_phone:g.contact_phone||void 0,status:"pending"}),m()}catch(l){console.error("Error creating booking:",l),An.error("Failed to create booking. Please try again.")}finally{f(!1)}else An.error("Please log in to book a consultation")},className:"space-y-4"},je.createElement("div",{className:"bg-gray-50 p-3 rounded-lg"},je.createElement("h3",{className:"font-medium text-gray-900"},e.name),je.createElement("p",{className:"text-sm text-gray-600"},e.address)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"consultation_type"},"Consultation Type"),je.createElement(Zc,{value:g.consultation_type,onValueChange:e=>handleInputChange("consultation_type",e)},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"initial"},"Initial Consultation"),je.createElement(Xc,{value:"follow_up"},"Follow-up Meeting"),je.createElement(Xc,{value:"document_review"},"Document Review")))),a.length>0&&je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"team_member"},"Preferred Lawyer (Optional)"),je.createElement(Zc,{value:g.team_member_id,onValueChange:e=>handleInputChange("team_member_id",e)},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Any available lawyer"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"Any available lawyer"),a.map(e=>je.createElement(Xc,{key:e.id,value:e.id},e.name," - ",e.title))))),je.createElement("div",{className:"grid grid-cols-2 gap-4"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"preferred_date"},"Preferred Date"),je.createElement(zo,{id:"preferred_date",type:"date",value:g.preferred_date,onChange:e=>handleInputChange("preferred_date",e.target.value),min:(new Date).toISOString().split("T")[0],required:!0})),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"preferred_time"},"Preferred Time"),je.createElement(zo,{id:"preferred_time",type:"time",value:g.preferred_time,onChange:e=>handleInputChange("preferred_time",e.target.value),required:!0}))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"duration"},"Duration"),je.createElement(Zc,{value:g.duration_minutes.toString(),onValueChange:e=>handleInputChange("duration_minutes",parseInt(e))},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"30"},"30 minutes"),je.createElement(Xc,{value:"60"},"1 hour"),je.createElement(Xc,{value:"90"},"1.5 hours"),je.createElement(Xc,{value:"120"},"2 hours")))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"contact_phone"},"Contact Phone (Optional)"),je.createElement(zo,{id:"contact_phone",type:"tel",value:g.contact_phone,onChange:e=>handleInputChange("contact_phone",e.target.value),placeholder:"Your phone number"})),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"meeting_type"},"Meeting Type"),je.createElement(Zc,{value:g.meeting_type,onValueChange:e=>handleInputChange("meeting_type",e)},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"in_person"},"In-Person Meeting"),je.createElement(Xc,{value:"video_call"},"Video Call"),je.createElement(Xc,{value:"phone_call"},"Phone Call")))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,null,"Alternative Dates (Optional)"),je.createElement("p",{className:"text-sm text-gray-600 mb-2"},"Provide alternative dates in case your preferred time is not available"),je.createElement("div",{className:"grid grid-cols-2 gap-2"},je.createElement(zo,{type:"date",value:g.alternative_dates[0],onChange:e=>{const a=[...g.alternative_dates];a[0]=e.target.value,handleInputChange("alternative_dates",a)},min:(new Date).toISOString().split("T")[0]}),je.createElement(zo,{type:"date",value:g.alternative_dates[1],onChange:e=>{const a=[...g.alternative_dates];a[1]=e.target.value,handleInputChange("alternative_dates",a)},min:(new Date).toISOString().split("T")[0]}))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"message"},"Message (Optional)"),je.createElement(bi,{id:"message",value:g.message,onChange:e=>handleInputChange("message",e.target.value),placeholder:"Brief description of your legal matter...",rows:3})),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"special_requirements"},"Special Requirements (Optional)"),je.createElement(bi,{id:"special_requirements",value:g.special_requirements,onChange:e=>handleInputChange("special_requirements",e.target.value),placeholder:"Any accessibility needs, language preferences, or other special requirements...",rows:2})),e.consultation_fee&&je.createElement("div",{className:"bg-blue-50 p-3 rounded-lg"},je.createElement("p",{className:"text-sm text-blue-800"},je.createElement("strong",null,"Consultation Fee:")," $",e.consultation_fee)),je.createElement("div",{className:"flex space-x-3 pt-4"},je.createElement(Uo,{type:"button",variant:"outline",onClick:l,className:"flex-1",disabled:p},"Cancel"),je.createElement(Uo,{type:"submit",className:"flex-1",disabled:p},p?je.createElement(je.Fragment,null,je.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Booking..."):je.createElement(je.Fragment,null,je.createElement(ba,{className:"h-4 w-4 mr-2"}),"Book Consultation")))))))},LawFirmGallery=({images:e})=>{const[a,l]=Me.useState(null),closeLightbox=()=>{l(null)},navigateImage=m=>{null!==a&&l("prev"===m?a>0?a-1:e.length-1:a<e.length-1?a+1:0)};return 0===e.length?je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4"},""),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No gallery images"),je.createElement("p",{className:"text-gray-500"},"Gallery images have not been added yet."))):je.createElement(je.Fragment,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e.map((e,a)=>je.createElement(ui,{key:e.id,className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>(e=>{l(e)})(a)},je.createElement("div",{className:"aspect-video relative"},je.createElement("img",{src:e.image_url,alt:e.alt_text||e.caption||`Gallery image ${a+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"})),e.caption&&je.createElement(hi,{className:"p-3"},je.createElement("p",{className:"text-sm text-gray-600 line-clamp-2"},e.caption))))),null!==a&&je.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:closeLightbox,onKeyDown:e=>{"Escape"===e.key?closeLightbox():"ArrowLeft"===e.key?navigateImage("prev"):"ArrowRight"===e.key&&navigateImage("next")},tabIndex:0},je.createElement(Uo,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 text-white hover:bg-white/20 z-10",onClick:closeLightbox},je.createElement(Gr,{className:"h-6 w-6"})),e.length>1&&je.createElement(je.Fragment,null,je.createElement(Uo,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:bg-white/20 z-10",onClick:e=>{e.stopPropagation(),navigateImage("prev")}},je.createElement(Sa,{className:"h-8 w-8"})),je.createElement(Uo,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:bg-white/20 z-10",onClick:e=>{e.stopPropagation(),navigateImage("next")}},je.createElement(Ca,{className:"h-8 w-8"}))),je.createElement("div",{className:"max-w-4xl max-h-[80vh] mx-4",onClick:e=>e.stopPropagation()},je.createElement("img",{src:e[a].image_url,alt:e[a].alt_text||e[a].caption||`Gallery image ${a+1}`,className:"max-w-full max-h-full object-contain"}),e[a].caption&&je.createElement("div",{className:"bg-black/50 text-white p-4 mt-2 rounded"},je.createElement("p",{className:"text-center"},e[a].caption))),e.length>1&&je.createElement("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded"},a+1," / ",e.length)))},LawFirmContactForm=({lawFirm:e,onClose:a,onMessageSent:l})=>{const{user:m}=useAuth(),[u,p]=Me.useState(!1),[f,g]=Me.useState({name:m?.user_metadata?.full_name||"",email:m?.email||"",phone:"",subject:"",message:"",inquiry_type:"general",preferred_contact_method:"email",urgent:!1,consent_to_contact:!1}),handleInputChange=(e,a)=>{g(l=>({...l,[e]:a}))};return je.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},je.createElement(ui,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto"},je.createElement(pi,{className:"flex flex-row items-center justify-between"},je.createElement(fi,null,"Contact ",e.name),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:a},je.createElement(Gr,{className:"h-4 w-4"}))),je.createElement(hi,null,je.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),f.consent_to_contact)try{p(!0),await new Promise(e=>setTimeout(e,1e3)),An.success("Message sent successfully! The law firm will contact you soon."),l()}catch(a){console.error("Error sending message:",a),An.error("Failed to send message. Please try again.")}finally{p(!1)}else An.error("Please consent to being contacted")},className:"space-y-4"},je.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},je.createElement("h3",{className:"font-medium text-gray-900 mb-2"},e.name),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(xr,{className:"h-4 w-4"}),je.createElement("span",null,e.phone)),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mr,{className:"h-4 w-4"}),je.createElement("span",null,e.email)))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"name"},"Full Name *"),je.createElement(zo,{id:"name",value:f.name,onChange:e=>handleInputChange("name",e.target.value),required:!0})),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"email"},"Email Address *"),je.createElement(zo,{id:"email",type:"email",value:f.email,onChange:e=>handleInputChange("email",e.target.value),required:!0}))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"phone"},"Phone Number"),je.createElement(zo,{id:"phone",type:"tel",value:f.phone,onChange:e=>handleInputChange("phone",e.target.value),placeholder:"Your phone number"})),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"inquiry_type"},"Type of Inquiry"),je.createElement(Zc,{value:f.inquiry_type,onValueChange:e=>handleInputChange("inquiry_type",e)},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"general"},"General Inquiry"),je.createElement(Xc,{value:"consultation"},"Consultation Request"),je.createElement(Xc,{value:"case_evaluation"},"Case Evaluation"),je.createElement(Xc,{value:"document_review"},"Document Review"),je.createElement(Xc,{value:"legal_advice"},"Legal Advice"),je.createElement(Xc,{value:"representation"},"Legal Representation")))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"preferred_contact"},"Preferred Contact Method"),je.createElement(Zc,{value:f.preferred_contact_method,onValueChange:e=>handleInputChange("preferred_contact_method",e)},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"email"},"Email"),je.createElement(Xc,{value:"phone"},"Phone Call"),je.createElement(Xc,{value:"either"},"Either"))))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"subject"},"Subject *"),je.createElement(zo,{id:"subject",value:f.subject,onChange:e=>handleInputChange("subject",e.target.value),placeholder:"Brief description of your legal matter",required:!0})),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"message"},"Message *"),je.createElement(bi,{id:"message",value:f.message,onChange:e=>handleInputChange("message",e.target.value),placeholder:"Please provide details about your legal matter, including any relevant dates, parties involved, and specific questions you have...",rows:5,required:!0})),je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mm,{id:"urgent",checked:f.urgent,onCheckedChange:e=>handleInputChange("urgent",e)}),je.createElement("label",{htmlFor:"urgent",className:"text-sm text-gray-700"},"This is an urgent matter requiring immediate attention")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mm,{id:"consent",checked:f.consent_to_contact,onCheckedChange:e=>handleInputChange("consent_to_contact",e)}),je.createElement("label",{htmlFor:"consent",className:"text-sm text-gray-700"},"I consent to being contacted by ",e.name," regarding my inquiry *"))),je.createElement("div",{className:"bg-yellow-50 p-3 rounded-lg text-sm text-yellow-800"},je.createElement("p",{className:"font-medium mb-1"},"Important Notice:"),je.createElement("p",null,"This form is for initial inquiries only. Do not include confidential or sensitive information. An attorney-client relationship is not formed until a formal agreement is signed.")),je.createElement("div",{className:"flex space-x-3 pt-4"},je.createElement(Uo,{type:"button",variant:"outline",onClick:a,className:"flex-1",disabled:u},"Cancel"),je.createElement(Uo,{type:"submit",className:"flex-1",disabled:u||!f.consent_to_contact},u?je.createElement(je.Fragment,null,je.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."):je.createElement(je.Fragment,null,je.createElement(mr,{className:"h-4 w-4 mr-2"}),"Send Message")))))))},LawFirmProfile$1=({firmId:e,onBack:a,className:l=""})=>{const{id:m}=useParams(),u=useNavigate(),p=e||m,[f,g]=Me.useState(null),[h,y]=Me.useState([]),[v,E]=Me.useState([]),[x,w]=Me.useState([]),[b,N]=Me.useState(!0),[_,k]=Me.useState(!1),[S,C]=Me.useState(!1),[R,A]=Me.useState("overview");Me.useEffect(()=>{p&&loadLawFirmProfile()},[p]);const loadLawFirmProfile=async()=>{if(p)try{N(!0);const e=await dm.getLawFirmProfile(p);g(e),y(e.team_members||[]),E(e.gallery||[]),w(e.recent_reviews||[])}catch(e){console.error("Error loading law firm profile:",e),An.error("Failed to load law firm profile")}finally{N(!1)}};if(b)return je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),je.createElement("p",{className:"text-gray-600"},"Loading law firm profile...")));if(!f)return je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Law Firm Not Found"),je.createElement("p",{className:"text-gray-600 mb-4"},"The law firm you're looking for doesn't exist or has been removed."),je.createElement(Uo,{onClick:()=>u("/law-firms")},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to Directory")));(()=>{const e={5:0,4:0,3:0,2:0,1:0};x.forEach(a=>{e[a.rating]++})})();const T=x.length;return je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"relative h-64 bg-gradient-to-r from-blue-600 to-blue-800"},f.cover_image_url&&je.createElement("img",{src:f.cover_image_url,alt:`${f.name} cover`,className:"w-full h-full object-cover"}),je.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),je.createElement("div",{className:"absolute top-4 left-4"},je.createElement(Uo,{variant:"secondary",size:"sm",onClick:()=>a?a():u("/law-firms"),className:"bg-white/90 hover:bg-white"},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to Directory")),je.createElement("div",{className:"absolute top-4 right-4 flex space-x-2"},je.createElement(Uo,{variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white"},je.createElement(Ja,{className:"h-4 w-4"})),je.createElement(Uo,{variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white"},je.createElement(Tr,{className:"h-4 w-4"})))),je.createElement("div",{className:"relative -mt-16 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"bg-white shadow-lg"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex flex-col md:flex-row md:items-start md:space-x-6"},je.createElement("div",{className:"flex-shrink-0 mb-4 md:mb-0"},je.createElement(hd,{className:"h-24 w-24 border-4 border-white shadow-lg"},je.createElement(yd,{src:f.logo_url,alt:f.name}),je.createElement(vd,{className:"text-2xl font-bold bg-blue-600 text-white"},f.name.charAt(0)))),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},f.name),f.verified&&je.createElement(ma,{className:"h-6 w-6 text-blue-500"})),je.createElement("div",{className:"flex items-center space-x-1 mb-3"},(P=f.rating,Array.from({length:5},(e,a)=>je.createElement(jr,{key:a,className:"h-4 w-4 "+(a<Math.floor(P)?"text-yellow-400 fill-current":"text-gray-300")}))),je.createElement("span",{className:"text-lg font-semibold text-gray-900 ml-2"},f.rating.toFixed(1)),je.createElement("span",{className:"text-gray-600"},"(",f.total_reviews||0," reviews)")),je.createElement("p",{className:"text-gray-600 mb-4"},f.description),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(dr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-gray-600"},f.address)),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(xr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-gray-600"},f.phone)),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-gray-600"},f.email)),f.website&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Ga,{className:"h-4 w-4 text-gray-400"}),je.createElement("a",{href:f.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Website")))),je.createElement("div",{className:"flex flex-col space-y-2 mt-4 md:mt-0"},je.createElement(Uo,{onClick:()=>k(!0),className:"bg-blue-600 hover:bg-blue-700"},je.createElement(ba,{className:"h-4 w-4 mr-2"}),"Book Consultation"),je.createElement(Uo,{variant:"outline",onClick:()=>C(!0)},je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Send Message")))))),je.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8"},je.createElement(Xm,{value:R,onValueChange:A},je.createElement(ed,{className:"grid w-full grid-cols-4"},je.createElement(td,{value:"overview"},"Overview"),je.createElement(td,{value:"team"},"Team"),je.createElement(td,{value:"gallery"},"Gallery"),je.createElement(td,{value:"reviews"},"Reviews")),je.createElement(ad,{value:"overview",className:"mt-6"},je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},je.createElement("div",{className:"lg:col-span-2 space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"About ",f.name)),je.createElement(hi,null,je.createElement("p",{className:"text-gray-700 leading-relaxed mb-4"},f.description),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},f.established_year&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(ba,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-sm text-gray-600"},"Established: ",f.established_year)),f.firm_size&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Wr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-sm text-gray-600"},"Firm Size: ",f.firm_size.charAt(0).toUpperCase()+f.firm_size.slice(1))),f.response_time&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Fa,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-sm text-gray-600"},"Response Time: ",f.response_time)),f.consultation_fee&&je.createElement("div",{className:"flex items-center space-x-2"},je.createElement($a,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-sm text-gray-600"},"Consultation Fee: $",f.consultation_fee))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Practice Areas")),je.createElement(hi,null,je.createElement("div",{className:"flex flex-wrap gap-2"},f.practice_areas.map(e=>je.createElement(Badge,{key:e,variant:"secondary",className:"text-sm"},e))))),(f.languages?.length||f.certifications?.length)&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Languages & Certifications")),je.createElement(hi,{className:"space-y-4"},f.languages?.length&&je.createElement("div",null,je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement(rr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"font-medium text-gray-900"},"Languages")),je.createElement("div",{className:"flex flex-wrap gap-2"},f.languages.map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-sm"},e)))),f.certifications?.length&&je.createElement("div",null,je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement(ca,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"font-medium text-gray-900"},"Certifications")),je.createElement("div",{className:"space-y-1"},f.certifications.map(e=>je.createElement("div",{key:e,className:"text-sm text-gray-600"}," ",e)))))),f.office_hours&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Office Hours")),je.createElement(hi,null,je.createElement("p",{className:"text-gray-700"},(e=>{if(!e)return"Hours not specified";const a=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map((l,m)=>e[l]?`${a[m]}: ${e[l]}`:null).filter(Boolean).join(", ")||"Hours not specified"})(f.office_hours))))),je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"Quick Stats")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("span",{className:"text-gray-600"},"Rating"),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("span",{className:"font-medium"},f.rating.toFixed(1)))),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("span",{className:"text-gray-600"},"Reviews"),je.createElement("span",{className:"font-medium"},T)),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("span",{className:"text-gray-600"},"Practice Areas"),je.createElement("span",{className:"font-medium"},f.practice_areas.length)),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("span",{className:"text-gray-600"},"Verified"),je.createElement("div",{className:"flex items-center space-x-1"},f.verified?je.createElement(je.Fragment,null,je.createElement(ma,{className:"h-4 w-4 text-blue-500"}),je.createElement("span",{className:"text-blue-600 font-medium"},"Yes")):je.createElement("span",{className:"text-gray-500"},"No"))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"Contact")),je.createElement(hi,{className:"space-y-3"},je.createElement(Uo,{className:"w-full"},je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Write a Review"),je.createElement(Uo,{variant:"outline",className:"w-full"},je.createElement(xr,{className:"h-4 w-4 mr-2"}),"Call Now"),je.createElement(Uo,{variant:"outline",className:"w-full"},je.createElement(mr,{className:"h-4 w-4 mr-2"}),"Send Email")))))),je.createElement(ad,{value:"team",className:"mt-6"},h.length>0?je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},h.map(e=>je.createElement(ui,{key:e.id,className:"hover:shadow-lg transition-shadow"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"text-center"},je.createElement(hd,{className:"h-20 w-20 mx-auto mb-4"},je.createElement(yd,{src:e.photo_url,alt:e.name}),je.createElement(vd,{className:"text-lg bg-blue-100 text-blue-600"},e.name.split(" ").map(e=>e[0]).join(""))),je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-1"},e.name),je.createElement("p",{className:"text-blue-600 font-medium mb-3"},e.title),e.bio&&je.createElement("p",{className:"text-gray-600 text-sm mb-4"},e.bio),e.practice_areas.length>0&&je.createElement("div",{className:"mb-4"},je.createElement("div",{className:"flex flex-wrap gap-1 justify-center"},e.practice_areas.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"secondary",className:"text-xs"},e)),e.practice_areas.length>3&&je.createElement(Badge,{variant:"secondary",className:"text-xs"},"+",e.practice_areas.length-3," more"))),je.createElement("div",{className:"space-y-2 text-sm text-gray-600"},e.years_experience&&je.createElement("div",{className:"flex items-center justify-center space-x-1"},je.createElement(Qa,{className:"h-4 w-4"}),je.createElement("span",null,e.years_experience," years experience")),e.languages&&e.languages.length>0&&je.createElement("div",{className:"flex items-center justify-center space-x-1"},je.createElement(rr,{className:"h-4 w-4"}),je.createElement("span",null,e.languages.join(", ")))),je.createElement("div",{className:"mt-4 space-y-2"},e.email&&je.createElement(Uo,{variant:"outline",size:"sm",className:"w-full"},je.createElement(mr,{className:"h-4 w-4 mr-2"}),"Contact"))))))):je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(Wr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No team information available"),je.createElement("p",{className:"text-gray-500"},"Team member information has not been provided yet.")))),je.createElement(ad,{value:"gallery",className:"mt-6"},je.createElement(LawFirmGallery,{images:v})),je.createElement(ad,{value:"reviews",className:"mt-6"},je.createElement(LawFirmReviews,{lawFirmId:f.id,reviews:x})))),_&&je.createElement(LawFirmBookingForm,{lawFirm:f,teamMembers:h,onClose:()=>k(!1),onBookingCreated:()=>{k(!1),An.success("Booking request submitted successfully!")}}),S&&je.createElement(LawFirmContactForm,{lawFirm:f,onClose:()=>C(!1),onMessageSent:()=>{C(!1),An.success("Message sent successfully!")}}));var P};var isCheckBoxInput=e=>"checkbox"===e.type,isDateObject=e=>e instanceof Date,isNullOrUndefined=e=>null==e;const isObjectType=e=>"object"==typeof e;var isObject$1=e=>!isNullOrUndefined(e)&&!Array.isArray(e)&&isObjectType(e)&&!isDateObject(e),getEventValue=e=>isObject$1(e)&&e.target?isCheckBoxInput(e.target)?e.target.checked:e.target.value:e,isNameInFieldArray=(e,a)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(a)),Id="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function cloneObject(e){let a;const l=Array.isArray(e);if(e instanceof Date)a=new Date(e);else if(e instanceof Set)a=new Set(e);else{if(Id&&(e instanceof Blob||e instanceof FileList)||!l&&!isObject$1(e))return e;if(a=l?[]:{},l||(e=>{const a=e.constructor&&e.constructor.prototype;return isObject$1(a)&&a.hasOwnProperty("isPrototypeOf")})(e))for(const l in e)e.hasOwnProperty(l)&&(a[l]=cloneObject(e[l]));else a=e}return a}var compact=e=>Array.isArray(e)?e.filter(Boolean):[],isUndefined=e=>void 0===e,get=(e,a,l)=>{if(!a||!isObject$1(e))return l;const m=compact(a.split(/[,[\].]+?/)).reduce((e,a)=>isNullOrUndefined(e)?e:e[a],e);return isUndefined(m)||m===e?isUndefined(e[a])?l:e[a]:m},isBoolean=e=>"boolean"==typeof e,isKey=e=>/^\w*$/.test(e),stringToPath=e=>compact(e.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(e,a,l)=>{let m=-1;const u=isKey(a)?[a]:stringToPath(a),p=u.length,f=p-1;for(;++m<p;){const a=u[m];let p=l;if(m!==f){const l=e[a];p=isObject$1(l)||Array.isArray(l)?l:isNaN(+u[m+1])?{}:[]}if("__proto__"===a)return;e[a]=p,e=e[a]}return e};const Fd="blur",Md="focusout",jd="change",Od="onBlur",Ld="onChange",$d="onSubmit",Ud="onTouched",zd="all",Bd="max",qd="min",Vd="maxLength",Hd="minLength",Wd="pattern",Zd="required",Kd="validate",Gd=je.createContext(null),useFormContext=()=>je.useContext(Gd);var getProxyFormState=(e,a,l,m=!0)=>{const u={defaultValues:a._defaultValues};for(const p in e)Object.defineProperty(u,p,{get:()=>{const u=p;return a._proxyFormState[u]!==zd&&(a._proxyFormState[u]=!m||zd),l&&(l[u]=!0),e[u]}});return u},isEmptyObject=e=>isObject$1(e)&&!Object.keys(e).length,shouldRenderFormState=(e,a,l,m)=>{l(e);const{name:u,...p}=e;return isEmptyObject(p)||Object.keys(p).length>=Object.keys(a).length||Object.keys(p).find(e=>a[e]===(!m||zd))},convertToArrayPayload=e=>Array.isArray(e)?e:[e],shouldSubscribeByName=(e,a,l)=>!e||!a||e===a||convertToArrayPayload(e).some(e=>e&&(l?e===a:e.startsWith(a)||a.startsWith(e)));function useSubscribe(e){const a=je.useRef(e);a.current=e,je.useEffect(()=>{const l=!e.disabled&&a.current.subject&&a.current.subject.subscribe({next:a.current.next});return()=>{l&&l.unsubscribe()}},[e.disabled])}var isString=e=>"string"==typeof e,generateWatchOutput=(e,a,l,m,u)=>isString(e)?(m&&a.watch.add(e),get(l,e,u)):Array.isArray(e)?e.map(e=>(m&&a.watch.add(e),get(l,e))):(m&&(a.watchAll=!0),l);function useController(e){const a=useFormContext(),{name:l,disabled:m,control:u=a.control,shouldUnregister:p}=e,f=isNameInFieldArray(u._names.array,l),g=function useWatch(e){const a=useFormContext(),{control:l=a.control,name:m,defaultValue:u,disabled:p,exact:f}=e||{},g=je.useRef(m);g.current=m,useSubscribe({disabled:p,subject:l._subjects.values,next:e=>{shouldSubscribeByName(g.current,e.name,f)&&y(cloneObject(generateWatchOutput(g.current,l._names,e.values||l._formValues,!1,u)))}});const[h,y]=je.useState(l._getWatch(m,u));return je.useEffect(()=>l._removeUnmounted()),h}({control:u,name:l,defaultValue:get(u._formValues,l,get(u._defaultValues,l,e.defaultValue)),exact:!0}),h=function useFormState(e){const a=useFormContext(),{control:l=a.control,disabled:m,name:u,exact:p}=e||{},[f,g]=je.useState(l._formState),h=je.useRef(!0),y=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),v=je.useRef(u);return v.current=u,useSubscribe({disabled:m,next:e=>h.current&&shouldSubscribeByName(v.current,e.name,p)&&shouldRenderFormState(e,y.current,l._updateFormState)&&g({...l._formState,...e}),subject:l._subjects.state}),je.useEffect(()=>(h.current=!0,y.current.isValid&&l._updateValid(!0),()=>{h.current=!1}),[l]),getProxyFormState(f,l,y.current,!1)}({control:u,name:l,exact:!0}),y=je.useRef(u.register(l,{...e.rules,value:g,...isBoolean(e.disabled)?{disabled:e.disabled}:{}}));return je.useEffect(()=>{const e=u._options.shouldUnregister||p,updateMounted=(e,a)=>{const l=get(u._fields,e);l&&l._f&&(l._f.mount=a)};if(updateMounted(l,!0),e){const e=cloneObject(get(u._options.defaultValues,l));set(u._defaultValues,l,e),isUndefined(get(u._formValues,l))&&set(u._formValues,l,e)}return()=>{(f?e&&!u._state.action:e)?u.unregister(l):updateMounted(l,!1)}},[l,u,f,p]),je.useEffect(()=>{get(u._fields,l)&&u._updateDisabledField({disabled:m,fields:u._fields,name:l,value:get(u._fields,l)._f.value})},[m,l,u]),{field:{name:l,value:g,...isBoolean(m)||h.disabled?{disabled:h.disabled||m}:{},onChange:je.useCallback(e=>y.current.onChange({target:{value:getEventValue(e),name:l},type:jd}),[l]),onBlur:je.useCallback(()=>y.current.onBlur({target:{value:get(u._formValues,l),name:l},type:Fd}),[l,u]),ref:je.useCallback(e=>{const a=get(u._fields,l);a&&e&&(a._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:a=>e.setCustomValidity(a),reportValidity:()=>e.reportValidity()})},[u._fields,l])},formState:h,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(h.errors,l)},isDirty:{enumerable:!0,get:()=>!!get(h.dirtyFields,l)},isTouched:{enumerable:!0,get:()=>!!get(h.touchedFields,l)},isValidating:{enumerable:!0,get:()=>!!get(h.validatingFields,l)},error:{enumerable:!0,get:()=>get(h.errors,l)}})}}const Controller=e=>e.render(useController(e));var appendErrors=(e,a,l,m,u)=>a?{...l[e],types:{...l[e]&&l[e].types?l[e].types:{},[m]:u||!0}}:{},getValidationModes=e=>({isOnSubmit:!e||e===$d,isOnBlur:e===Od,isOnChange:e===Ld,isOnAll:e===zd,isOnTouch:e===Ud}),isWatched=(e,a,l)=>!l&&(a.watchAll||a.watch.has(e)||[...a.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const iterateFieldsByAction=(e,a,l,m)=>{for(const u of l||Object.keys(e)){const l=get(e,u);if(l){const{_f:e,...p}=l;if(e){if(e.refs&&e.refs[0]&&a(e.refs[0],u)&&!m)return!0;if(e.ref&&a(e.ref,e.name)&&!m)return!0;if(iterateFieldsByAction(p,a))break}else if(isObject$1(p)&&iterateFieldsByAction(p,a))break}}};var updateFieldArrayRootError=(e,a,l)=>{const m=convertToArrayPayload(get(e,l));return set(m,"root",a[l]),set(e,l,m),e},isFileInput=e=>"file"===e.type,isFunction=e=>"function"==typeof e,isHTMLElement=e=>{if(!Id)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},isMessage=e=>isString(e),isRadioInput=e=>"radio"===e.type,isRegex=e=>e instanceof RegExp;const Qd={value:!1,isValid:!1},Yd={value:!0,isValid:!0};var getCheckboxValue=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!isUndefined(e[0].attributes.value)?isUndefined(e[0].value)||""===e[0].value?Yd:{value:e[0].value,isValid:!0}:Yd:Qd}return Qd};const Jd={isValid:!1,value:null};var getRadioValue=e=>Array.isArray(e)?e.reduce((e,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:e,Jd):Jd;function getValidateError(e,a,l="validate"){if(isMessage(e)||Array.isArray(e)&&e.every(isMessage)||isBoolean(e)&&!e)return{type:l,message:isMessage(e)?e:"",ref:a}}var getValueAndMessage=e=>isObject$1(e)&&!isRegex(e)?e:{value:e,message:""},validateField=async(e,a,l,m,u)=>{const{ref:p,refs:f,required:g,maxLength:h,minLength:y,min:v,max:E,pattern:x,validate:w,name:b,valueAsNumber:N,mount:_,disabled:k}=e._f,S=get(a,b);if(!_||k)return{};const C=f?f[0]:p,setCustomValidity=e=>{m&&C.reportValidity&&(C.setCustomValidity(isBoolean(e)?"":e||""),C.reportValidity())},R={},A=isRadioInput(p),T=isCheckBoxInput(p),P=A||T,D=(N||isFileInput(p))&&isUndefined(p.value)&&isUndefined(S)||isHTMLElement(p)&&""===p.value||""===S||Array.isArray(S)&&!S.length,I=appendErrors.bind(null,b,l,R),getMinMaxMessage=(e,a,l,m=Vd,u=Hd)=>{const f=e?a:l;R[b]={type:e?m:u,message:f,ref:p,...I(e?m:u,f)}};if(u?!Array.isArray(S)||!S.length:g&&(!P&&(D||isNullOrUndefined(S))||isBoolean(S)&&!S||T&&!getCheckboxValue(f).isValid||A&&!getRadioValue(f).isValid)){const{value:e,message:a}=isMessage(g)?{value:!!g,message:g}:getValueAndMessage(g);if(e&&(R[b]={type:Zd,message:a,ref:C,...I(Zd,a)},!l))return setCustomValidity(a),R}if(!(D||isNullOrUndefined(v)&&isNullOrUndefined(E))){let e,a;const m=getValueAndMessage(E),u=getValueAndMessage(v);if(isNullOrUndefined(S)||isNaN(S)){const l=p.valueAsDate||new Date(S),convertTimeToDate=e=>new Date((new Date).toDateString()+" "+e),f="time"==p.type,g="week"==p.type;isString(m.value)&&S&&(e=f?convertTimeToDate(S)>convertTimeToDate(m.value):g?S>m.value:l>new Date(m.value)),isString(u.value)&&S&&(a=f?convertTimeToDate(S)<convertTimeToDate(u.value):g?S<u.value:l<new Date(u.value))}else{const l=p.valueAsNumber||(S?+S:S);isNullOrUndefined(m.value)||(e=l>m.value),isNullOrUndefined(u.value)||(a=l<u.value)}if((e||a)&&(getMinMaxMessage(!!e,m.message,u.message,Bd,qd),!l))return setCustomValidity(R[b].message),R}if((h||y)&&!D&&(isString(S)||u&&Array.isArray(S))){const e=getValueAndMessage(h),a=getValueAndMessage(y),m=!isNullOrUndefined(e.value)&&S.length>+e.value,u=!isNullOrUndefined(a.value)&&S.length<+a.value;if((m||u)&&(getMinMaxMessage(m,e.message,a.message),!l))return setCustomValidity(R[b].message),R}if(x&&!D&&isString(S)){const{value:e,message:a}=getValueAndMessage(x);if(isRegex(e)&&!S.match(e)&&(R[b]={type:Wd,message:a,ref:p,...I(Wd,a)},!l))return setCustomValidity(a),R}if(w)if(isFunction(w)){const e=getValidateError(await w(S,a),C);if(e&&(R[b]={...e,...I(Kd,e.message)},!l))return setCustomValidity(e.message),R}else if(isObject$1(w)){let e={};for(const m in w){if(!isEmptyObject(e)&&!l)break;const u=getValidateError(await w[m](S,a),C,m);u&&(e={...u,...I(m,u.message)},setCustomValidity(u.message),l&&(R[b]=e))}if(!isEmptyObject(e)&&(R[b]={ref:C,...e},!l))return R}return setCustomValidity(!0),R};function unset(e,a){const l=Array.isArray(a)?a:isKey(a)?[a]:stringToPath(a),m=1===l.length?e:function baseGet(e,a){const l=a.slice(0,-1).length;let m=0;for(;m<l;)e=isUndefined(e)?m++:e[a[m++]];return e}(e,l),u=l.length-1,p=l[u];return m&&delete m[p],0!==u&&(isObject$1(m)&&isEmptyObject(m)||Array.isArray(m)&&function isEmptyArray(e){for(const a in e)if(e.hasOwnProperty(a)&&!isUndefined(e[a]))return!1;return!0}(m))&&unset(e,l.slice(0,-1)),e}var createSubject=()=>{let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(e=>e!==a)}}),unsubscribe:()=>{e=[]}}},isPrimitive=e=>isNullOrUndefined(e)||!isObjectType(e);function deepEqual(e,a){if(isPrimitive(e)||isPrimitive(a))return e===a;if(isDateObject(e)&&isDateObject(a))return e.getTime()===a.getTime();const l=Object.keys(e),m=Object.keys(a);if(l.length!==m.length)return!1;for(const u of l){const l=e[u];if(!m.includes(u))return!1;if("ref"!==u){const e=a[u];if(isDateObject(l)&&isDateObject(e)||isObject$1(l)&&isObject$1(e)||Array.isArray(l)&&Array.isArray(e)?!deepEqual(l,e):l!==e)return!1}}return!0}var isMultipleSelect=e=>"select-multiple"===e.type,live=e=>isHTMLElement(e)&&e.isConnected,objectHasFunction=e=>{for(const a in e)if(isFunction(e[a]))return!0;return!1};function markFieldsDirty(e,a={}){const l=Array.isArray(e);if(isObject$1(e)||l)for(const m in e)Array.isArray(e[m])||isObject$1(e[m])&&!objectHasFunction(e[m])?(a[m]=Array.isArray(e[m])?[]:{},markFieldsDirty(e[m],a[m])):isNullOrUndefined(e[m])||(a[m]=!0);return a}function getDirtyFieldsFromDefaultValues(e,a,l){const m=Array.isArray(e);if(isObject$1(e)||m)for(const u in e)Array.isArray(e[u])||isObject$1(e[u])&&!objectHasFunction(e[u])?isUndefined(a)||isPrimitive(l[u])?l[u]=Array.isArray(e[u])?markFieldsDirty(e[u],[]):{...markFieldsDirty(e[u])}:getDirtyFieldsFromDefaultValues(e[u],isNullOrUndefined(a)?{}:a[u],l[u]):l[u]=!deepEqual(e[u],a[u]);return l}var getDirtyFields=(e,a)=>getDirtyFieldsFromDefaultValues(e,a,markFieldsDirty(a)),getFieldValueAs=(e,{valueAsNumber:a,valueAsDate:l,setValueAs:m})=>isUndefined(e)?e:a?""===e?NaN:e?+e:e:l&&isString(e)?new Date(e):m?m(e):e;function getFieldValue(e){const a=e.ref;if(!(e.refs?e.refs.every(e=>e.disabled):a.disabled))return isFileInput(a)?a.files:isRadioInput(a)?getRadioValue(e.refs).value:isMultipleSelect(a)?[...a.selectedOptions].map(({value:e})=>e):isCheckBoxInput(a)?getCheckboxValue(e.refs).value:getFieldValueAs(isUndefined(a.value)?e.ref.value:a.value,e)}var getRuleValue=e=>isUndefined(e)?e:isRegex(e)?e.source:isObject$1(e)?isRegex(e.value)?e.value.source:e.value:e;const Xd="AsyncFunction";var hasPromiseValidation=e=>!(e&&e.validate||!(isFunction(e.validate)&&e.validate.constructor.name===Xd||isObject$1(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Xd)));function schemaErrorLookup(e,a,l){const m=get(e,l);if(m||isKey(l))return{error:m,name:l};const u=l.split(".");for(;u.length;){const m=u.join("."),p=get(a,m),f=get(e,m);if(p&&!Array.isArray(p)&&l!==m)return{name:l};if(f&&f.type)return{name:m,error:f};u.pop()}return{name:l}}const eu={mode:$d,reValidateMode:Ld,shouldFocusError:!0};function createFormControl(e={}){let a,l={...eu,...e},m={submitCount:0,isDirty:!1,isLoading:isFunction(l.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:l.errors||{},disabled:l.disabled||!1},u={},p=(isObject$1(l.defaultValues)||isObject$1(l.values))&&cloneObject(l.defaultValues||l.values)||{},f=l.shouldUnregister?{}:cloneObject(p),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},y=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},E={values:createSubject(),array:createSubject(),state:createSubject()},x=getValidationModes(l.mode),w=getValidationModes(l.reValidateMode),b=l.criteriaMode===zd,_updateValid=async a=>{if(!e.disabled&&(v.isValid||a)){const e=l.resolver?isEmptyObject((await _executeSchema()).errors):await executeBuiltInValidation(u,!0);e!==m.isValid&&E.state.next({isValid:e})}},_updateIsValidating=(a,l)=>{e.disabled||!v.isValidating&&!v.validatingFields||((a||Array.from(h.mount)).forEach(e=>{e&&(l?set(m.validatingFields,e,l):unset(m.validatingFields,e))}),E.state.next({validatingFields:m.validatingFields,isValidating:!isEmptyObject(m.validatingFields)}))},updateValidAndValue=(e,a,l,m)=>{const h=get(u,e);if(h){const u=get(f,e,isUndefined(l)?get(p,e):l);isUndefined(u)||m&&m.defaultChecked||a?set(f,e,a?u:getFieldValue(h._f)):setFieldValue(e,u),g.mount&&_updateValid()}},updateTouchAndDirty=(a,l,f,g,h)=>{let y=!1,x=!1;const w={name:a};if(!e.disabled){const e=!!(get(u,a)&&get(u,a)._f&&get(u,a)._f.disabled);if(!f||g){v.isDirty&&(x=m.isDirty,m.isDirty=w.isDirty=_getDirty(),y=x!==w.isDirty);const u=e||deepEqual(get(p,a),l);x=!(e||!get(m.dirtyFields,a)),u||e?unset(m.dirtyFields,a):set(m.dirtyFields,a,!0),w.dirtyFields=m.dirtyFields,y=y||v.dirtyFields&&x!==!u}if(f){const e=get(m.touchedFields,a);e||(set(m.touchedFields,a,f),w.touchedFields=m.touchedFields,y=y||v.touchedFields&&e!==f)}y&&h&&E.state.next(w)}return y?w:{}},shouldRenderByError=(l,u,p,f)=>{const g=get(m.errors,l),h=v.isValid&&isBoolean(u)&&m.isValid!==u;var x;if(e.delayError&&p?(x=()=>((e,a)=>{set(m.errors,e,a),E.state.next({errors:m.errors})})(l,p),a=e=>{clearTimeout(y),y=setTimeout(x,e)},a(e.delayError)):(clearTimeout(y),a=null,p?set(m.errors,l,p):unset(m.errors,l)),(p?!deepEqual(g,p):g)||!isEmptyObject(f)||h){const e={...f,...h&&isBoolean(u)?{isValid:u}:{},errors:m.errors,name:l};m={...m,...e},E.state.next(e)}},_executeSchema=async e=>{_updateIsValidating(e,!0);const a=await l.resolver(f,l.context,((e,a,l,m)=>{const u={};for(const p of e){const e=get(a,p);e&&set(u,p,e._f)}return{criteriaMode:l,names:[...e],fields:u,shouldUseNativeValidation:m}})(e||h.mount,u,l.criteriaMode,l.shouldUseNativeValidation));return _updateIsValidating(e),a},executeBuiltInValidation=async(e,a,u={valid:!0})=>{for(const p in e){const g=e[p];if(g){const{_f:e,...y}=g;if(e){const y=h.array.has(e.name),E=g._f&&hasPromiseValidation(g._f);E&&v.validatingFields&&_updateIsValidating([p],!0);const x=await validateField(g,f,b,l.shouldUseNativeValidation&&!a,y);if(E&&v.validatingFields&&_updateIsValidating([p]),x[e.name]&&(u.valid=!1,a))break;!a&&(get(x,e.name)?y?updateFieldArrayRootError(m.errors,x,e.name):set(m.errors,e.name,x[e.name]):unset(m.errors,e.name))}!isEmptyObject(y)&&await executeBuiltInValidation(y,a,u)}}return u.valid},_getDirty=(a,l)=>!e.disabled&&(a&&l&&set(f,a,l),!deepEqual(getValues(),p)),_getWatch=(e,a,l)=>generateWatchOutput(e,h,{...g.mount?f:isUndefined(a)?p:isString(e)?{[e]:a}:a},l,a),setFieldValue=(e,a,l={})=>{const m=get(u,e);let p=a;if(m){const l=m._f;l&&(!l.disabled&&set(f,e,getFieldValueAs(a,l)),p=isHTMLElement(l.ref)&&isNullOrUndefined(a)?"":a,isMultipleSelect(l.ref)?[...l.ref.options].forEach(e=>e.selected=p.includes(e.value)):l.refs?isCheckBoxInput(l.ref)?l.refs.length>1?l.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(p)?!!p.find(a=>a===e.value):p===e.value)):l.refs[0]&&(l.refs[0].checked=!!p):l.refs.forEach(e=>e.checked=e.value===p):isFileInput(l.ref)?l.ref.value="":(l.ref.value=p,l.ref.type||E.values.next({name:e,values:{...f}})))}(l.shouldDirty||l.shouldTouch)&&updateTouchAndDirty(e,p,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&trigger(e)},setValues=(e,a,l)=>{for(const m in a){const p=a[m],f=`${e}.${m}`,g=get(u,f);(h.array.has(e)||isObject$1(p)||g&&!g._f)&&!isDateObject(p)?setValues(f,p,l):setFieldValue(f,p,l)}},setValue=(e,a,l={})=>{const y=get(u,e),x=h.array.has(e),w=cloneObject(a);set(f,e,w),x?(E.array.next({name:e,values:{...f}}),(v.isDirty||v.dirtyFields)&&l.shouldDirty&&E.state.next({name:e,dirtyFields:getDirtyFields(p,f),isDirty:_getDirty(e,w)})):!y||y._f||isNullOrUndefined(w)?setFieldValue(e,w,l):setValues(e,w,l),isWatched(e,h)&&E.state.next({...m}),E.values.next({name:g.mount?e:void 0,values:{...f}})},onChange=async p=>{g.mount=!0;const y=p.target;let N=y.name,_=!0;const k=get(u,N),_updateIsFieldValueUpdated=e=>{_=Number.isNaN(e)||isDateObject(e)&&isNaN(e.getTime())||deepEqual(e,get(f,N,e))};if(k){let g,S;const C=y.type?getFieldValue(k._f):getEventValue(p),R=p.type===Fd||p.type===Md,A=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(k._f)&&!l.resolver&&!get(m.errors,N)&&!k._f.deps||((e,a,l,m,u)=>!u.isOnAll&&(!l&&u.isOnTouch?!(a||e):(l?m.isOnBlur:u.isOnBlur)?!e:!(l?m.isOnChange:u.isOnChange)||e))(R,get(m.touchedFields,N),m.isSubmitted,w,x),T=isWatched(N,h,R);set(f,N,C),R?(k._f.onBlur&&k._f.onBlur(p),a&&a(0)):k._f.onChange&&k._f.onChange(p);const P=updateTouchAndDirty(N,C,R,!1),D=!isEmptyObject(P)||T;if(!R&&E.values.next({name:N,type:p.type,values:{...f}}),A)return v.isValid&&("onBlur"===e.mode?R&&_updateValid():_updateValid()),D&&E.state.next({name:N,...T?{}:P});if(!R&&T&&E.state.next({...m}),l.resolver){const{errors:e}=await _executeSchema([N]);if(_updateIsFieldValueUpdated(C),_){const a=schemaErrorLookup(m.errors,u,N),l=schemaErrorLookup(e,u,a.name||N);g=l.error,N=l.name,S=isEmptyObject(e)}}else _updateIsValidating([N],!0),g=(await validateField(k,f,b,l.shouldUseNativeValidation))[N],_updateIsValidating([N]),_updateIsFieldValueUpdated(C),_&&(g?S=!1:v.isValid&&(S=await executeBuiltInValidation(u,!0)));_&&(k._f.deps&&trigger(k._f.deps),shouldRenderByError(N,S,g,P))}},_focusInput=(e,a)=>{if(get(m.errors,a)&&e.focus)return e.focus(),1},trigger=async(e,a={})=>{let p,f;const g=convertToArrayPayload(e);if(l.resolver){const a=await(async e=>{const{errors:a}=await _executeSchema(e);if(e)for(const l of e){const e=get(a,l);e?set(m.errors,l,e):unset(m.errors,l)}else m.errors=a;return a})(isUndefined(e)?e:g);p=isEmptyObject(a),f=e?!g.some(e=>get(a,e)):p}else e?(f=(await Promise.all(g.map(async e=>{const a=get(u,e);return await executeBuiltInValidation(a&&a._f?{[e]:a}:a)}))).every(Boolean),(f||m.isValid)&&_updateValid()):f=p=await executeBuiltInValidation(u);return E.state.next({...!isString(e)||v.isValid&&p!==m.isValid?{}:{name:e},...l.resolver||!e?{isValid:p}:{},errors:m.errors}),a.shouldFocus&&!f&&iterateFieldsByAction(u,_focusInput,e?g:h.mount),f},getValues=e=>{const a={...g.mount?f:p};return isUndefined(e)?a:isString(e)?get(a,e):e.map(e=>get(a,e))},getFieldState=(e,a)=>({invalid:!!get((a||m).errors,e),isDirty:!!get((a||m).dirtyFields,e),error:get((a||m).errors,e),isValidating:!!get(m.validatingFields,e),isTouched:!!get((a||m).touchedFields,e)}),setError=(e,a,l)=>{const p=(get(u,e,{_f:{}})._f||{}).ref,f=get(m.errors,e)||{},{ref:g,message:h,type:y,...v}=f;set(m.errors,e,{...v,...a,ref:p}),E.state.next({name:e,errors:m.errors,isValid:!1}),l&&l.shouldFocus&&p&&p.focus&&p.focus()},unregister=(e,a={})=>{for(const g of e?convertToArrayPayload(e):h.mount)h.mount.delete(g),h.array.delete(g),a.keepValue||(unset(u,g),unset(f,g)),!a.keepError&&unset(m.errors,g),!a.keepDirty&&unset(m.dirtyFields,g),!a.keepTouched&&unset(m.touchedFields,g),!a.keepIsValidating&&unset(m.validatingFields,g),!l.shouldUnregister&&!a.keepDefaultValue&&unset(p,g);E.values.next({values:{...f}}),E.state.next({...m,...a.keepDirty?{isDirty:_getDirty()}:{}}),!a.keepIsValid&&_updateValid()},_updateDisabledField=({disabled:e,name:a,field:l,fields:m,value:u})=>{if(isBoolean(e)&&g.mount||e){const p=e?void 0:isUndefined(u)?getFieldValue(l?l._f:get(m,a)._f):u;set(f,a,p),updateTouchAndDirty(a,p,!1,!1,!0)}},register=(a,m={})=>{let f=get(u,a);const y=isBoolean(m.disabled)||isBoolean(e.disabled);return set(u,a,{...f||{},_f:{...f&&f._f?f._f:{ref:{name:a}},name:a,mount:!0,...m}}),h.mount.add(a),f?_updateDisabledField({field:f,disabled:isBoolean(m.disabled)?m.disabled:e.disabled,name:a,value:m.value}):updateValidAndValue(a,!0,m.value),{...y?{disabled:m.disabled||e.disabled}:{},...l.progressive?{required:!!m.required,min:getRuleValue(m.min),max:getRuleValue(m.max),minLength:getRuleValue(m.minLength),maxLength:getRuleValue(m.maxLength),pattern:getRuleValue(m.pattern)}:{},name:a,onChange:onChange,onBlur:onChange,ref:e=>{if(e){register(a,m),f=get(u,a);const l=isUndefined(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e,g=(e=>isRadioInput(e)||isCheckBoxInput(e))(l),h=f._f.refs||[];if(g?h.find(e=>e===l):l===f._f.ref)return;set(u,a,{_f:{...f._f,...g?{refs:[...h.filter(live),l,...Array.isArray(get(p,a))?[{}]:[]],ref:{type:l.type,name:a}}:{ref:l}}}),updateValidAndValue(a,!1,void 0,l)}else f=get(u,a,{}),f._f&&(f._f.mount=!1),(l.shouldUnregister||m.shouldUnregister)&&(!isNameInFieldArray(h.array,a)||!g.action)&&h.unMount.add(a)}}},_focusError=()=>l.shouldFocusError&&iterateFieldsByAction(u,_focusInput,h.mount),handleSubmit=(e,a)=>async p=>{let g;p&&(p.preventDefault&&p.preventDefault(),p.persist&&p.persist());let h=cloneObject(f);if(E.state.next({isSubmitting:!0}),l.resolver){const{errors:e,values:a}=await _executeSchema();m.errors=e,h=a}else await executeBuiltInValidation(u);if(unset(m.errors,"root"),isEmptyObject(m.errors)){E.state.next({errors:{}});try{await e(h,p)}catch(y){g=y}}else a&&await a({...m.errors},p),_focusError(),setTimeout(_focusError);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(m.errors)&&!g,submitCount:m.submitCount+1,errors:m.errors}),g)throw g},_reset=(a,l={})=>{const y=a?cloneObject(a):p,x=cloneObject(y),w=isEmptyObject(a),b=w?p:x;if(l.keepDefaultValues||(p=y),!l.keepValues){if(l.keepDirtyValues){const e=new Set([...h.mount,...Object.keys(getDirtyFields(p,f))]);for(const a of Array.from(e))get(m.dirtyFields,a)?set(b,a,get(f,a)):setValue(a,get(b,a))}else{if(Id&&isUndefined(a))for(const e of h.mount){const a=get(u,e);if(a&&a._f){const e=Array.isArray(a._f.refs)?a._f.refs[0]:a._f.ref;if(isHTMLElement(e)){const a=e.closest("form");if(a){a.reset();break}}}}u={}}f=e.shouldUnregister?l.keepDefaultValues?cloneObject(p):{}:cloneObject(b),E.array.next({values:{...b}}),E.values.next({values:{...b}})}h={mount:l.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},g.mount=!v.isValid||!!l.keepIsValid||!!l.keepDirtyValues,g.watch=!!e.shouldUnregister,E.state.next({submitCount:l.keepSubmitCount?m.submitCount:0,isDirty:!w&&(l.keepDirty?m.isDirty:!(!l.keepDefaultValues||deepEqual(a,p))),isSubmitted:!!l.keepIsSubmitted&&m.isSubmitted,dirtyFields:w?{}:l.keepDirtyValues?l.keepDefaultValues&&f?getDirtyFields(p,f):m.dirtyFields:l.keepDefaultValues&&a?getDirtyFields(p,a):l.keepDirty?m.dirtyFields:{},touchedFields:l.keepTouched?m.touchedFields:{},errors:l.keepErrors?m.errors:{},isSubmitSuccessful:!!l.keepIsSubmitSuccessful&&m.isSubmitSuccessful,isSubmitting:!1})},reset=(e,a)=>_reset(isFunction(e)?e(f):e,a);return{control:{register:register,unregister:unregister,getFieldState:getFieldState,handleSubmit:handleSubmit,setError:setError,_executeSchema:_executeSchema,_getWatch:_getWatch,_getDirty:_getDirty,_updateValid:_updateValid,_removeUnmounted:()=>{for(const e of h.unMount){const a=get(u,e);a&&(a._f.refs?a._f.refs.every(e=>!live(e)):!live(a._f.ref))&&unregister(e)}h.unMount=new Set},_updateFieldArray:(a,l=[],h,y,x=!0,w=!0)=>{if(y&&h&&!e.disabled){if(g.action=!0,w&&Array.isArray(get(u,a))){const e=h(get(u,a),y.argA,y.argB);x&&set(u,a,e)}if(w&&Array.isArray(get(m.errors,a))){const e=h(get(m.errors,a),y.argA,y.argB);x&&set(m.errors,a,e),((e,a)=>{!compact(get(e,a)).length&&unset(e,a)})(m.errors,a)}if(v.touchedFields&&w&&Array.isArray(get(m.touchedFields,a))){const e=h(get(m.touchedFields,a),y.argA,y.argB);x&&set(m.touchedFields,a,e)}v.dirtyFields&&(m.dirtyFields=getDirtyFields(p,f)),E.state.next({name:a,isDirty:_getDirty(a,l),dirtyFields:m.dirtyFields,errors:m.errors,isValid:m.isValid})}else set(f,a,l)},_updateDisabledField:_updateDisabledField,_getFieldArray:a=>compact(get(g.mount?f:p,a,e.shouldUnregister?get(p,a,[]):[])),_reset:_reset,_resetDefaultValues:()=>isFunction(l.defaultValues)&&l.defaultValues().then(e=>{reset(e,l.resetOptions),E.state.next({isLoading:!1})}),_updateFormState:e=>{m={...m,...e}},_disableForm:e=>{isBoolean(e)&&(E.state.next({disabled:e}),iterateFieldsByAction(u,(a,l)=>{const m=get(u,l);m&&(a.disabled=m._f.disabled||e,Array.isArray(m._f.refs)&&m._f.refs.forEach(a=>{a.disabled=m._f.disabled||e}))},0,!1))},_subjects:E,_proxyFormState:v,_setErrors:e=>{m.errors=e,E.state.next({errors:m.errors,isValid:!1})},get _fields(){return u},get _formValues(){return f},get _state(){return g},set _state(e){g=e},get _defaultValues(){return p},get _names(){return h},set _names(e){h=e},get _formState(){return m},set _formState(e){m=e},get _options(){return l},set _options(e){l={...l,...e}}},trigger:trigger,register:register,handleSubmit:handleSubmit,watch:(e,a)=>isFunction(e)?E.values.subscribe({next:l=>e(_getWatch(void 0,a),l)}):_getWatch(e,a,!0),setValue:setValue,getValues:getValues,reset:reset,resetField:(e,a={})=>{get(u,e)&&(isUndefined(a.defaultValue)?setValue(e,cloneObject(get(p,e))):(setValue(e,a.defaultValue),set(p,e,cloneObject(a.defaultValue))),a.keepTouched||unset(m.touchedFields,e),a.keepDirty||(unset(m.dirtyFields,e),m.isDirty=a.defaultValue?_getDirty(e,cloneObject(get(p,e))):_getDirty()),a.keepError||(unset(m.errors,e),v.isValid&&_updateValid()),E.state.next({...m}))},clearErrors:e=>{e&&convertToArrayPayload(e).forEach(e=>unset(m.errors,e)),E.state.next({errors:e?m.errors:{}})},unregister:unregister,setError:setError,setFocus:(e,a={})=>{const l=get(u,e),m=l&&l._f;if(m){const e=m.refs?m.refs[0]:m.ref;e.focus&&(e.focus(),a.shouldSelect&&e.select())}},getFieldState:getFieldState}}function useForm(e={}){const a=je.useRef(),l=je.useRef(),[m,u]=je.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:isFunction(e.defaultValues)?void 0:e.defaultValues});a.current||(a.current={...createFormControl(e),formState:m});const p=a.current.control;return p._options=e,useSubscribe({subject:p._subjects.state,next:e=>{shouldRenderFormState(e,p._proxyFormState,p._updateFormState,!0)&&u({...p._formState})}}),je.useEffect(()=>p._disableForm(e.disabled),[p,e.disabled]),je.useEffect(()=>{if(p._proxyFormState.isDirty){const e=p._getDirty();e!==m.isDirty&&p._subjects.state.next({isDirty:e})}},[p,m.isDirty]),je.useEffect(()=>{e.values&&!deepEqual(e.values,l.current)?(p._reset(e.values,p._options.resetOptions),l.current=e.values,u(e=>({...e}))):p._resetDefaultValues()},[e.values,p]),je.useEffect(()=>{e.errors&&p._setErrors(e.errors)},[e.errors,p]),je.useEffect(()=>{p._state.mount||(p._updateValid(),p._state.mount=!0),p._state.watch&&(p._state.watch=!1,p._subjects.state.next({...p._formState})),p._removeUnmounted()}),je.useEffect(()=>{e.shouldUnregister&&p._subjects.values.next({values:p._getWatch()})},[e.shouldUnregister,p]),je.useEffect(()=>{a.current&&(a.current.watch=a.current.watch.bind({}))},[m]),a.current.formState=getProxyFormState(m,p),a.current}const s=(e,a,l)=>{if(e&&"reportValidity"in e){const m=get(l,a);e.setCustomValidity(m&&m.message||""),e.reportValidity()}},o=(e,a)=>{for(const l in a.fields){const m=a.fields[l];m&&m.ref&&"reportValidity"in m.ref?s(m.ref,l,e):m.refs&&m.refs.forEach(a=>s(a,l,e))}},r=(e,a)=>{a.shouldUseNativeValidation&&o(e,a);const l={};for(const m in e){const u=get(a.fields,m),p=Object.assign(e[m]||{},{ref:u&&u.ref});if(i(a.names||Object.keys(e),m)){const e=Object.assign({},get(l,m));set(e,"root",p),set(l,m,e)}else set(l,m,p)}return l},i=(e,a)=>e.some(e=>e.startsWith(a+"."));var tu,au,ru,n=function(e,a){for(var l={};e.length;){var m=e[0],u=m.code,p=m.message,f=m.path.join(".");if(!l[f])if("unionErrors"in m){var g=m.unionErrors[0].errors[0];l[f]={message:g.message,type:g.code}}else l[f]={message:p,type:u};if("unionErrors"in m&&m.unionErrors.forEach(function(a){return a.errors.forEach(function(a){return e.push(a)})}),a){var h=l[f].types,y=h&&h[m.code];l[f]=appendErrors(f,a,l,u,y?[].concat(y,m.message):m.message)}e.shift()}return l},t=function(e,a,l){return void 0===l&&(l={}),function(m,u,p){try{return Promise.resolve(function(u,f){try{var g=Promise.resolve(e["sync"===l.mode?"parse":"parseAsync"](m,a)).then(function(e){return p.shouldUseNativeValidation&&o({},p),{errors:{},values:l.raw?m:e}})}catch(h){return f(h)}return g&&g.then?g.then(void 0,f):g}(0,function(e){if(a=e,Array.isArray(null==a?void 0:a.errors))return{values:{},errors:r(n(e.errors,!p.shouldUseNativeValidation&&"all"===p.criteriaMode),p)};var a;throw e}))}catch(f){return Promise.reject(f)}}};(au=tu||(tu={})).assertEqual=e=>{},au.assertIs=function assertIs(e){},au.assertNever=function assertNever(e){throw new Error},au.arrayToEnum=e=>{const a={};for(const l of e)a[l]=l;return a},au.getValidEnumValues=e=>{const a=au.objectKeys(e).filter(a=>"number"!=typeof e[e[a]]),l={};for(const m of a)l[m]=e[m];return au.objectValues(l)},au.objectValues=e=>au.objectKeys(e).map(function(a){return e[a]}),au.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const a=[];for(const l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.push(l);return a},au.find=(e,a)=>{for(const l of e)if(a(l))return l},au.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,au.joinValues=function joinValues(e,a=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(a)},au.jsonStringifyReplacer=(e,a)=>"bigint"==typeof a?a.toString():a,(ru||(ru={})).mergeShapes=(e,a)=>({...e,...a});const nu=tu.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return nu.undefined;case"string":return nu.string;case"number":return Number.isNaN(e)?nu.nan:nu.number;case"boolean":return nu.boolean;case"function":return nu.function;case"bigint":return nu.bigint;case"symbol":return nu.symbol;case"object":return Array.isArray(e)?nu.array:null===e?nu.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?nu.promise:"undefined"!=typeof Map&&e instanceof Map?nu.map:"undefined"!=typeof Set&&e instanceof Set?nu.set:"undefined"!=typeof Date&&e instanceof Date?nu.date:nu.object;default:return nu.unknown}},su=tu.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(e){return e.message},l={_errors:[]},processError=e=>{for(const m of e.issues)if("invalid_union"===m.code)m.unionErrors.map(processError);else if("invalid_return_type"===m.code)processError(m.returnTypeError);else if("invalid_arguments"===m.code)processError(m.argumentsError);else if(0===m.path.length)l._errors.push(a(m));else{let e=l,u=0;for(;u<m.path.length;){const l=m.path[u];u===m.path.length-1?(e[l]=e[l]||{_errors:[]},e[l]._errors.push(a(m))):e[l]=e[l]||{_errors:[]},e=e[l],u++}}};return processError(this),l}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tu.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const a={},l=[];for(const m of this.issues)m.path.length>0?(a[m.path[0]]=a[m.path[0]]||[],a[m.path[0]].push(e(m))):l.push(e(m));return{formErrors:l,fieldErrors:a}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,a)=>{let l;switch(e.code){case su.invalid_type:l=e.received===nu.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case su.invalid_literal:l=`Invalid literal value, expected ${JSON.stringify(e.expected,tu.jsonStringifyReplacer)}`;break;case su.unrecognized_keys:l=`Unrecognized key(s) in object: ${tu.joinValues(e.keys,", ")}`;break;case su.invalid_union:l="Invalid input";break;case su.invalid_union_discriminator:l=`Invalid discriminator value. Expected ${tu.joinValues(e.options)}`;break;case su.invalid_enum_value:l=`Invalid enum value. Expected ${tu.joinValues(e.options)}, received '${e.received}'`;break;case su.invalid_arguments:l="Invalid function arguments";break;case su.invalid_return_type:l="Invalid function return type";break;case su.invalid_date:l="Invalid date";break;case su.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(l=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(l=`${l} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?l=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?l=`Invalid input: must end with "${e.validation.endsWith}"`:tu.assertNever(e.validation):l="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case su.too_small:l="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case su.too_big:l="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case su.custom:l="Invalid input";break;case su.invalid_intersection_types:l="Intersection results could not be merged";break;case su.not_multiple_of:l=`Number must be a multiple of ${e.multipleOf}`;break;case su.not_finite:l="Number must be finite";break;default:l=a.defaultError,tu.assertNever(e)}return{message:l}};let ou=errorMap;function addIssueToContext(e,a){const l=function getErrorMap(){return ou}(),m=(e=>{const{data:a,path:l,errorMaps:m,issueData:u}=e,p=[...l,...u.path||[]],f={...u,path:p};if(void 0!==u.message)return{...u,path:p,message:u.message};let g="";const h=m.filter(e=>!!e).slice().reverse();for(const y of h)g=y(f,{data:a,defaultError:g}).message;return{...u,path:p,message:g}})({issueData:a,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,l,l===errorMap?void 0:errorMap].filter(e=>!!e)});e.common.issues.push(m)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,a){const l=[];for(const m of a){if("aborted"===m.status)return lu;"dirty"===m.status&&e.dirty(),l.push(m.value)}return{status:e.value,value:l}}static async mergeObjectAsync(e,a){const l=[];for(const m of a){const e=await m.key,a=await m.value;l.push({key:e,value:a})}return ParseStatus.mergeObjectSync(e,l)}static mergeObjectSync(e,a){const l={};for(const m of a){const{key:a,value:u}=m;if("aborted"===a.status)return lu;if("aborted"===u.status)return lu;"dirty"===a.status&&e.dirty(),"dirty"===u.status&&e.dirty(),"__proto__"===a.value||void 0===u.value&&!m.alwaysSet||(l[a.value]=u.value)}return{status:e.value,value:l}}}const lu=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>"aborted"===e.status,isDirty=e=>"dirty"===e.status,isValid=e=>"valid"===e.status,isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise;var iu,cu;(cu=iu||(iu={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},cu.toString=e=>"string"==typeof e?e:e?.message;class ParseInputLazyPath{constructor(e,a,l,m){this._cachedPath=[],this.parent=e,this.data=a,this._path=l,this._key=m}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,a)=>{if(isValid(a))return{success:!0,data:a.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new ZodError(e.common.issues);return this._error=a,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:a,invalid_type_error:l,required_error:m,description:u}=e;if(a&&(l||m))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(a)return{errorMap:a,description:u};return{errorMap:(a,u)=>{const{message:p}=e;return"invalid_enum_value"===a.code?{message:p??u.defaultError}:void 0===u.data?{message:p??m??u.defaultError}:"invalid_type"!==a.code?{message:u.defaultError}:{message:p??l??u.defaultError}},description:u}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const a=this._parse(e);if(isAsync(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){const a=this._parse(e);return Promise.resolve(a)}parse(e,a){const l=this.safeParse(e,a);if(l.success)return l.data;throw l.error}safeParse(e,a){const l={common:{issues:[],async:a?.async??!1,contextualErrorMap:a?.errorMap},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},m=this._parseSync({data:e,path:l.path,parent:l});return handleResult(l,m)}"~validate"(e){const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const l=this._parseSync({data:e,path:[],parent:a});return isValid(l)?{value:l.value}:{issues:a.common.issues}}catch(dE){dE?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(e=>isValid(e)?{value:e.value}:{issues:a.common.issues})}async parseAsync(e,a){const l=await this.safeParseAsync(e,a);if(l.success)return l.data;throw l.error}async safeParseAsync(e,a){const l={common:{issues:[],contextualErrorMap:a?.errorMap,async:!0},path:a?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},m=this._parse({data:e,path:l.path,parent:l}),u=await(isAsync(m)?m:Promise.resolve(m));return handleResult(l,u)}refine(e,a){const getIssueProperties=e=>"string"==typeof a||void 0===a?{message:a}:"function"==typeof a?a(e):a;return this._refinement((a,l)=>{const m=e(a),setError=()=>l.addIssue({code:su.custom,...getIssueProperties(a)});return"undefined"!=typeof Promise&&m instanceof Promise?m.then(e=>!!e||(setError(),!1)):!!m||(setError(),!1)})}refinement(e,a){return this._refinement((l,m)=>!!e(l)||(m.addIssue("function"==typeof a?a(l,m):a),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:Cu.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:Cu.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const a="function"==typeof e?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:a,typeName:Cu.ZodDefault})}brand(){return new ZodBranded({typeName:Cu.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const a="function"==typeof e?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:a,typeName:Cu.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mu=/^c[^\s-]{8,}$/i,du=/^[0-9a-z]+$/,uu=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pu=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fu=/^[a-z0-9_-]{21}$/i,gu=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hu=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yu=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let vu;const Eu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_u=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ku="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Su=new RegExp(`^${ku}$`);function timeRegexSource(e){let a="[0-5]\\d";e.precision?a=`${a}\\.\\d{${e.precision}}`:null==e.precision&&(a=`${a}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${a})${e.precision?"+":"?"}`}function timeRegex(e){return new RegExp(`^${timeRegexSource(e)}$`)}function datetimeRegex(e){let a=`${ku}T${timeRegexSource(e)}`;const l=[];return l.push(e.local?"Z?":"Z"),e.offset&&l.push("([+-]\\d{2}:?\\d{2})"),a=`${a}(${l.join("|")})`,new RegExp(`^${a}$`)}function isValidIP(e,a){return!("v4"!==a&&a||!Eu.test(e))||!("v6"!==a&&a||!wu.test(e))}function isValidJWT(e,a){if(!gu.test(e))return!1;try{const[l]=e.split("."),m=l.replace(/-/g,"+").replace(/_/g,"/").padEnd(l.length+(4-l.length%4)%4,"="),u=JSON.parse(atob(m));return"object"==typeof u&&null!==u&&((!("typ"in u)||"JWT"===u?.typ)&&(!!u.alg&&(!a||u.alg===a)))}catch{return!1}}function isValidCidr(e,a){return!("v4"!==a&&a||!xu.test(e))||!("v6"!==a&&a||!bu.test(e))}class ZodString extends ZodType{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==nu.string){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.string,received:a.parsedType}),lu}const a=new ParseStatus;let l;for(const m of this._def.checks)if("min"===m.kind)e.data.length<m.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),a.dirty());else if("max"===m.kind)e.data.length>m.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!1,message:m.message}),a.dirty());else if("length"===m.kind){const u=e.data.length>m.value,p=e.data.length<m.value;(u||p)&&(l=this._getOrReturnCtx(e,l),u?addIssueToContext(l,{code:su.too_big,maximum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message}):p&&addIssueToContext(l,{code:su.too_small,minimum:m.value,type:"string",inclusive:!0,exact:!0,message:m.message}),a.dirty())}else if("email"===m.kind)yu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"email",code:su.invalid_string,message:m.message}),a.dirty());else if("emoji"===m.kind)vu||(vu=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),vu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"emoji",code:su.invalid_string,message:m.message}),a.dirty());else if("uuid"===m.kind)pu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"uuid",code:su.invalid_string,message:m.message}),a.dirty());else if("nanoid"===m.kind)fu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"nanoid",code:su.invalid_string,message:m.message}),a.dirty());else if("cuid"===m.kind)mu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cuid",code:su.invalid_string,message:m.message}),a.dirty());else if("cuid2"===m.kind)du.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cuid2",code:su.invalid_string,message:m.message}),a.dirty());else if("ulid"===m.kind)uu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"ulid",code:su.invalid_string,message:m.message}),a.dirty());else if("url"===m.kind)try{new URL(e.data)}catch{l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"url",code:su.invalid_string,message:m.message}),a.dirty()}else if("regex"===m.kind){m.regex.lastIndex=0;m.regex.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"regex",code:su.invalid_string,message:m.message}),a.dirty())}else if("trim"===m.kind)e.data=e.data.trim();else if("includes"===m.kind)e.data.includes(m.value,m.position)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:{includes:m.value,position:m.position},message:m.message}),a.dirty());else if("toLowerCase"===m.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===m.kind)e.data=e.data.toUpperCase();else if("startsWith"===m.kind)e.data.startsWith(m.value)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:{startsWith:m.value},message:m.message}),a.dirty());else if("endsWith"===m.kind)e.data.endsWith(m.value)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:{endsWith:m.value},message:m.message}),a.dirty());else if("datetime"===m.kind){datetimeRegex(m).test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:"datetime",message:m.message}),a.dirty())}else if("date"===m.kind){Su.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:"date",message:m.message}),a.dirty())}else if("time"===m.kind){timeRegex(m).test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.invalid_string,validation:"time",message:m.message}),a.dirty())}else"duration"===m.kind?hu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"duration",code:su.invalid_string,message:m.message}),a.dirty()):"ip"===m.kind?isValidIP(e.data,m.version)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"ip",code:su.invalid_string,message:m.message}),a.dirty()):"jwt"===m.kind?isValidJWT(e.data,m.alg)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"jwt",code:su.invalid_string,message:m.message}),a.dirty()):"cidr"===m.kind?isValidCidr(e.data,m.version)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"cidr",code:su.invalid_string,message:m.message}),a.dirty()):"base64"===m.kind?Nu.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"base64",code:su.invalid_string,message:m.message}),a.dirty()):"base64url"===m.kind?_u.test(e.data)||(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{validation:"base64url",code:su.invalid_string,message:m.message}),a.dirty()):tu.assertNever(m);return{status:a.value,value:e.data}}_regex(e,a,l){return this.refinement(a=>e.test(a),{validation:a,code:su.invalid_string,...iu.errToObj(l)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...iu.errToObj(e)})}url(e){return this._addCheck({kind:"url",...iu.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...iu.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...iu.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...iu.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...iu.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...iu.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...iu.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...iu.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...iu.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...iu.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...iu.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...iu.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...iu.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...iu.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...iu.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,...iu.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a?.position,...iu.errToObj(a?.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,...iu.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,...iu.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,...iu.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,...iu.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,...iu.errToObj(a)})}nonempty(e){return this.min(1,iu.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const a of this._def.checks)"min"===a.kind&&(null===e||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(const a of this._def.checks)"max"===a.kind&&(null===e||a.value<e)&&(e=a.value);return e}}function floatSafeRemainder(e,a){const l=(e.toString().split(".")[1]||"").length,m=(a.toString().split(".")[1]||"").length,u=l>m?l:m;return Number.parseInt(e.toFixed(u).replace(".",""))%Number.parseInt(a.toFixed(u).replace(".",""))/10**u}ZodString.create=e=>new ZodString({checks:[],typeName:Cu.ZodString,coerce:e?.coerce??!1,...processCreateParams(e)});class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==nu.number){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.number,received:a.parsedType}),lu}let a;const l=new ParseStatus;for(const m of this._def.checks)if("int"===m.kind)tu.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.invalid_type,expected:"integer",received:"float",message:m.message}),l.dirty());else if("min"===m.kind){(m.inclusive?e.data<m.value:e.data<=m.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.too_small,minimum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),l.dirty())}else if("max"===m.kind){(m.inclusive?e.data>m.value:e.data>=m.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.too_big,maximum:m.value,type:"number",inclusive:m.inclusive,exact:!1,message:m.message}),l.dirty())}else"multipleOf"===m.kind?0!==floatSafeRemainder(e.data,m.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.not_multiple_of,multipleOf:m.value,message:m.message}),l.dirty()):"finite"===m.kind?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.not_finite,message:m.message}),l.dirty()):tu.assertNever(m);return{status:l.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,iu.toString(a))}gt(e,a){return this.setLimit("min",e,!1,iu.toString(a))}lte(e,a){return this.setLimit("max",e,!0,iu.toString(a))}lt(e,a){return this.setLimit("max",e,!1,iu.toString(a))}setLimit(e,a,l,m){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:l,message:iu.toString(m)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:iu.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:iu.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:iu.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:iu.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:iu.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:iu.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:iu.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:iu.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:iu.toString(e)})}get minValue(){let e=null;for(const a of this._def.checks)"min"===a.kind&&(null===e||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)"max"===a.kind&&(null===e||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&tu.isInteger(e.value))}get isFinite(){let e=null,a=null;for(const l of this._def.checks){if("finite"===l.kind||"int"===l.kind||"multipleOf"===l.kind)return!0;"min"===l.kind?(null===a||l.value>a)&&(a=l.value):"max"===l.kind&&(null===e||l.value<e)&&(e=l.value)}return Number.isFinite(a)&&Number.isFinite(e)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:Cu.ZodNumber,coerce:e?.coerce||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==nu.bigint)return this._getInvalidInput(e);let a;const l=new ParseStatus;for(const m of this._def.checks)if("min"===m.kind){(m.inclusive?e.data<m.value:e.data<=m.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.too_small,type:"bigint",minimum:m.value,inclusive:m.inclusive,message:m.message}),l.dirty())}else if("max"===m.kind){(m.inclusive?e.data>m.value:e.data>=m.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.too_big,type:"bigint",maximum:m.value,inclusive:m.inclusive,message:m.message}),l.dirty())}else"multipleOf"===m.kind?e.data%m.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:su.not_multiple_of,multipleOf:m.value,message:m.message}),l.dirty()):tu.assertNever(m);return{status:l.value,value:e.data}}_getInvalidInput(e){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.bigint,received:a.parsedType}),lu}gte(e,a){return this.setLimit("min",e,!0,iu.toString(a))}gt(e,a){return this.setLimit("min",e,!1,iu.toString(a))}lte(e,a){return this.setLimit("max",e,!0,iu.toString(a))}lt(e,a){return this.setLimit("max",e,!1,iu.toString(a))}setLimit(e,a,l,m){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:l,message:iu.toString(m)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:iu.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:iu.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:iu.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:iu.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:iu.toString(a)})}get minValue(){let e=null;for(const a of this._def.checks)"min"===a.kind&&(null===e||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)"max"===a.kind&&(null===e||a.value<e)&&(e=a.value);return e}}ZodBigInt.create=e=>new ZodBigInt({checks:[],typeName:Cu.ZodBigInt,coerce:e?.coerce??!1,...processCreateParams(e)});class ZodBoolean extends ZodType{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==nu.boolean){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.boolean,received:a.parsedType}),lu}return OK(e.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:Cu.ZodBoolean,coerce:e?.coerce||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==nu.date){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.date,received:a.parsedType}),lu}if(Number.isNaN(e.data.getTime())){return addIssueToContext(this._getOrReturnCtx(e),{code:su.invalid_date}),lu}const a=new ParseStatus;let l;for(const m of this._def.checks)"min"===m.kind?e.data.getTime()<m.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.too_small,message:m.message,inclusive:!0,exact:!1,minimum:m.value,type:"date"}),a.dirty()):"max"===m.kind?e.data.getTime()>m.value&&(l=this._getOrReturnCtx(e,l),addIssueToContext(l,{code:su.too_big,message:m.message,inclusive:!0,exact:!1,maximum:m.value,type:"date"}),a.dirty()):tu.assertNever(m);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:iu.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:iu.toString(a)})}get minDate(){let e=null;for(const a of this._def.checks)"min"===a.kind&&(null===e||a.value>e)&&(e=a.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const a of this._def.checks)"max"===a.kind&&(null===e||a.value<e)&&(e=a.value);return null!=e?new Date(e):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:e?.coerce||!1,typeName:Cu.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==nu.symbol){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.symbol,received:a.parsedType}),lu}return OK(e.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:Cu.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==nu.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.undefined,received:a.parsedType}),lu}return OK(e.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:Cu.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==nu.null){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.null,received:a.parsedType}),lu}return OK(e.data)}}ZodNull.create=e=>new ZodNull({typeName:Cu.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=e=>new ZodAny({typeName:Cu.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:Cu.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(e){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.never,received:a.parsedType}),lu}}ZodNever.create=e=>new ZodNever({typeName:Cu.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==nu.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.void,received:a.parsedType}),lu}return OK(e.data)}}ZodVoid.create=e=>new ZodVoid({typeName:Cu.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(e){const{ctx:a,status:l}=this._processInputParams(e),m=this._def;if(a.parsedType!==nu.array)return addIssueToContext(a,{code:su.invalid_type,expected:nu.array,received:a.parsedType}),lu;if(null!==m.exactLength){const e=a.data.length>m.exactLength.value,u=a.data.length<m.exactLength.value;(e||u)&&(addIssueToContext(a,{code:e?su.too_big:su.too_small,minimum:u?m.exactLength.value:void 0,maximum:e?m.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:m.exactLength.message}),l.dirty())}if(null!==m.minLength&&a.data.length<m.minLength.value&&(addIssueToContext(a,{code:su.too_small,minimum:m.minLength.value,type:"array",inclusive:!0,exact:!1,message:m.minLength.message}),l.dirty()),null!==m.maxLength&&a.data.length>m.maxLength.value&&(addIssueToContext(a,{code:su.too_big,maximum:m.maxLength.value,type:"array",inclusive:!0,exact:!1,message:m.maxLength.message}),l.dirty()),a.common.async)return Promise.all([...a.data].map((e,l)=>m.type._parseAsync(new ParseInputLazyPath(a,e,a.path,l)))).then(e=>ParseStatus.mergeArray(l,e));const u=[...a.data].map((e,l)=>m.type._parseSync(new ParseInputLazyPath(a,e,a.path,l)));return ParseStatus.mergeArray(l,u)}get element(){return this._def.type}min(e,a){return new ZodArray({...this._def,minLength:{value:e,message:iu.toString(a)}})}max(e,a){return new ZodArray({...this._def,maxLength:{value:e,message:iu.toString(a)}})}length(e,a){return new ZodArray({...this._def,exactLength:{value:e,message:iu.toString(a)}})}nonempty(e){return this.min(1,e)}}function deepPartialify(e){if(e instanceof ZodObject){const a={};for(const l in e.shape){const m=e.shape[l];a[l]=ZodOptional.create(deepPartialify(m))}return new ZodObject({...e._def,shape:()=>a})}return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(e=>deepPartialify(e))):e}ZodArray.create=(e,a)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Cu.ZodArray,...processCreateParams(a)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),a=tu.objectKeys(e);return this._cached={shape:e,keys:a},this._cached}_parse(e){if(this._getType(e)!==nu.object){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.object,received:a.parsedType}),lu}const{status:a,ctx:l}=this._processInputParams(e),{shape:m,keys:u}=this._getCached(),p=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const g in l.data)u.includes(g)||p.push(g);const f=[];for(const g of u){const e=m[g],a=l.data[g];f.push({key:{status:"valid",value:g},value:e._parse(new ParseInputLazyPath(l,a,l.path,g)),alwaysSet:g in l.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const a of p)f.push({key:{status:"valid",value:a},value:{status:"valid",value:l.data[a]}});else if("strict"===e)p.length>0&&(addIssueToContext(l,{code:su.unrecognized_keys,keys:p}),a.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const a of p){const m=l.data[a];f.push({key:{status:"valid",value:a},value:e._parse(new ParseInputLazyPath(l,m,l.path,a)),alwaysSet:a in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const e=[];for(const a of f){const l=await a.key,m=await a.value;e.push({key:l,value:m,alwaysSet:a.alwaysSet})}return e}).then(e=>ParseStatus.mergeObjectSync(a,e)):ParseStatus.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return iu.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(a,l)=>{const m=this._def.errorMap?.(a,l).message??l.defaultError;return"unrecognized_keys"===a.code?{message:iu.errToObj(e).message??m}:{message:m}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Cu.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const a={};for(const l of tu.objectKeys(e))e[l]&&this.shape[l]&&(a[l]=this.shape[l]);return new ZodObject({...this._def,shape:()=>a})}omit(e){const a={};for(const l of tu.objectKeys(this.shape))e[l]||(a[l]=this.shape[l]);return new ZodObject({...this._def,shape:()=>a})}deepPartial(){return deepPartialify(this)}partial(e){const a={};for(const l of tu.objectKeys(this.shape)){const m=this.shape[l];e&&!e[l]?a[l]=m:a[l]=m.optional()}return new ZodObject({...this._def,shape:()=>a})}required(e){const a={};for(const l of tu.objectKeys(this.shape))if(e&&!e[l])a[l]=this.shape[l];else{let e=this.shape[l];for(;e instanceof ZodOptional;)e=e._def.innerType;a[l]=e}return new ZodObject({...this._def,shape:()=>a})}keyof(){return createZodEnum(tu.objectKeys(this.shape))}}ZodObject.create=(e,a)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:Cu.ZodObject,...processCreateParams(a)}),ZodObject.strictCreate=(e,a)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:Cu.ZodObject,...processCreateParams(a)}),ZodObject.lazycreate=(e,a)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:Cu.ZodObject,...processCreateParams(a)});class ZodUnion extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),l=this._def.options;if(a.common.async)return Promise.all(l.map(async e=>{const l={...a,common:{...a.common,issues:[]},parent:null};return{result:await e._parseAsync({data:a.data,path:a.path,parent:l}),ctx:l}})).then(function handleResults(e){for(const a of e)if("valid"===a.result.status)return a.result;for(const m of e)if("dirty"===m.result.status)return a.common.issues.push(...m.ctx.common.issues),m.result;const l=e.map(e=>new ZodError(e.ctx.common.issues));return addIssueToContext(a,{code:su.invalid_union,unionErrors:l}),lu});{let e;const m=[];for(const p of l){const l={...a,common:{...a.common,issues:[]},parent:null},u=p._parseSync({data:a.data,path:a.path,parent:l});if("valid"===u.status)return u;"dirty"!==u.status||e||(e={result:u,ctx:l}),l.common.issues.length&&m.push(l.common.issues)}if(e)return a.common.issues.push(...e.ctx.common.issues),e.result;const u=m.map(e=>new ZodError(e));return addIssueToContext(a,{code:su.invalid_union,unionErrors:u}),lu}}get options(){return this._def.options}}function mergeValues(e,a){const l=getParsedType(e),m=getParsedType(a);if(e===a)return{valid:!0,data:e};if(l===nu.object&&m===nu.object){const l=tu.objectKeys(a),m=tu.objectKeys(e).filter(e=>-1!==l.indexOf(e)),u={...e,...a};for(const p of m){const l=mergeValues(e[p],a[p]);if(!l.valid)return{valid:!1};u[p]=l.data}return{valid:!0,data:u}}if(l===nu.array&&m===nu.array){if(e.length!==a.length)return{valid:!1};const l=[];for(let m=0;m<e.length;m++){const u=mergeValues(e[m],a[m]);if(!u.valid)return{valid:!1};l.push(u.data)}return{valid:!0,data:l}}return l===nu.date&&m===nu.date&&+e===+a?{valid:!0,data:e}:{valid:!1}}ZodUnion.create=(e,a)=>new ZodUnion({options:e,typeName:Cu.ZodUnion,...processCreateParams(a)});class ZodIntersection extends ZodType{_parse(e){const{status:a,ctx:l}=this._processInputParams(e),handleParsed=(e,m)=>{if(isAborted(e)||isAborted(m))return lu;const u=mergeValues(e.value,m.value);return u.valid?((isDirty(e)||isDirty(m))&&a.dirty(),{status:a.value,value:u.data}):(addIssueToContext(l,{code:su.invalid_intersection_types}),lu)};return l.common.async?Promise.all([this._def.left._parseAsync({data:l.data,path:l.path,parent:l}),this._def.right._parseAsync({data:l.data,path:l.path,parent:l})]).then(([e,a])=>handleParsed(e,a)):handleParsed(this._def.left._parseSync({data:l.data,path:l.path,parent:l}),this._def.right._parseSync({data:l.data,path:l.path,parent:l}))}}ZodIntersection.create=(e,a,l)=>new ZodIntersection({left:e,right:a,typeName:Cu.ZodIntersection,...processCreateParams(l)});class ZodTuple extends ZodType{_parse(e){const{status:a,ctx:l}=this._processInputParams(e);if(l.parsedType!==nu.array)return addIssueToContext(l,{code:su.invalid_type,expected:nu.array,received:l.parsedType}),lu;if(l.data.length<this._def.items.length)return addIssueToContext(l,{code:su.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lu;!this._def.rest&&l.data.length>this._def.items.length&&(addIssueToContext(l,{code:su.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const m=[...l.data].map((e,a)=>{const m=this._def.items[a]||this._def.rest;return m?m._parse(new ParseInputLazyPath(l,e,l.path,a)):null}).filter(e=>!!e);return l.common.async?Promise.all(m).then(e=>ParseStatus.mergeArray(a,e)):ParseStatus.mergeArray(a,m)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(e,a)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:Cu.ZodTuple,rest:null,...processCreateParams(a)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:l}=this._processInputParams(e);if(l.parsedType!==nu.map)return addIssueToContext(l,{code:su.invalid_type,expected:nu.map,received:l.parsedType}),lu;const m=this._def.keyType,u=this._def.valueType,p=[...l.data.entries()].map(([e,a],p)=>({key:m._parse(new ParseInputLazyPath(l,e,l.path,[p,"key"])),value:u._parse(new ParseInputLazyPath(l,a,l.path,[p,"value"]))}));if(l.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const l of p){const m=await l.key,u=await l.value;if("aborted"===m.status||"aborted"===u.status)return lu;"dirty"!==m.status&&"dirty"!==u.status||a.dirty(),e.set(m.value,u.value)}return{status:a.value,value:e}})}{const e=new Map;for(const l of p){const m=l.key,u=l.value;if("aborted"===m.status||"aborted"===u.status)return lu;"dirty"!==m.status&&"dirty"!==u.status||a.dirty(),e.set(m.value,u.value)}return{status:a.value,value:e}}}}ZodMap.create=(e,a,l)=>new ZodMap({valueType:a,keyType:e,typeName:Cu.ZodMap,...processCreateParams(l)});class ZodSet extends ZodType{_parse(e){const{status:a,ctx:l}=this._processInputParams(e);if(l.parsedType!==nu.set)return addIssueToContext(l,{code:su.invalid_type,expected:nu.set,received:l.parsedType}),lu;const m=this._def;null!==m.minSize&&l.data.size<m.minSize.value&&(addIssueToContext(l,{code:su.too_small,minimum:m.minSize.value,type:"set",inclusive:!0,exact:!1,message:m.minSize.message}),a.dirty()),null!==m.maxSize&&l.data.size>m.maxSize.value&&(addIssueToContext(l,{code:su.too_big,maximum:m.maxSize.value,type:"set",inclusive:!0,exact:!1,message:m.maxSize.message}),a.dirty());const u=this._def.valueType;function finalizeSet(e){const l=new Set;for(const m of e){if("aborted"===m.status)return lu;"dirty"===m.status&&a.dirty(),l.add(m.value)}return{status:a.value,value:l}}const p=[...l.data.values()].map((e,a)=>u._parse(new ParseInputLazyPath(l,e,l.path,a)));return l.common.async?Promise.all(p).then(e=>finalizeSet(e)):finalizeSet(p)}min(e,a){return new ZodSet({...this._def,minSize:{value:e,message:iu.toString(a)}})}max(e,a){return new ZodSet({...this._def,maxSize:{value:e,message:iu.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}}ZodSet.create=(e,a)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:Cu.ZodSet,...processCreateParams(a)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}ZodLazy.create=(e,a)=>new ZodLazy({getter:e,typeName:Cu.ZodLazy,...processCreateParams(a)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{received:a.data,code:su.invalid_literal,expected:this._def.value}),lu}return{status:"valid",value:e.data}}get value(){return this._def.value}}function createZodEnum(e,a){return new ZodEnum({values:e,typeName:Cu.ZodEnum,...processCreateParams(a)})}ZodLiteral.create=(e,a)=>new ZodLiteral({value:e,typeName:Cu.ZodLiteral,...processCreateParams(a)});class ZodEnum extends ZodType{_parse(e){if("string"!=typeof e.data){const a=this._getOrReturnCtx(e),l=this._def.values;return addIssueToContext(a,{expected:tu.joinValues(l),received:a.parsedType,code:su.invalid_type}),lu}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const a=this._getOrReturnCtx(e),l=this._def.values;return addIssueToContext(a,{received:a.data,code:su.invalid_enum_value,options:l}),lu}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const a of this._def.values)e[a]=a;return e}get Values(){const e={};for(const a of this._def.values)e[a]=a;return e}get Enum(){const e={};for(const a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return ZodEnum.create(e,{...this._def,...a})}exclude(e,a=this._def){return ZodEnum.create(this.options.filter(a=>!e.includes(a)),{...this._def,...a})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const a=tu.getValidEnumValues(this._def.values),l=this._getOrReturnCtx(e);if(l.parsedType!==nu.string&&l.parsedType!==nu.number){const e=tu.objectValues(a);return addIssueToContext(l,{expected:tu.joinValues(e),received:l.parsedType,code:su.invalid_type}),lu}if(this._cache||(this._cache=new Set(tu.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=tu.objectValues(a);return addIssueToContext(l,{received:l.data,code:su.invalid_enum_value,options:e}),lu}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,a)=>new ZodNativeEnum({values:e,typeName:Cu.ZodNativeEnum,...processCreateParams(a)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==nu.promise&&!1===a.common.async)return addIssueToContext(a,{code:su.invalid_type,expected:nu.promise,received:a.parsedType}),lu;const l=a.parsedType===nu.promise?a.data:Promise.resolve(a.data);return OK(l.then(e=>this._def.type.parseAsync(e,{path:a.path,errorMap:a.common.contextualErrorMap})))}}ZodPromise.create=(e,a)=>new ZodPromise({type:e,typeName:Cu.ZodPromise,...processCreateParams(a)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Cu.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:a,ctx:l}=this._processInputParams(e),m=this._def.effect||null,u={addIssue:e=>{addIssueToContext(l,e),e.fatal?a.abort():a.dirty()},get path(){return l.path}};if(u.addIssue=u.addIssue.bind(u),"preprocess"===m.type){const e=m.transform(l.data,u);if(l.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===a.value)return lu;const m=await this._def.schema._parseAsync({data:e,path:l.path,parent:l});return"aborted"===m.status?lu:"dirty"===m.status||"dirty"===a.value?DIRTY(m.value):m});{if("aborted"===a.value)return lu;const m=this._def.schema._parseSync({data:e,path:l.path,parent:l});return"aborted"===m.status?lu:"dirty"===m.status||"dirty"===a.value?DIRTY(m.value):m}}if("refinement"===m.type){const executeRefinement=e=>{const a=m.refinement(e,u);if(l.common.async)return Promise.resolve(a);if(a instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===l.common.async){const e=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});return"aborted"===e.status?lu:("dirty"===e.status&&a.dirty(),executeRefinement(e.value),{status:a.value,value:e.value})}return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(e=>"aborted"===e.status?lu:("dirty"===e.status&&a.dirty(),executeRefinement(e.value).then(()=>({status:a.value,value:e.value}))))}if("transform"===m.type){if(!1===l.common.async){const e=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(!isValid(e))return lu;const p=m.transform(e.value,u);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:p}}return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(e=>isValid(e)?Promise.resolve(m.transform(e.value,u)).then(e=>({status:a.value,value:e})):lu)}tu.assertNever(m)}}ZodEffects.create=(e,a,l)=>new ZodEffects({schema:e,typeName:Cu.ZodEffects,effect:a,...processCreateParams(l)}),ZodEffects.createWithPreprocess=(e,a,l)=>new ZodEffects({schema:a,effect:{type:"preprocess",transform:e},typeName:Cu.ZodEffects,...processCreateParams(l)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===nu.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,a)=>new ZodOptional({innerType:e,typeName:Cu.ZodOptional,...processCreateParams(a)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===nu.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,a)=>new ZodNullable({innerType:e,typeName:Cu.ZodNullable,...processCreateParams(a)});class ZodDefault extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e);let l=a.data;return a.parsedType===nu.undefined&&(l=this._def.defaultValue()),this._def.innerType._parse({data:l,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,a)=>new ZodDefault({innerType:e,typeName:Cu.ZodDefault,defaultValue:"function"==typeof a.default?a.default:()=>a.default,...processCreateParams(a)});class ZodCatch extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),l={...a,common:{...a.common,issues:[]}},m=this._def.innerType._parse({data:l.data,path:l.path,parent:{...l}});return isAsync(m)?m.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ZodError(l.common.issues)},input:l.data})})):{status:"valid",value:"valid"===m.status?m.value:this._def.catchValue({get error(){return new ZodError(l.common.issues)},input:l.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,a)=>new ZodCatch({innerType:e,typeName:Cu.ZodCatch,catchValue:"function"==typeof a.catch?a.catch:()=>a.catch,...processCreateParams(a)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==nu.nan){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:su.invalid_type,expected:nu.nan,received:a.parsedType}),lu}return{status:"valid",value:e.data}}}ZodNaN.create=e=>new ZodNaN({typeName:Cu.ZodNaN,...processCreateParams(e)});class ZodBranded extends ZodType{_parse(e){const{ctx:a}=this._processInputParams(e),l=a.data;return this._def.type._parse({data:l,path:a.path,parent:a})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:a,ctx:l}=this._processInputParams(e);if(l.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:l.data,path:l.path,parent:l});return"aborted"===e.status?lu:"dirty"===e.status?(a.dirty(),DIRTY(e.value)):this._def.out._parseAsync({data:e.value,path:l.path,parent:l})})()}{const e=this._def.in._parseSync({data:l.data,path:l.path,parent:l});return"aborted"===e.status?lu:"dirty"===e.status?(a.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:l.path,parent:l})}}static create(e,a){return new ZodPipeline({in:e,out:a,typeName:Cu.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const a=this._def.innerType._parse(e),freeze=e=>(isValid(e)&&(e.value=Object.freeze(e.value)),e);return isAsync(a)?a.then(e=>freeze(e)):freeze(a)}unwrap(){return this._def.innerType}}var Cu,Ru;ZodReadonly.create=(e,a)=>new ZodReadonly({innerType:e,typeName:Cu.ZodReadonly,...processCreateParams(a)}),ZodObject.lazycreate,(Ru=Cu||(Cu={})).ZodString="ZodString",Ru.ZodNumber="ZodNumber",Ru.ZodNaN="ZodNaN",Ru.ZodBigInt="ZodBigInt",Ru.ZodBoolean="ZodBoolean",Ru.ZodDate="ZodDate",Ru.ZodSymbol="ZodSymbol",Ru.ZodUndefined="ZodUndefined",Ru.ZodNull="ZodNull",Ru.ZodAny="ZodAny",Ru.ZodUnknown="ZodUnknown",Ru.ZodNever="ZodNever",Ru.ZodVoid="ZodVoid",Ru.ZodArray="ZodArray",Ru.ZodObject="ZodObject",Ru.ZodUnion="ZodUnion",Ru.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Ru.ZodIntersection="ZodIntersection",Ru.ZodTuple="ZodTuple",Ru.ZodRecord="ZodRecord",Ru.ZodMap="ZodMap",Ru.ZodSet="ZodSet",Ru.ZodFunction="ZodFunction",Ru.ZodLazy="ZodLazy",Ru.ZodLiteral="ZodLiteral",Ru.ZodEnum="ZodEnum",Ru.ZodEffects="ZodEffects",Ru.ZodNativeEnum="ZodNativeEnum",Ru.ZodOptional="ZodOptional",Ru.ZodNullable="ZodNullable",Ru.ZodDefault="ZodDefault",Ru.ZodCatch="ZodCatch",Ru.ZodPromise="ZodPromise",Ru.ZodBranded="ZodBranded",Ru.ZodPipeline="ZodPipeline",Ru.ZodReadonly="ZodReadonly";const Au=ZodString.create,Tu=ZodNumber.create,Pu=ZodBoolean.create;ZodNever.create,ZodArray.create;const Du=ZodObject.create;ZodObject.strictCreate,ZodUnion.create,ZodIntersection.create,ZodTuple.create;const Iu=ZodEnum.create;ZodPromise.create,ZodOptional.create,ZodNullable.create;const Fu=Du({rating:Tu().min(1,"Please select a rating").max(5,"Rating must be between 1 and 5"),title:Au().min(5,"Title must be at least 5 characters").max(100,"Title must be less than 100 characters"),content:Au().min(20,"Review must be at least 20 characters").max(1e3,"Review must be less than 1000 characters")}),ReviewForm=({lawFirm:e,onReviewSubmitted:a,onCancel:l,className:m=""})=>{const[u,p]=Me.useState(!1),[f,g]=Me.useState(0),[h,y]=Me.useState(0),{user:v}=useAuth(),{register:E,handleSubmit:x,setValue:w,watch:b,formState:{errors:N}}=useForm({resolver:t(Fu)}),_=b("content","");return v?je.createElement(ui,{className:m},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement(gr,{className:"h-5 w-5"}),je.createElement("span",null,"Write a Review for ",e.name)),je.createElement(gi,null,"Share your experience to help others make informed decisions")),je.createElement(hi,null,je.createElement("form",{onSubmit:x(async l=>{if(v){p(!0);try{const m={law_firm_id:e.id,rating:l.rating,title:l.title,content:l.content};await dm.createReview(m),An.success("Review submitted successfully! It will be published after moderation."),a?.()}catch(m){console.error("Error submitting review:",m),An.error("Failed to submit review: "+m.message)}finally{p(!1)}}else An.error("Please log in to submit a review")}),className:"space-y-6"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{className:"text-base font-medium"},"Overall Rating *"),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"flex"},Array.from({length:5},(e,a)=>{const l=a+1,m=l<=(h||f);return je.createElement("button",{key:a,type:"button",className:"p-1 transition-colors "+(m?"text-yellow-400":"text-gray-300 hover:text-yellow-300"),onMouseEnter:()=>y(l),onMouseLeave:()=>y(0),onClick:()=>{return g(e=l),void w("rating",e);var e}},je.createElement(jr,{className:"h-8 w-8 "+(m?"fill-current":"")}))})),f>0&&je.createElement("span",{className:"text-lg font-medium text-gray-700"},{1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"}[f]||"")),N.rating&&je.createElement("p",{className:"text-red-500 text-sm"},N.rating.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"title",className:"text-base font-medium"},"Review Title *"),je.createElement(zo,{id:"title",...E("title"),placeholder:"Summarize your experience in a few words",className:"w-full"}),N.title&&je.createElement("p",{className:"text-red-500 text-sm"},N.title.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"content",className:"text-base font-medium"},"Your Review *"),je.createElement(bi,{id:"content",...E("content"),placeholder:"Tell others about your experience with this law firm. What services did you use? How was the communication? Would you recommend them?",rows:6,className:"w-full resize-none"}),je.createElement("div",{className:"flex justify-between text-sm text-gray-500"},je.createElement("span",null,N.content?je.createElement("span",{className:"text-red-500"},N.content.message):"Minimum 20 characters"),je.createElement("span",null,_.length,"/1000"))),je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,{className:"text-sm"},je.createElement("strong",null,"Review Guidelines:"),je.createElement("ul",{className:"mt-2 space-y-1 list-disc list-inside"},je.createElement("li",null,"Be honest and constructive in your feedback"),je.createElement("li",null,"Focus on your personal experience with the law firm"),je.createElement("li",null,"Avoid sharing confidential or sensitive information"),je.createElement("li",null,"Reviews are moderated and may take time to appear")))),je.createElement("div",{className:"flex space-x-3"},je.createElement(Uo,{type:"submit",disabled:u||0===f,className:"flex-1"},u?je.createElement(je.Fragment,null,je.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."):je.createElement(je.Fragment,null,je.createElement(Rr,{className:"h-4 w-4 mr-2"}),"Submit Review")),l&&je.createElement(Uo,{type:"button",variant:"outline",onClick:l,disabled:u},"Cancel")),f>0&&je.createElement(_i,null,je.createElement(Ta,{className:"h-4 w-4"}),je.createElement(ki,{className:"text-sm"},"Your ",f,"-star review will help other users make informed decisions about ",e.name,"."))))):je.createElement(ui,{className:m},je.createElement(hi,{className:"text-center py-8"},je.createElement(gr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"Sign in to write a review"),je.createElement("p",{className:"text-gray-500 mb-4"},"You need to be logged in to submit a review for this law firm."),je.createElement(Uo,{onClick:()=>window.location.href="/login"},"Sign In")))},LawFirmProfile=()=>je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement(Navigation,null),je.createElement(LawFirmProfile$1,null),je.createElement(Footer,null)),Mu="https://kvlaydeyqidlfpfutbmp.supabase.co"?.includes("placeholder")||!1,ju=[{id:"1",name:"Employment Law",description:"Questions about workplace rights, contracts, and employment issues",icon:"briefcase",color:"#3B82F6",parent_id:null,order_index:1,is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",question_count:45},{id:"2",name:"Property Law",description:"Real estate transactions, property disputes, and housing matters",icon:"home",color:"#10B981",parent_id:null,order_index:2,is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",question_count:32},{id:"3",name:"Family Law",description:"Divorce, custody, marriage, and family-related legal matters",icon:"users",color:"#F59E0B",parent_id:null,order_index:3,is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",question_count:28},{id:"4",name:"Business Law",description:"Corporate law, contracts, and business-related legal issues",icon:"building",color:"#8B5CF6",parent_id:null,order_index:4,is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",question_count:38},{id:"5",name:"Criminal Law",description:"Criminal charges, court proceedings, and criminal defense",icon:"shield",color:"#EF4444",parent_id:null,order_index:5,is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",question_count:22}],Ou=[{id:"1",user_id:"user1",category_id:"1",title:"Can my employer terminate me without notice during probation?",content:"I am currently on a 6-month probation period at my new job in Singapore. My employer mentioned they can terminate me without notice during this period. Is this legal? What are my rights as an employee during probation?",tags:["employment","probation","termination","singapore"],urgency_level:"high",location:"Singapore",is_anonymous:!1,status:"open",view_count:156,upvote_count:12,downvote_count:1,answer_count:3,has_expert_answer:!0,has_ai_answer:!0,featured:!0,moderation_status:"approved",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z",user:{id:"user1",full_name:"Sarah Chen",avatar_url:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150"},category:ju[0]},{id:"2",user_id:"user2",category_id:"2",title:"Property cooling measures - impact on first-time buyers",content:"With the recent property cooling measures announced by the government, how will this affect first-time home buyers in Singapore? Are there any exemptions or special considerations for citizens buying their first property?",tags:["property","cooling-measures","first-time-buyer","hdb"],urgency_level:"normal",location:"Singapore",is_anonymous:!1,status:"open",view_count:89,upvote_count:8,downvote_count:0,answer_count:2,has_expert_answer:!1,has_ai_answer:!0,featured:!1,moderation_status:"approved",created_at:"2024-01-14T14:20:00Z",updated_at:"2024-01-14T14:20:00Z",user:{id:"user2",full_name:"Michael Tan",avatar_url:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150"},category:ju[1]},{id:"3",user_id:"user3",category_id:"3",title:"Divorce proceedings and child custody arrangements",content:"My spouse and I are considering divorce. We have two young children (ages 5 and 8). What factors do Singapore courts consider when determining child custody? Can we arrange for joint custody?",tags:["divorce","child-custody","family-court","joint-custody"],urgency_level:"high",location:"Singapore",is_anonymous:!0,status:"open",view_count:234,upvote_count:15,downvote_count:2,answer_count:4,has_expert_answer:!0,has_ai_answer:!1,featured:!0,moderation_status:"approved",created_at:"2024-01-13T09:15:00Z",updated_at:"2024-01-13T09:15:00Z",user:{id:"user3",full_name:"Anonymous User",avatar_url:void 0},category:ju[2]},{id:"4",user_id:"user4",category_id:"4",title:"Setting up a private limited company in Singapore",content:"I want to incorporate a private limited company in Singapore. What are the minimum requirements, costs involved, and ongoing compliance obligations? Do I need a local director?",tags:["incorporation","private-limited","company-setup","compliance"],urgency_level:"normal",location:"Singapore",is_anonymous:!1,status:"open",view_count:67,upvote_count:6,downvote_count:0,answer_count:1,has_expert_answer:!1,has_ai_answer:!0,featured:!1,moderation_status:"approved",created_at:"2024-01-12T16:45:00Z",updated_at:"2024-01-12T16:45:00Z",user:{id:"user4",full_name:"David Lim",avatar_url:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150"},category:ju[3]},{id:"5",user_id:"user5",category_id:"5",title:"Traffic violation - what are my options?",content:"I received a traffic summons for speeding. This is my first offense. What are my options? Should I plead guilty or contest it in court? What are the potential penalties?",tags:["traffic-violation","speeding","summons","first-offense"],urgency_level:"low",location:"Singapore",is_anonymous:!1,status:"open",view_count:45,upvote_count:3,downvote_count:0,answer_count:0,has_expert_answer:!1,has_ai_answer:!1,featured:!1,moderation_status:"approved",created_at:"2024-01-11T11:30:00Z",updated_at:"2024-01-11T11:30:00Z",user:{id:"user5",full_name:"Jennifer Wong",avatar_url:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150"},category:ju[4]}],Lu={async getCategories(){console.log("getCategories called, isPlaceholder:",Mu);try{const{data:e,error:a}=await Mo.from("legal_qa_categories").select("*").eq("is_active",!0).order("order_index");return a?(console.error("Error fetching Q&A categories:",a),console.log("Falling back to mock categories"),[...ju]):(console.log("Categories loaded from database:",e?.length),e||[])}catch(dE){return console.error("Exception in getCategories:",dE),[...ju]}},async getCategoryWithQuestionCount(e){const{data:a,error:l}=await Mo.from("legal_qa_categories").select("\n        *,\n        question_count:legal_questions(count)\n      ").eq("id",e).eq("is_active",!0).single();if(l)throw console.error("Error fetching category:",l),new Error("Failed to fetch category");return a},async getQuestions(e={}){if(console.log("getQuestions called, isPlaceholder:",Mu),console.log("getQuestions filters:",e),Mu)return console.log("Returning mock questions with filters:",e),console.log("mockQuestions length:",Ou.length),new Promise((a,l)=>{setTimeout(()=>{try{console.log("Mock questions timeout started");let l=[...Ou];if(e.category_id&&(l=l.filter(a=>a.category_id===e.category_id)),e.status&&(l=l.filter(a=>a.status===e.status)),e.urgency_level&&(l=l.filter(a=>a.urgency_level===e.urgency_level)),void 0!==e.has_expert_answer&&(l=l.filter(a=>a.has_expert_answer===e.has_expert_answer)),void 0!==e.has_ai_answer&&(l=l.filter(a=>a.has_ai_answer===e.has_ai_answer)),void 0!==e.featured&&(l=l.filter(a=>a.featured===e.featured)),e.search){const a=e.search.toLowerCase();l=l.filter(e=>e.title.toLowerCase().includes(a)||e.content.toLowerCase().includes(a)||e.tags.some(e=>e.toLowerCase().includes(a)))}switch(e.sort_by){case"oldest":l.sort((e,a)=>new Date(e.created_at).getTime()-new Date(a.created_at).getTime());break;case"most_votes":l.sort((e,a)=>a.upvote_count-e.upvote_count);break;case"most_answers":l.sort((e,a)=>a.answer_count-e.answer_count);break;case"most_views":l.sort((e,a)=>a.view_count-e.view_count);break;default:l.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())}const m=e.page||1,u=e.limit||20,p=(m-1)*u,f=p+u,g=l.slice(p,f);console.log("Mock questions timeout resolved, returning:",g),console.log("Result length:",g.length),console.log("Result is array:",Array.isArray(g)),a(g)}catch(m){console.error("Error in mock questions timeout:",m),l(m)}},50)});let a=Mo.from("legal_questions").select("\n        *,\n        user:profiles(id, full_name, avatar_url),\n        category:legal_qa_categories(id, name, color)\n      ").eq("moderation_status","approved");switch(e.category_id&&(a=a.eq("category_id",e.category_id)),e.status&&(a=a.eq("status",e.status)),e.urgency_level&&(a=a.eq("urgency_level",e.urgency_level)),void 0!==e.has_expert_answer&&(a=a.eq("has_expert_answer",e.has_expert_answer)),void 0!==e.has_ai_answer&&(a=a.eq("has_ai_answer",e.has_ai_answer)),void 0!==e.featured&&(a=a.eq("featured",e.featured)),e.location&&(a=a.ilike("location",`%${e.location}%`)),e.search&&(a=a.or(`title.ilike.%${e.search}%,content.ilike.%${e.search}%,tags.cs.{${e.search}}`)),e.tags&&e.tags.length>0&&(a=a.overlaps("tags",e.tags)),e.sort_by){case"oldest":a=a.order("created_at",{ascending:!0});break;case"most_votes":a=a.order("upvote_count",{ascending:!1});break;case"most_answers":a=a.order("answer_count",{ascending:!1});break;case"most_views":a=a.order("view_count",{ascending:!1});break;default:a=a.order("created_at",{ascending:!1})}const l=e.limit||20,m=((e.page||1)-1)*l;a=a.range(m,m+l-1);const{data:u,error:p}=await a;if(p)throw console.error("Error fetching questions:",p),new Error("Failed to fetch questions");return u||[]},async getQuestion(e){if(Mu)return new Promise((a,l)=>{setTimeout(()=>{const m=Ou.find(a=>a.id===e);m?(m.view_count+=1,a(m)):l(new Error("Question not found"))},300)});const{data:a,error:l}=await Mo.from("legal_questions").select("\n        *,\n        user:profiles(id, full_name, avatar_url),\n        category:legal_qa_categories(id, name, color, description)\n      ").eq("id",e).eq("moderation_status","approved").single();if(l)throw console.error("Error fetching question:",l),new Error("Failed to fetch question");return await Mo.from("legal_questions").update({view_count:a.view_count+1}).eq("id",e),a},async createQuestion(e){const{data:a,error:l}=await Mo.from("legal_questions").insert({...e,moderation_status:"pending"}).select("\n        *,\n        user:profiles(id, full_name, avatar_url),\n        category:legal_qa_categories(id, name, color)\n      ").single();if(l)throw console.error("Error creating question:",l),new Error("Failed to create question");return a},async updateQuestion(e,a){const{data:l,error:m}=await Mo.from("legal_questions").update(a).eq("id",e).select("\n        *,\n        user:profiles(id, full_name, avatar_url),\n        category:legal_qa_categories(id, name, color)\n      ").single();if(m)throw console.error("Error updating question:",m),new Error("Failed to update question");return l},async getAnswers(e={}){if(Mu)return new Promise(a=>{setTimeout(()=>{let l=[{id:"1",question_id:"1",user_id:"expert1",content:"During probation periods in Singapore, employers do have more flexibility in termination, but there are still legal requirements to follow:\n\n**Key Points:**\n1. **Notice Period**: While the Employment Act allows for shorter notice during probation, most employment contracts specify the exact terms.\n2. **Just Cause**: Employers should still have valid reasons for termination, even during probation.\n3. **Documentation**: Proper documentation of performance issues is recommended.\n\n**Your Rights:**\n- Right to receive any outstanding salary and benefits\n- Right to proper notice as per your contract\n- Protection against discriminatory termination\n\n**Recommendation**: Review your employment contract carefully for specific probation terms and consider consulting with MOM if you believe the termination was unfair.",answer_type:"expert",sources:["Employment Act (Singapore)","Ministry of Manpower Guidelines"],disclaimer:null,is_accepted:!0,expert_verified:!0,upvote_count:15,downvote_count:1,helpful_count:12,moderation_status:"approved",created_at:"2024-01-15T11:30:00Z",updated_at:"2024-01-15T11:30:00Z",user:{id:"expert1",full_name:"Sarah Lim, Employment Lawyer",avatar_url:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=150"}},{id:"2",question_id:"1",user_id:"ai",content:"Based on Singapore employment law, here's what you should know about probation period terminations:\n\n**Legal Framework:**\n- The Employment Act provides the basic framework for employment relationships\n- Probation periods are contractual arrangements between employer and employee\n- Different rules may apply based on your employment contract\n\n**During Probation:**\n- Employers generally have more flexibility to terminate\n- Notice periods may be shorter (often 1 day to 1 week)\n- Performance standards may be more strictly applied\n\n**Important Considerations:**\n- Check your specific employment contract terms\n- Ensure termination is not discriminatory\n- You're entitled to outstanding wages and benefits\n\n**Next Steps:**\n- Review your employment contract\n- Document any relevant communications\n- Consider seeking legal advice if you believe the termination was unfair",answer_type:"ai",sources:["Singapore Employment Act","MOM Employment Guidelines"],disclaimer:"This AI-generated response is for informational purposes only and does not constitute legal advice.",is_accepted:!1,expert_verified:!1,upvote_count:8,downvote_count:0,helpful_count:6,moderation_status:"approved",created_at:"2024-01-15T12:00:00Z",updated_at:"2024-01-15T12:00:00Z",user:{id:"ai",full_name:"AI Assistant",avatar_url:void 0}}];switch(e.question_id&&(l=l.filter(a=>a.question_id===e.question_id)),e.answer_type&&(l=l.filter(a=>a.answer_type===e.answer_type)),void 0!==e.expert_verified&&(l=l.filter(a=>a.expert_verified===e.expert_verified)),void 0!==e.is_accepted&&(l=l.filter(a=>a.is_accepted===e.is_accepted)),e.sort_by){case"oldest":l.sort((e,a)=>new Date(e.created_at).getTime()-new Date(a.created_at).getTime());break;case"most_votes":l.sort((e,a)=>a.upvote_count-e.upvote_count);break;case"most_helpful":l.sort((e,a)=>a.helpful_count-e.helpful_count);break;default:l.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())}l.sort((e,a)=>(a.is_accepted?1:0)-(e.is_accepted?1:0)),a(l)},300)});let a=Mo.from("legal_answers").select("\n        *,\n        user:profiles(id, full_name, avatar_url),\n        expert:legal_experts(\n          id,\n          specializations,\n          years_experience,\n          verification_status,\n          user:profiles(id, full_name, avatar_url),\n          law_firm:law_firms(id, name, logo_url)\n        )\n      ").eq("moderation_status","approved");switch(e.question_id&&(a=a.eq("question_id",e.question_id)),e.answer_type&&(a=a.eq("answer_type",e.answer_type)),void 0!==e.expert_verified&&(a=a.eq("expert_verified",e.expert_verified)),void 0!==e.is_accepted&&(a=a.eq("is_accepted",e.is_accepted)),e.sort_by){case"oldest":a=a.order("created_at",{ascending:!0});break;case"most_votes":a=a.order("upvote_count",{ascending:!1});break;case"most_helpful":a=a.order("helpful_count",{ascending:!1});break;default:a=a.order("created_at",{ascending:!1})}a=a.order("is_accepted",{ascending:!1});const{data:l,error:m}=await a;if(m)throw console.error("Error fetching answers:",m),new Error("Failed to fetch answers");return l||[]},async createAnswer(e){const{data:a,error:l}=await Mo.from("legal_answers").insert({...e,moderation_status:"pending"}).select("\n        *,\n        user:profiles(id, full_name, avatar_url)\n      ").single();if(l)throw console.error("Error creating answer:",l),new Error("Failed to create answer");return a},async updateAnswer(e,a){const{data:l,error:m}=await Mo.from("legal_answers").update(a).eq("id",e).select("\n        *,\n        user:profiles(id, full_name, avatar_url)\n      ").single();if(m)throw console.error("Error updating answer:",m),new Error("Failed to update answer");return l},async generateAIAnswer(e){try{const a={content:`Based on Singapore law and the information provided, here's a general overview:\n\n${e.question_content}\n\nThis appears to be related to ${e.category||"general legal matters"}. In Singapore, such matters are typically governed by relevant statutes and case law.\n\n**Key considerations:**\n1. Legal requirements and procedures\n2. Relevant timeframes and deadlines\n3. Potential consequences and remedies\n4. Professional legal advice recommendations\n\n**Next steps:**\n- Consult with a qualified legal professional\n- Gather relevant documentation\n- Consider alternative dispute resolution if applicable`,sources:["Singapore Statutes Online","Singapore Law Reports","Legal Service Commission Guidelines"],disclaimer:"This AI-generated response is for informational purposes only and does not constitute legal advice. Please consult with a qualified legal professional for advice specific to your situation.",confidence_score:.75,suggested_experts:[]};return await this.createAnswer({question_id:e.question_id,content:a.content,answer_type:"ai",sources:a.sources,disclaimer:a.disclaimer,is_accepted:!1}),a}catch(a){throw console.error("Error generating AI answer:",a),new Error("Failed to generate AI answer")}},async voteOnQuestion(e,a){if(Mu)return new Promise(l=>{setTimeout(()=>{const m=Ou.find(a=>a.id===e);m&&("upvote"===a?m.upvote_count+=1:m.downvote_count+=1),l()},200)});await Mo.from("legal_qa_votes").delete().eq("question_id",e).eq("user_id",(await Mo.auth.getUser()).data.user?.id);const{error:l}=await Mo.from("legal_qa_votes").insert({question_id:e,vote_type:a,user_id:(await Mo.auth.getUser()).data.user?.id});if(l)throw console.error("Error voting on question:",l),new Error("Failed to vote on question")},async voteOnAnswer(e,a){if(Mu)return new Promise(l=>{setTimeout(()=>{console.log(`Mock vote on answer ${e}: ${a}`),l()},200)});await Mo.from("legal_qa_votes").delete().eq("answer_id",e).eq("vote_type",a).eq("user_id",(await Mo.auth.getUser()).data.user?.id);const{error:l}=await Mo.from("legal_qa_votes").insert({answer_id:e,vote_type:a,user_id:(await Mo.auth.getUser()).data.user?.id});if(l)throw console.error("Error voting on answer:",l),new Error("Failed to vote on answer")},async getUserVote(e,a){const l=(await Mo.auth.getUser()).data.user?.id;if(!l)return null;let m=Mo.from("legal_qa_votes").select("*").eq("user_id",l);e&&(m=m.eq("question_id",e)),a&&(m=m.eq("answer_id",a));const{data:u,error:p}=await m.single();return p&&"PGRST116"!==p.code?(console.error("Error fetching user vote:",p),null):u},async bookmarkQuestion(e){if(Mu)return new Promise(a=>{setTimeout(()=>{console.log(`Mock bookmark question ${e}`),a()},200)});const{error:a}=await Mo.from("legal_qa_bookmarks").insert({question_id:e,user_id:(await Mo.auth.getUser()).data.user?.id});if(a)throw console.error("Error bookmarking question:",a),new Error("Failed to bookmark question")},async unbookmarkQuestion(e){if(Mu)return new Promise(a=>{setTimeout(()=>{console.log(`Mock unbookmark question ${e}`),a()},200)});const{error:a}=await Mo.from("legal_qa_bookmarks").delete().eq("question_id",e).eq("user_id",(await Mo.auth.getUser()).data.user?.id);if(a)throw console.error("Error unbookmarking question:",a),new Error("Failed to unbookmark question")},async getUserBookmarks(){const e=(await Mo.auth.getUser()).data.user?.id;if(!e)return[];const{data:a,error:l}=await Mo.from("legal_qa_bookmarks").select("\n        question:legal_questions(\n          *,\n          user:profiles(id, full_name, avatar_url),\n          category:legal_qa_categories(id, name, color)\n        )\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(l)throw console.error("Error fetching bookmarks:",l),new Error("Failed to fetch bookmarks");return a?.map(e=>e.question).filter(Boolean)||[]},async getComments(e,a){let l=Mo.from("legal_qa_comments").select("\n        *,\n        user:profiles(id, full_name, avatar_url)\n      ").eq("moderation_status","approved").is("parent_id",null).order("created_at",{ascending:!0});e&&(l=l.eq("question_id",e)),a&&(l=l.eq("answer_id",a));const{data:m,error:u}=await l;if(u)throw console.error("Error fetching comments:",u),new Error("Failed to fetch comments");return m||[]},async createComment(e){const{data:a,error:l}=await Mo.from("legal_qa_comments").insert({...e,moderation_status:"approved"}).select("\n        *,\n        user:profiles(id, full_name, avatar_url)\n      ").single();if(l)throw console.error("Error creating comment:",l),new Error("Failed to create comment");return a},async getExperts(e){let a=Mo.from("legal_experts").select("\n        *,\n        user:profiles(id, full_name, avatar_url, email),\n        law_firm:law_firms(id, name, logo_url)\n      ").eq("verification_status","verified").eq("is_active",!0).order("expertise_score",{ascending:!1});e&&(a=a.contains("specializations",[e]));const{data:l,error:m}=await a;if(m)throw console.error("Error fetching experts:",m),new Error("Failed to fetch experts");return l||[]},async createExpertProfile(e){const{data:a,error:l}=await Mo.from("legal_experts").insert({...e,verification_status:"pending"}).select("\n        *,\n        user:profiles(id, full_name, avatar_url, email)\n      ").single();if(l)throw console.error("Error creating expert profile:",l),new Error("Failed to create expert profile");return a},async reportContent(e){const{error:a}=await Mo.from("legal_qa_reports").insert({...e,status:"pending"});if(a)throw console.error("Error reporting content:",a),new Error("Failed to report content")},async searchQuestions(e,a={}){return this.getQuestions({...a,search:e})},async getTrendingQuestions(e=10){return this.getQuestions({sort_by:"most_views",limit:e,featured:!0})},async getRecentQuestions(e=10){return this.getQuestions({sort_by:"newest",limit:e})}},$u=[{id:"1",name:"Employment Law",description:"Questions about workplace rights, contracts, and employment disputes",icon:"",color:"#3B82F6",question_count:45,is_active:!0,order_index:1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"2",name:"Property Law",description:"Real estate transactions, landlord-tenant issues, and property disputes",icon:"",color:"#10B981",question_count:32,is_active:!0,order_index:2,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"3",name:"Corporate Law",description:"Business formation, contracts, and corporate governance",icon:"",color:"#8B5CF6",question_count:28,is_active:!0,order_index:3,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:"4",name:"Family Law",description:"Divorce, custody, adoption, and family-related legal matters",icon:"",color:"#F59E0B",question_count:23,is_active:!0,order_index:4,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}],Uu=[{id:"1",title:"What are my rights if I'm terminated without notice?",content:"I was working for a company for 2 years and they suddenly terminated me without any notice period. They said it was due to restructuring but I suspect it might be because I raised concerns about workplace safety. What are my rights under Singapore employment law?",category:$u[0],tags:["termination","notice period","employment rights"],urgency_level:"high",status:"open",view_count:156,upvote_count:12,downvote_count:1,answer_count:3,has_expert_answer:!0,has_ai_answer:!1,featured:!0,is_anonymous:!1,location:"Singapore",moderation_status:"approved",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString(),user_id:"mock-user-1",category_id:"1",user:{id:"mock-user-1",full_name:"John Doe",avatar_url:null}},{id:"2",title:"Can my landlord increase rent during the lease period?",content:"I signed a 2-year lease agreement with my landlord 6 months ago. Now they want to increase the rent by 20% citing inflation and market rates. The lease agreement doesn't mention anything about rent increases during the lease period. Is this legal?",category:$u[1],tags:["rental","lease agreement","rent increase"],urgency_level:"normal",status:"answered",view_count:89,upvote_count:8,downvote_count:0,answer_count:2,has_expert_answer:!1,has_ai_answer:!0,featured:!1,is_anonymous:!0,location:"Singapore",moderation_status:"approved",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString(),user_id:"mock-user-2",category_id:"2",user:{id:"mock-user-2",full_name:"Anonymous User",avatar_url:null}}],LegalQABrowser=({onAskQuestion:e,className:a=""})=>{const{user:l}=useAuth(),m=useNavigate(),[u,p]=Me.useState([]),[f,g]=Me.useState([]),[h,y]=Me.useState(!0),[v,E]=Me.useState(null),[x,w]=Me.useState(""),[b,N]=Me.useState(""),[_,k]=Me.useState("newest");Me.useState(!1);const[S,C]=Me.useState("all"),R=Array.isArray(u)?u:[];Me.useState({page:1,limit:20});const A="https://kvlaydeyqidlfpfutbmp.supabase.co"?.includes("placeholder"),T=Me.useCallback(async()=>{let e=!0;try{if(y(!0),E(null),A)return console.log("Using mock data in development mode"),void(e&&(p($u),g(Uu)));console.log("Loading categories from API...");const a=await Lu.getCategories();if(!e)return;Array.isArray(a)&&a.length>0?(console.log("Categories loaded successfully:",a.length),p(a)):(console.warn("Categories data is empty, using mock data"),p($u)),console.log("Loading questions from API...");const l=await Lu.getQuestions({page:1,limit:20});if(!e)return;Array.isArray(l)&&l.length>0?(console.log("Questions loaded successfully:",l.length),g(l)):(console.warn("Questions data is empty, using mock data"),g(Uu))}catch(a){console.error("Error initializing data:",a),e&&(console.log("API failed, falling back to mock data"),p($u),g(Uu),E(null))}finally{e&&(console.log("Setting loading to false in initialization"),y(!1))}return()=>{e=!1}},[A]);Me.useEffect(()=>{console.log("Initial useEffect triggered"),T()},[T]);const P=Me.useCallback(async()=>{try{if(y(!0),console.log("Loading questions... activeTab:",S),A){console.log("Using filtered mock data");let e=[...Uu];switch(x&&(e=e.filter(e=>e.title.toLowerCase().includes(x.toLowerCase())||e.content.toLowerCase().includes(x.toLowerCase()))),b&&(e=e.filter(e=>e.category_id===b)),S){case"trending":e=e.filter(e=>e.featured);break;case"expert":e=e.filter(e=>e.has_expert_answer);break;case"unanswered":e=e.filter(e=>"open"===e.status);break;case"ai":e=e.filter(e=>e.has_ai_answer)}return void g(e)}const e={page:1,limit:20,search:x||void 0,category_id:b||void 0,sort_by:_};switch(S){case"trending":e.sort_by="most_views",e.featured=!0;break;case"expert":e.has_expert_answer=!0;break;case"unanswered":e.status="open",e.sort_by="oldest";break;case"ai":e.has_ai_answer=!0}console.log("Query filters:",e);const a=await Lu.getQuestions(e);console.log("Questions loaded:",a),console.log("Questions count:",a.length),g(a)}catch(e){console.error("Error loading questions:",e),console.log("API failed, using mock data"),g(Uu)}finally{console.log("Setting loading to false"),y(!1)}},[A,S,x,b,_]);Me.useEffect(()=>{h||0===u.length||(console.log("Filter useEffect triggered:",{searchQuery:x,selectedCategory:b,sortBy:_,activeTab:S}),(x||b||"all"!==S)&&P())},[x,b,S,P,h,u.length,_]);const getUrgencyColor=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return v?je.createElement("div",{className:`space-y-6 ${a}`},je.createElement("div",{className:"text-center py-8"},je.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-4"},"Legal Q&A"),je.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},je.createElement("p",{className:"text-red-800"},"Error: ",v),je.createElement(Uo,{onClick:()=>{E(null),y(!0),window.location.reload()},className:"mt-2"},"Try Again")))):je.createElement("div",{className:`space-y-6 ${a}`},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Legal Q&A"),je.createElement("p",{className:"text-gray-600"},"Get answers to your legal questions from the community and experts",A&&je.createElement("span",{className:"ml-2 text-sm text-blue-600"},"(Demo Mode)"))),je.createElement(Uo,{onClick:e,className:"bg-blue-600 hover:bg-blue-700"},je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Ask Question")),je.createElement(ui,null,je.createElement(hi,{className:"p-4"},je.createElement("form",{onSubmit:e=>{e.preventDefault(),P()},className:"space-y-4"},je.createElement("div",{className:"flex flex-col md:flex-row gap-4"},je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"relative"},je.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),je.createElement(zo,{placeholder:"Search legal questions...",value:x,onChange:e=>w(e.target.value),className:"pl-10"}))),je.createElement("div",{className:"w-full md:w-48"},je.createElement(Zc,{value:b,onValueChange:N},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"All categories"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"All categories"),R.map(e=>e&&e.id&&e.name?je.createElement(Xc,{key:e.id,value:e.id},e.name):null)))),je.createElement("div",{className:"w-full md:w-48"},je.createElement(Zc,{value:_,onValueChange:e=>k(e)},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Sort by"})),je.createElement(Jc,null,je.createElement(Xc,{value:"newest"},"Newest"),je.createElement(Xc,{value:"oldest"},"Oldest"),je.createElement(Xc,{value:"most_votes"},"Most Votes"),je.createElement(Xc,{value:"most_answers"},"Most Answers"),je.createElement(Xc,{value:"most_views"},"Most Views")))),je.createElement(Uo,{type:"submit"},"Search"))))),je.createElement(Xm,{value:S,onValueChange:C},je.createElement(ed,{className:"grid w-full grid-cols-5"},je.createElement(td,{value:"all"},"All Questions"),je.createElement(td,{value:"trending"},"Trending"),je.createElement(td,{value:"expert"},"Expert Answered"),je.createElement(td,{value:"unanswered"},"Unanswered"),je.createElement(td,{value:"ai"},"AI Answered")),je.createElement(ad,{value:S,className:"mt-6"},je.createElement("div",{className:"space-y-4"},h?je.createElement("div",{className:"space-y-4"},[...Array(5)].map((e,a)=>je.createElement(ui,{key:a,className:"animate-pulse"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-full"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),je.createElement("div",{className:"flex space-x-2"},je.createElement("div",{className:"h-6 bg-gray-200 rounded w-16"}),je.createElement("div",{className:"h-6 bg-gray-200 rounded w-20"}))))))):f.length>0?f.map(e=>je.createElement(ui,{key:e.id,className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{return a=e.id,void m(`/legal-qa/${a}`);var a}},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-start justify-between mb-3"},je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600"},e.title),e.featured&&je.createElement(jr,{className:"h-4 w-4 text-yellow-500 fill-current"})),je.createElement("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3"},e.content),je.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},e.category&&je.createElement(Badge,{variant:"secondary",className:"text-xs",style:{backgroundColor:e.category.color+"20",color:e.category.color}},e.category.name),je.createElement(Badge,{className:`text-xs ${getUrgencyColor(e.urgency_level)}`},e.urgency_level),e.tags.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-xs"},e))))),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center space-x-4 text-sm text-gray-500"},je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(gr,{className:"h-4 w-4"}),je.createElement("span",null,e.answer_count)),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(qa,{className:"h-4 w-4"}),je.createElement("span",null,e.view_count)),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement($r,{className:"h-4 w-4"}),je.createElement("span",null,e.upvote_count)),e.has_expert_answer&&je.createElement("div",{className:"flex items-center space-x-1 text-green-600"},je.createElement(ma,{className:"h-4 w-4"}),je.createElement("span",null,"Expert")),e.has_ai_answer&&je.createElement("div",{className:"flex items-center space-x-1 text-blue-600"},je.createElement(ya,{className:"h-4 w-4"}),je.createElement("span",null,"AI"))),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(hd,{className:"h-6 w-6"},je.createElement(yd,{src:e.user?.avatar_url}),je.createElement(vd,{className:"text-xs"},e.is_anonymous?"A":e.user?.full_name?.charAt(0))),je.createElement("div",{className:"text-xs text-gray-500"},je.createElement("span",null,e.is_anonymous?"Anonymous":e.user?.full_name),je.createElement("span",{className:"mx-1"},""),je.createElement("span",null,formatDistanceToNow(new Date(e.created_at),{addSuffix:!0})))),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),(async(e,a)=>{if(l)try{A||(await Lu.voteOnQuestion(e,a),await P()),An.success("Vote recorded")}catch(m){console.error("Error voting:",m),An.error("Failed to record vote")}else An.error("Please log in to vote")})(e.id,"upvote")},disabled:!l},je.createElement($r,{className:"h-4 w-4"})),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),(async e=>{if(l)try{A||await Lu.bookmarkQuestion(e),An.success("Question bookmarked")}catch(a){console.error("Error bookmarking:",a),An.error("Failed to bookmark question")}else An.error("Please log in to bookmark questions")})(e.id)},disabled:!l},je.createElement(ha,{className:"h-4 w-4"})))))))):je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(gr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No questions found"),je.createElement("p",{className:"text-gray-500 mb-4"},x||b?"Try adjusting your search criteria or browse different categories.":"Be the first to ask a question in this category."),e&&je.createElement(Uo,{onClick:e},je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Ask First Question")))))))},AskQuestionForm=({onClose:e,onQuestionCreated:a,initialCategory:l})=>{const{user:m}=useAuth(),[u,p]=Me.useState([]),[f,g]=Me.useState(!1),[h,y]=Me.useState(""),v=Array.isArray(u)?u:[],[E,x]=Me.useState({title:"",content:"",category_id:l||"",tags:[],urgency_level:"normal",location:"Singapore",is_anonymous:!1});Me.useEffect(()=>{loadCategories()},[]);const loadCategories=async()=>{try{console.log("AskQuestionForm: Loading categories...");const e=await Lu.getCategories();if(console.log("AskQuestionForm: Categories loaded:",e),console.log("AskQuestionForm: Categories is array:",Array.isArray(e)),!Array.isArray(e))throw new Error("Categories data is not an array");p(e)}catch(e){console.error("AskQuestionForm: Error loading categories:",e),An.error("Failed to load categories"),p([])}},handleInputChange=(e,a)=>{x(l=>({...l,[e]:a}))},addTag=()=>{h.trim()&&!E.tags.includes(h.trim())&&(x(e=>({...e,tags:[...e.tags,h.trim()]})),y(""))};return je.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},je.createElement(ui,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto"},je.createElement(pi,{className:"flex flex-row items-center justify-between"},je.createElement("div",null,je.createElement(fi,null,"Ask a Legal Question"),je.createElement(gi,null,"Get help from the community and legal experts")),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:e},je.createElement(Gr,{className:"h-4 w-4"}))),je.createElement(hi,null,je.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),m)if(E.title.trim()&&E.content.trim())try{g(!0);const e={...E,user_id:m.id,status:"open",view_count:0,upvote_count:0,downvote_count:0,answer_count:0,has_expert_answer:!1,has_ai_answer:!1,featured:!1},l=await Lu.createQuestion(e);An.success("Question submitted successfully! It will be reviewed before being published."),a(l)}catch(l){console.error("Error creating question:",l),An.error("Failed to submit question. Please try again.")}finally{g(!1)}else An.error("Please fill in all required fields");else An.error("Please log in to ask a question")},className:"space-y-6"},je.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(Br,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),je.createElement("div",{className:"text-sm"},je.createElement("p",{className:"font-medium text-yellow-800 mb-1"},"Important Legal Disclaimer"),je.createElement("p",{className:"text-yellow-700"},"This platform provides general information only and does not constitute legal advice. For specific legal matters, please consult with a qualified legal professional.")))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"title"},"Question Title *"),je.createElement(zo,{id:"title",value:E.title,onChange:e=>handleInputChange("title",e.target.value),placeholder:"Briefly describe your legal question...",maxLength:200,required:!0}),je.createElement("p",{className:"text-xs text-gray-500"},E.title.length,"/200 characters")),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"content"},"Question Details *"),je.createElement(bi,{id:"content",value:E.content,onChange:e=>handleInputChange("content",e.target.value),placeholder:"Provide detailed information about your legal question. Include relevant facts, dates, and any specific circumstances...",rows:8,maxLength:5e3,required:!0}),je.createElement("p",{className:"text-xs text-gray-500"},E.content.length,"/5000 characters")),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"category"},"Category"),je.createElement(Zc,{value:E.category_id,onValueChange:e=>handleInputChange("category_id",e)},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Select a category"})),je.createElement(Jc,null,v.map(e=>e&&e.id&&e.name?je.createElement(Xc,{key:e.id,value:e.id},e.name):null)))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"urgency"},"Urgency Level"),je.createElement(Zc,{value:E.urgency_level,onValueChange:e=>handleInputChange("urgency_level",e)},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"low"},"Low - General inquiry"),je.createElement(Xc,{value:"normal"},"Normal - Standard question"),je.createElement(Xc,{value:"high"},"High - Time-sensitive"),je.createElement(Xc,{value:"urgent"},"Urgent - Immediate attention needed"))))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"location"},"Location (Optional)"),je.createElement(zo,{id:"location",value:E.location,onChange:e=>handleInputChange("location",e.target.value),placeholder:"e.g., Singapore, Orchard Road"}),je.createElement("p",{className:"text-xs text-gray-500"},"Specify location if relevant to your legal question")),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"tags"},"Tags (Optional)"),je.createElement("div",{className:"flex flex-wrap gap-2 mb-2"},E.tags.map(e=>je.createElement(Badge,{key:e,variant:"secondary",className:"flex items-center space-x-1"},je.createElement("span",null,e),je.createElement("button",{type:"button",onClick:()=>{return a=e,void x(e=>({...e,tags:e.tags.filter(e=>e!==a)}));var a},className:"ml-1 hover:text-red-600"},je.createElement(Gr,{className:"h-3 w-3"}))))),je.createElement("div",{className:"flex space-x-2"},je.createElement(zo,{value:h,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),addTag())},placeholder:"Add tags to help categorize your question...",maxLength:30}),je.createElement(Uo,{type:"button",onClick:addTag,variant:"outline",size:"sm"},je.createElement(wr,{className:"h-4 w-4"}))),je.createElement("p",{className:"text-xs text-gray-500"},'Add relevant tags like "contract", "employment", "property", etc.')),je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(mm,{id:"anonymous",checked:E.is_anonymous,onCheckedChange:e=>handleInputChange("is_anonymous",e)}),je.createElement("label",{htmlFor:"anonymous",className:"text-sm text-gray-700"},"Post anonymously")),je.createElement("p",{className:"text-xs text-gray-500 ml-6"},"Your name will not be displayed with this question")),je.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(nr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),je.createElement("div",{className:"text-sm"},je.createElement("p",{className:"font-medium text-blue-800 mb-2"},"Tips for Better Answers"),je.createElement("ul",{className:"text-blue-700 space-y-1 text-xs"},je.createElement("li",null," Be specific about your situation and provide relevant details"),je.createElement("li",null," Include relevant dates, amounts, and parties involved"),je.createElement("li",null," Mention any documents or agreements related to your question"),je.createElement("li",null," Avoid sharing personal identifying information"),je.createElement("li",null," Use clear, simple language to describe your situation"))))),je.createElement("div",{className:"flex space-x-3 pt-4"},je.createElement(Uo,{type:"button",variant:"outline",onClick:e,className:"flex-1",disabled:f},"Cancel"),je.createElement(Uo,{type:"submit",className:"flex-1",disabled:f||!E.title.trim()||!E.content.trim()},f?je.createElement(je.Fragment,null,je.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."):je.createElement(je.Fragment,null,je.createElement(Pa,{className:"h-4 w-4 mr-2"}),"Submit Question")))))))},QuestionDetail=({questionId:e})=>{const{id:a}=useParams(),l=useNavigate(),{user:m}=useAuth(),u=e||a,[p,f]=Me.useState(null),[g,h]=Me.useState([]),[y,v]=Me.useState(!0),[E,x]=Me.useState(!1),[w,b]=Me.useState(""),[N,_]=Me.useState(!1),[k,S]=Me.useState(!1);Me.useEffect(()=>{u&&(loadQuestionDetail(),loadAnswers())},[u]);const loadQuestionDetail=async()=>{if(u)try{v(!0);const e=await Lu.getQuestion(u);f(e)}catch(e){console.error("Error loading question:",e),An.error("Failed to load question"),l("/legal-qa")}finally{v(!1)}},loadAnswers=async()=>{if(u)try{x(!0);const e=await Lu.getAnswers({question_id:u});h(e)}catch(e){console.error("Error loading answers:",e),An.error("Failed to load answers")}finally{x(!1)}},handleVoteAnswer=async(e,a)=>{if(m)try{await Lu.voteOnAnswer(e,a),await loadAnswers(),An.success("Vote recorded")}catch(l){console.error("Error voting:",l),An.error("Failed to record vote")}else An.error("Please log in to vote")};return y?je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),je.createElement("p",{className:"text-gray-600"},"Loading question..."))):p?je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-8"},je.createElement("div",{className:"mb-6"},je.createElement(Uo,{variant:"outline",onClick:()=>l("/legal-qa"),className:"mb-4"},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to Q&A")),je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1"},je.createElement(fi,{className:"text-2xl mb-3"},p.title),je.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},p.category&&je.createElement(Badge,{variant:"secondary",style:{backgroundColor:p.category.color+"20",color:p.category.color}},p.category.name),je.createElement(Badge,{className:(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(p.urgency_level)},p.urgency_level),p.featured&&je.createElement(Badge,{variant:"outline",className:"text-yellow-600 border-yellow-600"},je.createElement(jr,{className:"h-3 w-3 mr-1 fill-current"}),"Featured"),p.tags.map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-xs"},e))),je.createElement("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4"},je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(qa,{className:"h-4 w-4"}),je.createElement("span",null,p.view_count," views")),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(gr,{className:"h-4 w-4"}),je.createElement("span",null,p.answer_count," answers")),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(Fa,{className:"h-4 w-4"}),je.createElement("span",null,"Asked ",formatDistanceToNow(new Date(p.created_at),{addSuffix:!0}))),p.location&&je.createElement("div",{className:"flex items-center space-x-1"},je.createElement("span",null," ",p.location)))),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(m&&p)try{await Lu.voteOnQuestion(p.id,e),await loadQuestionDetail(),An.success("Vote recorded")}catch(a){console.error("Error voting:",a),An.error("Failed to record vote")}else An.error("Please log in to vote")})("upvote"),disabled:!m},je.createElement($r,{className:"h-4 w-4 mr-1"}),p.upvote_count),je.createElement(Uo,{variant:"outline",size:"sm",onClick:async()=>{if(m&&p)try{k?(await Lu.unbookmarkQuestion(p.id),S(!1),An.success("Bookmark removed")):(await Lu.bookmarkQuestion(p.id),S(!0),An.success("Question bookmarked"))}catch(e){console.error("Error bookmarking:",e),An.error("Failed to update bookmark")}else An.error("Please log in to bookmark questions")},disabled:!m},k?je.createElement(ga,{className:"h-4 w-4"}):je.createElement(ha,{className:"h-4 w-4"})),je.createElement(Uo,{variant:"outline",size:"sm"},je.createElement(Tr,{className:"h-4 w-4"}))))),je.createElement(hi,null,je.createElement("div",{className:"prose max-w-none mb-6"},je.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},p.content)),je.createElement("div",{className:"flex items-center justify-between pt-4 border-t"},je.createElement("div",{className:"flex items-center space-x-3"},je.createElement(hd,null,je.createElement(yd,{src:p.user?.avatar_url}),je.createElement(vd,null,p.is_anonymous?"A":p.user?.full_name?.charAt(0))),je.createElement("div",null,je.createElement("p",{className:"font-medium text-gray-900"},p.is_anonymous?"Anonymous":p.user?.full_name),je.createElement("p",{className:"text-sm text-gray-500"},"Asked ",formatDistanceToNow(new Date(p.created_at),{addSuffix:!0})))),!p.has_ai_answer&&je.createElement(Uo,{variant:"outline",onClick:async()=>{if(p)try{An.info("Generating AI answer..."),await Lu.generateAIAnswer({question_id:p.id,question_title:p.title,question_content:p.content,category:p.category?.name,tags:p.tags,location:p.location}),await loadAnswers(),An.success("AI answer generated successfully!")}catch(e){console.error("Error generating AI answer:",e),An.error("Failed to generate AI answer")}},className:"text-blue-600 border-blue-600 hover:bg-blue-50"},je.createElement(ya,{className:"h-4 w-4 mr-2"}),"Get AI Answer")))),je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("h2",{className:"text-xl font-bold text-gray-900"},p.answer_count," Answer",1!==p.answer_count?"s":"")),E?je.createElement("div",{className:"space-y-4"},[...Array(3)].map((e,a)=>je.createElement(ui,{key:a,className:"animate-pulse"},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"h-4 bg-gray-200 rounded w-full"}),je.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),je.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/2"})))))):g.length>0?g.map(e=>je.createElement(ui,{key:e.id,className:e.is_accepted?"border-green-500 bg-green-50":""},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-start justify-between mb-4"},je.createElement("div",{className:"flex items-center space-x-2"},(e=>{switch(e){case"expert":case"verified":return je.createElement(ma,{className:"h-4 w-4 text-green-600"});case"ai":return je.createElement(ya,{className:"h-4 w-4 text-blue-600"});default:return je.createElement(Hr,{className:"h-4 w-4 text-gray-600"})}})(e.answer_type),je.createElement("span",{className:"text-sm font-medium capitalize text-gray-700"},e.answer_type," Answer"),e.is_accepted&&je.createElement(Badge,{className:"bg-green-100 text-green-800"},je.createElement(Ta,{className:"h-3 w-3 mr-1"}),"Accepted"),e.expert_verified&&je.createElement(Badge,{className:"bg-blue-100 text-blue-800"},je.createElement(ca,{className:"h-3 w-3 mr-1"}),"Expert Verified"))),je.createElement("div",{className:"prose max-w-none mb-4"},je.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},e.content)),"ai"===e.answer_type&&e.disclaimer&&je.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},je.createElement("p",{className:"text-xs text-yellow-800"},e.disclaimer)),e.sources&&e.sources.length>0&&je.createElement("div",{className:"mb-4"},je.createElement("p",{className:"text-sm font-medium text-gray-700 mb-2"},"Sources:"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},e.sources.map((e,a)=>je.createElement("li",{key:a}," ",e)))),je.createElement("div",{className:"flex items-center justify-between pt-4 border-t"},je.createElement("div",{className:"flex items-center space-x-4"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>handleVoteAnswer(e.id,"upvote"),disabled:!m},je.createElement($r,{className:"h-4 w-4 mr-1"}),e.upvote_count),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>handleVoteAnswer(e.id,"helpful"),disabled:!m},je.createElement(jr,{className:"h-4 w-4 mr-1"}),e.helpful_count," Helpful"),je.createElement(Uo,{variant:"ghost",size:"sm"},je.createElement(gr,{className:"h-4 w-4 mr-1"}),"Comment")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(hd,{className:"h-6 w-6"},je.createElement(yd,{src:e.user?.avatar_url}),je.createElement(vd,{className:"text-xs"},"ai"===e.answer_type?"AI":e.user?.full_name?.charAt(0))),je.createElement("div",{className:"text-xs text-gray-500"},je.createElement("span",null,"ai"===e.answer_type?"AI Assistant":e.user?.full_name),je.createElement("span",{className:"mx-1"},""),je.createElement("span",null,formatDistanceToNow(new Date(e.created_at),{addSuffix:!0})))))))):je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(gr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No answers yet"),je.createElement("p",{className:"text-gray-500"},"Be the first to answer this question!"))),m&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"Your Answer"),je.createElement(gi,null,"Share your knowledge and help the community")),je.createElement(hi,null,je.createElement("div",{className:"space-y-4"},je.createElement(bi,{value:w,onChange:e=>b(e.target.value),placeholder:"Provide a helpful answer to this legal question...",rows:6,maxLength:5e3}),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("p",{className:"text-xs text-gray-500"},w.length,"/5000 characters"),je.createElement(Uo,{onClick:async()=>{if(m&&p&&w.trim())try{_(!0),await Lu.createAnswer({question_id:p.id,user_id:m.id,content:w.trim(),answer_type:"community",is_accepted:!1}),b(""),await loadAnswers(),An.success("Answer submitted successfully!")}catch(e){console.error("Error submitting answer:",e),An.error("Failed to submit answer")}finally{_(!1)}else An.error("Please log in and provide an answer")},disabled:!w.trim()||N},N?je.createElement(je.Fragment,null,je.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."):je.createElement(je.Fragment,null,je.createElement(Rr,{className:"h-4 w-4 mr-2"}),"Submit Answer"))))))))):je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Question Not Found"),je.createElement("p",{className:"text-gray-600 mb-4"},"The question you're looking for doesn't exist or has been removed."),je.createElement(Uo,{onClick:()=>l("/legal-qa")},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to Q&A")))},TestQA=()=>{const[e,a]=Me.useState({}),[l,m]=Me.useState(!0);return Me.useEffect(()=>{(async()=>{console.log("Running QA API tests...");try{const e="https://kvlaydeyqidlfpfutbmp.supabase.co",l=e?.includes("placeholder");console.log("Environment:",{supabaseUrl:e,isPlaceholder:l}),console.log("Testing getCategories...");const m=await Lu.getCategories();console.log("Categories result:",m),console.log("Testing getQuestions...");const u=await Lu.getQuestions();console.log("Questions result:",u),a({environment:{supabaseUrl:e,isPlaceholder:l},categories:m,questions:u,success:!0})}catch(e){console.error("Test error:",e),a({error:e.message,success:!1})}finally{m(!1)}})()},[]),l?je.createElement("div",{className:"p-4"},"Running tests..."):je.createElement("div",{className:"p-4 bg-gray-50 rounded"},je.createElement("h3",{className:"text-lg font-bold mb-4"},"QA API Test Results"),je.createElement("pre",{className:"bg-white p-4 rounded text-sm overflow-auto max-h-96"},JSON.stringify(e,null,2)))},LegalQA=()=>{const[e,a]=Me.useState(!1);return je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement(Navigation,null),je.createElement("main",{className:"py-8 pt-20"},je.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded"},je.createElement("p",{className:"text-blue-800"},"Legal Q&A Page Loaded Successfully"),je.createElement("p",{className:"text-sm text-blue-600"},"Environment: ","production"),je.createElement("p",{className:"text-sm text-blue-600"},"Supabase URL: ","https://kvlaydeyqidlfpfutbmp.supabase.co")),je.createElement(TestQA,null),je.createElement(LegalQABrowser,{onAskQuestion:()=>a(!0)}))),je.createElement(Footer,null),e&&je.createElement(AskQuestionForm,{onClose:()=>a(!1),onQuestionCreated:e=>{a(!1)}}))};const zu=new class SessionSecurityService{constructor(){__publicField(this,"MAX_LOGIN_ATTEMPTS",5),__publicField(this,"LOCKOUT_DURATION",9e5),__publicField(this,"SESSION_TIMEOUT",864e5),__publicField(this,"SUSPICIOUS_ACTIVITY_THRESHOLD",10)}async trackSession(e,a){try{const l=await this.getSessionInfo(),{error:m}=await Mo.from("user_sessions").upsert({id:e,user_id:a,ip_address:l.ipAddress,user_agent:l.userAgent,device_type:l.deviceType,browser:l.browser,os:l.os,location:l.location,last_active_at:(new Date).toISOString(),expires_at:new Date(Date.now()+this.SESSION_TIMEOUT).toISOString()});m&&console.error("Error tracking session:",m)}catch(l){console.error("Error in trackSession:",l)}}async getSessionInfo(){const e=navigator.userAgent,a=await this.getUserIP();return{ipAddress:a,userAgent:e,deviceType:this.getDeviceType(e),browser:this.getBrowser(e),os:this.getOS(e),location:await this.getLocation(a)}}async getUserIP(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.error("Error getting IP address:",e),"unknown"}}getDeviceType(e){return/Mobile|Android|iPhone|iPad/.test(e)?/iPad/.test(e)?"tablet":"mobile":"desktop"}getBrowser(e){return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"}getOS(e){return e.includes("Windows")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":"Unknown"}async getLocation(e){try{const a=await fetch(`https://ipapi.co/${e}/json/`),l=await a.json();return l.city&&l.country_name?`${l.city}, ${l.country_name}`:l.country_name||void 0}catch(a){return void console.error("Error getting location:",a)}}async logSecurityEvent(e,a){try{const{data:{user:l}}=await Mo.auth.getUser();if(!l)return;const m=await this.getSessionInfo(),{error:u}=await Mo.from("security_events").insert({user_id:l.id,event_type:e,ip_address:m.ipAddress,user_agent:m.userAgent,location:m.location,metadata:a||{}});u&&console.error("Error logging security event:",u)}catch(l){console.error("Error in logSecurityEvent:",l)}}async checkSuspiciousActivity(e,a){try{const{data:l,error:m}=await Mo.from("security_events").select("*").eq("ip_address",e).eq("event_type","failed_login").gte("created_at",new Date(Date.now()-36e5).toISOString()).order("created_at",{ascending:!1});if(m)return console.error("Error checking suspicious activity:",m),!1;if(l&&l.length>=this.SUSPICIOUS_ACTIVITY_THRESHOLD)return!0;if(a){const{data:e}=await Mo.from("security_events").select("location").eq("user_id",a).eq("event_type","login").gte("created_at",new Date(Date.now()-864e5).toISOString()).not("location","is",null);if(e){if(new Set(e.map(e=>e.location)).size>3)return!0}}return!1}catch(l){return console.error("Error in checkSuspiciousActivity:",l),!1}}async getUserSessions(e){try{const{data:a,error:l}=await Mo.from("user_sessions").select("*").eq("user_id",e).gt("expires_at",(new Date).toISOString()).order("last_active_at",{ascending:!1});if(l)return console.error("Error getting user sessions:",l),[];const m=await Mo.auth.getSession(),u=m.data.session?.access_token;return(a||[]).map(e=>({id:e.id,userId:e.user_id,ipAddress:e.ip_address,userAgent:e.user_agent,location:e.location,deviceType:e.device_type,browser:e.browser,os:e.os,isCurrentSession:e.id===u,createdAt:e.created_at,lastActiveAt:e.last_active_at,expiresAt:e.expires_at}))}catch(a){return console.error("Error in getUserSessions:",a),[]}}async revokeSession(e){try{const{error:a}=await Mo.from("user_sessions").delete().eq("id",e);if(a)throw console.error("Error revoking session:",a),new Error("Failed to revoke session")}catch(a){throw console.error("Error in revokeSession:",a),a}}async revokeAllOtherSessions(e,a){try{const{error:l}=await Mo.from("user_sessions").delete().eq("user_id",e).neq("id",a);if(l)throw console.error("Error revoking other sessions:",l),new Error("Failed to revoke other sessions");await this.logSecurityEvent("logout",{action:"revoke_all_sessions",sessions_revoked:"all_others"})}catch(l){throw console.error("Error in revokeAllOtherSessions:",l),l}}async getSecurityEvents(e,a=50){try{const{data:l,error:m}=await Mo.from("security_events").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(a);return m?(console.error("Error getting security events:",m),[]):(l||[]).map(e=>({id:e.id,userId:e.user_id,eventType:e.event_type,ipAddress:e.ip_address,userAgent:e.user_agent,location:e.location,metadata:e.metadata,createdAt:e.created_at}))}catch(l){return console.error("Error in getSecurityEvents:",l),[]}}async checkRateLimit(e){try{return console.log(" Rate limiting disabled - would check IP:",e),{allowed:!0,attemptsRemaining:this.MAX_LOGIN_ATTEMPTS}}catch(a){return console.error("Error in checkRateLimit:",a),{allowed:!0,attemptsRemaining:this.MAX_LOGIN_ATTEMPTS}}}async recordFailedLogin(e){try{return void console.log(" Failed login recording disabled - would record IP:",e)}catch(a){console.error("Error in recordFailedLogin:",a)}}async resetLoginAttempts(e){try{return void console.log(" Login attempt reset disabled - would reset IP:",e)}catch(a){console.error("Error in resetLoginAttempts:",a)}}};var Bu="horizontal",qu=["horizontal","vertical"],Vu=Me.forwardRef((e,a)=>{const{decorative:l,orientation:m=Bu,...u}=e,p=function isValidOrientation(e){return qu.includes(e)}(m)?m:Bu,f=l?{role:"none"}:{"aria-orientation":"vertical"===p?p:void 0,role:"separator"};return tt.jsx(nt.div,{"data-orientation":p,...f,...u,ref:a})});Vu.displayName="Separator";var Hu=Vu;const Wu=Me.forwardRef(({className:e,orientation:a="horizontal",decorative:l=!0,...m},u)=>Me.createElement(Hu,{ref:u,decorative:l,orientation:a,className:cn("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...m}));Wu.displayName=Hu.displayName;const Zu=zl,Ku=Bl,Gu=ql,Qu=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Vl,{ref:l,className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));Qu.displayName=Vl.displayName;const Yu=Me.forwardRef(({className:e,children:a,...l},m)=>Me.createElement(Gu,null,Me.createElement(Qu,null),Me.createElement(Hl,{ref:m,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...l},a,Me.createElement(Kl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},Me.createElement(Gr,{className:"h-4 w-4"}),Me.createElement("span",{className:"sr-only"},"Close")))));Yu.displayName=Hl.displayName;const DialogHeader=({className:e,...a})=>Me.createElement("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});DialogHeader.displayName="DialogHeader";const DialogFooter=({className:e,...a})=>Me.createElement("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});DialogFooter.displayName="DialogFooter";const Ju=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Wl,{ref:l,className:cn("text-lg font-semibold leading-none tracking-tight",e),...a}));Ju.displayName=Wl.displayName;const Xu=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Zl,{ref:l,className:cn("text-sm text-muted-foreground",e),...a}));Xu.displayName=Zl.displayName;var ep={},tp={},ap={};let rp;const np=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ap.getSymbolSize=function getSymbolSize(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},ap.getSymbolTotalCodewords=function getSymbolTotalCodewords(e){return np[e]},ap.getBCHDigit=function(e){let a=0;for(;0!==e;)a++,e>>>=1;return a},ap.setToSJISFunction=function setToSJISFunction(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');rp=e},ap.isKanjiModeEnabled=function(){return void 0!==rp},ap.toSJIS=function toSJIS(e){return rp(e)};var sp,op={};function BitBuffer$1(){this.buffer=[],this.length=0}(sp=op).L={bit:1},sp.M={bit:0},sp.Q={bit:3},sp.H={bit:2},sp.isValid=function isValid3(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},sp.from=function from(e,a){if(sp.isValid(e))return e;try{return function fromString(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return sp.L;case"m":case"medium":return sp.M;case"q":case"quartile":return sp.Q;case"h":case"high":return sp.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(mE){return a}},BitBuffer$1.prototype={get:function(e){const a=Math.floor(e/8);return 1==(this.buffer[a]>>>7-e%8&1)},put:function(e,a){for(let l=0;l<a;l++)this.putBit(1==(e>>>a-l-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}};var lp=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,a,l,m){const u=e*this.size+a;this.data[u]=l,m&&(this.reservedBit[u]=!0)},BitMatrix$1.prototype.get=function(e,a){return this.data[e*this.size+a]},BitMatrix$1.prototype.xor=function(e,a,l){this.data[e*this.size+a]^=l},BitMatrix$1.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]};var ip=BitMatrix$1,cp={};!function(e){const a=ap.getSymbolSize;e.getRowColCoords=function getRowColCoords(e){if(1===e)return[];const l=Math.floor(e/7)+2,m=a(e),u=145===m?26:2*Math.ceil((m-13)/(2*l-2)),p=[m-7];for(let a=1;a<l-1;a++)p[a]=p[a-1]-u;return p.push(6),p.reverse()},e.getPositions=function getPositions2(a){const l=[],m=e.getRowColCoords(a),u=m.length;for(let e=0;e<u;e++)for(let a=0;a<u;a++)0===e&&0===a||0===e&&a===u-1||e===u-1&&0===a||l.push([m[e],m[a]]);return l}}(cp);var mp={};const dp=ap.getSymbolSize;mp.getPositions=function getPositions(e){const a=dp(e);return[[0,0],[a-7,0],[0,a-7]]};var up={};!function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a=3,l=3,m=40,u=10;function getMaskAt(a,l,m){switch(a){case e.Patterns.PATTERN000:return(l+m)%2==0;case e.Patterns.PATTERN001:return l%2==0;case e.Patterns.PATTERN010:return m%3==0;case e.Patterns.PATTERN011:return(l+m)%3==0;case e.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(m/3))%2==0;case e.Patterns.PATTERN101:return l*m%2+l*m%3==0;case e.Patterns.PATTERN110:return(l*m%2+l*m%3)%2==0;case e.Patterns.PATTERN111:return(l*m%3+(l+m)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}}e.isValid=function isValid3(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function from(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function getPenaltyN1(e){const l=e.size;let m=0,u=0,p=0,f=null,g=null;for(let h=0;h<l;h++){u=p=0,f=g=null;for(let y=0;y<l;y++){let l=e.get(h,y);l===f?u++:(u>=5&&(m+=a+(u-5)),f=l,u=1),l=e.get(y,h),l===g?p++:(p>=5&&(m+=a+(p-5)),g=l,p=1)}u>=5&&(m+=a+(u-5)),p>=5&&(m+=a+(p-5))}return m},e.getPenaltyN2=function getPenaltyN2(e){const a=e.size;let m=0;for(let l=0;l<a-1;l++)for(let u=0;u<a-1;u++){const a=e.get(l,u)+e.get(l,u+1)+e.get(l+1,u)+e.get(l+1,u+1);4!==a&&0!==a||m++}return m*l},e.getPenaltyN3=function getPenaltyN3(e){const a=e.size;let l=0,u=0,p=0;for(let m=0;m<a;m++){u=p=0;for(let f=0;f<a;f++)u=u<<1&2047|e.get(m,f),f>=10&&(1488===u||93===u)&&l++,p=p<<1&2047|e.get(f,m),f>=10&&(1488===p||93===p)&&l++}return l*m},e.getPenaltyN4=function getPenaltyN4(e){let a=0;const l=e.data.length;for(let m=0;m<l;m++)a+=e.data[m];return Math.abs(Math.ceil(100*a/l/5)-10)*u},e.applyMask=function applyMask(e,a){const l=a.size;for(let m=0;m<l;m++)for(let u=0;u<l;u++)a.isReserved(u,m)||a.xor(u,m,getMaskAt(e,u,m))},e.getBestMask=function getBestMask(a,l){const m=Object.keys(e.Patterns).length;let u=0,p=1/0;for(let f=0;f<m;f++){l(f),e.applyMask(f,a);const m=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(f,a),m<p&&(p=m,u=f)}return u}}(up);var pp={};const fp=op,gp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],hp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];pp.getBlocksCount=function getBlocksCount(e,a){switch(a){case fp.L:return gp[4*(e-1)+0];case fp.M:return gp[4*(e-1)+1];case fp.Q:return gp[4*(e-1)+2];case fp.H:return gp[4*(e-1)+3];default:return}},pp.getTotalCodewordsCount=function getTotalCodewordsCount(e,a){switch(a){case fp.L:return hp[4*(e-1)+0];case fp.M:return hp[4*(e-1)+1];case fp.Q:return hp[4*(e-1)+2];case fp.H:return hp[4*(e-1)+3];default:return}};var yp={},vp={};const Ep=new Uint8Array(512),xp=new Uint8Array(256);!function initTables(){let e=1;for(let a=0;a<255;a++)Ep[a]=e,xp[e]=a,e<<=1,256&e&&(e^=285);for(let a=255;a<512;a++)Ep[a]=Ep[a-255]}(),vp.log=function log(e){if(e<1)throw new Error("log("+e+")");return xp[e]},vp.exp=function exp(e){return Ep[e]},vp.mul=function mul(e,a){return 0===e||0===a?0:Ep[xp[e]+xp[a]]},function(e){const a=vp;e.mul=function mul2(e,l){const m=new Uint8Array(e.length+l.length-1);for(let u=0;u<e.length;u++)for(let p=0;p<l.length;p++)m[u+p]^=a.mul(e[u],l[p]);return m},e.mod=function mod(e,l){let m=new Uint8Array(e);for(;m.length-l.length>=0;){const e=m[0];for(let p=0;p<l.length;p++)m[p]^=a.mul(l[p],e);let u=0;for(;u<m.length&&0===m[u];)u++;m=m.slice(u)}return m},e.generateECPolynomial=function generateECPolynomial(l){let m=new Uint8Array([1]);for(let u=0;u<l;u++)m=e.mul(m,new Uint8Array([1,a.exp(u)]));return m}}(yp);const wp=yp;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function initialize(e){this.degree=e,this.genPoly=wp.generateECPolynomial(this.degree)},ReedSolomonEncoder$1.prototype.encode=function encode(e){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(e.length+this.degree);a.set(e);const l=wp.mod(a,this.genPoly),m=this.degree-l.length;if(m>0){const e=new Uint8Array(this.degree);return e.set(l,m),e}return l};var bp=ReedSolomonEncoder$1,Np={},_p={},kp={isValid:function isValid2(e){return!isNaN(e)&&e>=1&&e<=40}},Sp={};const Cp="[0-9]+";let Rp="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Rp=Rp.replace(/u/g,"\\u");const Ap="(?:(?![A-Z0-9 $%*+\\-./:]|"+Rp+")(?:.|[\r\n]))+";Sp.KANJI=new RegExp(Rp,"g"),Sp.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Sp.BYTE=new RegExp(Ap,"g"),Sp.NUMERIC=new RegExp(Cp,"g"),Sp.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const Tp=new RegExp("^"+Rp+"$"),Pp=new RegExp("^"+Cp+"$"),Dp=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Sp.testKanji=function testKanji(e){return Tp.test(e)},Sp.testNumeric=function testNumeric(e){return Pp.test(e)},Sp.testAlphanumeric=function testAlphanumeric(e){return Dp.test(e)},function(e){const a=kp,l=Sp;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function getCharCountIndicator(e,l){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!a.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?e.ccBits[0]:l<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function getBestModeForData(a){return l.testNumeric(a)?e.NUMERIC:l.testAlphanumeric(a)?e.ALPHANUMERIC:l.testKanji(a)?e.KANJI:e.BYTE},e.toString=function toString(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function isValid3(e){return e&&e.bit&&e.ccBits},e.from=function from(a,l){if(e.isValid(a))return a;try{return function fromString(a){if("string"!=typeof a)throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}(a)}catch(mE){return l}}}(_p),function(e){const a=ap,l=pp,m=op,u=_p,p=kp,f=a.getBCHDigit(7973);function getReservedBitsCount(e,a){return u.getCharCountIndicator(e,a)+4}function getTotalBitsFromDataArray(e,a){let l=0;return e.forEach(function(e){const m=getReservedBitsCount(e.mode,a);l+=m+e.getBitsLength()}),l}e.from=function from(e,a){return p.isValid(e)?parseInt(e,10):a},e.getCapacity=function getCapacity(e,m,f){if(!p.isValid(e))throw new Error("Invalid QR Code version");void 0===f&&(f=u.BYTE);const g=8*(a.getSymbolTotalCodewords(e)-l.getTotalCodewordsCount(e,m));if(f===u.MIXED)return g;const h=g-getReservedBitsCount(f,e);switch(f){case u.NUMERIC:return Math.floor(h/10*3);case u.ALPHANUMERIC:return Math.floor(h/11*2);case u.KANJI:return Math.floor(h/13);case u.BYTE:default:return Math.floor(h/8)}},e.getBestVersionForData=function getBestVersionForData(a,l){let p;const f=m.from(l,m.M);if(Array.isArray(a)){if(a.length>1)return function getBestVersionForMixedData(a,l){for(let m=1;m<=40;m++)if(getTotalBitsFromDataArray(a,m)<=e.getCapacity(m,l,u.MIXED))return m}(a,f);if(0===a.length)return 1;p=a[0]}else p=a;return function getBestVersionForDataLength(a,l,m){for(let u=1;u<=40;u++)if(l<=e.getCapacity(u,m,a))return u}(p.mode,p.getLength(),f)},e.getEncodedBits=function getEncodedBits2(e){if(!p.isValid(e)||e<7)throw new Error("Invalid QR Code version");let l=e<<12;for(;a.getBCHDigit(l)-f>=0;)l^=7973<<a.getBCHDigit(l)-f;return e<<12|l}}(Np);var Ip={};const Fp=ap,Mp=Fp.getBCHDigit(1335);Ip.getEncodedBits=function getEncodedBits(e,a){const l=e.bit<<3|a;let m=l<<10;for(;Fp.getBCHDigit(m)-Mp>=0;)m^=1335<<Fp.getBCHDigit(m)-Mp;return 21522^(l<<10|m)};var jp={};const Op=_p;function NumericData(e){this.mode=Op.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function getBitsLength(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},NumericData.prototype.getLength=function getLength(){return this.data.length},NumericData.prototype.getBitsLength=function getBitsLength2(){return NumericData.getBitsLength(this.data.length)},NumericData.prototype.write=function write(e){let a,l,m;for(a=0;a+3<=this.data.length;a+=3)l=this.data.substr(a,3),m=parseInt(l,10),e.put(m,10);const u=this.data.length-a;u>0&&(l=this.data.substr(a),m=parseInt(l,10),e.put(m,3*u+1))};var Lp=NumericData;const $p=_p,Up=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=$p.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function getBitsLength3(e){return 11*Math.floor(e/2)+e%2*6},AlphanumericData.prototype.getLength=function getLength2(){return this.data.length},AlphanumericData.prototype.getBitsLength=function getBitsLength4(){return AlphanumericData.getBitsLength(this.data.length)},AlphanumericData.prototype.write=function write2(e){let a;for(a=0;a+2<=this.data.length;a+=2){let l=45*Up.indexOf(this.data[a]);l+=Up.indexOf(this.data[a+1]),e.put(l,11)}this.data.length%2&&e.put(Up.indexOf(this.data[a]),6)};var zp=AlphanumericData;const Bp=_p;function ByteData(e){this.mode=Bp.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}ByteData.getBitsLength=function getBitsLength5(e){return 8*e},ByteData.prototype.getLength=function getLength3(){return this.data.length},ByteData.prototype.getBitsLength=function getBitsLength6(){return ByteData.getBitsLength(this.data.length)},ByteData.prototype.write=function(e){for(let a=0,l=this.data.length;a<l;a++)e.put(this.data[a],8)};var qp=ByteData;const Vp=_p,Hp=ap;function KanjiData(e){this.mode=Vp.KANJI,this.data=e}KanjiData.getBitsLength=function getBitsLength7(e){return 13*e},KanjiData.prototype.getLength=function getLength4(){return this.data.length},KanjiData.prototype.getBitsLength=function getBitsLength8(){return KanjiData.getBitsLength(this.data.length)},KanjiData.prototype.write=function(e){let a;for(a=0;a<this.data.length;a++){let l=Hp.toSJIS(this.data[a]);if(l>=33088&&l<=40956)l-=33088;else{if(!(l>=57408&&l<=60351))throw new Error("Invalid SJIS character: "+this.data[a]+"\nMake sure your charset is UTF-8");l-=49472}l=192*(l>>>8&255)+(255&l),e.put(l,13)}};var Wp,Zp=KanjiData,Kp={exports:{}},Gp=Kp.exports=Wp={single_source_shortest_paths:function(e,a,l){var m={},u={};u[a]=0;var p,f,g,h,y,v,E,x=Wp.PriorityQueue.make();for(x.push(a,0);!x.empty();)for(g in f=(p=x.pop()).value,h=p.cost,y=e[f]||{})y.hasOwnProperty(g)&&(v=h+y[g],E=u[g],(void 0===u[g]||E>v)&&(u[g]=v,x.push(g,v),m[g]=f));if(void 0!==l&&void 0===u[l]){var w=["Could not find a path from ",a," to ",l,"."].join("");throw new Error(w)}return m},extract_shortest_path_from_predecessor_list:function(e,a){for(var l=[],m=a;m;)l.push(m),e[m],m=e[m];return l.reverse(),l},find_path:function(e,a,l){var m=Wp.single_source_shortest_paths(e,a,l);return Wp.extract_shortest_path_from_predecessor_list(m,l)},PriorityQueue:{make:function(e){var a,l=Wp.PriorityQueue,m={};for(a in e=e||{},l)l.hasOwnProperty(a)&&(m[a]=l[a]);return m.queue=[],m.sorter=e.sorter||l.default_sorter,m},default_sorter:function(e,a){return e.cost-a.cost},push:function(e,a){var l={value:e,cost:a};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};!function(e){const a=_p,l=Lp,m=zp,u=qp,p=Zp,f=Sp,g=ap,h=Gp;function getStringByteLength(e){return unescape(encodeURIComponent(e)).length}function getSegments(e,a,l){const m=[];let u;for(;null!==(u=e.exec(l));)m.push({data:u[0],index:u.index,mode:a,length:u[0].length});return m}function getSegmentsFromString(e){const l=getSegments(f.NUMERIC,a.NUMERIC,e),m=getSegments(f.ALPHANUMERIC,a.ALPHANUMERIC,e);let u,p;g.isKanjiModeEnabled()?(u=getSegments(f.BYTE,a.BYTE,e),p=getSegments(f.KANJI,a.KANJI,e)):(u=getSegments(f.BYTE_KANJI,a.BYTE,e),p=[]);return l.concat(m,u,p).sort(function(e,a){return e.index-a.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function getSegmentBitsLength(e,f){switch(f){case a.NUMERIC:return l.getBitsLength(e);case a.ALPHANUMERIC:return m.getBitsLength(e);case a.KANJI:return p.getBitsLength(e);case a.BYTE:return u.getBitsLength(e)}}function buildSingleSegment(e,f){let h;const y=a.getBestModeForData(e);if(h=a.from(f,y),h!==a.BYTE&&h.bit<y.bit)throw new Error('"'+e+'" cannot be encoded with mode '+a.toString(h)+".\n Suggested mode is: "+a.toString(y));switch(h!==a.KANJI||g.isKanjiModeEnabled()||(h=a.BYTE),h){case a.NUMERIC:return new l(e);case a.ALPHANUMERIC:return new m(e);case a.KANJI:return new p(e);case a.BYTE:return new u(e)}}e.fromArray=function fromArray(e){return e.reduce(function(e,a){return"string"==typeof a?e.push(buildSingleSegment(a,null)):a.data&&e.push(buildSingleSegment(a.data,a.mode)),e},[])},e.fromString=function fromString(l,m){const u=function buildNodes(e){const l=[];for(let m=0;m<e.length;m++){const u=e[m];switch(u.mode){case a.NUMERIC:l.push([u,{data:u.data,mode:a.ALPHANUMERIC,length:u.length},{data:u.data,mode:a.BYTE,length:u.length}]);break;case a.ALPHANUMERIC:l.push([u,{data:u.data,mode:a.BYTE,length:u.length}]);break;case a.KANJI:l.push([u,{data:u.data,mode:a.BYTE,length:getStringByteLength(u.data)}]);break;case a.BYTE:l.push([{data:u.data,mode:a.BYTE,length:getStringByteLength(u.data)}])}}return l}(getSegmentsFromString(l,g.isKanjiModeEnabled())),p=function buildGraph(e,l){const m={},u={start:{}};let p=["start"];for(let f=0;f<e.length;f++){const g=e[f],h=[];for(let e=0;e<g.length;e++){const y=g[e],v=""+f+e;h.push(v),m[v]={node:y,lastCount:0},u[v]={};for(let e=0;e<p.length;e++){const f=p[e];m[f]&&m[f].node.mode===y.mode?(u[f][v]=getSegmentBitsLength(m[f].lastCount+y.length,y.mode)-getSegmentBitsLength(m[f].lastCount,y.mode),m[f].lastCount+=y.length):(m[f]&&(m[f].lastCount=y.length),u[f][v]=getSegmentBitsLength(y.length,y.mode)+4+a.getCharCountIndicator(y.mode,l))}}p=h}for(let a=0;a<p.length;a++)u[p[a]].end=0;return{map:u,table:m}}(u,m),f=h.find_path(p.map,"start","end"),y=[];for(let e=1;e<f.length-1;e++)y.push(p.table[f[e]].node);return e.fromArray(function mergeSegments(e){return e.reduce(function(e,a){const l=e.length-1>=0?e[e.length-1]:null;return l&&l.mode===a.mode?(e[e.length-1].data+=a.data,e):(e.push(a),e)},[])}(y))},e.rawSplit=function rawSplit(a){return e.fromArray(getSegmentsFromString(a,g.isKanjiModeEnabled()))}}(jp);const Qp=ap,Yp=op,Jp=lp,Xp=ip,ef=cp,tf=mp,af=up,rf=pp,nf=bp,sf=Np,of=Ip,lf=_p,cf=jp;function setupFormatInfo(e,a,l){const m=e.size,u=of.getEncodedBits(a,l);let p,f;for(p=0;p<15;p++)f=1==(u>>p&1),p<6?e.set(p,8,f,!0):p<8?e.set(p+1,8,f,!0):e.set(m-15+p,8,f,!0),p<8?e.set(8,m-p-1,f,!0):p<9?e.set(8,15-p-1+1,f,!0):e.set(8,15-p-1,f,!0);e.set(m-8,8,1,!0)}function createData(e,a,l){const m=new Jp;l.forEach(function(a){m.put(a.mode.bit,4),m.put(a.getLength(),lf.getCharCountIndicator(a.mode,e)),a.write(m)});const u=8*(Qp.getSymbolTotalCodewords(e)-rf.getTotalCodewordsCount(e,a));for(m.getLengthInBits()+4<=u&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(0);const p=(u-m.getLengthInBits())/8;for(let f=0;f<p;f++)m.put(f%2?17:236,8);return function createCodewords(e,a,l){const m=Qp.getSymbolTotalCodewords(a),u=rf.getTotalCodewordsCount(a,l),p=m-u,f=rf.getBlocksCount(a,l),g=m%f,h=f-g,y=Math.floor(m/f),v=Math.floor(p/f),E=v+1,x=y-v,w=new nf(x);let b=0;const N=new Array(f),_=new Array(f);let k=0;const S=new Uint8Array(e.buffer);for(let P=0;P<f;P++){const e=P<h?v:E;N[P]=S.slice(b,b+e),_[P]=w.encode(N[P]),b+=e,k=Math.max(k,e)}const C=new Uint8Array(m);let R,A,T=0;for(R=0;R<k;R++)for(A=0;A<f;A++)R<N[A].length&&(C[T++]=N[A][R]);for(R=0;R<x;R++)for(A=0;A<f;A++)C[T++]=_[A][R];return C}(m,e,a)}function createSymbol(e,a,l,m){let u;if(Array.isArray(e))u=cf.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let m=a;if(!m){const a=cf.rawSplit(e);m=sf.getBestVersionForData(a,l)}u=cf.fromString(e,m||40)}}const p=sf.getBestVersionForData(u,l);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(a){if(a<p)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else a=p;const f=createData(a,l,u),g=Qp.getSymbolSize(a),h=new Xp(g);return function setupFinderPattern(e,a){const l=e.size,m=tf.getPositions(a);for(let u=0;u<m.length;u++){const a=m[u][0],p=m[u][1];for(let m=-1;m<=7;m++)if(!(a+m<=-1||l<=a+m))for(let u=-1;u<=7;u++)p+u<=-1||l<=p+u||(m>=0&&m<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===m||6===m)||m>=2&&m<=4&&u>=2&&u<=4?e.set(a+m,p+u,!0,!0):e.set(a+m,p+u,!1,!0))}}(h,a),function setupTimingPattern(e){const a=e.size;for(let l=8;l<a-8;l++){const a=l%2==0;e.set(l,6,a,!0),e.set(6,l,a,!0)}}(h),function setupAlignmentPattern(e,a){const l=ef.getPositions(a);for(let m=0;m<l.length;m++){const a=l[m][0],u=l[m][1];for(let l=-2;l<=2;l++)for(let m=-2;m<=2;m++)-2===l||2===l||-2===m||2===m||0===l&&0===m?e.set(a+l,u+m,!0,!0):e.set(a+l,u+m,!1,!0)}}(h,a),setupFormatInfo(h,l,0),a>=7&&function setupVersionInfo(e,a){const l=e.size,m=sf.getEncodedBits(a);let u,p,f;for(let g=0;g<18;g++)u=Math.floor(g/3),p=g%3+l-8-3,f=1==(m>>g&1),e.set(u,p,f,!0),e.set(p,u,f,!0)}(h,a),function setupData(e,a){const l=e.size;let m=-1,u=l-1,p=7,f=0;for(let g=l-1;g>0;g-=2)for(6===g&&g--;;){for(let l=0;l<2;l++)if(!e.isReserved(u,g-l)){let m=!1;f<a.length&&(m=1==(a[f]>>>p&1)),e.set(u,g-l,m),p--,-1===p&&(f++,p=7)}if(u+=m,u<0||l<=u){u-=m,m=-m;break}}}(h,f),isNaN(m)&&(m=af.getBestMask(h,setupFormatInfo.bind(null,h,l))),af.applyMask(m,h),setupFormatInfo(h,l,m),{modules:h,version:a,errorCorrectionLevel:l,maskPattern:m,segments:u}}tp.create=function create(e,a){if(void 0===e||""===e)throw new Error("No input text");let l,m,u=Yp.M;return void 0!==a&&(u=Yp.from(a.errorCorrectionLevel,Yp.M),l=sf.from(a.version),m=af.from(a.maskPattern),a.toSJISFunc&&Qp.setToSJISFunction(a.toSJISFunc)),createSymbol(e,l,u,m)};var mf={},df={};!function(e){function hex2rgba(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let a=e.slice().replace("#","").split("");if(a.length<3||5===a.length||a.length>8)throw new Error("Invalid hex color: "+e);3!==a.length&&4!==a.length||(a=Array.prototype.concat.apply([],a.map(function(e){return[e,e]}))),6===a.length&&a.push("F","F");const l=parseInt(a.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:255&l,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function getOptions(e){e||(e={}),e.color||(e.color={});const a=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,l=e.width&&e.width>=21?e.width:void 0,m=e.scale||4;return{width:l,scale:l?4:m,margin:a,color:{dark:hex2rgba(e.color.dark||"#000000ff"),light:hex2rgba(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function getScale2(e,a){return a.width&&a.width>=e+2*a.margin?a.width/(e+2*a.margin):a.scale},e.getImageWidth=function getImageWidth(a,l){const m=e.getScale(a,l);return Math.floor((a+2*l.margin)*m)},e.qrToImageData=function qrToImageData(a,l,m){const u=l.modules.size,p=l.modules.data,f=e.getScale(u,m),g=Math.floor((u+2*m.margin)*f),h=m.margin*f,y=[m.color.light,m.color.dark];for(let e=0;e<g;e++)for(let l=0;l<g;l++){let v=4*(e*g+l),E=m.color.light;if(e>=h&&l>=h&&e<g-h&&l<g-h){E=y[p[Math.floor((e-h)/f)*u+Math.floor((l-h)/f)]?1:0]}a[v++]=E.r,a[v++]=E.g,a[v++]=E.b,a[v]=E.a}}}(df),function(e){const a=df;e.render=function render2(e,l,m){let u=m,p=l;void 0!==u||l&&l.getContext||(u=l,l=void 0),l||(p=function getCanvasElement(){try{return document.createElement("canvas")}catch(mE){throw new Error("You need to specify a canvas element")}}()),u=a.getOptions(u);const f=a.getImageWidth(e.modules.size,u),g=p.getContext("2d"),h=g.createImageData(f,f);return a.qrToImageData(h.data,e,u),function clearCanvas(e,a,l){e.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=l,a.width=l,a.style.height=l+"px",a.style.width=l+"px"}(g,p,f),g.putImageData(h,0,0),p},e.renderToDataURL=function renderToDataURL(a,l,m){let u=m;void 0!==u||l&&l.getContext||(u=l,l=void 0),u||(u={});const p=e.render(a,l,u),f=u.type||"image/png",g=u.rendererOpts||{};return p.toDataURL(f,g.quality)}}(mf);var uf={};const pf=df;function getColorAttrib(e,a){const l=e.a/255,m=a+'="'+e.hex+'"';return l<1?m+" "+a+'-opacity="'+l.toFixed(2).slice(1)+'"':m}function svgCmd(e,a,l){let m=e+a;return void 0!==l&&(m+=" "+l),m}uf.render=function render(e,a,l){const m=pf.getOptions(a),u=e.modules.size,p=e.modules.data,f=u+2*m.margin,g=m.color.light.a?"<path "+getColorAttrib(m.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",h="<path "+getColorAttrib(m.color.dark,"stroke")+' d="'+function qrToPath(e,a,l){let m="",u=0,p=!1,f=0;for(let g=0;g<e.length;g++){const h=Math.floor(g%a),y=Math.floor(g/a);h||p||(p=!0),e[g]?(f++,g>0&&h>0&&e[g-1]||(m+=p?svgCmd("M",h+l,.5+y+l):svgCmd("m",u,0),u=0,p=!1),h+1<a&&e[g+1]||(m+=svgCmd("h",f),f=0)):u++}return m}(p,u,m.margin)+'"/>',y='viewBox="0 0 '+f+" "+f+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+y+' shape-rendering="crispEdges">'+g+h+"</svg>\n";return"function"==typeof l&&l(null,v),v};const canPromise=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},ff=tp,gf=mf,hf=uf;function renderCanvas(e,a,l,m,u){const p=[].slice.call(arguments,1),f=p.length,g="function"==typeof p[f-1];if(!g&&!canPromise())throw new Error("Callback required as last argument");if(!g){if(f<1)throw new Error("Too few arguments provided");return 1===f?(l=a,a=m=void 0):2!==f||a.getContext||(m=l,l=a,a=void 0),new Promise(function(u,p){try{const p=ff.create(l,m);u(e(p,a,m))}catch(mE){p(mE)}})}if(f<2)throw new Error("Too few arguments provided");2===f?(u=l,l=a,a=m=void 0):3===f&&(a.getContext&&void 0===u?(u=m,m=void 0):(u=m,m=l,l=a,a=void 0));try{const p=ff.create(l,m);u(null,e(p,a,m))}catch(mE){u(mE)}}ep.create=ff.create,ep.toCanvas=renderCanvas.bind(null,gf.render),ep.toDataURL=renderCanvas.bind(null,gf.renderToDataURL),ep.toString=renderCanvas.bind(null,function(e,a,l){return hf.render(e,l)});const yf=new class TwoFactorService{async setupTwoFactor(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");try{const{data:a,error:l}=await Mo.functions.invoke("two-factor-setup",{body:{userId:e.id}});if(l)throw new Error(l.message||"Failed to setup 2FA");const m=await ep.toDataURL(a.qrCodeData);return{secret:a.secret,qrCodeUrl:m,backupCodes:a.backupCodes}}catch(a){throw console.error("Error setting up 2FA:",a),new Error("Failed to setup two-factor authentication")}}async enableTwoFactor(e,a){const{data:{user:l}}=await Mo.auth.getUser();if(!l)throw new Error("User must be authenticated");try{const{error:m}=await Mo.functions.invoke("two-factor-enable",{body:{userId:l.id,token:e,secret:a}});if(m)throw new Error(m.message||"Invalid verification code");await Mo.auth.updateUser({data:{two_factor_enabled:!0}})}catch(m){throw console.error("Error enabling 2FA:",m),new Error("Failed to enable two-factor authentication")}}async disableTwoFactor(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated");try{const{error:l}=await Mo.auth.signInWithPassword({email:a.email,password:e});if(l)throw new Error("Invalid password");const{error:m}=await Mo.functions.invoke("two-factor-disable",{body:{userId:a.id}});if(m)throw new Error(m.message||"Failed to disable 2FA");await Mo.auth.updateUser({data:{two_factor_enabled:!1}})}catch(l){throw console.error("Error disabling 2FA:",l),new Error("Failed to disable two-factor authentication")}}async verifyTwoFactor(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated");try{const{data:l,error:m}=await Mo.functions.invoke("two-factor-verify",{body:{userId:a.id,token:e.token,backupCode:e.backupCode}});if(m)throw new Error(m.message||"Invalid verification code");return l.verified}catch(l){throw console.error("Error verifying 2FA:",l),new Error("Failed to verify two-factor authentication")}}async getTwoFactorStatus(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");try{const{data:a,error:l}=await Mo.functions.invoke("two-factor-status",{body:{userId:e.id}});if(l)throw new Error(l.message||"Failed to get 2FA status");return{isEnabled:a.isEnabled||!1,hasBackupCodes:a.hasBackupCodes||!1,lastUsed:a.lastUsed}}catch(a){return console.error("Error getting 2FA status:",a),{isEnabled:e.user_metadata?.two_factor_enabled||!1,hasBackupCodes:!1}}}async generateBackupCodes(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");try{const{data:a,error:l}=await Mo.functions.invoke("two-factor-backup-codes",{body:{userId:e.id}});if(l)throw new Error(l.message||"Failed to generate backup codes");return a.backupCodes}catch(a){throw console.error("Error generating backup codes:",a),new Error("Failed to generate backup codes")}}isTwoFactorEnabled(e){return!0===e?.user_metadata?.two_factor_enabled}mockSetup(){return{secret:"JBSWY3DPEHPK3PXP",qrCodeUrl:"",backupCodes:["12345678","87654321","11111111","22222222","33333333","44444444","55555555","66666666"]}}async setupTwoFactorDev(){return this.setupTwoFactor()}async verifyTwoFactorDev(e){return this.verifyTwoFactor({token:e})}},TwoFactorVerification=({onVerificationSuccess:e,onBack:a,userEmail:l})=>{const[m,u]=Me.useState(""),[p,f]=Me.useState(""),[g,h]=Me.useState(!1),[y,v]=Me.useState(null),[E,x]=Me.useState(!1);return je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement("div",{className:"flex items-center justify-center mb-4"},je.createElement("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},je.createElement(Ir,{className:"h-6 w-6 text-blue-600"}))),je.createElement(fi,{className:"text-2xl font-bold text-center"},"Two-Factor Authentication"),je.createElement(gi,{className:"text-center"},E?"Enter one of your backup codes to continue":"Enter the verification code from your authenticator app"),l&&je.createElement("p",{className:"text-sm text-gray-500 text-center"},"Signing in as ",l)),je.createElement(hi,{className:"space-y-4"},y&&je.createElement(_i,{variant:"destructive"},je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,y)),je.createElement("div",{className:"space-y-4"},E?je.createElement("div",null,je.createElement(Dd,{htmlFor:"backup-code"},"Backup Code"),je.createElement(zo,{id:"backup-code",type:"text",value:p,onChange:e=>(e=>{const a=e.replace(/\D/g,"").slice(0,8);f(a),v(null)})(e.target.value),placeholder:"12345678",maxLength:8,className:"text-center text-lg tracking-widest",autoComplete:"one-time-code",autoFocus:!0}),je.createElement("p",{className:"text-xs text-gray-500 mt-1 text-center"},"Enter one of your 8-digit backup codes")):je.createElement("div",null,je.createElement(Dd,{htmlFor:"verification-code"},"Verification Code"),je.createElement(zo,{id:"verification-code",type:"text",value:m,onChange:e=>(e=>{const a=e.replace(/\D/g,"").slice(0,6);u(a),v(null)})(e.target.value),placeholder:"000000",maxLength:6,className:"text-center text-lg tracking-widest",autoComplete:"one-time-code",autoFocus:!0}),je.createElement("p",{className:"text-xs text-gray-500 mt-1 text-center"},"Enter the 6-digit code from your authenticator app")),je.createElement(Uo,{onClick:async()=>{if(m||p){h(!0),v(null);try{let a=!1;if(a=await yf.verifyTwoFactor({token:m,backupCode:E?p:void 0}),!a)throw new Error("Invalid verification code");An.success("Two-factor authentication verified successfully"),e()}catch(a){console.error("Error verifying 2FA:",a),v(a.message||"Invalid verification code")}finally{h(!1)}}else v("Please enter a verification code")},disabled:g||!E&&6!==m.length||E&&8!==p.length,className:"w-full"},g?je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}):je.createElement(Ir,{className:"h-4 w-4 mr-2"}),"Verify and Continue"),je.createElement(Wu,null),je.createElement("div",{className:"space-y-2"},je.createElement(Uo,{variant:"ghost",onClick:()=>{x(!E),u(""),f(""),v(null)},className:"w-full text-sm"},E?je.createElement(je.Fragment,null,je.createElement(Mr,{className:"h-4 w-4 mr-2"}),"Use authenticator app instead"):je.createElement(je.Fragment,null,je.createElement(ar,{className:"h-4 w-4 mr-2"}),"Use backup code instead")),a&&je.createElement(Uo,{variant:"outline",onClick:a,className:"w-full text-sm"},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to login"))),je.createElement("div",{className:"text-center"},je.createElement(Zu,null,je.createElement(Ku,{asChild:!0},je.createElement(Uo,{variant:"link",className:"text-sm"},"Need help?")),je.createElement(Yu,null,je.createElement(DialogHeader,null,je.createElement(Ju,null,"Two-Factor Authentication Help"),je.createElement(Xu,null,"Having trouble with your verification code?")),je.createElement("div",{className:"space-y-4"},je.createElement("div",null,je.createElement("h4",{className:"font-medium mb-2"},"Authenticator App Issues:"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," Make sure your device's time is synchronized"),je.createElement("li",null," Check that you're using the correct account in your app"),je.createElement("li",null," Try refreshing the code in your authenticator app"))),je.createElement("div",null,je.createElement("h4",{className:"font-medium mb-2"},"Lost Access?"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," Use one of your backup codes"),je.createElement("li",null," Contact support if you've lost both your device and backup codes"))),je.createElement("div",null,je.createElement("h4",{className:"font-medium mb-2"},"Backup Codes:"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," Each backup code can only be used once"),je.createElement("li",null," Generate new backup codes after using them"),je.createElement("li",null," Store them in a safe place"))))))))))},EmailVerificationPrompt=({email:e,onBack:a})=>{const[l,m]=Me.useState(!1),[u,p]=Me.useState(!1),{resendVerificationEmail:f}=useAuth();return je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"mx-auto flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-4"},je.createElement(mr,{className:"h-6 w-6 text-blue-600"})),je.createElement(fi,{className:"text-2xl font-bold"},"Check Your Email"),je.createElement(gi,null,"We've sent a verification link to ",je.createElement("strong",null,e))),je.createElement(hi,{className:"space-y-4"},je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,"You must verify your email address before you can sign in to your account.")),u&&je.createElement(_i,{className:"border-green-200 bg-green-50"},je.createElement(Ta,{className:"h-4 w-4 text-green-600"}),je.createElement(ki,{className:"text-green-800"},"Verification email sent successfully! Please check your inbox and spam folder.")),je.createElement("div",{className:"space-y-3"},je.createElement("p",{className:"text-sm text-gray-600 text-center"},"Click the verification link in your email to activate your account."),je.createElement("div",{className:"text-center"},je.createElement(Uo,{variant:"outline",onClick:async()=>{m(!0),p(!1);try{await f(e),p(!0),An.success("Verification email sent! Please check your inbox.")}catch(a){console.error("Error resending verification email:",a),An.error(a.message||"Failed to resend verification email")}finally{m(!1)}},disabled:l,className:"w-full"},l&&je.createElement(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Sending...":"Resend Verification Email")),a&&je.createElement(Uo,{variant:"ghost",onClick:a,className:"w-full"},"Back to Sign In")),je.createElement("div",{className:"text-xs text-gray-500 text-center space-y-2"},je.createElement("p",null,je.createElement("strong",null,"Didn't receive the email?")),je.createElement("ul",{className:"space-y-1"},je.createElement("li",null," Check your spam/junk folder"),je.createElement("li",null," Make sure ",e," is correct"),je.createElement("li",null," Try resending the verification email"))))))},vf=Du({email:Au().email("Please enter a valid email address"),password:Au().min(6,"Password must be at least 6 characters")}),LoginForm=()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState(!1),[u,p]=Me.useState(null),[f,g]=Me.useState(!1),[h,y]=Me.useState(!1),[v,E]=Me.useState(""),[x,w]=Me.useState(null),{signIn:b}=useAuth(),N=useNavigate();Me.useEffect(()=>{(async()=>{try{const e=await fetch("https://api.ipify.org?format=json");if(!e?.ok){console.warn("Failed to get IP address, using fallback");const e=await zu.checkRateLimit("127.0.0.1");return void w({attemptsRemaining:e.attemptsRemaining,resetTime:e.resetTime,isBlocked:!e.allowed})}const a=await e.json();if(!a?.ip){console.warn("Invalid IP response, using fallback");const e=await zu.checkRateLimit("127.0.0.1");return void w({attemptsRemaining:e.attemptsRemaining,resetTime:e.resetTime,isBlocked:!e.allowed})}const l=await zu.checkRateLimit(a.ip);w({attemptsRemaining:l.attemptsRemaining,resetTime:l.resetTime,isBlocked:!l.allowed})}catch(e){console.error("Error checking rate limit:",e);try{const e=await zu.checkRateLimit("127.0.0.1");w({attemptsRemaining:e.attemptsRemaining,resetTime:e.resetTime,isBlocked:!e.allowed})}catch(a){console.error("Fallback rate limit check failed:",a),w({attemptsRemaining:5,resetTime:void 0,isBlocked:!1})}}})()},[]);const{register:_,handleSubmit:k,formState:{errors:S}}=useForm({resolver:t(vf)}),handleTwoFactorSuccess=()=>{g(!1),N(ii.dashboard)},handleTwoFactorBack=()=>{g(!1),E("")},handleEmailVerificationBack=()=>{y(!1),E("")};return f?je.createElement(TwoFactorVerification,{onVerificationSuccess:handleTwoFactorSuccess,onBack:handleTwoFactorBack,userEmail:v}):h?je.createElement(EmailVerificationPrompt,{email:v,onBack:handleEmailVerificationBack}):je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement(fi,{className:"text-2xl font-bold text-center"},"Sign in"),je.createElement(gi,{className:"text-center"},"Enter your email and password to access your account")),je.createElement("form",{onSubmit:k(async e=>{m(!0),p(null);try{(await b(e.email,e.password)).requiresTwoFactor?(E(e.email),g(!0)):N(ii.dashboard)}catch(dE){const l=dE.message??"An error occurred during login";l.includes("verify your email")||l.includes("Email not confirmed")?(E(e.email),y(!0),p(null)):p(l)}finally{m(!1)}})},je.createElement(hi,{className:"space-y-4"},u&&je.createElement(_i,{variant:"destructive"},je.createElement(ki,null,u)),x?.isBlocked&&je.createElement(_i,{variant:"destructive"},je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,"Too many failed login attempts. Please try again ",x.resetTime?.toLocaleTimeString(),".")),x&&!x.isBlocked&&x.attemptsRemaining<3&&je.createElement(_i,null,je.createElement(Ir,{className:"h-4 w-4"}),je.createElement(ki,null,x.attemptsRemaining," login attempts remaining before temporary lockout.")),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"email"},"Email"),je.createElement(zo,{id:"email",type:"email",placeholder:"Enter your email",..._("email"),disabled:l}),S.email&&je.createElement("p",{className:"text-sm text-red-600"},S.email.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"password"},"Password"),je.createElement("div",{className:"relative"},je.createElement(zo,{id:"password",type:e?"text":"password",placeholder:"Enter your password",..._("password"),disabled:l}),je.createElement(Uo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!e),disabled:l},e?je.createElement(Ba,{className:"h-4 w-4"}):je.createElement(qa,{className:"h-4 w-4"}))),S.password&&je.createElement("p",{className:"text-sm text-red-600"},S.password.message)),je.createElement("div",{className:"flex items-center justify-between"},je.createElement(Ro,{to:ii.forgotPassword,className:"text-sm text-blue-600 hover:text-blue-500"},"Forgot your password?"))),je.createElement(yi,{className:"flex flex-col space-y-4"},je.createElement(Uo,{type:"submit",className:"w-full",disabled:l||x?.isBlocked},l&&je.createElement(lr,{className:"mr-2 h-4 w-4 animate-spin"}),x?.isBlocked?"Account Temporarily Locked":"Sign in"),je.createElement("p",{className:"text-center text-sm text-gray-600"},"Don't have an account?"," ",je.createElement(Ro,{to:ii.register,className:"text-blue-600 hover:text-blue-500 font-medium"},"Sign up"))))))},ProtectedRoute=({children:e,requireAuth:a=!0,redirectTo:l=ii.login,fallbackToGuest:m=!1})=>{const{user:u,loading:p,session:f}=useSafeAuth(),g=useLocation();return p?je.createElement("div",{className:"min-h-screen flex items-center justify-center"},je.createElement("div",{className:"flex flex-col items-center space-y-4"},je.createElement(lr,{className:"h-8 w-8 animate-spin"}),je.createElement("p",{className:"text-sm text-gray-600"},"Checking authentication..."),je.createElement("p",{className:"text-xs text-gray-500"},"Please wait while we verify your session"))):a&&!u?m?je.createElement(AuthErrorBoundary,null,je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},je.createElement("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center"},je.createElement("div",{className:"mb-4"},je.createElement("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},je.createElement(Ir,{className:"w-6 h-6 text-blue-600"}))),je.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Authentication Required"),je.createElement("p",{className:"text-gray-600 mb-6"},"This page requires you to be signed in. Please log in to continue."),je.createElement("div",{className:"space-y-3"},je.createElement(Uo,{onClick:()=>window.location.href=ii.login,className:"w-full"},"Sign In"),je.createElement(Uo,{onClick:()=>window.location.href=ii.home,variant:"outline",className:"w-full"},"Back to Home"))))):je.createElement(Navigate,{to:l,state:{from:g},replace:!0}):!a&&u&&f?je.createElement(Navigate,{to:ii.dashboard,replace:!0}):je.createElement(AuthErrorBoundary,null,e)},AuthenticatedRoute=({children:e,fallbackToGuest:a=!0})=>je.createElement(ProtectedRoute,{requireAuth:!0,fallbackToGuest:a},e),UnauthenticatedRoute=({children:e})=>je.createElement(ProtectedRoute,{requireAuth:!1},e),Login=()=>je.createElement(UnauthenticatedRoute,null,je.createElement(LoginForm,null)),SupabaseConnectionTest=()=>{const[e,a]=Me.useState("loading"),[l,m]=Me.useState(null),[u,p]=Me.useState("loading"),[f,g]=Me.useState("loading");Me.useEffect(()=>{(async()=>{try{const{error:e}=await Mo.auth.getSession();if(e)return a("error"),void m(e.message);a("success");const{data:{user:l},error:u}=await Mo.auth.getUser();if(u)p("unauthenticated"),g("missing");else if(l){p("authenticated");const{error:e}=await Mo.from("profiles").select("*").eq("id",l.id).single();e?"PGRST116"===e.code?g("missing"):g("error"):g("exists")}else p("unauthenticated"),g("missing")}catch(dE){console.error("Connection test error:",dE),a("error"),m(dE.message),p("unauthenticated"),g("missing")}})()},[]);const getStatusBadge=(e,a,l,m)=>{switch(e){case"success":case"exists":case"authenticated":return je.createElement(Badge,{variant:"default",className:"bg-green-100 text-green-800"},je.createElement(Ta,{className:"w-3 h-3 mr-1"}),a);case"error":case"missing":return je.createElement(Badge,{variant:"destructive"},je.createElement(Da,{className:"w-3 h-3 mr-1"}),l);case"unauthenticated":return je.createElement(Badge,{variant:"secondary"},je.createElement(Da,{className:"w-3 h-3 mr-1"}),"Not Authenticated");default:return je.createElement(Badge,{variant:"outline"},je.createElement(lr,{className:"w-3 h-3 mr-1 animate-spin"}),m)}};return je.createElement(ui,{className:"w-full max-w-md mx-auto"},je.createElement(pi,null,je.createElement(fi,null,"Supabase Connection Status"),je.createElement(gi,null,"Debug information for authentication issues")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium"},"Database Connection:"),getStatusBadge(e,"Connected","Failed","Testing...")),je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium"},"Authentication:"),getStatusBadge(u,"Authenticated","Error","Checking...")),je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium"},"Profile:"),getStatusBadge(f,"Exists","Missing","Loading...")),l&&je.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md"},je.createElement("p",{className:"text-sm text-red-800 font-medium"},"Error Details:"),je.createElement("p",{className:"text-xs text-red-600 mt-1"},l)),je.createElement("div",{className:"text-xs text-gray-500 space-y-1"},je.createElement("p",null,je.createElement("strong",null,"Project:")," kvlaydeyqidlfpfutbmp"),je.createElement("p",null,je.createElement("strong",null,"URL:")," ","https://kvlaydeyqidlfpfutbmp.supabase.co"),je.createElement("p",null,je.createElement("strong",null,"Environment:")," ","production"))))},AuthUrlTest=()=>{const[e,a]=Me.useState([]),[l,m]=Me.useState(!1);Me.useState(null);const runTests=async()=>{m(!0);const e=[];try{const m="https://craftchatbot.com";e.push({name:"App URL",expected:"http://localhost:8082",actual:m,status:"http://localhost:8082"===m?"pass":"fail",description:"Application base URL should match development server"});const u="https://craftchatbot.com";e.push({name:"Supabase Site URL",expected:"http://localhost:8082",actual:u,status:"http://localhost:8082"===u?"pass":"fail",description:"Supabase site URL should match app URL"});const p=getAuthRedirectUrls(),f=p.includes("http://localhost:8082");e.push({name:"Auth Redirect URLs",expected:"Contains http://localhost:8082",actual:p.join(", "),status:f?"pass":"fail",description:"Redirect URLs should include the development server URL"});const g="https://craftchatbot.com";if(e.push({name:"Environment VITE_APP_URL",expected:"http://localhost:8082",actual:g||"undefined",status:"http://localhost:8082"===g?"pass":"warning",description:"Environment variable should match development server"}),"undefined"!=typeof window){const a=window.location.origin;e.push({name:"Window Origin",expected:"http://localhost:8082",actual:a,status:"http://localhost:8082"===a?"pass":"warning",description:"Browser window origin should match expected URL"})}const h=authConfig_getSignInOptions(),y="http://localhost:8082/dashboard";e.push({name:"Sign-in Redirect",expected:y,actual:h.redirectTo,status:h.redirectTo===y?"pass":"fail",description:"Sign-in should redirect to dashboard"});try{const{data:a,error:l}=await Mo.auth.getSession();e.push({name:"Supabase Connection",expected:"No error",actual:l?l.message:"Connected",status:l?"fail":"pass",description:"Supabase client should connect successfully"})}catch(l){e.push({name:"Supabase Connection",expected:"No error",actual:l instanceof Error?l.message:"Unknown error",status:"fail",description:"Supabase client should connect successfully"})}a(e)}catch(l){console.error("Error running URL tests:",l)}finally{m(!1)}};Me.useEffect(()=>{runTests()},[]);return je.createElement(ui,{className:"w-full max-w-4xl"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},"Authentication URL Configuration Test",l&&je.createElement(Nr,{className:"h-4 w-4 animate-spin"})),je.createElement(gi,null,"Verify that all URL configurations are properly set for authentication"),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{onClick:runTests,disabled:l,size:"sm"},l?"Running Tests...":"Run Tests"),je.createElement(Uo,{onClick:()=>{console.log("Auth Config:",{siteUrl:authConfig_getSiteUrl(),redirectUrls:authConfig_getRedirectUrls(),signInOptions:authConfig_getSignInOptions(),signUpOptions:authConfig_getSignUpOptions(),passwordResetOptions:authConfig_getPasswordResetOptions()})},variant:"outline",size:"sm"},"Debug Config"))),je.createElement(hi,null,je.createElement("div",{className:"space-y-4"},e.map((e,a)=>{return je.createElement("div",{key:a,className:"flex items-start gap-3 p-3 border rounded-lg"},je.createElement("div",{className:"flex-shrink-0 mt-0.5"},(e=>{switch(e){case"pass":return je.createElement(Ta,{className:"h-4 w-4 text-green-500"});case"fail":return je.createElement(Da,{className:"h-4 w-4 text-red-500"});case"warning":return je.createElement(Aa,{className:"h-4 w-4 text-yellow-500"});default:return null}})(e.status)),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center gap-2 mb-1"},je.createElement("h4",{className:"font-medium"},e.name),(l=e.status,je.createElement(Badge,{variant:{pass:"default",fail:"destructive",warning:"secondary"}[l]||"secondary"},l.toUpperCase()))),je.createElement("p",{className:"text-sm text-gray-600 mb-2"},e.description),je.createElement("div",{className:"text-xs space-y-1"},je.createElement("div",null,je.createElement("span",{className:"font-medium"},"Expected:")," ",je.createElement("code",{className:"bg-gray-100 px-1 rounded"},e.expected)),je.createElement("div",null,je.createElement("span",{className:"font-medium"},"Actual:")," ",je.createElement("code",{className:"bg-gray-100 px-1 rounded"},e.actual)))));var l}))))},Debug=()=>je.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},je.createElement("div",{className:"container mx-auto px-4"},je.createElement("h1",{className:"text-3xl font-bold text-center mb-8"},"Debug Information"),je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-5 w-5 text-green-500"}),"System Status"),je.createElement(gi,null,"Recent fixes applied to resolve loading issues")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," Navigation Fixed")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," Auth Integration")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," MCP Server Ready"))))),je.createElement("div",{className:"space-y-6"},je.createElement(SupabaseConnectionTest,null),je.createElement(AuthUrlTest,null)))),Ef={async getDocuments(){try{const{data:e,error:a}=await Mo.from("uploaded_documents").select("*").order("created_at",{ascending:!1});if(a)throw console.error("Error fetching documents:",a),a;if(!Array.isArray(e))return console.warn("Documents data is not an array:",e),[];return e.filter(e=>e&&"object"==typeof e?e.id&&e.filename:(console.warn("Invalid document object:",e),!1)).map(e=>({...e,processing_status:e.processing_status||"pending",document_structure:e.document_structure||{}}))}catch(e){throw console.error("Failed to fetch documents:",e),e}},async getDocument(e){const{data:a,error:l}=await Mo.from("uploaded_documents").select("*").eq("id",e).single();if(l)throw l;return a},async uploadDocument(e,a){const l=await Mo.auth.getUser();if(!l.data.user)throw new Error("User not authenticated");try{const{usageTrackingService:e}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),a=await e.checkUsageLimit("document_upload");if(!a.allowed){const{data:e}=await Mo.from("profiles").select("subscription_tier, role").eq("id",l.data.user.id).single(),m=e?.subscription_tier||"free";if(!("super_admin"===e?.role||"admin"===e?.role))throw new Error(`Upload limit exceeded for ${m} tier. You have used ${a.current}/${a.limit} document uploads this month. Please upgrade your plan to continue.`);console.warn("Admin user hit upload limit, allowing upload to proceed")}}catch(h){console.warn("Usage tracking failed, proceeding with upload:",h)}const m=`${l.data.user.id}/${Date.now()}-${e.name}`,{error:u}=await Mo.storage.from("documents").upload(m,e);if(u)throw u;const{data:{publicUrl:p}}=Mo.storage.from("documents").getPublicUrl(m),{data:f,error:g}=await Mo.from("uploaded_documents").insert({user_id:l.data.user.id,filename:e.name,file_url:p,file_size:e.size,document_type:a,processing_status:"pending"}).select().single();if(g)throw g;return f},async updateDocument(e,a){const{data:l,error:m}=await Mo.from("uploaded_documents").update(a).eq("id",e).select().single();if(m)throw m;return l},async deleteDocument(e){const a=(await this.getDocument(e)).file_url.split("/").pop();a&&await Mo.storage.from("documents").remove([a]);const{error:l}=await Mo.from("uploaded_documents").delete().eq("id",e);if(l)throw l},async searchDocuments(e){try{if(!e||e.trim().length<2)return[];const{data:a,error:l}=await Mo.from("uploaded_documents").select("*").or(`filename.ilike.%${e}%,ocr_text.ilike.%${e}%`).order("created_at",{ascending:!1});if(l)throw console.error("Error searching documents:",l),l;if(!Array.isArray(a))return console.warn("Search results data is not an array:",a),[];return a.filter(e=>e&&"object"==typeof e?e.id&&e.filename:(console.warn("Invalid document object in search:",e),!1)).map(e=>({...e,processing_status:e.processing_status||"pending",document_structure:e.document_structure||{}}))}catch(a){throw console.error("Failed to search documents:",a),a}},async getDocumentsByStatus(e){const{data:a,error:l}=await Mo.from("uploaded_documents").select("*").eq("processing_status",e).order("created_at",{ascending:!1});if(l)throw l;return a},async downloadDocument(e,a=!0){if(!(await Mo.auth.getUser()).data.user)throw new Error("User not authenticated");const l=await this.getDocument(e);if(a){const{usageTrackingService:a}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),m=await a.checkAndIncrementUsage("document_download",e,{filename:l.filename,document_type:l.document_type,file_size:l.file_size});if(!m.allowed)throw new Error(`Download limit exceeded. You have used ${m.limit?.current}/${m.limit?.limit} document downloads this month. Please upgrade your plan to continue.`)}const m=l.file_url.split("/").pop();if(!m)throw new Error("Invalid file URL");const{data:u,error:p}=await Mo.storage.from("documents").download(m);if(p)throw p;return{data:u,filename:l.filename,contentType:`application/${l.document_type}`}},async getDocumentUsage(){const{usageTrackingService:e}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url);return await e.getUsageStats()}},xf=Object.freeze(Object.defineProperty({__proto__:null,documentsApi:Ef},Symbol.toStringTag,{value:"Module"}));const wf=new class UsageTrackingService{async checkUsageLimit(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated");const{data:l,error:m}=await Mo.rpc("check_subscription_limit",{p_user_id:a.id,p_resource_type:e});if(m)throw console.error("Error checking usage limit:",m),new Error(`Failed to check usage limit: ${m.message}`);const u=l;return{allowed:u.allowed,limit:u.limit,current:u.current_usage,remaining:u.remaining,tier:u.tier,percentage:u.limit>0?u.current_usage/u.limit*100:0}}async incrementUsage(e,a,l){const{data:{user:m}}=await Mo.auth.getUser();if(!m)throw new Error("User must be authenticated");const{error:u}=await Mo.rpc("increment_usage",{p_user_id:m.id,p_resource_type:e,p_resource_id:a||null,p_metadata:l||{}});if(u)throw console.error("Error incrementing usage:",u),new Error(`Failed to increment usage: ${u.message}`);await this.checkAndCreateUsageAlerts(m.id,e)}async getUsageStats(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const a=(new Date).toISOString().slice(0,7),l=this.getNextMonth(a),{data:m,error:u}=await Mo.from("usage_tracking").select("resource_type, usage_count").eq("user_id",e.id).gte("usage_date",`${a}-01`).lt("usage_date",`${l}-01`);if(u)throw console.error("Error fetching usage stats:",u),new Error(`Failed to fetch usage stats: ${u.message}`);const p={ai_queries:0,document_uploads:0,document_downloads:0,custom_documents:0};return m?.forEach(e=>{e.resource_type in p&&(p[e.resource_type]+=e.usage_count)}),p}async getUserLimits(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const{data:a}=await Mo.from("profiles").select("subscription_tier").eq("id",e.id).single(),l=ri[a?.subscription_tier||"free"];return{ai_query:l.limits.monthlyAiRequests,document_upload:l.limits.monthlyDocumentUploads,document_download:l.limits.monthlyDocumentUploads,custom_document:l.limits.customDocumentDownloads}}async checkAndCreateUsageAlerts(e,a){try{const l=await this.checkUsageLimit(a);l.percentage>=80&&l.percentage<100&&await Mo.rpc("create_billing_alert",{p_user_id:e,p_alert_type:"usage_limit_warning",p_resource_type:a,p_threshold_percentage:Math.round(l.percentage)}),l.percentage>=100&&await Mo.rpc("create_billing_alert",{p_user_id:e,p_alert_type:"usage_limit_reached",p_resource_type:a,p_threshold_percentage:100})}catch(l){console.error("Error checking usage alerts:",l)}}async getBillingAlerts(e=!1){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated");let l=Mo.from("billing_alerts").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});e&&(l=l.eq("is_read",!1));const{data:m,error:u}=await l;if(u)throw console.error("Error fetching billing alerts:",u),new Error(`Failed to fetch billing alerts: ${u.message}`);return m||[]}async markAlertAsRead(e){const{error:a}=await Mo.from("billing_alerts").update({is_read:!0}).eq("id",e);if(a)throw console.error("Error marking alert as read:",a),new Error(`Failed to mark alert as read: ${a.message}`)}async checkAndIncrementUsage(e,a,l){const m=await this.checkUsageLimit(e);return m.allowed?(await this.incrementUsage(e,a,l),{allowed:!0,limit:m}):{allowed:!1,limit:m}}getNextMonth(e){const[a,l]=e.split("-").map(Number);return`${12===l?a+1:a}-${(12===l?1:l+1).toString().padStart(2,"0")}`}},bf=Object.freeze(Object.defineProperty({__proto__:null,usageTrackingService:wf},Symbol.toStringTag,{value:"Module"})),UploadDebug=()=>{const{user:e,profile:a,loading:l,refreshProfile:m}=useAuth(),[u,p]=Me.useState([]),[f,g]=Me.useState(!1),addResult=e=>{p(a=>[...a,`${(new Date).toLocaleTimeString()}: ${e}`])};return l?je.createElement("div",null,"Loading auth state..."):je.createElement(ui,{className:"w-full max-w-4xl mx-auto"},je.createElement(pi,null,je.createElement(fi,null,"Upload Diagnostics")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{onClick:async()=>{g(!0),p([]);try{if(addResult("Starting upload diagnostics..."),addResult("1. Checking authentication..."),!e)return void addResult(" User not authenticated");if(addResult(` User authenticated: ${e.email}`),addResult("2. Checking user profile..."),!a)return void addResult(" User profile not loaded");addResult(` Profile loaded: ${a.email}, Tier: ${a.subscription_tier||"free"}`),addResult("3. Testing Supabase connection...");try{const{data:e,error:a}=await Mo.from("profiles").select("id").limit(1);if(a)throw a;addResult(" Supabase connection working")}catch(l){return void addResult(` Supabase connection failed: ${l.message}`)}addResult("4. Checking storage buckets...");try{const{data:e,error:a}=await Mo.storage.listBuckets();if(a)throw a;if(!e.find(e=>"documents"===e.id))return void addResult(" Documents bucket not found");addResult(" Documents bucket exists")}catch(l){return void addResult(` Storage bucket check failed: ${l.message}`)}addResult("5. Testing usage tracking...");try{const e=await wf.checkUsageLimit("document_upload");addResult(` Usage check successful: ${e.current}/${e.limit} used`),e.allowed||addResult(" Upload limit reached")}catch(l){addResult(` Usage tracking failed: ${l.message}`)}addResult("6. Testing file upload...");try{const e=new File(["test content"],"test.txt",{type:"text/plain"});if((await wf.checkUsageLimit("document_upload")).allowed){const a=await Ef.uploadDocument(e,"other");addResult(` Test upload successful: ${a.id}`);try{await Ef.deleteDocument(a.id),addResult(" Test file cleaned up")}catch(m){addResult(` Cleanup failed: ${m.message}`)}}else addResult(" Skipping upload test - usage limit reached")}catch(l){addResult(` Upload test failed: ${l.message}`)}addResult(" Diagnostics completed!")}catch(l){addResult(` Diagnostics failed: ${l.message}`)}finally{g(!1)}},disabled:f||!e},f?"Running...":"Run Full Diagnostics"),je.createElement(Uo,{onClick:async()=>{g(!0),p([]);try{addResult("Testing storage permissions...");const a=new File(["test"],"test.txt",{type:"text/plain"}),l=`${e?.id}/test-${Date.now()}.txt`,{error:m}=await Mo.storage.from("documents").upload(l,a);if(m)addResult(` Storage upload failed: ${m.message}`);else{addResult(" Storage upload successful");const{error:e}=await Mo.storage.from("documents").remove([l]);addResult(e?` Cleanup failed: ${e.message}`:" Cleanup successful")}}catch(a){addResult(` Storage test failed: ${a.message}`)}finally{g(!1)}},disabled:f||!e,variant:"outline"},"Test Storage Only"),je.createElement(Uo,{onClick:m,disabled:f||!e,variant:"outline"},"Refresh Profile")),!e&&je.createElement(_i,null,je.createElement(ki,null,"Please log in to run upload diagnostics.")),je.createElement("div",{className:"space-y-2"},je.createElement("h3",{className:"font-semibold"},"Current State:"),je.createElement("div",{className:"text-sm space-y-1"},je.createElement("div",null,"User: ",e?e.email:"Not authenticated"),je.createElement("div",null,"Profile: ",a?`${a.email} (${a.subscription_tier||"free"})`:"Not loaded"),je.createElement("div",null,"Loading: ",l?"Yes":"No"))),u.length>0&&je.createElement("div",{className:"space-y-2"},je.createElement("h3",{className:"font-semibold"},"Test Results:"),je.createElement("div",{className:"bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto"},u.map((e,a)=>je.createElement("div",{key:a,className:"text-sm font-mono"},e))))))},ProductionDiagnostics=()=>{const[e,a]=Me.useState([]),[l,m]=Me.useState(!1),runDiagnostics=async()=>{m(!0);const e=[],l={VITE_SUPABASE_URL:"https://kvlaydeyqidlfpfutbmp.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2bGF5ZGV5cWlkbGZwZnV0Ym1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyODgzNzAsImV4cCI6MjA2NTg2NDM3MH0.XVSO5W_0v6wW-MYlM7i0MTNKprOWp_O4ON-5LqqVnzw",VITE_APP_URL:"https://craftchatbot.com",NODE_ENV:void 0,MODE:"production"},u=Object.entries(l).filter(([e,a])=>!a);e.push({category:"Environment",name:"Environment Variables",status:u.length>0?"error":"success",message:u.length>0?`Missing: ${u.map(([e])=>e).join(", ")}`:"All environment variables present",details:l,fix:u.length>0?"Check your hosting platform environment variables configuration":void 0});const p=window.location.origin,f="https://craftchatbot.com";e.push({category:"Configuration",name:"URL Configuration",status:p===f?"success":"warning",message:`Current: ${p}, Configured: ${f}`,details:{currentUrl:p,configuredUrl:f},fix:p!==f?"Update VITE_APP_URL environment variable to match production URL":void 0});try{const{data:a,error:l}=await Mo.from("profiles").select("count").limit(1);e.push({category:"Database",name:"Supabase Connection",status:l?"error":"success",message:l?`Connection failed: ${l.message}`:"Connected successfully",details:{data:a,error:l},fix:l?"Check Supabase URL and API key configuration":void 0})}catch(h){e.push({category:"Database",name:"Supabase Connection",status:"error",message:`Connection failed: ${h instanceof Error?h.message:"Unknown error"}`,details:h,fix:"Check if Supabase is properly configured and imported"})}try{const{data:{user:a},error:l}=await Mo.auth.getUser();e.push({category:"Authentication",name:"User Session",status:l?"error":a?"success":"warning",message:l?`Auth error: ${l.message}`:a?`Logged in as ${a.email}`:"Not authenticated",details:{user:a?{id:a.id,email:a.email}:null,error:l},fix:a||l?void 0:"User needs to log in to access document features"})}catch(h){e.push({category:"Authentication",name:"User Session",status:"error",message:`Auth check failed: ${h instanceof Error?h.message:"Unknown error"}`,details:h})}try{const{documentsApi:a}=await ze(async()=>{const{documentsApi:e}=await Promise.resolve().then(()=>xf);return{documentsApi:e}},void 0,import.meta.url),l=await a.getDocuments();e.push({category:"API",name:"Documents API",status:"success",message:`Successfully fetched ${l.length} documents`,details:{count:l.length,sample:l.slice(0,2)}})}catch(h){e.push({category:"API",name:"Documents API",status:"error",message:`API call failed: ${h instanceof Error?h.message:"Unknown error"}`,details:h,fix:"Check database schema and RLS policies for uploaded_documents table"})}try{const{data:a,error:l}=await Mo.storage.listBuckets(),m=a?.find(e=>"documents"===e.name);e.push({category:"Storage",name:"Documents Bucket",status:l?"error":m?"success":"error",message:l?`Storage error: ${l.message}`:m?"Documents bucket exists":"Documents bucket not found",details:{buckets:a?.map(e=>e.name),error:l},fix:m?void 0:"Create documents storage bucket in Supabase dashboard"})}catch(h){e.push({category:"Storage",name:"Documents Bucket",status:"error",message:`Storage check failed: ${h instanceof Error?h.message:"Unknown error"}`,details:h})}const g=window.__consoleErrors||[];e.push({category:"Runtime",name:"Console Errors",status:g.length>0?"warning":"success",message:g.length>0?`${g.length} console errors detected`:"No console errors detected",details:g.slice(0,5),fix:g.length>0?"Check browser console for detailed error messages":void 0}),a(e),m(!1)};Me.useEffect(()=>{const e=console.error;return window.__consoleErrors=[],console.error=(...a)=>{window.__consoleErrors.push(a.join(" ")),e.apply(console,a)},runDiagnostics(),()=>{console.error=e}},[]);const u=e.reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{});return je.createElement(ui,{className:"max-w-6xl mx-auto"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center justify-between"},"Production Diagnostics",je.createElement(Uo,{onClick:runDiagnostics,disabled:l,size:"sm"},je.createElement(Nr,{className:"h-4 w-4 mr-2 "+(l?"animate-spin":"")}),l?"Running...":"Run Diagnostics"))),je.createElement(hi,null,je.createElement("div",{className:"space-y-6"},Object.entries(u).map(([e,a])=>je.createElement("div",{key:e,className:"space-y-3"},je.createElement("h3",{className:"text-lg font-semibold flex items-center"},(e=>{switch(e){case"Environment":case"Configuration":return je.createElement(Ga,{className:"h-4 w-4"});case"Database":return je.createElement(La,{className:"h-4 w-4"});case"Authentication":return je.createElement(ar,{className:"h-4 w-4"});case"Storage":return je.createElement(Vr,{className:"h-4 w-4"});default:return je.createElement(Br,{className:"h-4 w-4"})}})(e),je.createElement("span",{className:"ml-2"},e)),je.createElement("div",{className:"space-y-2"},a.map((e,a)=>je.createElement("div",{key:a,className:"flex items-start space-x-3 p-3 border rounded-lg"},(e=>{switch(e){case"success":return je.createElement(Ta,{className:"h-5 w-5 text-green-500"});case"error":return je.createElement(Da,{className:"h-5 w-5 text-red-500"});case"warning":return je.createElement(Br,{className:"h-5 w-5 text-yellow-500"});case"pending":return je.createElement(Nr,{className:"h-5 w-5 text-blue-500 animate-spin"})}})(e.status),je.createElement("div",{className:"flex-1"},je.createElement("h4",{className:"font-medium"},e.name),je.createElement("p",{className:"text-sm text-gray-600"},e.message),e.fix&&je.createElement("p",{className:"text-sm text-blue-600 mt-1"},je.createElement("strong",null,"Fix:")," ",e.fix),!1)))))))))},DebugUpload=()=>je.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},je.createElement("div",{className:"container mx-auto px-4"},je.createElement("div",{className:"flex items-center justify-between mb-8"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold flex items-center gap-2"},je.createElement(Vr,{className:"h-8 w-8 text-blue-600"}),"Upload Debug & Testing"),je.createElement("p",{className:"text-gray-600 mt-2"},"Test and debug document upload functionality")),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{asChild:!0,variant:"outline"},je.createElement(Ro,{to:"/debug"}," Back to Debug")),je.createElement(Uo,{asChild:!0,variant:"outline"},je.createElement(Ro,{to:"/dashboard/documents"},"Dashboard Documents")))),je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-5 w-5 text-green-500"}),"Upload System Status"),je.createElement(gi,null,"Current status of upload functionality and recent fixes")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," Upload Component")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," File Validation")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200"}," Supabase Storage")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200"}," Testing Required"))))),je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Vr,{className:"h-5 w-5 text-blue-500"}),"Upload Testing"),je.createElement(gi,null,"Test document upload functionality with detailed debugging")),je.createElement(hi,null,je.createElement(UploadDebug,null))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Br,{className:"h-5 w-5 text-orange-500"}),"System Diagnostics"),je.createElement(gi,null,"Comprehensive system health check and diagnostics")),je.createElement(hi,null,je.createElement(ProductionDiagnostics,null))))),Nf=Du({firstName:Au().min(2,"First name must be at least 2 characters"),lastName:Au().min(2,"Last name must be at least 2 characters"),email:Au().email("Please enter a valid email address"),password:Au().min(8,"Password must be at least 8 characters"),confirmPassword:Au()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),RegisterForm=()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState(!1),[u,p]=Me.useState(!1),[f,g]=Me.useState(null),[h,y]=Me.useState(!1),{signUp:v}=useAuth(),E=useNavigate(),{register:x,handleSubmit:w,formState:{errors:b}}=useForm({resolver:t(Nf)});return h?je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement(fi,{className:"text-2xl font-bold text-center text-green-600"},"Registration Successful!"),je.createElement(gi,{className:"text-center"},"Please check your email to verify your account before signing in.")),je.createElement(yi,null,je.createElement(Uo,{onClick:()=>E(ii.login),className:"w-full"},"Go to Sign In")))):je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement(fi,{className:"text-2xl font-bold text-center"},"Create Account"),je.createElement(gi,{className:"text-center"},"Enter your information to create your account")),je.createElement("form",{onSubmit:w(async e=>{p(!0),g(null);try{await v(e.email,e.password,{first_name:e.firstName,last_name:e.lastName}),y(!0)}catch(dE){g(dE.message||"An error occurred during registration")}finally{p(!1)}})},je.createElement(hi,{className:"space-y-4"},f&&je.createElement(_i,{variant:"destructive"},je.createElement(ki,null,f)),je.createElement("div",{className:"grid grid-cols-2 gap-4"},je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"firstName"},"First Name"),je.createElement(zo,{id:"firstName",placeholder:"John",...x("firstName"),disabled:u}),b.firstName&&je.createElement("p",{className:"text-sm text-red-600"},b.firstName.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"lastName"},"Last Name"),je.createElement(zo,{id:"lastName",placeholder:"Doe",...x("lastName"),disabled:u}),b.lastName&&je.createElement("p",{className:"text-sm text-red-600"},b.lastName.message))),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"email"},"Email"),je.createElement(zo,{id:"email",type:"email",placeholder:"john@example.com",...x("email"),disabled:u}),b.email&&je.createElement("p",{className:"text-sm text-red-600"},b.email.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"password"},"Password"),je.createElement("div",{className:"relative"},je.createElement(zo,{id:"password",type:e?"text":"password",placeholder:"Create a password",...x("password"),disabled:u}),je.createElement(Uo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>a(!e),disabled:u},e?je.createElement(Ba,{className:"h-4 w-4"}):je.createElement(qa,{className:"h-4 w-4"}))),b.password&&je.createElement("p",{className:"text-sm text-red-600"},b.password.message)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"confirmPassword"},"Confirm Password"),je.createElement("div",{className:"relative"},je.createElement(zo,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirm your password",...x("confirmPassword"),disabled:u}),je.createElement(Uo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!l),disabled:u},l?je.createElement(Ba,{className:"h-4 w-4"}):je.createElement(qa,{className:"h-4 w-4"}))),b.confirmPassword&&je.createElement("p",{className:"text-sm text-red-600"},b.confirmPassword.message))),je.createElement(yi,{className:"flex flex-col space-y-4"},je.createElement(Uo,{type:"submit",className:"w-full",disabled:u},u&&je.createElement(lr,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"),je.createElement("p",{className:"text-center text-sm text-gray-600"},"Already have an account?"," ",je.createElement(Ro,{to:ii.login,className:"text-blue-600 hover:text-blue-500 font-medium"},"Sign in"))))))},Register=()=>je.createElement(UnauthenticatedRoute,null,je.createElement(RegisterForm,null)),_f=Du({email:Au().email("Please enter a valid email address")}),ForgotPasswordForm=()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState(null),[u,p]=Me.useState(!1),[f,g]=Me.useState(""),{resetPassword:h}=useAuth(),{register:y,handleSubmit:v,formState:{errors:E}}=useForm({resolver:t(_f)});return u?je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement("div",{className:"flex items-center justify-center mb-4"},je.createElement("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},je.createElement(Ta,{className:"h-6 w-6 text-green-600"}))),je.createElement(fi,{className:"text-2xl font-bold text-center"},"Check Your Email"),je.createElement(gi,{className:"text-center"},"We've sent a password reset link to your email address")),je.createElement(hi,{className:"space-y-4"},je.createElement(_i,null,je.createElement(mr,{className:"h-4 w-4"}),je.createElement(ki,null,"A password reset link has been sent to ",je.createElement("strong",null,f),". Please check your email and follow the instructions to reset your password.")),je.createElement("div",{className:"space-y-2 text-sm text-gray-600"},je.createElement("p",null,"Didn't receive the email?"),je.createElement("ul",{className:"list-disc list-inside space-y-1 text-xs"},je.createElement("li",null,"Check your spam or junk folder"),je.createElement("li",null,"Make sure you entered the correct email address"),je.createElement("li",null,"Wait a few minutes for the email to arrive")))),je.createElement(yi,{className:"flex flex-col space-y-4"},je.createElement(Uo,{onClick:()=>{p(!1),g(""),m(null)},variant:"outline",className:"w-full"},je.createElement(mr,{className:"mr-2 h-4 w-4"}),"Send Another Email"),je.createElement(Ro,{to:ii.login,className:"w-full"},je.createElement(Uo,{variant:"ghost",className:"w-full"},je.createElement(la,{className:"mr-2 h-4 w-4"}),"Back to Sign In"))))):je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement("div",{className:"flex items-center justify-center mb-4"},je.createElement("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},je.createElement(mr,{className:"h-6 w-6 text-blue-600"}))),je.createElement(fi,{className:"text-2xl font-bold text-center"},"Forgot Password?"),je.createElement(gi,{className:"text-center"},"Enter your email address and we'll send you a link to reset your password")),je.createElement("form",{onSubmit:v(async e=>{a(!0),m(null);try{await h(e.email),p(!0),g(e.email)}catch(dE){m(dE.message??"An error occurred while sending the reset email")}finally{a(!1)}})},je.createElement(hi,{className:"space-y-4"},l&&je.createElement(_i,{variant:"destructive"},je.createElement(ki,null,l)),je.createElement("div",{className:"space-y-2"},je.createElement(Dd,{htmlFor:"email"},"Email Address"),je.createElement(zo,{id:"email",type:"email",placeholder:"Enter your email address",...y("email"),className:E.email?"border-red-500":"",autoComplete:"email",autoFocus:!0}),E.email&&je.createElement("p",{className:"text-sm text-red-600"},E.email.message)),je.createElement("div",{className:"text-sm text-gray-600"},je.createElement("p",null,"We'll send you an email with instructions to reset your password. The link will be valid for 24 hours."))),je.createElement(yi,{className:"flex flex-col space-y-4"},je.createElement(Uo,{type:"submit",className:"w-full",disabled:e},e&&je.createElement(lr,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Reset Link"),je.createElement("div",{className:"flex items-center justify-center space-x-4 text-sm"},je.createElement(Ro,{to:ii.login,className:"text-blue-600 hover:text-blue-500 font-medium"},je.createElement(la,{className:"inline h-4 w-4 mr-1"}),"Back to Sign In"),je.createElement("span",{className:"text-gray-400"},"|"),je.createElement(Ro,{to:ii.register,className:"text-blue-600 hover:text-blue-500 font-medium"},"Create Account"))))))},ForgotPassword=()=>je.createElement(UnauthenticatedRoute,null,je.createElement(ForgotPasswordForm,null)),Form=e=>{const{children:a,...l}=e;return je.createElement(Gd.Provider,{value:l},a)},kf=Me.createContext({}),FormField=({...e})=>Me.createElement(kf.Provider,{value:{name:e.name}},Me.createElement(Controller,{...e})),useFormField=()=>{const e=Me.useContext(kf),a=Me.useContext(Sf),{getFieldState:l,formState:m}=useFormContext(),u=l(e.name,m);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:p}=a;return{id:p,name:e.name,formItemId:`${p}-form-item`,formDescriptionId:`${p}-form-item-description`,formMessageId:`${p}-form-item-message`,...u}},Sf=Me.createContext({}),Cf=Me.forwardRef(({className:e,...a},l)=>{const m=Me.useId();return Me.createElement(Sf.Provider,{value:{id:m}},Me.createElement("div",{ref:l,className:cn("space-y-2",e),...a}))});Cf.displayName="FormItem";const Rf=Me.forwardRef(({className:e,...a},l)=>{const{error:m,formItemId:u}=useFormField();return Me.createElement(Dd,{ref:l,className:cn(m&&"text-destructive",e),htmlFor:u,...a})});Rf.displayName="FormLabel";const Af=Me.forwardRef(({...e},a)=>{const{error:l,formItemId:m,formDescriptionId:u,formMessageId:p}=useFormField();return Me.createElement(at,{ref:a,id:m,"aria-describedby":l?`${u} ${p}`:`${u}`,"aria-invalid":!!l,...e})});Af.displayName="FormControl";Me.forwardRef(({className:e,...a},l)=>{const{formDescriptionId:m}=useFormField();return Me.createElement("p",{ref:l,id:m,className:cn("text-sm text-muted-foreground",e),...a})}).displayName="FormDescription";const Tf=Me.forwardRef(({className:e,children:a,...l},m)=>{const{error:u,formMessageId:p}=useFormField(),f=u?String(u?.message):a;return f?Me.createElement("p",{ref:m,id:p,className:cn("text-sm font-medium text-destructive",e),...l},f):null});Tf.displayName="FormMessage";const Pf=Du({password:Au().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:Au()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),ResetPassword=()=>{const e=useNavigate(),[a]=useSearchParams(),[l,m]=Me.useState(!1),[u,p]=Me.useState(!1),[f,g]=Me.useState(!1),h=useForm({resolver:t(Pf),defaultValues:{password:"",confirmPassword:""}});Me.useEffect(()=>{const l=a.get("access_token"),m=a.get("refresh_token");if(!l||!m)return An.error("Invalid reset link. Please request a new password reset."),void e("/auth/forgot-password");Mo.auth.setSession({access_token:l,refresh_token:m})},[a,e]);return je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"space-y-1"},je.createElement("div",{className:"flex items-center gap-2 mb-4"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>e("/auth/login"),className:"p-2"},je.createElement(la,{className:"h-4 w-4"})),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(ir,{className:"h-5 w-5 text-blue-600"}),je.createElement("span",{className:"font-semibold text-gray-900"},"LawMattersSG"))),je.createElement(fi,{className:"text-2xl font-bold text-center"},"Reset Password"),je.createElement("p",{className:"text-sm text-gray-600 text-center"},"Enter your new password below")),je.createElement(hi,null,je.createElement(Form,{...h},je.createElement("form",{onSubmit:h.handleSubmit(async a=>{try{m(!0);const{error:l}=await Mo.auth.updateUser({password:a.password});if(l)throw l;An.success("Password updated successfully!"),await Mo.auth.signOut(),e("/auth/login",{state:{message:"Password updated successfully. Please log in with your new password."}})}catch(l){console.error("Password reset error:",l),An.error(l.message||"Failed to update password. Please try again.")}finally{m(!1)}}),className:"space-y-4"},je.createElement(FormField,{control:h.control,name:"password",render:({field:e})=>je.createElement(Cf,null,je.createElement(Rf,null,"New Password"),je.createElement(Af,null,je.createElement("div",{className:"relative"},je.createElement(zo,{...e,type:u?"text":"password",placeholder:"Enter your new password",disabled:l}),je.createElement(Uo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!u),disabled:l},u?je.createElement(Ba,{className:"h-4 w-4"}):je.createElement(qa,{className:"h-4 w-4"})))),je.createElement(Tf,null))}),je.createElement(FormField,{control:h.control,name:"confirmPassword",render:({field:e})=>je.createElement(Cf,null,je.createElement(Rf,null,"Confirm New Password"),je.createElement(Af,null,je.createElement("div",{className:"relative"},je.createElement(zo,{...e,type:f?"text":"password",placeholder:"Confirm your new password",disabled:l}),je.createElement(Uo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!f),disabled:l},f?je.createElement(Ba,{className:"h-4 w-4"}):je.createElement(qa,{className:"h-4 w-4"})))),je.createElement(Tf,null))}),je.createElement(Uo,{type:"submit",className:"w-full",disabled:l},l?"Updating Password...":"Update Password"))),je.createElement("div",{className:"mt-6 text-center"},je.createElement("p",{className:"text-sm text-gray-600"},"Remember your password?"," ",je.createElement(Uo,{variant:"link",className:"p-0 h-auto font-normal",onClick:()=>e("/auth/login")},"Sign in"))))))},EmailConfirm=()=>{const[e]=useSearchParams(),a=useNavigate(),[l,m]=Me.useState("loading"),[u,p]=Me.useState("");return Me.useEffect(()=>{(async()=>{try{const l=e.get("token_hash"),u=e.get("type");if(!l||"email"!==u)return m("error"),void p("Invalid confirmation link. Please check your email and try again.");const{data:f,error:g}=await Mo.auth.verifyOtp({token_hash:l,type:"email"});if(g)return console.error("Email confirmation error:",g),m("error"),void(g.message.includes("expired")?p("This confirmation link has expired. Please request a new verification email."):g.message.includes("invalid")?p("This confirmation link is invalid. Please check your email and try again."):p(g.message||"Failed to confirm email. Please try again."));f.user?(m("success"),p("Your email has been verified successfully! You can now sign in to your account."),setTimeout(()=>{a(ii.login,{state:{message:"Email verified successfully! You can now sign in."}})},3e3)):(m("error"),p("Email confirmation failed. Please try again."))}catch(l){console.error("Email confirmation error:",l),m("error"),p("An unexpected error occurred. Please try again.")}})()},[e,a]),je.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"mx-auto flex items-center justify-center w-12 h-12 rounded-full mb-4"},"loading"===l&&je.createElement("div",{className:"bg-blue-100 rounded-full w-12 h-12 flex items-center justify-center"},je.createElement(lr,{className:"h-6 w-6 text-blue-600 animate-spin"})),"success"===l&&je.createElement("div",{className:"bg-green-100 rounded-full w-12 h-12 flex items-center justify-center"},je.createElement(Ta,{className:"h-6 w-6 text-green-600"})),"error"===l&&je.createElement("div",{className:"bg-red-100 rounded-full w-12 h-12 flex items-center justify-center"},je.createElement(Da,{className:"h-6 w-6 text-red-600"}))),je.createElement(fi,{className:"text-2xl font-bold"},"loading"===l&&"Confirming Email...","success"===l&&"Email Confirmed!","error"===l&&"Confirmation Failed"),je.createElement(gi,null,"loading"===l&&"Please wait while we verify your email address.","success"===l&&"Your account is now active and ready to use.","error"===l&&"There was a problem confirming your email address.")),je.createElement(hi,{className:"space-y-4"},je.createElement(_i,{className:"success"===l?"border-green-200 bg-green-50":"error"===l?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50"},je.createElement(ki,{className:"success"===l?"text-green-800":"error"===l?"text-red-800":"text-blue-800"},u)),"success"===l&&je.createElement("div",{className:"text-center"},je.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Redirecting to sign in page in a few seconds..."),je.createElement(Uo,{onClick:()=>a(ii.login),className:"w-full"},"Sign In Now")),"error"===l&&je.createElement("div",{className:"space-y-2"},je.createElement(Uo,{onClick:()=>a(ii.register),className:"w-full"},"Request New Verification Email"),je.createElement(Uo,{variant:"outline",onClick:()=>a(ii.login),className:"w-full"},"Back to Sign In")),"loading"===l&&je.createElement("div",{className:"text-center"},je.createElement(Uo,{variant:"outline",onClick:()=>a(ii.home),className:"w-full"},"Back to Home")))))},Dashboard=()=>{const{user:e,profile:a,signOut:l,loading:m,forceRefreshProfile:u}=useSafeAuth(),p=useNavigate(),[f,g]=Me.useState(!1);Me.useEffect(()=>{!m&&e&&(async()=>{if(!e||f||a&&a.role&&"user"!==a.role)a?.role&&"user"!==a.role&&(console.log("Dashboard: Profile already has proper role:",a.role),g(!0));else{console.log("Dashboard: Force refreshing profile due to missing/incorrect role data"),console.log("Dashboard: Current profile state:",a);try{const e=await u();console.log("Dashboard: Profile refreshed successfully:",e),g(!0)}catch(l){console.error("Dashboard: Error force refreshing profile:",l)}}})()},[e,a,u,f,m]),Me.useEffect(()=>{m||(async()=>{console.log(" SUPABASE DEBUG - Environment Variables:"),console.log("VITE_SUPABASE_URL:","https://kvlaydeyqidlfpfutbmp.supabase.co"),console.log("VITE_SUPABASE_ANON_KEY exists:",!0),console.log("VITE_SUPABASE_ANON_KEY length:",208);try{const{data:{user:e},error:a}=await supabase.auth.getUser();if(console.log(" SUPABASE DEBUG - Auth User:",e?{id:e.id,email:e.email}:null),console.log(" SUPABASE DEBUG - Auth Error:",a),e){const{data:a,error:l}=await supabase.from("profiles").select("*").eq("id",e.id).single();console.log(" SUPABASE DEBUG - Profile Query Result:",a),console.log(" SUPABASE DEBUG - Profile Query Error:",l)}}catch(e){console.error(" SUPABASE DEBUG - Connection Error:",e)}})()},[m]);return m?je.createElement(AuthenticatedRoute,null,je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),je.createElement("p",{className:"text-gray-600"},"Loading your dashboard..."),je.createElement("p",{className:"text-sm text-gray-500 mt-2"},"Please wait while we fetch your profile")))):je.createElement(AuthenticatedRoute,null,je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("header",{className:"bg-white shadow"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"flex justify-between items-center py-6"},je.createElement("div",{className:"flex items-center space-x-4"},je.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>p("/"),className:"flex items-center space-x-2"},je.createElement(er,{className:"h-4 w-4"}),je.createElement("span",{className:"hidden sm:inline"},"Homepage")),je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Dashboard"),je.createElement("p",{className:"text-gray-600"},"Welcome back, ",a?.first_name||e?.email,"!"))),je.createElement(Uo,{onClick:async()=>{try{console.log("Signing out from dashboard..."),await l()}catch(e){console.error("Error signing out:",e),window.location.href="/"}},variant:"outline"},"Sign Out")))),je.createElement("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},je.createElement("div",{className:"px-4 py-6 sm:px-0"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},je.createElement(ui,null,je.createElement(pi,{className:"flex flex-row items-center justify-between space-y-0 pb-2"},je.createElement(fi,{className:"text-sm font-medium"},"Documents"),je.createElement(Ha,{className:"h-4 w-4 text-muted-foreground"})),je.createElement(hi,null,je.createElement("div",{className:"text-2xl font-bold"},"0"),je.createElement("p",{className:"text-xs text-muted-foreground"},"Total uploaded documents"))),je.createElement(ui,null,je.createElement(pi,{className:"flex flex-row items-center justify-between space-y-0 pb-2"},je.createElement(fi,{className:"text-sm font-medium"},"AI Chats"),je.createElement(gr,{className:"h-4 w-4 text-muted-foreground"})),je.createElement(hi,null,je.createElement("div",{className:"text-2xl font-bold"},"0"),je.createElement("p",{className:"text-xs text-muted-foreground"},"AI conversations this month"))),je.createElement(ui,null,je.createElement(pi,{className:"flex flex-row items-center justify-between space-y-0 pb-2"},je.createElement(fi,{className:"text-sm font-medium"},"Templates"),je.createElement(Wa,{className:"h-4 w-4 text-muted-foreground"})),je.createElement(hi,null,je.createElement("div",{className:"text-2xl font-bold"},"0"),je.createElement("p",{className:"text-xs text-muted-foreground"},"Custom templates created"))),je.createElement(ui,null,je.createElement(pi,{className:"flex flex-row items-center justify-between space-y-0 pb-2"},je.createElement(fi,{className:"text-sm font-medium"},"super_admin"===a?.role||"admin"===a?.role?"Role":"Subscription"),je.createElement(Hr,{className:"h-4 w-4 text-muted-foreground"})),je.createElement(hi,null,je.createElement("div",{className:"text-2xl font-bold capitalize"},"super_admin"===a?.role?"Super Admin":"admin"===a?.role?"Admin":a?.subscription_tier||"Free"),je.createElement("p",{className:"text-xs text-muted-foreground"},"super_admin"===a?.role||"admin"===a?.role?"Administrative access":"Current plan")))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Upload Documents"),je.createElement(gi,null,"Upload and process your legal documents with AI")),je.createElement(hi,null,je.createElement(Ro,{to:ii.documents},je.createElement(Uo,{className:"w-full"},je.createElement(Ha,{className:"mr-2 h-4 w-4"}),"Upload Document")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"AI Assistant"),je.createElement(gi,null,"Get legal insights and answers from our AI")),je.createElement(hi,null,je.createElement(Ro,{to:"/dashboard/ai-assistant",className:"block"},je.createElement(Uo,{className:"w-full"},je.createElement(gr,{className:"mr-2 h-4 w-4"}),"Start Chat")))),"super_admin"===a?.role&&je.createElement(ui,{className:"border-2 border-blue-500"},je.createElement(pi,null,je.createElement(fi,{className:"text-blue-600"},"RAG Knowledge"),je.createElement(gi,null,"Manage AI knowledge base and test responses")),je.createElement(hi,null,je.createElement(Ro,{to:"/dashboard/rag-knowledge",className:"block"},je.createElement(Uo,{className:"w-full bg-blue-600 hover:bg-blue-700"},je.createElement(va,{className:"mr-2 h-4 w-4"}),"RAG Knowledge")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Browse Templates"),je.createElement(gi,null,"Explore legal document templates")),je.createElement(hi,null,je.createElement(Ro,{to:"/dashboard/templates",className:"block"},je.createElement(Uo,{className:"w-full"},je.createElement(Wa,{className:"mr-2 h-4 w-4"}),"View Templates")))))))))};function composeContextScopes$2(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}var Df="rovingFocusGroup.onEntryFocus",If={bubbles:!1,cancelable:!0},Ff="RovingFocusGroup",[Mf,jf,Of]=createCollection$1(Ff),[Lf,$f]=function createContextScope$2(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;function Provider2(a){const{scope:l,children:m,...f}=a,g=l?.[e][p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})}return l=[...l,m],Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e][p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$2(createScope,...a)]}(Ff,[Of]),[Uf,zf]=Lf(Ff),Bf=Me.forwardRef((e,a)=>tt.jsx(Mf.Provider,{scope:e.__scopeRovingFocusGroup,children:tt.jsx(Mf.Slot,{scope:e.__scopeRovingFocusGroup,children:tt.jsx(qf,{...e,ref:a})})}));Bf.displayName=Ff;var qf=Me.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:l,orientation:m,loop:u=!1,dir:p,currentTabStopId:f,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:h,onEntryFocus:y,preventScrollOnEntryFocus:v=!1,...E}=e,x=Me.useRef(null),w=useComposedRefs$2(a,x),b=useDirection$2(p),[N=null,_]=useControllableState$1({prop:f,defaultProp:g,onChange:h}),[k,S]=Me.useState(!1),C=useCallbackRef$3(y),R=jf(l),A=Me.useRef(!1),[T,P]=Me.useState(0);return Me.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(Df,C),()=>e.removeEventListener(Df,C)},[C]),tt.jsx(Uf,{scope:l,orientation:m,dir:b,loop:u,currentTabStopId:N,onItemFocus:Me.useCallback(e=>_(e),[_]),onItemShiftTab:Me.useCallback(()=>S(!0),[]),onFocusableItemAdd:Me.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:Me.useCallback(()=>P(e=>e-1),[]),children:tt.jsx(nt.div,{tabIndex:k||0===T?-1:0,"data-orientation":m,...E,ref:w,style:{outline:"none",...e.style},onMouseDown:composeEventHandlers$3(e.onMouseDown,()=>{A.current=!0}),onFocus:composeEventHandlers$3(e.onFocus,e=>{const a=!A.current;if(e.target===e.currentTarget&&a&&!k){const a=new CustomEvent(Df,If);if(e.currentTarget.dispatchEvent(a),!a.defaultPrevented){const e=R().filter(e=>e.focusable);focusFirst$1([e.find(e=>e.active),e.find(e=>e.id===N),...e].filter(Boolean).map(e=>e.ref.current),v)}}A.current=!1}),onBlur:composeEventHandlers$3(e.onBlur,()=>S(!1))})})}),Vf="RovingFocusGroupItem",Hf=Me.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:l,focusable:m=!0,active:u=!1,tabStopId:p,...f}=e,g=useId$1(),h=p||g,y=zf(Vf,l),v=y.currentTabStopId===h,E=jf(l),{onFocusableItemAdd:x,onFocusableItemRemove:w}=y;return Me.useEffect(()=>{if(m)return x(),()=>w()},[m,x,w]),tt.jsx(Mf.ItemSlot,{scope:l,id:h,focusable:m,active:u,children:tt.jsx(nt.span,{tabIndex:v?0:-1,"data-orientation":y.orientation,...f,ref:a,onMouseDown:composeEventHandlers$3(e.onMouseDown,e=>{m?y.onItemFocus(h):e.preventDefault()}),onFocus:composeEventHandlers$3(e.onFocus,()=>y.onItemFocus(h)),onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void y.onItemShiftTab();if(e.target!==e.currentTarget)return;const a=function getFocusIntent(e,a,l){const m=function getDirectionAwareKey(e,a){return"rtl"!==a?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,l);return"vertical"===a&&["ArrowLeft","ArrowRight"].includes(m)||"horizontal"===a&&["ArrowUp","ArrowDown"].includes(m)?void 0:Wf[m]}(e,y.orientation,y.dir);if(void 0!==a){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let l=E().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===a)l.reverse();else if("prev"===a||"next"===a){"prev"===a&&l.reverse();const m=l.indexOf(e.currentTarget);l=y.loop?function wrapArray$1(e,a){return e.map((l,m)=>e[(a+m)%e.length])}(l,m+1):l.slice(m+1)}setTimeout(()=>focusFirst$1(l))}})})})});Hf.displayName=Vf;var Wf={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function focusFirst$1(e,a=!1){const l=document.activeElement;for(const m of e){if(m===l)return;if(m.focus({preventScroll:a}),document.activeElement!==l)return}}var Zf=Bf,Kf=Hf,Gf=["Enter"," "],Qf=["ArrowUp","PageDown","End"],Yf=["ArrowDown","PageUp","Home",...Qf],Jf={ltr:[...Gf,"ArrowRight"],rtl:[...Gf,"ArrowLeft"]},Xf={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eg="Menu",[tg,ag,rg]=createCollection$1(eg),[ng,sg]=createContextScope$5(eg,[rg,Kn,$f]),og=Kn(),lg=$f(),[ig,cg]=ng(eg),[mg,dg]=ng(eg),Menu=e=>{const{__scopeMenu:a,open:l=!1,children:m,dir:u,onOpenChange:p,modal:f=!0}=e,g=og(a),[h,y]=Me.useState(null),v=Me.useRef(!1),E=useCallbackRef$3(p),x=useDirection$2(u);return Me.useEffect(()=>{const handleKeyDown=()=>{v.current=!0,document.addEventListener("pointerdown",handlePointer,{capture:!0,once:!0}),document.addEventListener("pointermove",handlePointer,{capture:!0,once:!0})},handlePointer=()=>v.current=!1;return document.addEventListener("keydown",handleKeyDown,{capture:!0}),()=>{document.removeEventListener("keydown",handleKeyDown,{capture:!0}),document.removeEventListener("pointerdown",handlePointer,{capture:!0}),document.removeEventListener("pointermove",handlePointer,{capture:!0})}},[]),tt.jsx(os,{...g,children:tt.jsx(ig,{scope:a,open:l,onOpenChange:E,content:h,onContentChange:y,children:tt.jsx(mg,{scope:a,onClose:Me.useCallback(()=>E(!1),[E]),isUsingKeyboardRef:v,dir:x,modal:f,children:m})})})};Menu.displayName=eg;var ug=Me.forwardRef((e,a)=>{const{__scopeMenu:l,...m}=e,u=og(l);return tt.jsx(ls,{...u,...m,ref:a})});ug.displayName="MenuAnchor";var pg="MenuPortal",[fg,gg]=ng(pg,{forceMount:void 0}),MenuPortal=e=>{const{__scopeMenu:a,forceMount:l,children:m,container:u}=e,p=cg(pg,a);return tt.jsx(fg,{scope:a,forceMount:l,children:tt.jsx(Presence$2,{present:l||p.open,children:tt.jsx(ht,{asChild:!0,container:u,children:m})})})};MenuPortal.displayName=pg;var hg="MenuContent",[yg,vg]=ng(hg),Eg=Me.forwardRef((e,a)=>{const l=gg(hg,e.__scopeMenu),{forceMount:m=l.forceMount,...u}=e,p=cg(hg,e.__scopeMenu),f=dg(hg,e.__scopeMenu);return tt.jsx(tg.Provider,{scope:e.__scopeMenu,children:tt.jsx(Presence$2,{present:m||p.open,children:tt.jsx(tg.Slot,{scope:e.__scopeMenu,children:f.modal?tt.jsx(xg,{...u,ref:a}):tt.jsx(wg,{...u,ref:a})})})})}),xg=Me.forwardRef((e,a)=>{const l=cg(hg,e.__scopeMenu),m=Me.useRef(null),u=useComposedRefs$2(a,m);return Me.useEffect(()=>{const e=m.current;if(e)return hideOthers(e)},[]),tt.jsx(bg,{...e,ref:u,trapFocus:l.open,disableOutsidePointerEvents:l.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers$3(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>l.onOpenChange(!1)})}),wg=Me.forwardRef((e,a)=>{const l=cg(hg,e.__scopeMenu);return tt.jsx(bg,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>l.onOpenChange(!1)})}),bg=Me.forwardRef((e,a)=>{const{__scopeMenu:l,loop:m=!1,trapFocus:u,onOpenAutoFocus:p,onCloseAutoFocus:f,disableOutsidePointerEvents:g,onEntryFocus:h,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:E,onInteractOutside:x,onDismiss:w,disableOutsideScroll:b,...N}=e,_=cg(hg,l),k=dg(hg,l),S=og(l),C=lg(l),R=ag(l),[A,T]=Me.useState(null),P=Me.useRef(null),D=useComposedRefs$2(a,P,_.onContentChange),I=Me.useRef(0),F=Me.useRef(""),M=Me.useRef(0),j=Me.useRef(null),O=Me.useRef("right"),L=Me.useRef(0),$=b?cl:Me.Fragment,z=b?{as:at,allowPinchZoom:!0}:void 0,handleTypeaheadSearch=e=>{const a=F.current+e,l=R().filter(e=>!e.disabled),m=document.activeElement,u=l.find(e=>e.ref.current===m)?.textValue,p=function getNextMatch(e,a,l){const m=a.length>1&&Array.from(a).every(e=>e===a[0]),u=m?a[0]:a,p=l?e.indexOf(l):-1;let f=function wrapArray(e,a){return e.map((l,m)=>e[(a+m)%e.length])}(e,Math.max(p,0));1===u.length&&(f=f.filter(e=>e!==l));const g=f.find(e=>e.toLowerCase().startsWith(u.toLowerCase()));return g!==l?g:void 0}(l.map(e=>e.textValue),a,u),f=l.find(e=>e.textValue===p)?.ref.current;!function updateSearch(e){F.current=e,window.clearTimeout(I.current),""!==e&&(I.current=window.setTimeout(()=>updateSearch(""),1e3))}(a),f&&setTimeout(()=>f.focus())};Me.useEffect(()=>()=>window.clearTimeout(I.current),[]),useFocusGuards();const B=Me.useCallback(e=>O.current===j.current?.side&&function isPointerInGraceArea(e,a){if(!a)return!1;const l={x:e.clientX,y:e.clientY};return function isPointInPolygon(e,a){const{x:l,y:m}=e;let u=!1;for(let p=0,f=a.length-1;p<a.length;f=p++){const e=a[p].x,g=a[p].y,h=a[f].x,y=a[f].y;g>m!=y>m&&l<(h-e)*(m-g)/(y-g)+e&&(u=!u)}return u}(l,a)}(e,j.current?.area),[]);return tt.jsx(yg,{scope:l,searchRef:F,onItemEnter:Me.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:Me.useCallback(e=>{B(e)||(P.current?.focus(),T(null))},[B]),onTriggerLeave:Me.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:M,onPointerGraceIntentChange:Me.useCallback(e=>{j.current=e},[]),children:tt.jsx($,{...z,children:tt.jsx(Ho,{asChild:!0,trapped:u,onMountAutoFocus:composeEventHandlers$3(p,e=>{e.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:f,children:tt.jsx(mt,{asChild:!0,disableOutsidePointerEvents:g,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:E,onInteractOutside:x,onDismiss:w,children:tt.jsx(Zf,{asChild:!0,...C,dir:k.dir,orientation:"vertical",loop:m,currentTabStopId:A,onCurrentTabStopIdChange:T,onEntryFocus:composeEventHandlers$3(h,e=>{k.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:tt.jsx(is,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(_.open),"data-radix-menu-content":"",dir:k.dir,...S,...N,ref:D,style:{outline:"none",...N.style},onKeyDown:composeEventHandlers$3(N.onKeyDown,e=>{const a=e.target.closest("[data-radix-menu-content]")===e.currentTarget,l=e.ctrlKey||e.altKey||e.metaKey,m=1===e.key.length;a&&("Tab"===e.key&&e.preventDefault(),!l&&m&&handleTypeaheadSearch(e.key));const u=P.current;if(e.target!==u)return;if(!Yf.includes(e.key))return;e.preventDefault();const p=R().filter(e=>!e.disabled).map(e=>e.ref.current);Qf.includes(e.key)&&p.reverse(),function focusFirst(e){const a=document.activeElement;for(const l of e){if(l===a)return;if(l.focus(),document.activeElement!==a)return}}(p)}),onBlur:composeEventHandlers$3(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(I.current),F.current="")}),onPointerMove:composeEventHandlers$3(e.onPointerMove,whenMouse(e=>{const a=e.target,l=L.current!==e.clientX;if(e.currentTarget.contains(a)&&l){const a=e.clientX>L.current?"right":"left";O.current=a,L.current=e.clientX}}))})})})})})})});Eg.displayName=hg;var Ng=Me.forwardRef((e,a)=>{const{__scopeMenu:l,...m}=e;return tt.jsx(nt.div,{role:"group",...m,ref:a})});Ng.displayName="MenuGroup";var _g=Me.forwardRef((e,a)=>{const{__scopeMenu:l,...m}=e;return tt.jsx(nt.div,{...m,ref:a})});_g.displayName="MenuLabel";var kg="MenuItem",Sg="menu.itemSelect",Cg=Me.forwardRef((e,a)=>{const{disabled:l=!1,onSelect:m,...u}=e,p=Me.useRef(null),f=dg(kg,e.__scopeMenu),g=vg(kg,e.__scopeMenu),h=useComposedRefs$2(a,p),y=Me.useRef(!1);return tt.jsx(Rg,{...u,ref:h,disabled:l,onClick:composeEventHandlers$3(e.onClick,()=>{const e=p.current;if(!l&&e){const a=new CustomEvent(Sg,{bubbles:!0,cancelable:!0});e.addEventListener(Sg,e=>m?.(e),{once:!0}),dispatchDiscreteCustomEvent(e,a),a.defaultPrevented?y.current=!1:f.onClose()}}),onPointerDown:a=>{e.onPointerDown?.(a),y.current=!0},onPointerUp:composeEventHandlers$3(e.onPointerUp,e=>{y.current||e.currentTarget?.click()}),onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{const a=""!==g.searchRef.current;l||a&&" "===e.key||Gf.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});Cg.displayName=kg;var Rg=Me.forwardRef((e,a)=>{const{__scopeMenu:l,disabled:m=!1,textValue:u,...p}=e,f=vg(kg,l),g=lg(l),h=Me.useRef(null),y=useComposedRefs$2(a,h),[v,E]=Me.useState(!1),[x,w]=Me.useState("");return Me.useEffect(()=>{const e=h.current;e&&w((e.textContent??"").trim())},[p.children]),tt.jsx(tg.ItemSlot,{scope:l,disabled:m,textValue:u??x,children:tt.jsx(Kf,{asChild:!0,...g,focusable:!m,children:tt.jsx(nt.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":m||void 0,"data-disabled":m?"":void 0,...p,ref:y,onPointerMove:composeEventHandlers$3(e.onPointerMove,whenMouse(e=>{if(m)f.onItemLeave(e);else if(f.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:composeEventHandlers$3(e.onPointerLeave,whenMouse(e=>f.onItemLeave(e))),onFocus:composeEventHandlers$3(e.onFocus,()=>E(!0)),onBlur:composeEventHandlers$3(e.onBlur,()=>E(!1))})})})}),Ag=Me.forwardRef((e,a)=>{const{checked:l=!1,onCheckedChange:m,...u}=e;return tt.jsx(Og,{scope:e.__scopeMenu,checked:l,children:tt.jsx(Cg,{role:"menuitemcheckbox","aria-checked":isIndeterminate(l)?"mixed":l,...u,ref:a,"data-state":getCheckedState(l),onSelect:composeEventHandlers$3(u.onSelect,()=>m?.(!!isIndeterminate(l)||!l),{checkForDefaultPrevented:!1})})})});Ag.displayName="MenuCheckboxItem";var Tg="MenuRadioGroup",[Pg,Dg]=ng(Tg,{value:void 0,onValueChange:()=>{}}),Ig=Me.forwardRef((e,a)=>{const{value:l,onValueChange:m,...u}=e,p=useCallbackRef$3(m);return tt.jsx(Pg,{scope:e.__scopeMenu,value:l,onValueChange:p,children:tt.jsx(Ng,{...u,ref:a})})});Ig.displayName=Tg;var Fg="MenuRadioItem",Mg=Me.forwardRef((e,a)=>{const{value:l,...m}=e,u=Dg(Fg,e.__scopeMenu),p=l===u.value;return tt.jsx(Og,{scope:e.__scopeMenu,checked:p,children:tt.jsx(Cg,{role:"menuitemradio","aria-checked":p,...m,ref:a,"data-state":getCheckedState(p),onSelect:composeEventHandlers$3(m.onSelect,()=>u.onValueChange?.(l),{checkForDefaultPrevented:!1})})})});Mg.displayName=Fg;var jg="MenuItemIndicator",[Og,Lg]=ng(jg,{checked:!1}),$g=Me.forwardRef((e,a)=>{const{__scopeMenu:l,forceMount:m,...u}=e,p=Lg(jg,l);return tt.jsx(Presence$2,{present:m||isIndeterminate(p.checked)||!0===p.checked,children:tt.jsx(nt.span,{...u,ref:a,"data-state":getCheckedState(p.checked)})})});$g.displayName=jg;var Ug=Me.forwardRef((e,a)=>{const{__scopeMenu:l,...m}=e;return tt.jsx(nt.div,{role:"separator","aria-orientation":"horizontal",...m,ref:a})});Ug.displayName="MenuSeparator";var zg=Me.forwardRef((e,a)=>{const{__scopeMenu:l,...m}=e,u=og(l);return tt.jsx(cs,{...u,...m,ref:a})});zg.displayName="MenuArrow";var[Bg,qg]=ng("MenuSub"),Vg="MenuSubTrigger",Hg=Me.forwardRef((e,a)=>{const l=cg(Vg,e.__scopeMenu),m=dg(Vg,e.__scopeMenu),u=qg(Vg,e.__scopeMenu),p=vg(Vg,e.__scopeMenu),f=Me.useRef(null),{pointerGraceTimerRef:g,onPointerGraceIntentChange:h}=p,y={__scopeMenu:e.__scopeMenu},v=Me.useCallback(()=>{f.current&&window.clearTimeout(f.current),f.current=null},[]);return Me.useEffect(()=>v,[v]),Me.useEffect(()=>{const e=g.current;return()=>{window.clearTimeout(e),h(null)}},[g,h]),tt.jsx(ug,{asChild:!0,...y,children:tt.jsx(Rg,{id:u.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":u.contentId,"data-state":getOpenState(l.open),...e,ref:composeRefs$2(a,u.onTriggerChange),onClick:a=>{e.onClick?.(a),e.disabled||a.defaultPrevented||(a.currentTarget.focus(),l.open||l.onOpenChange(!0))},onPointerMove:composeEventHandlers$3(e.onPointerMove,whenMouse(a=>{p.onItemEnter(a),a.defaultPrevented||e.disabled||l.open||f.current||(p.onPointerGraceIntentChange(null),f.current=window.setTimeout(()=>{l.onOpenChange(!0),v()},100))})),onPointerLeave:composeEventHandlers$3(e.onPointerLeave,whenMouse(e=>{v();const a=l.content?.getBoundingClientRect();if(a){const m=l.content?.dataset.side,u="right"===m,f=u?-5:5,h=a[u?"left":"right"],y=a[u?"right":"left"];p.onPointerGraceIntentChange({area:[{x:e.clientX+f,y:e.clientY},{x:h,y:a.top},{x:y,y:a.top},{x:y,y:a.bottom},{x:h,y:a.bottom}],side:m}),window.clearTimeout(g.current),g.current=window.setTimeout(()=>p.onPointerGraceIntentChange(null),300)}else{if(p.onTriggerLeave(e),e.defaultPrevented)return;p.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers$3(e.onKeyDown,a=>{const u=""!==p.searchRef.current;e.disabled||u&&" "===a.key||Jf[m.dir].includes(a.key)&&(l.onOpenChange(!0),l.content?.focus(),a.preventDefault())})})})});Hg.displayName=Vg;var Wg="MenuSubContent",Zg=Me.forwardRef((e,a)=>{const l=gg(hg,e.__scopeMenu),{forceMount:m=l.forceMount,...u}=e,p=cg(hg,e.__scopeMenu),f=dg(hg,e.__scopeMenu),g=qg(Wg,e.__scopeMenu),h=Me.useRef(null),y=useComposedRefs$2(a,h);return tt.jsx(tg.Provider,{scope:e.__scopeMenu,children:tt.jsx(Presence$2,{present:m||p.open,children:tt.jsx(tg.Slot,{scope:e.__scopeMenu,children:tt.jsx(bg,{id:g.contentId,"aria-labelledby":g.triggerId,...u,ref:y,align:"start",side:"rtl"===f.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{f.isUsingKeyboardRef.current&&h.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:composeEventHandlers$3(e.onFocusOutside,e=>{e.target!==g.trigger&&p.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers$3(e.onEscapeKeyDown,e=>{f.onClose(),e.preventDefault()}),onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{const a=e.currentTarget.contains(e.target),l=Xf[f.dir].includes(e.key);a&&l&&(p.onOpenChange(!1),g.trigger?.focus(),e.preventDefault())})})})})})});function getOpenState(e){return e?"open":"closed"}function isIndeterminate(e){return"indeterminate"===e}function getCheckedState(e){return isIndeterminate(e)?"indeterminate":e?"checked":"unchecked"}function whenMouse(e){return a=>"mouse"===a.pointerType?e(a):void 0}Zg.displayName=Wg;var Kg=Menu,Gg=ug,Qg=MenuPortal,Yg=Eg,Jg=Ng,Xg=_g,eh=Cg,th=Ag,ah=Ig,rh=Mg,nh=$g,sh=Ug,oh=zg,lh=Hg,ih=Zg,ch="DropdownMenu",[mh,dh]=createContextScope$5(ch,[sg]),uh=sg(),[ph,fh]=mh(ch),DropdownMenu$1=e=>{const{__scopeDropdownMenu:a,children:l,dir:m,open:u,defaultOpen:p,onOpenChange:f,modal:g=!0}=e,h=uh(a),y=Me.useRef(null),[v=!1,E]=useControllableState$1({prop:u,defaultProp:p,onChange:f});return tt.jsx(ph,{scope:a,triggerId:useId$1(),triggerRef:y,contentId:useId$1(),open:v,onOpenChange:E,onOpenToggle:Me.useCallback(()=>E(e=>!e),[E]),modal:g,children:tt.jsx(Kg,{...h,open:v,onOpenChange:E,dir:m,modal:g,children:l})})};DropdownMenu$1.displayName=ch;var gh="DropdownMenuTrigger",hh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,disabled:m=!1,...u}=e,p=fh(gh,l),f=uh(l);return tt.jsx(Gg,{asChild:!0,...f,children:tt.jsx(nt.button,{type:"button",id:p.triggerId,"aria-haspopup":"menu","aria-expanded":p.open,"aria-controls":p.open?p.contentId:void 0,"data-state":p.open?"open":"closed","data-disabled":m?"":void 0,disabled:m,...u,ref:composeRefs$2(a,p.triggerRef),onPointerDown:composeEventHandlers$3(e.onPointerDown,e=>{m||0!==e.button||!1!==e.ctrlKey||(p.onOpenToggle(),p.open||e.preventDefault())}),onKeyDown:composeEventHandlers$3(e.onKeyDown,e=>{m||(["Enter"," "].includes(e.key)&&p.onOpenToggle(),"ArrowDown"===e.key&&p.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});hh.displayName=gh;var DropdownMenuPortal=e=>{const{__scopeDropdownMenu:a,...l}=e,m=uh(a);return tt.jsx(Qg,{...m,...l})};DropdownMenuPortal.displayName="DropdownMenuPortal";var yh="DropdownMenuContent",vh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=fh(yh,l),p=uh(l),f=Me.useRef(!1);return tt.jsx(Yg,{id:u.contentId,"aria-labelledby":u.triggerId,...p,...m,ref:a,onCloseAutoFocus:composeEventHandlers$3(e.onCloseAutoFocus,e=>{f.current||u.triggerRef.current?.focus(),f.current=!1,e.preventDefault()}),onInteractOutside:composeEventHandlers$3(e.onInteractOutside,e=>{const a=e.detail.originalEvent,l=0===a.button&&!0===a.ctrlKey,m=2===a.button||l;u.modal&&!m||(f.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vh.displayName=yh;Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(Jg,{...u,...m,ref:a})}).displayName="DropdownMenuGroup";var Eh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(Xg,{...u,...m,ref:a})});Eh.displayName="DropdownMenuLabel";var xh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(eh,{...u,...m,ref:a})});xh.displayName="DropdownMenuItem";var wh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(th,{...u,...m,ref:a})});wh.displayName="DropdownMenuCheckboxItem";Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(ah,{...u,...m,ref:a})}).displayName="DropdownMenuRadioGroup";var bh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(rh,{...u,...m,ref:a})});bh.displayName="DropdownMenuRadioItem";var Nh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(nh,{...u,...m,ref:a})});Nh.displayName="DropdownMenuItemIndicator";var _h=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(sh,{...u,...m,ref:a})});_h.displayName="DropdownMenuSeparator";Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(oh,{...u,...m,ref:a})}).displayName="DropdownMenuArrow";var kh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(lh,{...u,...m,ref:a})});kh.displayName="DropdownMenuSubTrigger";var Sh=Me.forwardRef((e,a)=>{const{__scopeDropdownMenu:l,...m}=e,u=uh(l);return tt.jsx(ih,{...u,...m,ref:a,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Sh.displayName="DropdownMenuSubContent";var Ch=DropdownMenuPortal,Rh=vh,Ah=Eh,Th=xh,Ph=wh,Dh=bh,Ih=Nh,Fh=_h,Mh=kh,jh=Sh;const Oh=DropdownMenu$1,Lh=hh;Me.forwardRef(({className:e,inset:a,children:l,...m},u)=>Me.createElement(Mh,{ref:u,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",e),...m},l,Me.createElement(Ca,{className:"ml-auto h-4 w-4"}))).displayName=Mh.displayName;Me.forwardRef(({className:e,...a},l)=>Me.createElement(jh,{ref:l,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=jh.displayName;const $h=Me.forwardRef(({className:e,sideOffset:a=4,...l},m)=>Me.createElement(Ch,null,Me.createElement(Rh,{ref:m,sideOffset:a,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...l})));$h.displayName=Rh.displayName;const Uh=Me.forwardRef(({className:e,inset:a,...l},m)=>Me.createElement(Th,{ref:m,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",e),...l}));Uh.displayName=Th.displayName;Me.forwardRef(({className:e,children:a,checked:l,...m},u)=>Me.createElement(Ph,{ref:u,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:l,...m},Me.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Me.createElement(Ih,null,Me.createElement(_a,{className:"h-4 w-4"}))),a)).displayName=Ph.displayName;Me.forwardRef(({className:e,children:a,...l},m)=>Me.createElement(Dh,{ref:m,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...l},Me.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Me.createElement(Ih,null,Me.createElement(Ia,{className:"h-2 w-2 fill-current"}))),a)).displayName=Dh.displayName;const zh=Me.forwardRef(({className:e,inset:a,...l},m)=>Me.createElement(Ah,{ref:m,className:cn("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...l}));zh.displayName=Ah.displayName;const Bh=Me.forwardRef(({className:e,...a},l)=>Me.createElement(Fh,{ref:l,className:cn("-mx-1 my-1 h-px bg-muted",e),...a}));Bh.displayName=Fh.displayName;var qh="Popover",[Vh,Hh]=createContextScope$5(qh,[Kn]),Wh=Kn(),[Zh,Kh]=Vh(qh),Popover$1=e=>{const{__scopePopover:a,children:l,open:m,defaultOpen:u,onOpenChange:p,modal:f=!1}=e,g=Wh(a),h=Me.useRef(null),[y,v]=Me.useState(!1),[E=!1,x]=useControllableState$1({prop:m,defaultProp:u,onChange:p});return tt.jsx(os,{...g,children:tt.jsx(Zh,{scope:a,contentId:useId$1(),triggerRef:h,open:E,onOpenChange:x,onOpenToggle:Me.useCallback(()=>x(e=>!e),[x]),hasCustomAnchor:y,onCustomAnchorAdd:Me.useCallback(()=>v(!0),[]),onCustomAnchorRemove:Me.useCallback(()=>v(!1),[]),modal:f,children:l})})};Popover$1.displayName=qh;var Gh="PopoverAnchor";Me.forwardRef((e,a)=>{const{__scopePopover:l,...m}=e,u=Kh(Gh,l),p=Wh(l),{onCustomAnchorAdd:f,onCustomAnchorRemove:g}=u;return Me.useEffect(()=>(f(),()=>g()),[f,g]),tt.jsx(ls,{...p,...m,ref:a})}).displayName=Gh;var Qh="PopoverTrigger",Yh=Me.forwardRef((e,a)=>{const{__scopePopover:l,...m}=e,u=Kh(Qh,l),p=Wh(l),f=useComposedRefs$2(a,u.triggerRef),g=tt.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":getState(u.open),...m,ref:f,onClick:composeEventHandlers$3(e.onClick,u.onOpenToggle)});return u.hasCustomAnchor?g:tt.jsx(ls,{asChild:!0,...p,children:g})});Yh.displayName=Qh;var Jh="PopoverPortal",[Xh,ey]=Vh(Jh,{forceMount:void 0}),PopoverPortal=e=>{const{__scopePopover:a,forceMount:l,children:m,container:u}=e,p=Kh(Jh,a);return tt.jsx(Xh,{scope:a,forceMount:l,children:tt.jsx(Presence$2,{present:l||p.open,children:tt.jsx(ht,{asChild:!0,container:u,children:m})})})};PopoverPortal.displayName=Jh;var ty="PopoverContent",ay=Me.forwardRef((e,a)=>{const l=ey(ty,e.__scopePopover),{forceMount:m=l.forceMount,...u}=e,p=Kh(ty,e.__scopePopover);return tt.jsx(Presence$2,{present:m||p.open,children:p.modal?tt.jsx(ry,{...u,ref:a}):tt.jsx(ny,{...u,ref:a})})});ay.displayName=ty;var ry=Me.forwardRef((e,a)=>{const l=Kh(ty,e.__scopePopover),m=Me.useRef(null),u=useComposedRefs$2(a,m),p=Me.useRef(!1);return Me.useEffect(()=>{const e=m.current;if(e)return hideOthers(e)},[]),tt.jsx(cl,{as:at,allowPinchZoom:!0,children:tt.jsx(sy,{...e,ref:u,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers$3(e.onCloseAutoFocus,e=>{e.preventDefault(),p.current||l.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers$3(e.onPointerDownOutside,e=>{const a=e.detail.originalEvent,l=0===a.button&&!0===a.ctrlKey,m=2===a.button||l;p.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers$3(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),ny=Me.forwardRef((e,a)=>{const l=Kh(ty,e.__scopePopover),m=Me.useRef(!1),u=Me.useRef(!1);return tt.jsx(sy,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(m.current||l.triggerRef.current?.focus(),a.preventDefault()),m.current=!1,u.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(m.current=!0,"pointerdown"===a.detail.originalEvent.type&&(u.current=!0));const p=a.target,f=l.triggerRef.current?.contains(p);f&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&u.current&&a.preventDefault()}})}),sy=Me.forwardRef((e,a)=>{const{__scopePopover:l,trapFocus:m,onOpenAutoFocus:u,onCloseAutoFocus:p,disableOutsidePointerEvents:f,onEscapeKeyDown:g,onPointerDownOutside:h,onFocusOutside:y,onInteractOutside:v,...E}=e,x=Kh(ty,l),w=Wh(l);return useFocusGuards(),tt.jsx(Ho,{asChild:!0,loop:!0,trapped:m,onMountAutoFocus:u,onUnmountAutoFocus:p,children:tt.jsx(mt,{asChild:!0,disableOutsidePointerEvents:f,onInteractOutside:v,onEscapeKeyDown:g,onPointerDownOutside:h,onFocusOutside:y,onDismiss:()=>x.onOpenChange(!1),children:tt.jsx(is,{"data-state":getState(x.open),role:"dialog",id:x.contentId,...w,...E,ref:a,style:{...E.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),oy="PopoverClose";Me.forwardRef((e,a)=>{const{__scopePopover:l,...m}=e,u=Kh(oy,l);return tt.jsx(nt.button,{type:"button",...m,ref:a,onClick:composeEventHandlers$3(e.onClick,()=>u.onOpenChange(!1))})}).displayName=oy;function getState(e){return e?"open":"closed"}Me.forwardRef((e,a)=>{const{__scopePopover:l,...m}=e,u=Wh(l);return tt.jsx(cs,{...u,...m,ref:a})}).displayName="PopoverArrow";var ly=PopoverPortal,iy=ay;const cy=Popover$1,my=Yh,dy=Me.forwardRef(({className:e,align:a="center",sideOffset:l=4,...m},u)=>Me.createElement(ly,null,Me.createElement(iy,{ref:u,align:a,sideOffset:l,className:cn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...m})));dy.displayName=iy.displayName;const uy=new class RealTimeService{constructor(){__publicField(this,"channels",new Map),__publicField(this,"eventListeners",new Map),__publicField(this,"presenceData",new Map)}subscribeToDocumentProcessing(e,a){return console.log("Skipping document processing subscription - realtime disabled"),()=>{}}subscribeToDocumentAnnotations(e,a){return console.log("Skipping document annotations subscription - realtime disabled"),()=>{}}subscribeToUserPresence(e,a,l){return console.log("Skipping user presence subscription - realtime disabled"),()=>{}}async updatePresence(e,a){console.log("Skipping presence update - realtime disabled")}subscribeToSystemNotifications(e,a){return console.log("Skipping system notifications subscription - realtime disabled"),()=>{}}subscribeToCollaborationUpdates(e,a){return console.log("Skipping collaboration updates subscription - realtime disabled"),()=>{}}async broadcastEvent(e,a){console.log("Skipping broadcast event - realtime disabled")}unsubscribe(e){console.log("Skipping unsubscribe - realtime disabled")}unsubscribeAll(){console.log("Skipping unsubscribe all - realtime disabled")}getPresenceData(e){return[]}isConnected(){return!1}getConnectionStatus(){return"disabled"}},ConnectionStatus=({documentId:e,showUserPresence:a=!1,className:l=""})=>{const{isConnected:m,connectionStatus:u}=(()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState("disconnected");return Me.useEffect(()=>{const checkConnection=()=>{const e=uy.isConnected(),l=uy.getConnectionStatus();a(e),m(l)};checkConnection();const e=setInterval(checkConnection,5e3);return()=>clearInterval(e)},[]),{isConnected:e,connectionStatus:l}})(),{presenceData:p}=(e=>{const[a,l]=Me.useState([]),[m,u]=Me.useState(!1),{user:p}=useAuth(),f=Me.useRef(null);Me.useEffect(()=>{if(!e||!p)return;u(!0);const a=uy.subscribeToUserPresence(e,p.id,e=>{l(e)});return f.current=a,()=>{a(),u(!1)}},[e,p]);const g=Me.useCallback(async a=>{e&&p&&await uy.updatePresence(e,{user_id:p.id,document_id:e,...a})},[e,p]);return{presenceData:a,isConnected:m,updateCurrentPage:Me.useCallback(e=>{g({current_page:e})},[g]),setStatus:Me.useCallback(e=>{g({status:e,last_seen:(new Date).toISOString()})},[g]),updatePresence:g}})(e||""),getUserInitials=e=>e.user_id.slice(0,2).toUpperCase(),f=p.filter(e=>"online"===e.status),g=p.filter(e=>"away"===e.status);return je.createElement("div",{className:`flex items-center space-x-2 ${l}`},je.createElement(cy,null,je.createElement(my,{asChild:!0},je.createElement(Uo,{variant:"ghost",size:"sm",className:"h-8 px-2"},m?je.createElement(Kr,{className:"h-4 w-4 text-green-500"}):je.createElement(Zr,{className:"h-4 w-4 text-red-500"}),je.createElement(Ia,{className:`h-2 w-2 ml-1 ${(e=>{switch(e){case"SUBSCRIBED":case"connected":return"bg-green-500";case"CHANNEL_ERROR":case"TIMED_OUT":return"bg-red-500";case"CONNECTING":return"bg-yellow-500";default:return"bg-gray-500"}})(u)}`}))),je.createElement(dy,{className:"w-64",align:"end"},je.createElement(ui,{className:"border-0 shadow-none"},je.createElement(pi,{className:"pb-3"},je.createElement(fi,{className:"text-sm flex items-center space-x-2"},m?je.createElement(Kr,{className:"h-4 w-4 text-green-500"}):je.createElement(Zr,{className:"h-4 w-4 text-red-500"}),je.createElement("span",null,"Real-time Connection"))),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Status:"),je.createElement(Badge,{variant:m?"default":"destructive",className:"text-xs"},(e=>{switch(e){case"SUBSCRIBED":return"Connected";case"CHANNEL_ERROR":return"Error";case"TIMED_OUT":return"Timeout";case"CONNECTING":return"Connecting";default:return"Disconnected"}})(u))),!m&&je.createElement("div",{className:"flex items-start space-x-2 p-2 bg-yellow-50 rounded-md"},je.createElement(Br,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),je.createElement("div",{className:"text-xs text-yellow-800"},"Real-time features may not work properly. Check your internet connection.")),je.createElement(Uo,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.location.reload()},je.createElement(Nr,{className:"h-3 w-3 mr-2"}),"Reconnect"))))),a&&e&&p.length>0&&je.createElement(cy,null,je.createElement(my,{asChild:!0},je.createElement(Uo,{variant:"ghost",size:"sm",className:"h-8 px-2"},je.createElement(Wr,{className:"h-4 w-4"}),je.createElement("span",{className:"ml-1 text-xs"},f.length))),je.createElement(dy,{className:"w-80",align:"end"},je.createElement(ui,{className:"border-0 shadow-none"},je.createElement(pi,{className:"pb-3"},je.createElement(fi,{className:"text-sm flex items-center space-x-2"},je.createElement(Wr,{className:"h-4 w-4"}),je.createElement("span",null,"Active Collaborators")),je.createElement(gi,{className:"text-xs"},"Users currently viewing this document")),je.createElement(hi,{className:"space-y-3"},f.length>0&&je.createElement("div",null,je.createElement("h4",{className:"text-xs font-medium text-gray-900 mb-2"},"Online (",f.length,")"),je.createElement("div",{className:"space-y-2"},f.map(e=>je.createElement("div",{key:e.user_id,className:"flex items-center space-x-2"},je.createElement(hd,{className:"h-6 w-6"},je.createElement(vd,{className:"text-xs"},getUserInitials(e))),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Ia,{className:"h-2 w-2 text-green-500 fill-current"}),je.createElement("span",{className:"text-xs font-medium truncate"},"User ",e.user_id.slice(-4))),e.current_page&&je.createElement("div",{className:"text-xs text-gray-500"},"Page ",e.current_page)))))),g.length>0&&je.createElement("div",null,je.createElement("h4",{className:"text-xs font-medium text-gray-900 mb-2"},"Away (",g.length,")"),je.createElement("div",{className:"space-y-2"},g.map(e=>je.createElement("div",{key:e.user_id,className:"flex items-center space-x-2"},je.createElement(hd,{className:"h-6 w-6"},je.createElement(vd,{className:"text-xs"},getUserInitials(e))),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Ia,{className:"h-2 w-2 text-yellow-500 fill-current"}),je.createElement("span",{className:"text-xs font-medium truncate"},"User ",e.user_id.slice(-4))),je.createElement("div",{className:"text-xs text-gray-500"},"Last seen ",formatDistanceToNow(new Date(e.last_seen),{addSuffix:!0}))))))),0===p.length&&je.createElement("div",{className:"text-center py-4"},je.createElement(Wr,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),je.createElement("p",{className:"text-xs text-gray-500"},"No other users online")))))))};function setRef(e,a){if("function"==typeof e)return e(a);null!=e&&(e.current=a)}function composeRefs(...e){return a=>{let l=!1;const m=e.map(e=>{const m=setRef(e,a);return l||"function"!=typeof m||(l=!0),m});if(l)return()=>{for(let a=0;a<m.length;a++){const l=m[a];"function"==typeof l?l():setRef(e[a],null)}}}}function useComposedRefs(...e){return Me.useCallback(composeRefs(...e),e)}function createSlot(e){const a=createSlotClone(e),l=Me.forwardRef((e,l)=>{const{children:m,...u}=e,p=Me.Children.toArray(m),f=p.find(isSlottable);if(f){const e=f.props.children,m=p.map(a=>a===f?Me.Children.count(e)>1?Me.Children.only(null):Me.isValidElement(e)?e.props.children:null:a);return tt.jsx(a,{...u,ref:l,children:Me.isValidElement(e)?Me.cloneElement(e,void 0,m):null})}return tt.jsx(a,{...u,ref:l,children:m})});return l.displayName=`${e}.Slot`,l}function createSlotClone(e){const a=Me.forwardRef((e,a)=>{const{children:l,...m}=e;if(Me.isValidElement(l)){const e=function getElementRef$1(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(l),u=function mergeProps(e,a){const l={...a};for(const m in a){const u=e[m],p=a[m];/^on[A-Z]/.test(m)?u&&p?l[m]=(...e)=>{const a=p(...e);return u(...e),a}:u&&(l[m]=u):"style"===m?l[m]={...u,...p}:"className"===m&&(l[m]=[u,p].filter(Boolean).join(" "))}return{...e,...l}}(m,l.props);return l.type!==Me.Fragment&&(u.ref=a?composeRefs(a,e):e),Me.cloneElement(l,u)}return Me.Children.count(l)>1?Me.Children.only(null):null});return a.displayName=`${e}.SlotClone`,a}var py=Symbol("radix.slottable");function isSlottable(e){return Me.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===py}var fy=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{const l=createSlot(`Primitive.${a}`),m=Me.forwardRef((e,m)=>{const{asChild:u,...p}=e,f=u?l:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),tt.jsx(f,{...p,ref:m})});return m.displayName=`Primitive.${a}`,{...e,[a]:m}},{}),gy=globalThis?.document?Me.useLayoutEffect:()=>{};var Presence=e=>{const{present:a,children:l}=e,m=function usePresence(e){const[a,l]=Me.useState(),m=Me.useRef(null),u=Me.useRef(e),p=Me.useRef("none"),f=e?"mounted":"unmounted",[g,h]=function useStateMachine$1(e,a){return Me.useReducer((e,l)=>a[e][l]??e,e)}(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Me.useEffect(()=>{const e=getAnimationName(m.current);p.current="mounted"===g?e:"none"},[g]),gy(()=>{const a=m.current,l=u.current;if(l!==e){const m=p.current,f=getAnimationName(a);if(e)h("MOUNT");else if("none"===f||"none"===a?.display)h("UNMOUNT");else{h(l&&m!==f?"ANIMATION_OUT":"UNMOUNT")}u.current=e}},[e,h]),gy(()=>{if(a){let e;const l=a.ownerDocument.defaultView??window,handleAnimationEnd=p=>{const f=getAnimationName(m.current).includes(p.animationName);if(p.target===a&&f&&(h("ANIMATION_END"),!u.current)){const m=a.style.animationFillMode;a.style.animationFillMode="forwards",e=l.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=m)})}},handleAnimationStart=e=>{e.target===a&&(p.current=getAnimationName(m.current))};return a.addEventListener("animationstart",handleAnimationStart),a.addEventListener("animationcancel",handleAnimationEnd),a.addEventListener("animationend",handleAnimationEnd),()=>{l.clearTimeout(e),a.removeEventListener("animationstart",handleAnimationStart),a.removeEventListener("animationcancel",handleAnimationEnd),a.removeEventListener("animationend",handleAnimationEnd)}}h("ANIMATION_END")},[a,h]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:Me.useCallback(e=>{m.current=e?getComputedStyle(e):null,l(e)},[])}}(a),u="function"==typeof l?l({present:m.isPresent}):Me.Children.only(l),p=useComposedRefs(m.ref,function getElementRef(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning;if(l)return e.ref;if(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=a&&"isReactWarning"in a&&a.isReactWarning,l)return e.props.ref;return e.props.ref||e.ref}(u));return"function"==typeof l||m.isPresent?Me.cloneElement(u,{ref:p}):null};function getAnimationName(e){return e?.animationName||"none"}function composeContextScopes$1(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}function useCallbackRef(e){const a=Me.useRef(e);return Me.useEffect(()=>{a.current=e}),Me.useMemo(()=>(...e)=>a.current?.(...e),[])}Presence.displayName="Presence";var hy=Me.createContext(void 0);function composeEventHandlers$1(e,a,{checkForDefaultPrevented:l=!0}={}){return function handleEvent(m){if(e?.(m),!1===l||!m.defaultPrevented)return a?.(m)}}var yy="ScrollArea",[vy,Ey]=function createContextScope$1(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;l=[...l,m];const Provider2=a=>{const{scope:l,children:m,...f}=a,g=l?.[e]?.[p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})};return Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e]?.[p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes$1(createScope,...a)]}(yy),[xy,wy]=vy(yy),by=Me.forwardRef((e,a)=>{const{__scopeScrollArea:l,type:m="hover",dir:u,scrollHideDelay:p=600,...f}=e,[g,h]=Me.useState(null),[y,v]=Me.useState(null),[E,x]=Me.useState(null),[w,b]=Me.useState(null),[N,_]=Me.useState(null),[k,S]=Me.useState(0),[C,R]=Me.useState(0),[A,T]=Me.useState(!1),[P,D]=Me.useState(!1),I=useComposedRefs(a,e=>h(e)),F=function useDirection(e){const a=Me.useContext(hy);return e||a||"ltr"}(u);return tt.jsx(xy,{scope:l,type:m,dir:F,scrollHideDelay:p,scrollArea:g,viewport:y,onViewportChange:v,content:E,onContentChange:x,scrollbarX:w,onScrollbarXChange:b,scrollbarXEnabled:A,onScrollbarXEnabledChange:T,scrollbarY:N,onScrollbarYChange:_,scrollbarYEnabled:P,onScrollbarYEnabledChange:D,onCornerWidthChange:S,onCornerHeightChange:R,children:tt.jsx(fy.div,{dir:F,...f,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});by.displayName=yy;var Ny="ScrollAreaViewport",_y=Me.forwardRef((e,a)=>{const{__scopeScrollArea:l,children:m,nonce:u,...p}=e,f=wy(Ny,l),g=useComposedRefs(a,Me.useRef(null),f.onViewportChange);return tt.jsxs(tt.Fragment,{children:[tt.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:u}),tt.jsx(fy.div,{"data-radix-scroll-area-viewport":"",...p,ref:g,style:{overflowX:f.scrollbarXEnabled?"scroll":"hidden",overflowY:f.scrollbarYEnabled?"scroll":"hidden",...e.style},children:tt.jsx("div",{ref:f.onContentChange,style:{minWidth:"100%",display:"table"},children:m})})]})});_y.displayName=Ny;var ky="ScrollAreaScrollbar",Sy=Me.forwardRef((e,a)=>{const{forceMount:l,...m}=e,u=wy(ky,e.__scopeScrollArea),{onScrollbarXEnabledChange:p,onScrollbarYEnabledChange:f}=u,g="horizontal"===e.orientation;return Me.useEffect(()=>(g?p(!0):f(!0),()=>{g?p(!1):f(!1)}),[g,p,f]),"hover"===u.type?tt.jsx(Cy,{...m,ref:a,forceMount:l}):"scroll"===u.type?tt.jsx(Ry,{...m,ref:a,forceMount:l}):"auto"===u.type?tt.jsx(Ay,{...m,ref:a,forceMount:l}):"always"===u.type?tt.jsx(Ty,{...m,ref:a}):null});Sy.displayName=ky;var Cy=Me.forwardRef((e,a)=>{const{forceMount:l,...m}=e,u=wy(ky,e.__scopeScrollArea),[p,f]=Me.useState(!1);return Me.useEffect(()=>{const e=u.scrollArea;let a=0;if(e){const handlePointerEnter=()=>{window.clearTimeout(a),f(!0)},handlePointerLeave=()=>{a=window.setTimeout(()=>f(!1),u.scrollHideDelay)};return e.addEventListener("pointerenter",handlePointerEnter),e.addEventListener("pointerleave",handlePointerLeave),()=>{window.clearTimeout(a),e.removeEventListener("pointerenter",handlePointerEnter),e.removeEventListener("pointerleave",handlePointerLeave)}}},[u.scrollArea,u.scrollHideDelay]),tt.jsx(Presence,{present:l||p,children:tt.jsx(Ay,{"data-state":p?"visible":"hidden",...m,ref:a})})}),Ry=Me.forwardRef((e,a)=>{const{forceMount:l,...m}=e,u=wy(ky,e.__scopeScrollArea),p="horizontal"===e.orientation,f=useDebounceCallback(()=>h("SCROLL_END"),100),[g,h]=function useStateMachine(e,a){return Me.useReducer((e,l)=>a[e][l]??e,e)}("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return Me.useEffect(()=>{if("idle"===g){const e=window.setTimeout(()=>h("HIDE"),u.scrollHideDelay);return()=>window.clearTimeout(e)}},[g,u.scrollHideDelay,h]),Me.useEffect(()=>{const e=u.viewport,a=p?"scrollLeft":"scrollTop";if(e){let l=e[a];const handleScroll2=()=>{const m=e[a];l!==m&&(h("SCROLL"),f()),l=m};return e.addEventListener("scroll",handleScroll2),()=>e.removeEventListener("scroll",handleScroll2)}},[u.viewport,p,h,f]),tt.jsx(Presence,{present:l||"hidden"!==g,children:tt.jsx(Ty,{"data-state":"hidden"===g?"hidden":"visible",...m,ref:a,onPointerEnter:composeEventHandlers$1(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:composeEventHandlers$1(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),Ay=Me.forwardRef((e,a)=>{const l=wy(ky,e.__scopeScrollArea),{forceMount:m,...u}=e,[p,f]=Me.useState(!1),g="horizontal"===e.orientation,h=useDebounceCallback(()=>{if(l.viewport){const e=l.viewport.offsetWidth<l.viewport.scrollWidth,a=l.viewport.offsetHeight<l.viewport.scrollHeight;f(g?e:a)}},10);return useResizeObserver(l.viewport,h),useResizeObserver(l.content,h),tt.jsx(Presence,{present:m||p,children:tt.jsx(Ty,{"data-state":p?"visible":"hidden",...u,ref:a})})}),Ty=Me.forwardRef((e,a)=>{const{orientation:l="vertical",...m}=e,u=wy(ky,e.__scopeScrollArea),p=Me.useRef(null),f=Me.useRef(0),[g,h]=Me.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),y=getThumbRatio(g.viewport,g.content),v={...m,sizes:g,onSizesChange:h,hasThumb:Boolean(y>0&&y<1),onThumbChange:e=>p.current=e,onThumbPointerUp:()=>f.current=0,onThumbPointerDown:e=>f.current=e};function getScrollPosition(e,a){return function getScrollPositionFromPointer(e,a,l,m="ltr"){const u=getThumbSize(l),p=u/2,f=a||p,g=u-f,h=l.scrollbar.paddingStart+f,y=l.scrollbar.size-l.scrollbar.paddingEnd-g,v=l.content-l.viewport,E="ltr"===m?[0,v]:[-1*v,0];return linearScale([h,y],E)(e)}(e,f.current,g,a)}return"horizontal"===l?tt.jsx(Py,{...v,ref:a,onThumbPositionChange:()=>{if(u.viewport&&p.current){const e=getThumbOffsetFromScroll(u.viewport.scrollLeft,g,u.dir);p.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{u.viewport&&(u.viewport.scrollLeft=e)},onDragScroll:e=>{u.viewport&&(u.viewport.scrollLeft=getScrollPosition(e,u.dir))}}):"vertical"===l?tt.jsx(Dy,{...v,ref:a,onThumbPositionChange:()=>{if(u.viewport&&p.current){const e=getThumbOffsetFromScroll(u.viewport.scrollTop,g);p.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{u.viewport&&(u.viewport.scrollTop=e)},onDragScroll:e=>{u.viewport&&(u.viewport.scrollTop=getScrollPosition(e))}}):null}),Py=Me.forwardRef((e,a)=>{const{sizes:l,onSizesChange:m,...u}=e,p=wy(ky,e.__scopeScrollArea),[f,g]=Me.useState(),h=Me.useRef(null),y=useComposedRefs(a,h,p.onScrollbarXChange);return Me.useEffect(()=>{h.current&&g(getComputedStyle(h.current))},[h]),tt.jsx(My,{"data-orientation":"horizontal",...u,ref:y,sizes:l,style:{bottom:0,left:"rtl"===p.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===p.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(l)+"px",...e.style},onThumbPointerDown:a=>e.onThumbPointerDown(a.x),onDragScroll:a=>e.onDragScroll(a.x),onWheelScroll:(a,l)=>{if(p.viewport){const m=p.viewport.scrollLeft+a.deltaX;e.onWheelScroll(m),isScrollingWithinScrollbarBounds(m,l)&&a.preventDefault()}},onResize:()=>{h.current&&p.viewport&&f&&m({content:p.viewport.scrollWidth,viewport:p.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:toInt(f.paddingLeft),paddingEnd:toInt(f.paddingRight)}})}})}),Dy=Me.forwardRef((e,a)=>{const{sizes:l,onSizesChange:m,...u}=e,p=wy(ky,e.__scopeScrollArea),[f,g]=Me.useState(),h=Me.useRef(null),y=useComposedRefs(a,h,p.onScrollbarYChange);return Me.useEffect(()=>{h.current&&g(getComputedStyle(h.current))},[h]),tt.jsx(My,{"data-orientation":"vertical",...u,ref:y,sizes:l,style:{top:0,right:"ltr"===p.dir?0:void 0,left:"rtl"===p.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(l)+"px",...e.style},onThumbPointerDown:a=>e.onThumbPointerDown(a.y),onDragScroll:a=>e.onDragScroll(a.y),onWheelScroll:(a,l)=>{if(p.viewport){const m=p.viewport.scrollTop+a.deltaY;e.onWheelScroll(m),isScrollingWithinScrollbarBounds(m,l)&&a.preventDefault()}},onResize:()=>{h.current&&p.viewport&&f&&m({content:p.viewport.scrollHeight,viewport:p.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:toInt(f.paddingTop),paddingEnd:toInt(f.paddingBottom)}})}})}),[Iy,Fy]=vy(ky),My=Me.forwardRef((e,a)=>{const{__scopeScrollArea:l,sizes:m,hasThumb:u,onThumbChange:p,onThumbPointerUp:f,onThumbPointerDown:g,onThumbPositionChange:h,onDragScroll:y,onWheelScroll:v,onResize:E,...x}=e,w=wy(ky,l),[b,N]=Me.useState(null),_=useComposedRefs(a,e=>N(e)),k=Me.useRef(null),S=Me.useRef(""),C=w.viewport,R=m.content-m.viewport,A=useCallbackRef(v),T=useCallbackRef(h),P=useDebounceCallback(E,10);function handleDragScroll(e){if(k.current){const a=e.clientX-k.current.left,l=e.clientY-k.current.top;y({x:a,y:l})}}return Me.useEffect(()=>{const handleWheel=e=>{const a=e.target,l=b?.contains(a);l&&A(e,R)};return document.addEventListener("wheel",handleWheel,{passive:!1}),()=>document.removeEventListener("wheel",handleWheel,{passive:!1})},[C,b,R,A]),Me.useEffect(T,[m,T]),useResizeObserver(b,P),useResizeObserver(w.content,P),tt.jsx(Iy,{scope:l,scrollbar:b,hasThumb:u,onThumbChange:useCallbackRef(p),onThumbPointerUp:useCallbackRef(f),onThumbPositionChange:T,onThumbPointerDown:useCallbackRef(g),children:tt.jsx(fy.div,{...x,ref:_,style:{position:"absolute",...x.style},onPointerDown:composeEventHandlers$1(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),k.current=b.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),handleDragScroll(e)}}),onPointerMove:composeEventHandlers$1(e.onPointerMove,handleDragScroll),onPointerUp:composeEventHandlers$1(e.onPointerUp,e=>{const a=e.target;a.hasPointerCapture(e.pointerId)&&a.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,w.viewport&&(w.viewport.style.scrollBehavior=""),k.current=null})})})}),jy="ScrollAreaThumb",Oy=Me.forwardRef((e,a)=>{const{forceMount:l,...m}=e,u=Fy(jy,e.__scopeScrollArea);return tt.jsx(Presence,{present:l||u.hasThumb,children:tt.jsx(Ly,{ref:a,...m})})}),Ly=Me.forwardRef((e,a)=>{const{__scopeScrollArea:l,style:m,...u}=e,p=wy(jy,l),f=Fy(jy,l),{onThumbPositionChange:g}=f,h=useComposedRefs(a,e=>f.onThumbChange(e)),y=Me.useRef(void 0),v=useDebounceCallback(()=>{y.current&&(y.current(),y.current=void 0)},100);return Me.useEffect(()=>{const e=p.viewport;if(e){const handleScroll2=()=>{if(v(),!y.current){const a=addUnlinkedScrollListener(e,g);y.current=a,g()}};return g(),e.addEventListener("scroll",handleScroll2),()=>e.removeEventListener("scroll",handleScroll2)}},[p.viewport,v,g]),tt.jsx(fy.div,{"data-state":f.hasThumb?"visible":"hidden",...u,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...m},onPointerDownCapture:composeEventHandlers$1(e.onPointerDownCapture,e=>{const a=e.target.getBoundingClientRect(),l=e.clientX-a.left,m=e.clientY-a.top;f.onThumbPointerDown({x:l,y:m})}),onPointerUp:composeEventHandlers$1(e.onPointerUp,f.onThumbPointerUp)})});Oy.displayName=jy;var $y="ScrollAreaCorner",Uy=Me.forwardRef((e,a)=>{const l=wy($y,e.__scopeScrollArea),m=Boolean(l.scrollbarX&&l.scrollbarY);return"scroll"!==l.type&&m?tt.jsx(zy,{...e,ref:a}):null});Uy.displayName=$y;var zy=Me.forwardRef((e,a)=>{const{__scopeScrollArea:l,...m}=e,u=wy($y,l),[p,f]=Me.useState(0),[g,h]=Me.useState(0),y=Boolean(p&&g);return useResizeObserver(u.scrollbarX,()=>{const e=u.scrollbarX?.offsetHeight||0;u.onCornerHeightChange(e),h(e)}),useResizeObserver(u.scrollbarY,()=>{const e=u.scrollbarY?.offsetWidth||0;u.onCornerWidthChange(e),f(e)}),y?tt.jsx(fy.div,{...m,ref:a,style:{width:p,height:g,position:"absolute",right:"ltr"===u.dir?0:void 0,left:"rtl"===u.dir?0:void 0,bottom:0,...e.style}}):null});function toInt(e){return e?parseInt(e,10):0}function getThumbRatio(e,a){const l=e/a;return isNaN(l)?0:l}function getThumbSize(e){const a=getThumbRatio(e.viewport,e.content),l=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,m=(e.scrollbar.size-l)*a;return Math.max(m,18)}function getThumbOffsetFromScroll(e,a,l="ltr"){const m=getThumbSize(a),u=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,p=a.scrollbar.size-u,f=a.content-a.viewport,g=p-m,h=function clamp(e,[a,l]){return Math.min(l,Math.max(a,e))}(e,"ltr"===l?[0,f]:[-1*f,0]);return linearScale([0,f],[0,g])(h)}function linearScale(e,a){return l=>{if(e[0]===e[1]||a[0]===a[1])return a[0];const m=(a[1]-a[0])/(e[1]-e[0]);return a[0]+m*(l-e[0])}}function isScrollingWithinScrollbarBounds(e,a){return e>0&&e<a}var addUnlinkedScrollListener=(e,a=()=>{})=>{let l={left:e.scrollLeft,top:e.scrollTop},m=0;return function loop(){const u={left:e.scrollLeft,top:e.scrollTop},p=l.left!==u.left,f=l.top!==u.top;(p||f)&&a(),l=u,m=window.requestAnimationFrame(loop)}(),()=>window.cancelAnimationFrame(m)};function useDebounceCallback(e,a){const l=useCallbackRef(e),m=Me.useRef(0);return Me.useEffect(()=>()=>window.clearTimeout(m.current),[]),Me.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(l,a)},[l,a])}function useResizeObserver(e,a){const l=useCallbackRef(a);gy(()=>{let a=0;if(e){const m=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(l)});return m.observe(e),()=>{window.cancelAnimationFrame(a),m.unobserve(e)}}},[e,l])}var By=by,qy=_y,Vy=Uy;const Hy=Me.forwardRef(({className:e,children:a,...l},m)=>Me.createElement(By,{ref:m,className:cn("relative overflow-hidden",e),...l},Me.createElement(qy,{className:"h-full w-full rounded-[inherit]"},a),Me.createElement(Wy,null),Me.createElement(Vy,null)));Hy.displayName=By.displayName;const Wy=Me.forwardRef(({className:e,orientation:a="vertical",...l},m)=>Me.createElement(Sy,{ref:m,orientation:a,className:cn("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...l},Me.createElement(Oy,{className:"relative flex-1 rounded-full bg-border"})));Wy.displayName=Sy.displayName;const NotificationCenter=({className:e=""})=>{const{notifications:a,markAsRead:l,clearAll:m}=(()=>{const[e,a]=Me.useState([]),[l,m]=Me.useState(!1),{user:u}=useAuth();return Me.useEffect(()=>{if(!u)return;m(!0);const e=uy.subscribeToSystemNotifications(u.id,e=>{a(a=>[...a.slice(-9),e]),An.info(e.message||"New notification received")});return()=>{e(),m(!1)}},[u]),{notifications:e,isConnected:l,markAsRead:Me.useCallback(e=>{a(a=>a.map(a=>a.id===e?{...a,read:!0}:a))},[]),clearAll:Me.useCallback(()=>{a([])},[])}})(),u=a.filter(e=>!e.read).length,getNotificationBadgeVariant=e=>{switch(e){case"success":return"default";case"warning":return"secondary";case"error":return"destructive";default:return"outline"}};return je.createElement("div",{className:e},je.createElement(cy,null,je.createElement(my,{asChild:!0},je.createElement(Uo,{variant:"ghost",size:"sm",className:"relative h-8 w-8 p-0"},u>0?je.createElement(da,{className:"h-4 w-4"}):je.createElement(ua,{className:"h-4 w-4"}),u>0&&je.createElement(Badge,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center"},u>9?"9+":u))),je.createElement(dy,{className:"w-96",align:"end"},je.createElement(ui,{className:"border-0 shadow-none"},je.createElement(pi,{className:"pb-3"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement(fi,{className:"text-sm flex items-center space-x-2"},je.createElement(ua,{className:"h-4 w-4"}),je.createElement("span",null,"Notifications")),u>0&&je.createElement(gi,{className:"text-xs"},u," unread notification",1!==u?"s":"")),a.length>0&&je.createElement(Uo,{variant:"ghost",size:"sm",onClick:m,className:"text-xs"},"Clear all"))),je.createElement(hi,{className:"p-0"},a.length>0?je.createElement(Hy,{className:"h-80"},je.createElement("div",{className:"space-y-1 p-3"},a.map(e=>je.createElement("div",{key:e.id,className:"p-3 rounded-lg border transition-colors "+(e.read?"bg-gray-50 border-gray-200":"bg-white border-blue-200 shadow-sm")},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"flex-shrink-0 mt-0.5"},(e=>{switch(e){case"success":return je.createElement(Ta,{className:"h-4 w-4 text-green-500"});case"warning":return je.createElement(Br,{className:"h-4 w-4 text-yellow-500"});case"error":return je.createElement(Da,{className:"h-4 w-4 text-red-500"});default:return je.createElement(tr,{className:"h-4 w-4 text-blue-500"})}})(e.type)),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1"},je.createElement("h4",{className:"text-sm font-medium text-gray-900 mb-1"},e.title),je.createElement("p",{className:"text-xs text-gray-600 mb-2"},e.message),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Badge,{variant:getNotificationBadgeVariant(e.type),className:"text-xs"},e.type),je.createElement("span",{className:"text-xs text-gray-500"},formatDistanceToNow(new Date(e.created_at),{addSuffix:!0})))),je.createElement("div",{className:"flex items-center space-x-1 ml-2"},!e.read&&je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>l(e.id),className:"h-6 w-6 p-0"},je.createElement(_a,{className:"h-3 w-3"})))),e.action_url&&e.action_label&&je.createElement("div",{className:"mt-2"},je.createElement(Uo,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>{window.open(e.action_url,"_blank"),l(e.id)}},e.action_label,je.createElement(za,{className:"h-3 w-3 ml-1"}))))))))):je.createElement("div",{className:"text-center py-8 px-3"},je.createElement(ua,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),je.createElement("h3",{className:"text-sm font-medium text-gray-900 mb-1"},"No notifications"),je.createElement("p",{className:"text-xs text-gray-500"},"You're all caught up! New notifications will appear here.")))))))},Zy=[{name:"Dashboard",href:"/dashboard",icon:er},{name:"Documents",href:"/dashboard/documents",icon:Ha},{name:"AI Assistant",href:"/dashboard/ai-assistant",icon:gr},{name:"RAG Knowledge",href:"/dashboard/rag-knowledge",icon:va},{name:"Templates",href:"/dashboard/templates",icon:Wa},{name:"Law Firms",href:"/dashboard/law-firms",icon:xa},{name:"Legal Q&A",href:"/legal-qa",icon:gr},{name:"Document Analysis",href:"/analyze",icon:Na},{name:"Search History",href:"/dashboard/search-history",icon:Cr}],DashboardLayout=({children:e})=>{const{user:a,profile:l,signOut:m}=useSafeAuth(),u=useLocation();useNavigate();const p="admin"===l?.role||"super_admin"===l?.role;return je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("header",{className:"bg-white shadow-sm border-b"},je.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},je.createElement("div",{className:"flex justify-between items-center h-16"},je.createElement("div",{className:"flex items-center"},je.createElement(Ro,{to:"/dashboard",className:"flex items-center space-x-2"},je.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center"},je.createElement("span",{className:"text-white font-bold text-sm"},"LM")),je.createElement("span",{className:"text-xl font-bold text-gray-900"},"LawMattersSG"))),je.createElement("nav",{className:"hidden md:flex space-x-8"},Zy.map(e=>{const a=e.icon,l=u.pathname===e.href;return je.createElement(Ro,{key:e.name,to:e.href,className:cn("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",l?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100")},je.createElement(a,{className:"h-4 w-4"}),je.createElement("span",null,e.name))})),je.createElement("div",{className:"flex items-center space-x-4"},je.createElement(NotificationCenter,null),je.createElement(ConnectionStatus,null),je.createElement("div",{className:"hidden sm:block"},je.createElement(Ro,{to:"/dashboard/subscription"},je.createElement(Uo,{variant:"outline",size:"sm"},"super_admin"===l?.role?je.createElement(je.Fragment,null,je.createElement(Ir,{className:"h-4 w-4 mr-2"}),"Super Admin"):"admin"===l?.role?je.createElement(je.Fragment,null,je.createElement(Ir,{className:"h-4 w-4 mr-2"}),"Admin"):je.createElement(je.Fragment,null,je.createElement(ja,{className:"h-4 w-4 mr-2"}),l?.subscription_tier||"Free")))),je.createElement(Oh,null,je.createElement(Lh,{asChild:!0},je.createElement(Uo,{variant:"ghost",className:"relative h-8 w-8 rounded-full"},je.createElement(hd,{className:"h-8 w-8"},je.createElement(yd,{src:l?.avatar_url,alt:l?.full_name||a?.email}),je.createElement(vd,null,l?.first_name?.[0]||a?.email?.[0]?.toUpperCase())))),je.createElement($h,{className:"w-56",align:"end",forceMount:!0},je.createElement(zh,{className:"font-normal"},je.createElement("div",{className:"flex flex-col space-y-1"},je.createElement("p",{className:"text-sm font-medium leading-none"},l?.full_name||"User"),je.createElement("p",{className:"text-xs leading-none text-muted-foreground"},a?.email))),je.createElement(Bh,null),je.createElement(Uh,{asChild:!0},je.createElement(Ro,{to:"/dashboard/profile",className:"flex items-center"},je.createElement(Hr,{className:"mr-2 h-4 w-4"}),je.createElement("span",null,"Profile"))),je.createElement(Uh,{asChild:!0},je.createElement(Ro,{to:"/dashboard/subscription",className:"flex items-center"},je.createElement(ja,{className:"mr-2 h-4 w-4"}),je.createElement("span",null,"Subscription"))),je.createElement(Uh,{asChild:!0},je.createElement(Ro,{to:"/dashboard/settings",className:"flex items-center"},je.createElement(Ar,{className:"mr-2 h-4 w-4"}),je.createElement("span",null,"Settings"))),p&&je.createElement(Uh,{asChild:!0},je.createElement(Ro,{to:"/dashboard/admin",className:"flex items-center"},je.createElement(Ir,{className:"mr-2 h-4 w-4"}),je.createElement("span",null,"Admin"))),je.createElement(Bh,null),je.createElement(Uh,{onClick:async()=>{try{console.log("Signing out from dashboard layout..."),await m()}catch(e){console.error("Error signing out:",e),window.location.href="/"}}},je.createElement(cr,{className:"mr-2 h-4 w-4"}),je.createElement("span",null,"Log out")))))))),je.createElement("div",{className:"md:hidden bg-white border-b"},je.createElement("div",{className:"px-4 py-2"},je.createElement("nav",{className:"flex space-x-4 overflow-x-auto"},Zy.map(e=>{const a=e.icon,l=u.pathname===e.href;return je.createElement(Ro,{key:e.name,to:e.href,className:cn("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors",l?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100")},je.createElement(a,{className:"h-4 w-4"}),je.createElement("span",null,e.name))})))),je.createElement("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},je.createElement("div",{className:"px-4 py-6 sm:px-0"},e)))},LawFirms=()=>{const[e,a]=Me.useState("directory"),[l,m]=Me.useState(null),[u,p]=Me.useState([]),[f,g]=Me.useState([]),[h,y]=Me.useState(!0),{user:v}=useAuth();Me.useEffect(()=>{loadFeaturedData()},[]);const loadFeaturedData=async()=>{try{y(!0);const[e,a]=await Promise.all([dm.getTopRatedLawFirms(6),dm.getRecentLawFirms(3)]);p(e),g(a)}catch(e){console.error("Error loading featured data:",e)}finally{y(!1)}},handleFirmSelect=e=>{m(e),a("profile")},handleWriteReview=()=>{l&&a("review")},handleReviewSubmitted=()=>{a("profile")},handleBackToDirectory=()=>{a("directory"),m(null)},handleBackToProfile=()=>{a("profile")},E=[{title:"Total Law Firms",value:"150+",description:"Verified legal professionals",icon:Wr,color:"text-blue-600"},{title:"Average Rating",value:"4.2",description:"Based on client reviews",icon:jr,color:"text-yellow-600"},{title:"Practice Areas",value:"12+",description:"Specialized legal services",icon:zr,color:"text-green-600"},{title:"Locations",value:"Singapore",description:"Nationwide coverage",icon:dr,color:"text-purple-600"}];return"profile"===e&&l?je.createElement(DashboardLayout,null,je.createElement(LawFirmProfile$1,{firmId:l.id,onBack:handleBackToDirectory}),je.createElement("div",{className:"fixed bottom-6 right-6"},je.createElement(Uo,{onClick:handleWriteReview,size:"lg",className:"rounded-full shadow-lg"},je.createElement(wr,{className:"h-5 w-5 mr-2"}),"Write Review"))):"review"===e&&l?je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"flex items-center space-x-4"},je.createElement(Uo,{variant:"outline",onClick:handleBackToProfile}," Back to ",l.name)),je.createElement(ReviewForm,{lawFirm:l,onReviewSubmitted:handleReviewSubmitted,onCancel:handleBackToProfile}))):je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Law Firm Directory"),je.createElement("p",{className:"text-gray-600 mt-1"},"Find and connect with verified legal professionals in Singapore")),je.createElement("div",{className:"flex space-x-2"},je.createElement(Uo,{variant:"outline"},je.createElement(Cr,{className:"h-4 w-4 mr-2"}),"Advanced Search"),"admin"===v?.role&&je.createElement(Uo,null,je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Add Law Firm"))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},E.map((e,a)=>je.createElement(ui,{key:a},je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),je.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),je.createElement("p",{className:"text-xs text-gray-500"},e.description)),je.createElement(e.icon,{className:`h-8 w-8 ${e.color}`})))))),!h&&je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},je.createElement("div",{className:"lg:col-span-2"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement(jr,{className:"h-5 w-5 text-yellow-500"}),je.createElement("span",null,"Top Rated Law Firms")),je.createElement(gi,null,"Highest rated legal professionals based on client reviews")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},u.slice(0,4).map(e=>je.createElement("div",{key:e.id,className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>handleFirmSelect(e)},je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("h3",{className:"font-medium truncate flex items-center space-x-1"},je.createElement("span",null,e.name),e.verified&&je.createElement(ma,{className:"h-4 w-4 text-blue-500"})),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("span",{className:"text-sm font-medium"},e.rating.toFixed(1)))),je.createElement("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2"},e.description),je.createElement("div",{className:"flex flex-wrap gap-1"},e.practice_areas.slice(0,2).map((e,a)=>je.createElement(Badge,{key:a,variant:"secondary",className:"text-xs"},e))))))))),je.createElement("div",null,je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement(zr,{className:"h-5 w-5 text-green-500"}),je.createElement("span",null,"Recently Added")),je.createElement(gi,null,"New law firms in our directory")),je.createElement(hi,null,je.createElement("div",{className:"space-y-3"},f.map(e=>je.createElement("div",{key:e.id,className:"p-3 border rounded-lg hover:shadow-sm transition-shadow cursor-pointer",onClick:()=>handleFirmSelect(e)},je.createElement("div",{className:"flex items-center justify-between mb-1"},je.createElement("h4",{className:"font-medium text-sm truncate flex items-center space-x-1"},je.createElement("span",null,e.name),e.verified&&je.createElement(ma,{className:"h-3 w-3 text-blue-500"})),je.createElement(Badge,{variant:"outline",className:"text-xs"},"New")),je.createElement("p",{className:"text-xs text-gray-600 line-clamp-1"},e.practice_areas.slice(0,2).join(", "))))))))),je.createElement(LawFirmDirectory,{onFirmSelect:handleFirmSelect})))};function composeContextScopes(...e){const a=e[0];if(1===e.length)return a;const createScope=()=>{const l=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function useComposedScopes(e){const m=l.reduce((a,{useScope:l,scopeName:m})=>({...a,...l(e)[`__scope${m}`]}),{});return Me.useMemo(()=>({[`__scope${a.scopeName}`]:m}),[m])}};return createScope.scopeName=a.scopeName,createScope}var Ky="Progress",Gy=100,[Qy,Yy]=function createContextScope(e,a=[]){let l=[];const createScope=()=>{const a=l.map(e=>Me.createContext(e));return function useScope(l){const m=l?.[e]||a;return Me.useMemo(()=>({[`__scope${e}`]:{...l,[e]:m}}),[l,m])}};return createScope.scopeName=e,[function createContext3(a,m){const u=Me.createContext(m),p=l.length;function Provider2(a){const{scope:l,children:m,...f}=a,g=l?.[e][p]||u,h=Me.useMemo(()=>f,Object.values(f));return tt.jsx(g.Provider,{value:h,children:m})}return l=[...l,m],Provider2.displayName=a+"Provider",[Provider2,function useContext2(l,f){const g=f?.[e][p]||u,h=Me.useContext(g);if(h)return h;if(void 0!==m)return m;throw new Error(`\`${l}\` must be used within \`${a}\``)}]},composeContextScopes(createScope,...a)]}(Ky),[Jy,Xy]=Qy(Ky),ev=Me.forwardRef((e,a)=>{const{__scopeProgress:l,value:m=null,max:u,getValueLabel:p=defaultGetValueLabel,...f}=e;!u&&0!==u||isValidMaxNumber(u)||console.error(function getInvalidMaxError(e,a){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`}(`${u}`,"Progress"));const g=isValidMaxNumber(u)?u:Gy;null===m||isValidValueNumber(m,g)||console.error(function getInvalidValueError(e,a){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${a}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${m}`,"Progress"));const h=isValidValueNumber(m,g)?m:null,y=isNumber(h)?p(h,g):void 0;return tt.jsx(Jy,{scope:l,value:h,max:g,children:tt.jsx(nt.div,{"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":isNumber(h)?h:void 0,"aria-valuetext":y,role:"progressbar","data-state":getProgressState(h,g),"data-value":h??void 0,"data-max":g,...f,ref:a})})});ev.displayName=Ky;var tv="ProgressIndicator",av=Me.forwardRef((e,a)=>{const{__scopeProgress:l,...m}=e,u=Xy(tv,l);return tt.jsx(nt.div,{"data-state":getProgressState(u.value,u.max),"data-value":u.value??void 0,"data-max":u.max,...m,ref:a})});function defaultGetValueLabel(e,a){return`${Math.round(e/a*100)}%`}function getProgressState(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function isNumber(e){return"number"==typeof e}function isValidMaxNumber(e){return isNumber(e)&&!isNaN(e)&&e>0}function isValidValueNumber(e,a){return isNumber(e)&&!isNaN(e)&&e<=a&&e>=0}av.displayName=tv;var rv=ev,nv=av;const sv=Me.forwardRef(({className:e,value:a,...l},m)=>Me.createElement(rv,{ref:m,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...l},Me.createElement(nv,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})));sv.displayName=rv.displayName;var ov,lv="basil",iv="https://js.stripe.com",cv="".concat(iv,"/").concat(lv,"/stripe.js"),mv=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,dv=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,uv="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",pv=function isStripeJSURL2(e){return mv.test(e)||dv.test(e)},fv=function injectScript2(e){var a=document.createElement("script");a.src="".concat(cv).concat("");var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(a),a},gv=null,hv=null,yv=null,vv=function loadScript2(e){return null!==gv?gv:(gv=new Promise(function(a,l){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(uv),window.Stripe)a(window.Stripe);else try{var m=function findScript2(){for(var e=document.querySelectorAll('script[src^="'.concat(iv,'"]')),a=0;a<e.length;a++){var l=e[a];if(pv(l.src))return l}return null}();if(m&&e)console.warn(uv);else if(m){if(m&&null!==yv&&null!==hv){var u;m.removeEventListener("load",yv),m.removeEventListener("error",hv),null===(u=m.parentNode)||void 0===u||u.removeChild(m),m=fv()}}else m=fv();yv=function onLoad2(e,a){return function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))}}(a,l),hv=function onError2(e){return function(a){e(new Error("Failed to load Stripe.js",{cause:a}))}}(l),m.addEventListener("load",yv),m.addEventListener("error",hv)}catch(p){return void l(p)}else a(null)})).catch(function(e){return gv=null,Promise.reject(e)})},Ev=!1,xv=function getStripePromise2(){return ov||(ov=vv(null).catch(function(e){return ov=null,Promise.reject(e)}))};Promise.resolve().then(function(){return xv()}).catch(function(e){Ev||console.warn(e)});var wv=function loadStripe2(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];Ev=!0;var m=Date.now();return xv().then(function(e){return function initStripe2(e,a,l){if(null===e)return null;var m=a[0].match(/^pk_test/),u=function runtimeVersionToUrlVersion2(e){return 3===e?"v3":e}(e.version),p=lv;m&&u!==p&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var f=e.apply(void 0,a);return function registerWrapper2(e,a){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:a})}(f,l),f}(e,a,m)})};let bv;const Nv=new class StripeService{constructor(){__publicField(this,"stripe"),this.stripe=(bv||(bv=wv(ai.stripe.publishableKey||"")),bv)}async createSubscription(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated to create subscription");const{data:l,error:m}=await Mo.functions.invoke("create-subscription",{body:{priceId:e.priceId,successUrl:e.successUrl||`${window.location.origin}/dashboard?subscription=success`,cancelUrl:e.cancelUrl||`${window.location.origin}/pricing?subscription=cancelled`,metadata:e.metadata||{}}});if(m)throw console.error("Error creating subscription:",m),new Error(m.message||"Failed to create subscription");if(!l?.url)throw new Error("No checkout URL returned from server");window.location.href=l.url}getPriceId(e,a="monthly"){const l=li[e];if(!l)throw new Error(`No price configuration found for tier: ${e}`);const m="yearly"===a?l.yearly:l.monthly;if(!m)throw new Error(`No price ID found for ${e} ${a}`);return m}async subscribeTo(e,a="monthly",l){const m=this.getPriceId(e,a);await this.createSubscription({priceId:m,successUrl:l?.successUrl,cancelUrl:l?.cancelUrl,metadata:{tier:e,billing:a,...l?.metadata}})}async getCurrentSubscription(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const{data:a,error:l}=await Mo.functions.invoke("get-subscription",{body:{userId:e.id}});if(l)throw console.error("Error fetching subscription:",l),new Error(l.message||"Failed to fetch subscription");return a?.subscription||null}async cancelSubscription(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const{error:a}=await Mo.functions.invoke("cancel-subscription",{body:{userId:e.id}});if(a)throw console.error("Error cancelling subscription:",a),new Error(a.message||"Failed to cancel subscription")}async reactivateSubscription(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const{error:a}=await Mo.functions.invoke("reactivate-subscription",{body:{userId:e.id}});if(a)throw console.error("Error reactivating subscription:",a),new Error(a.message||"Failed to reactivate subscription")}async createBillingPortalSession(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("User must be authenticated");const{data:l,error:m}=await Mo.functions.invoke("create-billing-portal",{body:{returnUrl:e?.returnUrl||`${window.location.origin}/dashboard/subscription`}});if(m)throw console.error("Error creating billing portal session:",m),new Error(m.message||"Failed to create billing portal session");if(!l?.url)throw new Error("No billing portal URL returned from server");window.location.href=l.url}async updateSubscription(e,a="monthly"){const{data:{user:l}}=await Mo.auth.getUser();if(!l)throw new Error("User must be authenticated");const m=this.getPriceId(e,a),{error:u}=await Mo.functions.invoke("update-subscription",{body:{userId:l.id,newPriceId:m,metadata:{tier:e,billing:a}}});if(u)throw console.error("Error updating subscription:",u),new Error(u.message||"Failed to update subscription")}async getUsageInfo(){const{data:{user:e}}=await Mo.auth.getUser();if(!e)throw new Error("User must be authenticated");const{data:a,error:l}=await Mo.functions.invoke("get-usage-info",{body:{userId:e.id}});if(l)throw console.error("Error fetching usage info:",l),new Error(l.message||"Failed to fetch usage information");return a}},SubscriptionManager=()=>{const[e,a]=Me.useState(null),[l,m]=Me.useState(null),[u,p]=Me.useState(!0),[f,g]=Me.useState(!1),{profile:h}=useAuth(),{toast:y}=useToast();Me.useEffect(()=>{loadSubscriptionData()},[]);const loadSubscriptionData=async()=>{try{p(!0);const[e,l]=await Promise.all([Nv.getCurrentSubscription(),Nv.getUsageInfo()]);a(e),m(l)}catch(e){console.error("Error loading subscription data:",e),y({title:"Error",description:"Failed to load subscription information",variant:"destructive"})}finally{p(!1)}},handleUpgrade=async e=>{try{g(!0),await Nv.subscribeTo(e)}catch(a){console.error("Error upgrading subscription:",a),y({title:"Error",description:"Failed to upgrade subscription",variant:"destructive"})}finally{g(!1)}},getUsagePercentage=(e,a)=>-1===a?0:Math.min(e/a*100,100);if(u)return je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse"}),je.createElement("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse"}),je.createElement("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse"}));const v=h?.subscription_tier||"free",E=ri[v];return je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center space-x-3"},(e=>{switch(e){case"premium":return je.createElement(Qr,{className:"h-5 w-5 text-blue-500"});case"pro":return je.createElement(Oa,{className:"h-5 w-5 text-purple-500"});default:return je.createElement(jr,{className:"h-5 w-5 text-gray-500"})}})(v),je.createElement("div",null,je.createElement(fi,{className:"text-xl"},"Current Plan"),je.createElement(gi,null,"Manage your subscription and billing"))),e&&(e=>{switch(e){case"active":return je.createElement(Ta,{className:"h-5 w-5 text-green-500"});case"canceled":case"incomplete":return je.createElement(Da,{className:"h-5 w-5 text-red-500"});default:return je.createElement(Aa,{className:"h-5 w-5 text-yellow-500"})}})(e.status))),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold capitalize"},E.name),je.createElement("p",{className:"text-sm text-gray-600"},0===E.price?"Free forever":null===E.price?"Custom pricing":`$${E.price}/${E.period}`)),je.createElement(Badge,{variant:"active"===e?.status?"default":"secondary"},e?.status||"Free")),e&&je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex items-center justify-between text-sm"},je.createElement("span",{className:"text-gray-600"},"Billing Period"),je.createElement("span",null,new Date(1e3*e.current_period_start).toLocaleDateString()," - "," ",new Date(1e3*e.current_period_end).toLocaleDateString())),e.cancel_at_period_end&&je.createElement(_i,null,je.createElement(Aa,{className:"h-4 w-4"}),je.createElement(ki,null,"Your subscription will be cancelled at the end of the current billing period."))),je.createElement(Wu,null),je.createElement("div",{className:"flex flex-wrap gap-2"},"free"===v&&je.createElement(je.Fragment,null,je.createElement(Uo,{onClick:()=>handleUpgrade("premium"),disabled:f},je.createElement(Qr,{className:"h-4 w-4 mr-2"}),"Upgrade to Premium"),je.createElement(Uo,{variant:"outline",onClick:()=>handleUpgrade("pro"),disabled:f},je.createElement(Oa,{className:"h-4 w-4 mr-2"}),"Upgrade to Pro")),"premium"===v&&je.createElement(Uo,{variant:"outline",onClick:()=>handleUpgrade("pro"),disabled:f},je.createElement(Oa,{className:"h-4 w-4 mr-2"}),"Upgrade to Pro"),e&&je.createElement(je.Fragment,null,je.createElement(Uo,{variant:"outline",onClick:async()=>{try{g(!0),await Nv.createBillingPortalSession()}catch(e){console.error("Error opening billing portal:",e),y({title:"Error",description:"Failed to open billing portal",variant:"destructive"})}finally{g(!1)}},disabled:f},je.createElement(Ar,{className:"h-4 w-4 mr-2"}),"Manage Billing"),e.cancel_at_period_end?je.createElement(Uo,{variant:"outline",onClick:async()=>{try{g(!0),await Nv.reactivateSubscription(),await loadSubscriptionData(),y({title:"Success",description:"Subscription reactivated successfully."})}catch(e){console.error("Error reactivating subscription:",e),y({title:"Error",description:"Failed to reactivate subscription",variant:"destructive"})}finally{g(!1)}},disabled:f},"Reactivate Subscription"):je.createElement(Uo,{variant:"destructive",onClick:async()=>{try{g(!0),await Nv.cancelSubscription(),await loadSubscriptionData(),y({title:"Success",description:"Subscription cancelled. You can continue using your plan until the end of the billing period."})}catch(e){console.error("Error cancelling subscription:",e),y({title:"Error",description:"Failed to cancel subscription",variant:"destructive"})}finally{g(!1)}},disabled:f},"Cancel Subscription"))))),l&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(zr,{className:"h-5 w-5 mr-2"}),"Usage This Month"),je.createElement(gi,null,"Track your usage against plan limits")),je.createElement(hi,{className:"space-y-6"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex justify-between text-sm"},je.createElement("span",null,"AI Queries"),je.createElement("span",null,l.current.aiQueries||0," / ",-1===l.limits.aiQueries?"":l.limits.aiQueries)),je.createElement(sv,{value:getUsagePercentage(l.current.aiQueries||0,l.limits.aiQueries),className:"h-2"})),je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex justify-between text-sm"},je.createElement("span",null,"Document Downloads"),je.createElement("span",null,l.current.documentDownloads||0," / ",-1===l.limits.documentDownloads?"":l.limits.documentDownloads)),je.createElement(sv,{value:getUsagePercentage(l.current.documentDownloads||0,l.limits.documentDownloads),className:"h-2"})),je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex justify-between text-sm"},je.createElement("span",null,"Custom Documents"),je.createElement("span",null,l.current.customDocuments||0," / ",-1===l.limits.customDocuments?"":l.limits.customDocuments||0)),je.createElement(sv,{value:getUsagePercentage(l.current.customDocuments||0,l.limits.customDocuments||0),className:"h-2"})),je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex justify-between text-sm"},je.createElement("span",null,"Document Uploads"),je.createElement("span",null,l.current.documentUploads||0," / ",-1===l.limits.documentUploads?"":l.limits.documentUploads)),je.createElement(sv,{value:getUsagePercentage(l.current.documentUploads||0,l.limits.documentUploads),className:"h-2"}))))))},Subscription=()=>je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Subscription"),je.createElement("p",{className:"text-gray-600 mt-2"},"Manage your subscription, billing, and usage")),je.createElement(SubscriptionManager,null))),TwoFactorSetup=({onSetupComplete:e})=>{const{user:a,refreshProfile:l}=useAuth(),[m,u]=Me.useState(null),[p,f]=Me.useState(null),[g,h]=Me.useState(!1),[y,v]=Me.useState(""),[E,x]=Me.useState(!1),[w,b]=Me.useState(!1),[N,_]=Me.useState(""),[k,S]=Me.useState(!1),[C,R]=Me.useState("setup");Me.useEffect(()=>{loadTwoFactorStatus()},[]);const loadTwoFactorStatus=async()=>{try{const e=await yf.getTwoFactorStatus();u(e)}catch(e){console.error("Error loading 2FA status:",e),An.error("Failed to load 2FA status")}},copyToClipboard=e=>{navigator.clipboard.writeText(e),An.success("Copied to clipboard")};return m?je.createElement(ui,null,je.createElement(pi,null,je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Ir,{className:"h-5 w-5"}),je.createElement(fi,null,"Two-Factor Authentication")),je.createElement(Badge,{variant:m.isEnabled?"default":"secondary"},m.isEnabled?je.createElement(je.Fragment,null,je.createElement(Pr,{className:"h-3 w-3 mr-1"}),"Enabled"):je.createElement(je.Fragment,null,je.createElement(Dr,{className:"h-3 w-3 mr-1"}),"Disabled"))),je.createElement(gi,null,"Add an extra layer of security to your account with two-factor authentication")),je.createElement(hi,null,m.isEnabled?je.createElement("div",{className:"space-y-4"},je.createElement(_i,null,je.createElement(Ta,{className:"h-4 w-4"}),je.createElement(ki,null,"Two-factor authentication is enabled for your account.",m.lastUsed&&` Last used: ${new Date(m.lastUsed).toLocaleString()}`)),je.createElement("div",{className:"flex space-x-2"},je.createElement(Uo,{variant:"outline",onClick:async()=>{try{const e=await yf.generateBackupCodes();f(a=>a?{...a,backupCodes:e}:null),An.success("New backup codes generated")}catch(e){console.error("Error generating backup codes:",e),An.error(e.message||"Failed to generate backup codes")}},className:"flex-1"},je.createElement(ar,{className:"h-4 w-4 mr-2"}),"Generate New Backup Codes"),je.createElement(Zu,null,je.createElement(Ku,{asChild:!0},je.createElement(Uo,{variant:"destructive"},je.createElement(Dr,{className:"h-4 w-4 mr-2"}),"Disable 2FA")),je.createElement(Yu,null,je.createElement(DialogHeader,null,je.createElement(Ju,null,"Disable Two-Factor Authentication"),je.createElement(Xu,null,"This will remove the extra security layer from your account. Please enter your password to confirm.")),je.createElement("div",{className:"space-y-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"disable-password"},"Password"),je.createElement(zo,{id:"disable-password",type:"password",value:N,onChange:e=>_(e.target.value),placeholder:"Enter your password"}))),je.createElement(DialogFooter,null,je.createElement(Uo,{variant:"destructive",onClick:async()=>{if(N){S(!0);try{await yf.disableTwoFactor(N),await l(),await loadTwoFactorStatus(),_(""),An.success("Two-factor authentication disabled")}catch(e){console.error("Error disabling 2FA:",e),An.error(e.message||"Failed to disable 2FA")}finally{S(!1)}}},disabled:!N||k},k?je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}):je.createElement(Dr,{className:"h-4 w-4 mr-2"}),"Disable 2FA")))))):je.createElement(Xm,{value:C,onValueChange:R},je.createElement(ed,{className:"grid w-full grid-cols-3"},je.createElement(td,{value:"setup"},"Setup"),je.createElement(td,{value:"verify",disabled:!p},"Verify"),je.createElement(td,{value:"backup",disabled:!w},"Backup Codes")),je.createElement(ad,{value:"setup",className:"space-y-4"},je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,"Two-factor authentication is not enabled. Enable it to add an extra layer of security to your account.")),je.createElement("div",{className:"space-y-4"},je.createElement("div",null,je.createElement("h4",{className:"font-medium mb-2"},"What you'll need:"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," An authenticator app (Google Authenticator, Authy, etc.)"),je.createElement("li",null," Your smartphone or tablet"),je.createElement("li",null," A few minutes to complete the setup"))),je.createElement(Uo,{onClick:async()=>{h(!0);try{const e=await yf.setupTwoFactor();f(e),R("verify"),An.success("2FA setup initiated. Please scan the QR code with your authenticator app.")}catch(e){console.error("Error setting up 2FA:",e),An.error(e.message||"Failed to setup 2FA")}finally{h(!1)}},disabled:g,className:"w-full"},g?je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}):je.createElement(Mr,{className:"h-4 w-4 mr-2"}),"Setup Two-Factor Authentication"))),je.createElement(ad,{value:"verify",className:"space-y-4"},p&&je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"text-center"},je.createElement("h4",{className:"font-medium mb-2"},"Scan QR Code"),je.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Scan this QR code with your authenticator app"),je.createElement("div",{className:"flex justify-center mb-4"},je.createElement("img",{src:p.qrCodeUrl,alt:"2FA QR Code",className:"border rounded-lg"})),je.createElement("div",{className:"text-xs text-gray-500"},je.createElement("p",null,"Can't scan? Enter this code manually:"),je.createElement("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs"},p.secret),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>copyToClipboard(p.secret),className:"ml-2"},je.createElement(Ma,{className:"h-3 w-3"})))),je.createElement(Wu,null),je.createElement("div",null,je.createElement(Dd,{htmlFor:"verification-code"},"Verification Code"),je.createElement(zo,{id:"verification-code",type:"text",value:y,onChange:e=>v(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",maxLength:6}),je.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Enter the 6-digit code from your authenticator app")),je.createElement(Uo,{onClick:async()=>{if(p&&y){x(!0);try{await yf.enableTwoFactor(y,p.secret),await l(),await loadTwoFactorStatus(),b(!0),R("backup"),An.success("Two-factor authentication enabled successfully!"),e?.()}catch(a){console.error("Error verifying 2FA:",a),An.error(a.message||"Invalid verification code")}finally{x(!1)}}},disabled:6!==y.length||E,className:"w-full"},E?je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}):je.createElement(Ta,{className:"h-4 w-4 mr-2"}),"Verify and Enable 2FA"))),je.createElement(ad,{value:"backup",className:"space-y-4"},p?.backupCodes&&je.createElement("div",{className:"space-y-4"},je.createElement(_i,null,je.createElement(ar,{className:"h-4 w-4"}),je.createElement(ki,null,"Save these backup codes in a safe place. You can use them to access your account if you lose your authenticator device.")),je.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},je.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm font-mono"},p.backupCodes.map((e,a)=>je.createElement("div",{key:a,className:"flex items-center justify-between bg-white p-2 rounded border"},je.createElement("span",null,e),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>copyToClipboard(e)},je.createElement(Ma,{className:"h-3 w-3"})))))),je.createElement("div",{className:"flex space-x-2"},je.createElement(Uo,{variant:"outline",onClick:()=>{if(!p?.backupCodes)return;const e=`LawMattersSG - Two-Factor Authentication Backup Codes\n\nGenerated: ${(new Date).toLocaleString()}\nUser: ${a?.email}\n\nBackup Codes:\n${p.backupCodes.map((e,a)=>`${a+1}. ${e}`).join("\n")}\n\nImportant:\n- Store these codes in a safe place\n- Each code can only be used once\n- Use these codes if you lose access to your authenticator app`,l=new Blob([e],{type:"text/plain"}),m=URL.createObjectURL(l),u=document.createElement("a");u.href=m,u.download=`lawmatterssg-backup-codes-${Date.now()}.txt`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(m)},className:"flex-1"},je.createElement(Ua,{className:"h-4 w-4 mr-2"}),"Download Codes"),je.createElement(Uo,{onClick:()=>copyToClipboard(p.backupCodes.join("\n")),className:"flex-1"},je.createElement(Ma,{className:"h-4 w-4 mr-2"}),"Copy All"))))))):je.createElement(ui,null,je.createElement(hi,{className:"flex items-center justify-center py-8"},je.createElement(lr,{className:"h-6 w-6 animate-spin"})))},Settings=()=>{const{user:e,profile:a,refreshProfile:l}=useAuth(),[m,u]=Me.useState("profile"),[p,f]=Me.useState(!1),[g,h]=Me.useState({first_name:a?.first_name||"",last_name:a?.last_name||"",phone:a?.phone||"",company:a?.company||"",job_title:a?.job_title||""}),handleInputChange=(e,a)=>{h(l=>({...l,[e]:a}))};return je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Settings"),je.createElement("p",{className:"text-gray-600 mt-2"},"Manage your account settings and preferences")),je.createElement(Xm,{value:m,onValueChange:u},je.createElement(ed,{className:"grid w-full grid-cols-4"},je.createElement(td,{value:"profile",className:"flex items-center space-x-2"},je.createElement(Hr,{className:"h-4 w-4"}),je.createElement("span",null,"Profile")),je.createElement(td,{value:"security",className:"flex items-center space-x-2"},je.createElement(Ir,{className:"h-4 w-4"}),je.createElement("span",null,"Security")),je.createElement(td,{value:"notifications",className:"flex items-center space-x-2"},je.createElement(ua,{className:"h-4 w-4"}),je.createElement("span",null,"Notifications")),je.createElement(td,{value:"preferences",className:"flex items-center space-x-2"},je.createElement(Er,{className:"h-4 w-4"}),je.createElement("span",null,"Preferences"))),je.createElement(ad,{value:"profile",className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(Hr,{className:"h-5 w-5 mr-2"}),"Personal Information"),je.createElement(gi,null,"Update your personal details and contact information")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"first_name"},"First Name"),je.createElement(zo,{id:"first_name",value:g.first_name,onChange:e=>handleInputChange("first_name",e.target.value),placeholder:"Enter your first name"})),je.createElement("div",null,je.createElement(Dd,{htmlFor:"last_name"},"Last Name"),je.createElement(zo,{id:"last_name",value:g.last_name,onChange:e=>handleInputChange("last_name",e.target.value),placeholder:"Enter your last name"}))),je.createElement("div",null,je.createElement(Dd,{htmlFor:"email"},"Email Address"),je.createElement(zo,{id:"email",type:"email",value:e?.email||"",disabled:!0,className:"bg-gray-50"}),je.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Email cannot be changed. Contact support if you need to update your email.")),je.createElement("div",null,je.createElement(Dd,{htmlFor:"phone"},"Phone Number"),je.createElement(zo,{id:"phone",type:"tel",value:g.phone,onChange:e=>handleInputChange("phone",e.target.value),placeholder:"+65 1234 5678"})),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"company"},"Company"),je.createElement(zo,{id:"company",value:g.company,onChange:e=>handleInputChange("company",e.target.value),placeholder:"Your company name"})),je.createElement("div",null,je.createElement(Dd,{htmlFor:"job_title"},"Job Title"),je.createElement(zo,{id:"job_title",value:g.job_title,onChange:e=>handleInputChange("job_title",e.target.value),placeholder:"Your job title"}))),je.createElement(Uo,{onClick:async()=>{f(!0);try{await Oo.updateProfile(g),await l(),An.success("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),An.error(e.message||"Failed to update profile")}finally{f(!1)}},disabled:p},je.createElement(kr,{className:"h-4 w-4 mr-2"}),p?"Saving...":"Save Changes")))),je.createElement(ad,{value:"security",className:"space-y-6"},je.createElement(TwoFactorSetup,null),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(ir,{className:"h-5 w-5 mr-2"}),"Password"),je.createElement(gi,null,"Change your account password")),je.createElement(hi,null,je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,'Password changes are handled through email verification. Use the "Forgot Password" link on the login page to reset your password.')))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(Ir,{className:"h-5 w-5 mr-2"}),"Account Security"),je.createElement(gi,null,"Monitor and manage your account security")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Login Notifications"),je.createElement("p",{className:"text-sm text-gray-600"},"Get notified when someone logs into your account")),je.createElement(Uo,{variant:"outline",size:"sm"},"Configure")),je.createElement(Wu,null),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Active Sessions"),je.createElement("p",{className:"text-sm text-gray-600"},"Manage devices that are currently logged in")),je.createElement(Uo,{variant:"outline",size:"sm"},"View Sessions"))))),je.createElement(ad,{value:"notifications",className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(ua,{className:"h-5 w-5 mr-2"}),"Notification Preferences"),je.createElement(gi,null,"Choose how you want to be notified about important updates")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Email Notifications"),je.createElement("p",{className:"text-sm text-gray-600"},"Receive updates via email")),je.createElement(Zc,{defaultValue:"important"},je.createElement(Gc,{className:"w-32"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"all"},"All"),je.createElement(Xc,{value:"important"},"Important"),je.createElement(Xc,{value:"none"},"None")))),je.createElement(Wu,null),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Document Processing"),je.createElement("p",{className:"text-sm text-gray-600"},"Notifications when documents are processed")),je.createElement(Zc,{defaultValue:"enabled"},je.createElement(Gc,{className:"w-32"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"enabled"},"Enabled"),je.createElement(Xc,{value:"disabled"},"Disabled")))),je.createElement(Wu,null),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Security Alerts"),je.createElement("p",{className:"text-sm text-gray-600"},"Important security notifications")),je.createElement(Zc,{defaultValue:"enabled"},je.createElement(Gc,{className:"w-32"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"enabled"},"Enabled"),je.createElement(Xc,{value:"disabled"},"Disabled"))))),je.createElement(Uo,null,je.createElement(kr,{className:"h-4 w-4 mr-2"}),"Save Preferences")))),je.createElement(ad,{value:"preferences",className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(Er,{className:"h-5 w-5 mr-2"}),"Display Preferences"),je.createElement(gi,null,"Customize your application experience")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Theme"),je.createElement("p",{className:"text-sm text-gray-600"},"Choose your preferred theme")),je.createElement(Zc,{defaultValue:"light"},je.createElement(Gc,{className:"w-32"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"light"},"Light"),je.createElement(Xc,{value:"dark"},"Dark"),je.createElement(Xc,{value:"system"},"System")))),je.createElement(Wu,null),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Language"),je.createElement("p",{className:"text-sm text-gray-600"},"Select your preferred language")),je.createElement(Zc,{defaultValue:"en"},je.createElement(Gc,{className:"w-32"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"en"},"English"),je.createElement(Xc,{value:"zh"},""),je.createElement(Xc,{value:"ms"},"Bahasa"),je.createElement(Xc,{value:"ta"},"")))),je.createElement(Wu,null),je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Timezone"),je.createElement("p",{className:"text-sm text-gray-600"},"Your local timezone")),je.createElement(Zc,{defaultValue:"asia/singapore"},je.createElement(Gc,{className:"w-48"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"asia/singapore"},"Asia/Singapore"),je.createElement(Xc,{value:"asia/kuala_lumpur"},"Asia/Kuala Lumpur"),je.createElement(Xc,{value:"asia/jakarta"},"Asia/Jakarta"),je.createElement(Xc,{value:"utc"},"UTC")))),je.createElement(Uo,null,je.createElement(kr,{className:"h-4 w-4 mr-2"}),"Save Preferences")))))))},AccountSecurity=()=>{const{user:e,profile:a}=useAuth(),[l,m]=Me.useState([]),[u,p]=Me.useState([]),[f,g]=Me.useState(!1),[h,y]=Me.useState(!0),[v,E]=Me.useState(!1);Me.useEffect(()=>{e&&loadSecurityData()},[e]);const loadSecurityData=async()=>{if(e)try{y(!0);const a=await zu.getUserSessions(e.id);m(a);const l=await zu.getSecurityEvents(e.id,20);p(l);const u=await yf.getTwoFactorStatus();g(u.isEnabled)}catch(a){console.error("Error loading security data:",a),An.error("Failed to load security information")}finally{y(!1)}};if(h)return je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"animate-pulse"},je.createElement("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"h-32 bg-gray-200 rounded"}),je.createElement("div",{className:"h-32 bg-gray-200 rounded"}),je.createElement("div",{className:"h-32 bg-gray-200 rounded"}))));const x=v?u:u.slice(0,5);return je.createElement("div",{className:"space-y-6"},je.createElement("div",null,je.createElement("h2",{className:"text-2xl font-bold tracking-tight"},"Account Security"),je.createElement("p",{className:"text-muted-foreground"},"Manage your account security settings and monitor activity")),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Ir,{className:"h-5 w-5"}),"Two-Factor Authentication"),je.createElement(gi,null,"Add an extra layer of security to your account")),je.createElement(hi,null,je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center gap-2"},f?je.createElement(je.Fragment,null,je.createElement(Ta,{className:"h-5 w-5 text-green-500"}),je.createElement("span",{className:"text-sm font-medium"},"Enabled"),je.createElement(Badge,{variant:"secondary",className:"bg-green-100 text-green-800"},"Active")):je.createElement(je.Fragment,null,je.createElement(Da,{className:"h-5 w-5 text-red-500"}),je.createElement("span",{className:"text-sm font-medium"},"Disabled"),je.createElement(Badge,{variant:"destructive"},"Inactive"))),je.createElement(Uo,{variant:f?"outline":"default",size:"sm"},f?"Manage 2FA":"Enable 2FA")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Active Sessions"),je.createElement(gi,null,"Devices and locations where you're currently signed in")),je.createElement(hi,null,je.createElement("div",{className:"space-y-4"},0===l.length?je.createElement("p",{className:"text-sm text-muted-foreground"},"No active sessions found"):l.map(e=>je.createElement("div",{key:e.id,className:"flex items-center justify-between p-4 border rounded-lg"},je.createElement("div",{className:"flex items-center gap-3"},(e=>{switch(e){case"mobile":return je.createElement(Mr,{className:"h-4 w-4"});case"tablet":return je.createElement(Or,{className:"h-4 w-4"});default:return je.createElement(yr,{className:"h-4 w-4"})}})(e.deviceType),je.createElement("div",null,je.createElement("div",{className:"flex items-center gap-2"},je.createElement("span",{className:"font-medium"},e.browser," on ",e.os),e.isCurrentSession&&je.createElement(Badge,{variant:"secondary",className:"bg-blue-100 text-blue-800"},"Current")),je.createElement("div",{className:"flex items-center gap-4 text-sm text-muted-foreground"},e.location&&je.createElement("div",{className:"flex items-center gap-1"},je.createElement(dr,{className:"h-3 w-3"}),e.location),je.createElement("div",{className:"flex items-center gap-1"},je.createElement(Fa,{className:"h-3 w-3"}),"Last active ",formatDistanceToNow(new Date(e.lastActiveAt),{addSuffix:!0}))))),!e.isCurrentSession&&je.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{await zu.revokeSession(e),An.success("Session revoked successfully"),await loadSecurityData()}catch(a){console.error("Error revoking session:",a),An.error("Failed to revoke session")}})(e.id)},"Revoke"))),l.length>1&&je.createElement(je.Fragment,null,je.createElement(Wu,null),je.createElement("div",{className:"flex justify-between items-center"},je.createElement("p",{className:"text-sm text-muted-foreground"},"Sign out of all other devices and locations"),je.createElement(Uo,{variant:"outline",onClick:async()=>{if(e)try{const a=l.find(e=>e.isCurrentSession);a&&(await zu.revokeAllOtherSessions(e.id,a.id),An.success("All other sessions revoked successfully"),await loadSecurityData())}catch(a){console.error("Error revoking sessions:",a),An.error("Failed to revoke other sessions")}}},"Revoke All Other Sessions")))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Recent Security Activity"),je.createElement(gi,null,"Recent security events on your account")),je.createElement(hi,null,je.createElement("div",{className:"space-y-4"},0===x.length?je.createElement("p",{className:"text-sm text-muted-foreground"},"No recent security activity"):x.map(e=>je.createElement("div",{key:e.id,className:"flex items-center gap-3 p-3 border rounded-lg"},(e=>{switch(e){case"login":return je.createElement(Ta,{className:"h-4 w-4 text-green-500"});case"logout":return je.createElement(cr,{className:"h-4 w-4 text-blue-500"});case"failed_login":return je.createElement(Da,{className:"h-4 w-4 text-red-500"});case"password_change":return je.createElement(Ir,{className:"h-4 w-4 text-orange-500"});case"2fa_enabled":case"2fa_disabled":return je.createElement(Ir,{className:"h-4 w-4 text-purple-500"});case"suspicious_activity":return je.createElement(Br,{className:"h-4 w-4 text-red-500"});default:return je.createElement(Ir,{className:"h-4 w-4 text-gray-500"})}})(e.eventType),je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"font-medium"},(e=>{switch(e.eventType){case"login":return"Successful login";case"logout":return"Logged out";case"failed_login":return"Failed login attempt";case"password_change":return"Password changed";case"2fa_enabled":return"Two-factor authentication enabled";case"2fa_disabled":return"Two-factor authentication disabled";case"suspicious_activity":return"Suspicious activity detected";default:return"Security event"}})(e)),je.createElement("div",{className:"flex items-center gap-4 text-sm text-muted-foreground"},e.location&&je.createElement("div",{className:"flex items-center gap-1"},je.createElement(dr,{className:"h-3 w-3"}),e.location),je.createElement("div",{className:"flex items-center gap-1"},je.createElement(Fa,{className:"h-3 w-3"}),formatDistanceToNow(new Date(e.createdAt),{addSuffix:!0})))))),u.length>5&&je.createElement("div",{className:"text-center"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>E(!v),className:"flex items-center gap-2"},v?je.createElement(je.Fragment,null,je.createElement(Ba,{className:"h-4 w-4"}),"Show Less"):je.createElement(je.Fragment,null,je.createElement(qa,{className:"h-4 w-4"}),"Show All (",u.length," events)")))))),!f&&je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,je.createElement("strong",null,"Security Recommendation:")," Enable two-factor authentication to add an extra layer of security to your account.")))},SecuritySettings=()=>je.createElement(AuthenticatedRoute,null,je.createElement(DashboardLayout,null,je.createElement("div",{className:"container mx-auto py-6"},je.createElement(AccountSecurity,null)))),Subscribe=()=>{const{tier:e}=useParams(),[a]=useSearchParams(),l=useNavigate(),{user:m}=useAuth(),{toast:u}=useToast(),[p,f]=Me.useState("yearly"===a.get("billing")),[g,h]=Me.useState(!1),[y,v]=Me.useState(null);Me.useEffect(()=>{m?e&&["premium","pro"].includes(e)||l("/pricing"):l("/auth/login")},[m,e,l]);if(!m||!e||!["premium","pro"].includes(e))return null;const E=ri[e],x=E.price||0,w=Math.round(10*x),b=p?w:x,N=p?12*x-w:0;return je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},je.createElement("div",{className:"text-center mb-12"},je.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Subscribe to ",E.name),je.createElement("p",{className:"text-xl text-gray-600"},"Complete your subscription to unlock premium features")),je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},je.createElement(ui,{className:"h-fit"},je.createElement(pi,null,je.createElement("div",{className:"flex items-center space-x-3"},(()=>{switch(e){case"premium":return je.createElement(Qr,{className:"h-8 w-8 text-blue-500"});case"pro":return je.createElement(Oa,{className:"h-8 w-8 text-purple-500"});default:return je.createElement(ja,{className:"h-8 w-8 text-gray-500"})}})(),je.createElement("div",null,je.createElement(fi,{className:"text-2xl"},E.name," Plan"),je.createElement(gi,null,"Perfect for ","premium"===e?"individuals and small businesses":"growing businesses and teams")))),je.createElement(hi,{className:"space-y-6"},je.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},je.createElement("div",{className:"flex items-center space-x-4"},je.createElement("span",{className:"text-sm font-medium "+(p?"text-gray-500":"text-gray-900")},"Monthly"),je.createElement(ji,{checked:p,onCheckedChange:f,className:"data-[state=checked]:bg-blue-600"}),je.createElement("span",{className:"text-sm font-medium "+(p?"text-gray-900":"text-gray-500")},"Yearly"),p&&je.createElement(Badge,{variant:"secondary",className:"bg-green-100 text-green-800"},"Save $",N))),je.createElement("div",{className:"text-center p-6 bg-blue-50 rounded-lg"},je.createElement("div",{className:"text-4xl font-bold text-gray-900"},"$",b),je.createElement("div",{className:"text-gray-600"},"per ",p?"year":"month"),p&&je.createElement("div",{className:"text-sm text-green-600 mt-2"},"Save 20% with yearly billing")),je.createElement("div",null,je.createElement("h3",{className:"font-semibold text-gray-900 mb-3"},"What's included:"),je.createElement("ul",{className:"space-y-2"},E.features.map((e,a)=>je.createElement("li",{key:a,className:"flex items-start"},je.createElement(_a,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),je.createElement("span",{className:"text-sm text-gray-700"},e))))))),je.createElement(ui,{className:"h-fit"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(ja,{className:"h-5 w-5 mr-2"}),"Complete Your Subscription"),je.createElement(gi,null,"Secure payment powered by Stripe")),je.createElement(hi,{className:"space-y-6"},y&&je.createElement(_i,{variant:"destructive"},je.createElement(ki,null,y)),je.createElement("div",{className:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg"},je.createElement(Ir,{className:"h-5 w-5 text-green-600 mt-0.5"}),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-green-900"},"Secure Payment"),je.createElement("p",{className:"text-xs text-green-700"},"Your payment information is encrypted and secure. We use Stripe for payment processing."))),je.createElement("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg"},je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Plan"),je.createElement("span",{className:"text-sm font-medium"},E.name)),je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Billing"),je.createElement("span",{className:"text-sm font-medium"},p?"Yearly":"Monthly")),je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Price"),je.createElement("span",{className:"text-sm font-medium"},"$",b,"/",p?"year":"month")),p&&je.createElement("div",{className:"flex justify-between text-green-600"},je.createElement("span",{className:"text-sm"},"Savings"),je.createElement("span",{className:"text-sm font-medium"},"$",N,"/year"))),je.createElement(Uo,{onClick:async()=>{if(e&&["premium","pro"].includes(e))try{h(!0),v(null),await Nv.subscribeTo(e,p?"yearly":"monthly",{successUrl:`${window.location.origin}/payment/success`,cancelUrl:`${window.location.origin}/pricing?subscription=cancelled`,metadata:{source:"subscribe_page"}})}catch(dE){console.error("Subscription error:",dE),v(dE instanceof Error?dE.message:"Failed to start subscription process"),u({title:"Subscription Error",description:"Failed to start subscription process. Please try again.",variant:"destructive"})}finally{h(!1)}else v("Invalid subscription tier")},disabled:g,className:"w-full",size:"lg"},g?je.createElement(je.Fragment,null,je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."):je.createElement(je.Fragment,null,je.createElement(ja,{className:"h-4 w-4 mr-2"}),"Subscribe Now")),je.createElement("p",{className:"text-xs text-gray-500 text-center"},"By subscribing, you agree to our"," ",je.createElement("a",{href:"/terms",className:"underline hover:text-gray-700"},"Terms of Service")," ","and"," ",je.createElement("a",{href:"/privacy",className:"underline hover:text-gray-700"},"Privacy Policy"),". You can cancel anytime."))))),je.createElement(Footer,null))},PaymentSuccess=()=>{const[e]=useSearchParams(),a=useNavigate(),{user:l,profile:m}=useAuth(),[u,p]=Me.useState(null),[f,g]=Me.useState(!0);e.get("session_id"),e.get("subscription"),Me.useEffect(()=>{l?loadSubscriptionInfo():a("/auth/login")},[l]);const loadSubscriptionInfo=async()=>{try{const e=await Nv.getCurrentSubscription();p(e)}catch(e){console.error("Error loading subscription:",e)}finally{g(!1)}};return l?je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},je.createElement("div",{className:"text-center mb-12"},je.createElement("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-6"},je.createElement(Ta,{className:"h-8 w-8 text-green-600"})),je.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Payment Successful!"),je.createElement("p",{className:"text-xl text-gray-600 mb-8"},"Thank you for subscribing to LawMattersSG. Your account has been upgraded successfully.")),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(ja,{className:"h-5 w-5 mr-2"}),"Subscription Details"),je.createElement(gi,null,"Your new subscription is now active")),je.createElement(hi,{className:"space-y-4"},f?je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),je.createElement("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),je.createElement("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})):u?je.createElement(je.Fragment,null,je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium text-gray-600"},"Plan"),je.createElement(Badge,{variant:"default",className:"capitalize"},u.tier)),je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium text-gray-600"},"Status"),je.createElement(Badge,{variant:"secondary",className:"capitalize"},u.status)),je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium text-gray-600"},"Next Billing"),je.createElement("span",{className:"text-sm text-gray-900"},new Date(1e3*u.current_period_end).toLocaleDateString()))):je.createElement("div",{className:"flex justify-between items-center"},je.createElement("span",{className:"text-sm font-medium text-gray-600"},"Plan"),je.createElement(Badge,{variant:"default",className:"capitalize"},m?.subscription_tier||"Premium")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(ba,{className:"h-5 w-5 mr-2"}),"What's Next?"),je.createElement(gi,null,"Get started with your new features")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(Ta,{className:"h-5 w-5 text-green-500 mt-0.5"}),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Access Premium Features"),je.createElement("p",{className:"text-xs text-gray-600"},"Start using advanced AI tools and templates"))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(Ta,{className:"h-5 w-5 text-green-500 mt-0.5"}),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Increased Limits"),je.createElement("p",{className:"text-xs text-gray-600"},"Enjoy higher monthly usage limits"))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement(Ta,{className:"h-5 w-5 text-green-500 mt-0.5"}),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Priority Support"),je.createElement("p",{className:"text-xs text-gray-600"},"Get faster response times for support"))))))),je.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"},je.createElement(Uo,{onClick:()=>{a("/dashboard")},size:"lg",className:"flex items-center"},"Continue to Dashboard",je.createElement(ia,{className:"h-4 w-4 ml-2"})),je.createElement(Uo,{variant:"outline",onClick:()=>{a("/dashboard/subscription")},size:"lg"},"Manage Subscription")),je.createElement("div",{className:"mt-12 p-6 bg-blue-50 rounded-lg"},je.createElement("h3",{className:"text-lg font-semibold text-blue-900 mb-2"},"Important Information"),je.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},je.createElement("li",null," You will receive a confirmation email shortly with your receipt"),je.createElement("li",null," Your subscription will automatically renew at the end of each billing period"),je.createElement("li",null," You can cancel or modify your subscription at any time from your account settings"),je.createElement("li",null," If you have any questions, please contact our support team")))),je.createElement(Footer,null)):null},PaymentFailure=()=>{const[e]=useSearchParams(),a=useNavigate(),l=e.get("error"),m=e.get("error_description");return je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},je.createElement("div",{className:"text-center mb-12"},je.createElement("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6"},je.createElement(Da,{className:"h-8 w-8 text-red-600"})),je.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Payment Failed"),je.createElement("p",{className:"text-xl text-gray-600 mb-8"},"We couldn't process your payment. Don't worry, no charges were made to your account.")),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center text-red-600"},je.createElement(Da,{className:"h-5 w-5 mr-2"}),"What Happened?"),je.createElement(gi,null,"Details about the payment issue")),je.createElement(hi,null,je.createElement(_i,null,je.createElement(Pa,{className:"h-4 w-4"}),je.createElement(ki,null,(()=>{switch(l){case"payment_failed":return"Your payment could not be processed. Please check your payment details and try again.";case"card_declined":return"Your card was declined. Please try a different payment method or contact your bank.";case"insufficient_funds":return"Your card has insufficient funds. Please try a different payment method.";case"expired_card":return"Your card has expired. Please update your payment method and try again.";case"processing_error":return"There was an error processing your payment. Please try again in a few minutes.";default:return m||"We encountered an issue processing your payment. Please try again."}})())))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(Nr,{className:"h-5 w-5 mr-2"}),"What Can You Do?"),je.createElement(gi,null,"Steps to resolve the issue")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},je.createElement("span",{className:"text-xs font-semibold text-blue-600"},"1")),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Check Your Payment Method"),je.createElement("p",{className:"text-xs text-gray-600"},"Ensure your card details are correct and up to date"))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},je.createElement("span",{className:"text-xs font-semibold text-blue-600"},"2")),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Try Again"),je.createElement("p",{className:"text-xs text-gray-600"},"Return to pricing and attempt the payment again"))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},je.createElement("span",{className:"text-xs font-semibold text-blue-600"},"3")),je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-900"},"Contact Support"),je.createElement("p",{className:"text-xs text-gray-600"},"If the issue persists, our team is here to help"))))))),je.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12"},je.createElement(Uo,{onClick:()=>{a("/pricing")},size:"lg",className:"flex items-center"},je.createElement(ja,{className:"h-4 w-4 mr-2"}),"Try Payment Again"),je.createElement(Uo,{variant:"outline",onClick:()=>{window.location.href="mailto:support@lawmatterssg.com?subject=Payment Issue"},size:"lg"},je.createElement(Pa,{className:"h-4 w-4 mr-2"}),"Contact Support"),je.createElement(Uo,{variant:"ghost",onClick:()=>{a("/dashboard")},size:"lg"},je.createElement(la,{className:"h-4 w-4 mr-2"}),"Back to Dashboard")),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Common Payment Issues"),je.createElement(gi,null,"Here are some common reasons why payments fail and how to fix them")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},je.createElement("div",null,je.createElement("h4",{className:"font-semibold text-gray-900 mb-2"},"Card Issues"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," Expired or invalid card"),je.createElement("li",null," Insufficient funds"),je.createElement("li",null," Card blocked by bank"),je.createElement("li",null," Incorrect card details"))),je.createElement("div",null,je.createElement("h4",{className:"font-semibold text-gray-900 mb-2"},"Technical Issues"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},je.createElement("li",null," Network connectivity problems"),je.createElement("li",null," Browser compatibility issues"),je.createElement("li",null," Temporary payment processor issues"),je.createElement("li",null," Security verification required")))))),je.createElement("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg text-center"},je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Need Help?"),je.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Our support team is available to help you resolve any payment issues."),je.createElement("div",{className:"flex flex-col sm:flex-row gap-2 justify-center text-sm text-gray-600"},je.createElement("span",null,"Email: support@lawmatterssg.com"),je.createElement("span",{className:"hidden sm:inline"},""),je.createElement("span",null,"Response time: Within 24 hours")))),je.createElement(Footer,null))};const _v=new class DocumentSharingService{async createShareLink(e,a,l={}){const{data:{user:m}}=await Mo.auth.getUser();if(!m)throw new Error("Authentication required");const{data:u,error:p}=await Mo.from("uploaded_documents").select("user_id").eq("id",e).single();if(p||!u)throw new Error("Document not found");if(u.user_id!==m.id)throw new Error("You can only share documents you own");const f=this.generateShareToken(),g=l.expiresIn?new Date(Date.now()+60*l.expiresIn*60*1e3).toISOString():void 0,{data:h,error:y}=await Mo.from("document_shares").insert({document_id:e,shared_by:m.id,shared_with:l.shareWithEmail?await this.getUserIdByEmail(l.shareWithEmail):null,share_token:f,permissions:a,expires_at:g,is_active:!0,access_count:0}).select().single();if(y)throw new Error(`Failed to create share link: ${y.message}`);return l.shareWithEmail&&await this.sendShareNotification(l.shareWithEmail,m.email||"",e,f,l.message),{token:f,url:`${window.location.origin}/shared/${f}`,permissions:a,expiresAt:g}}async accessSharedDocument(e){const{data:a,error:l}=await Mo.from("document_shares").select("\n        *,\n        document:uploaded_documents(*),\n        shared_by_user:profiles!document_shares_shared_by_fkey(email, first_name, last_name)\n      ").eq("share_token",e).eq("is_active",!0).single();if(l||!a)throw new Error("Invalid or expired share link");if(a.expires_at&&new Date(a.expires_at)<new Date)throw new Error("Share link has expired");if(a.shared_with){const{data:{user:e}}=await Mo.auth.getUser();if(!e||e.id!==a.shared_with)throw new Error("You do not have permission to access this document")}return await Mo.from("document_shares").update({access_count:a.access_count+1,last_accessed:(new Date).toISOString()}).eq("id",a.id),{document:a.document,permissions:a.permissions,share:a}}async getDocumentShares(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{data:l,error:m}=await Mo.from("document_shares").select("\n        *,\n        shared_with_user:profiles!document_shares_shared_with_fkey(email, first_name, last_name)\n      ").eq("document_id",e).eq("shared_by",a.id).order("created_at",{ascending:!1});if(m)throw new Error(`Failed to fetch shares: ${m.message}`);return l||[]}async revokeShare(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{error:l}=await Mo.from("document_shares").update({is_active:!1}).eq("id",e).eq("shared_by",a.id);if(l)throw new Error(`Failed to revoke share: ${l.message}`)}async addComment(e,a,l,m){const{data:{user:u}}=await Mo.auth.getUser();if(!u)throw new Error("Authentication required");const{data:p,error:f}=await Mo.from("document_comments").insert({document_id:e,user_id:u.id,content:a,position:l,parent_id:m,is_resolved:!1}).select("\n        *,\n        user:profiles(email, first_name, last_name, avatar_url)\n      ").single();if(f)throw new Error(`Failed to add comment: ${f.message}`);return p}async getDocumentComments(e){const{data:a,error:l}=await Mo.from("document_comments").select("\n        *,\n        user:profiles(email, first_name, last_name, avatar_url),\n        replies:document_comments!parent_id(\n          *,\n          user:profiles(email, first_name, last_name, avatar_url)\n        )\n      ").eq("document_id",e).is("parent_id",null).order("created_at",{ascending:!0});if(l)throw new Error(`Failed to fetch comments: ${l.message}`);return a||[]}async resolveComment(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{error:l}=await Mo.from("document_comments").update({is_resolved:!0}).eq("id",e);if(l)throw new Error(`Failed to resolve comment: ${l.message}`)}async startCollaborationSession(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{data:l}=await Mo.from("collaboration_sessions").select("*").eq("document_id",e).eq("is_active",!0).single();if(l)return this.joinCollaborationSession(l.id);const{data:m,error:u}=await Mo.from("collaboration_sessions").insert({document_id:e,participants:[{user_id:a.id,user_name:a.email,joined_at:(new Date).toISOString(),last_seen:(new Date).toISOString()}],is_active:!0}).select().single();if(u)throw new Error(`Failed to start collaboration session: ${u.message}`);return m}async joinCollaborationSession(e){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{data:l,error:m}=await Mo.from("collaboration_sessions").select("*").eq("id",e).single();if(m||!l)throw new Error("Collaboration session not found");const u=l.participants||[];if(!u.find(e=>e.user_id===a.id)){u.push({user_id:a.id,user_name:a.email||"Unknown User",joined_at:(new Date).toISOString(),last_seen:(new Date).toISOString()});const{error:l}=await Mo.from("collaboration_sessions").update({participants:u}).eq("id",e);if(l)throw new Error(`Failed to join session: ${l.message}`)}return{...l,participants:u}}generateShareToken(){return crypto.randomUUID().replace(/-/g,"")}async getUserIdByEmail(e){const{data:a}=await Mo.from("profiles").select("id").eq("email",e).single();return a?.id||null}async sendShareNotification(e,a,l,m,u){console.log("Share notification:",{to:e,from:a,documentId:l,shareToken:m,message:u})}};const kv=new class AIApi{async callEdgeFunction(e,a){const{data:{session:l}}=await Mo.auth.getSession();if(!l)throw new Error("Authentication required");const m=await fetch(`https://kvlaydeyqidlfpfutbmp.supabase.co/functions/v1/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.access_token}`},body:JSON.stringify(a)});if(!m.ok){const e=await m.json().catch(()=>({}));throw new Error(e.error||`HTTP ${m.status}: ${m.statusText}`)}return m.json()}async sendChatMessage(e){const{usageTrackingService:a}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),l=await a.checkAndIncrementUsage("ai_query",void 0,{operation:"chat",message_length:e.message.length,document_ids:e.documentIds,use_rag:e.useRAG});if(!l.allowed)throw new Error(`Usage limit exceeded. You have used ${l.limit?.current}/${l.limit?.limit} AI queries this month. Please upgrade your plan to continue.`);return this.callEdgeFunction("ai-chat",e)}async processDocument(e){const{usageTrackingService:a}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),l=await a.checkAndIncrementUsage("document_upload",e.documentId,{operation:e.operation,options:e.options});if(!l.allowed)throw new Error(`Usage limit exceeded. You have used ${l.limit?.current}/${l.limit?.limit} document operations this month. Please upgrade your plan to continue.`);return this.callEdgeFunction("document-processor",e)}async generateTemplate(e){const{usageTrackingService:a}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),l=await a.checkAndIncrementUsage("ai_query",void 0,{operation:"template_generation",template_type:e.templateType,description_length:e.description.length});if(!l.allowed)throw new Error(`Usage limit exceeded. You have used ${l.limit?.current}/${l.limit?.limit} AI queries this month. Please upgrade your plan to continue.`);return this.callEdgeFunction("template-generator",e)}async extractText(e){return(await this.processDocument({documentId:e,operation:"extract-text"})).result}async generateEmbeddings(e){return(await this.processDocument({documentId:e,operation:"generate-embeddings"})).result}async classifyDocument(e){return(await this.processDocument({documentId:e,operation:"classify"})).result}async summarizeDocument(e){return(await this.processDocument({documentId:e,operation:"summarize"})).result}async askDocumentQuestion(e,a,l){return this.sendChatMessage({message:e,documentIds:a,useRAG:!0,conversationId:l})}async getChatHistory(e){const{data:a,error:l}=await Mo.from("chat_messages").select("role, content, created_at").eq("conversation_id",e).order("created_at",{ascending:!0});if(l)throw new Error(`Failed to fetch chat history: ${l.message}`);return a.map(e=>({role:e.role,content:e.content,timestamp:e.created_at}))}async getUsageStats(e=30){const{data:{user:a}}=await Mo.auth.getUser();if(!a)throw new Error("Authentication required");const{data:l,error:m}=await Mo.rpc("get_user_usage_stats",{user_id_param:a.id,period_days:e});if(m)throw new Error(`Failed to fetch usage stats: ${m.message}`);return l||[]}async checkUsageLimit(e){const{usageTrackingService:a}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url);let l;switch(e){case"ai_chat":case"chat":case"summarize":case"extract-entities":case"generate-template":default:l="ai_query";break;case"document_analysis":case"document_upload":l="document_upload"}const m=await a.checkUsageLimit(l);return{allowed:m.allowed,limit:m.limit,used:m.current}}};const Sv=new class DocumentAnalysisService{async analyzeDocument(e,a={}){const l=Date.now(),m=await wf.checkUsageLimit("ai_query");if(!m.allowed)throw new Error(`AI analysis limit exceeded. You have used ${m.current}/${m.limit} AI queries this month.`);const{data:u,error:p}=await Mo.from("uploaded_documents").select("*").eq("id",e).single();if(p||!u)throw new Error("Document not found");if(!u.ocr_text)throw new Error("Document text not available. Please ensure the document has been processed.");const{includeSummary:f=!0,includeEntities:g=!0,includeInsights:h=!0,customPrompt:y}=a,[v,E,x]=await Promise.all([f?this.generateSummary(u):Promise.resolve(null),g?this.extractEntities(u):Promise.resolve(null),h?this.generateLegalInsights(u,y):Promise.resolve(null)]);await wf.incrementUsage("ai_query",e,{operation:"document_analysis",analysis_types:[f&&"summary",g&&"entities",h&&"insights"].filter(Boolean),text_length:u.ocr_text.length});const w=Date.now()-l,b={documentId:e,summary:v||this.getDefaultSummary(),entities:E||this.getDefaultEntities(),insights:x||this.getDefaultInsights(),analysisDate:(new Date).toISOString(),processingTime:w};return await this.saveAnalysisResults(e,b),b}async generateSummary(e){const a=`\n      Analyze the following legal document and provide a comprehensive summary:\n\n      Document Type: ${e.document_type}\n      Text: ${e.ocr_text}\n\n      Please provide:\n      1. A concise summary (2-3 paragraphs)\n      2. Key points (bullet points)\n      3. Document type classification\n      4. Confidence level (0-1)\n      5. Word count\n      6. Estimated reading time in minutes\n\n      Format your response as JSON with the following structure:\n      {\n        "summary": "...",\n        "keyPoints": ["...", "..."],\n        "documentType": "...",\n        "confidence": 0.95,\n        "wordCount": 1234,\n        "readingTime": 5\n      }\n    `,l=await kv.sendChatMessage({message:a,useRAG:!1});try{return JSON.parse(l.response)}catch(m){return this.parseTextSummary(l.response,e)}}async extractEntities(e){const a=`\n      Extract entities and relationships from the following legal document:\n\n      Text: ${e.ocr_text}\n\n      Please identify:\n      1. Entities (persons, organizations, locations, dates, monetary amounts, legal terms, case references)\n      2. Relationships between entities\n\n      Format your response as JSON with the following structure:\n      {\n        "entities": [\n          {\n            "type": "person|organization|location|date|money|legal_term|case_reference",\n            "text": "...",\n            "confidence": 0.95,\n            "startIndex": 0,\n            "endIndex": 10\n          }\n        ],\n        "relationships": [\n          {\n            "entity1": "...",\n            "entity2": "...",\n            "relationship": "...",\n            "confidence": 0.9\n          }\n        ]\n      }\n    `,l=await kv.sendChatMessage({message:a,useRAG:!1});try{return JSON.parse(l.response)}catch(m){return this.getDefaultEntities()}}async generateLegalInsights(e,a){const l=`\n      Analyze the following legal document and provide legal insights:\n\n      Document Type: ${e.document_type}\n      Text: ${e.ocr_text}\n\n      Please provide:\n      1. Document category classification\n      2. Key legal concepts identified\n      3. Potential legal issues or concerns\n      4. Recommendations for action\n      5. Compliance checks (if applicable)\n      6. Risk assessment\n\n      ${a?`Additional instructions: ${a}`:""}\n\n      Format your response as JSON with the following structure:\n      {\n        "documentCategory": "...",\n        "legalConcepts": ["...", "..."],\n        "potentialIssues": ["...", "..."],\n        "recommendations": ["...", "..."],\n        "complianceChecks": [\n          {\n            "requirement": "...",\n            "status": "compliant|non_compliant|unclear",\n            "details": "..."\n          }\n        ],\n        "riskAssessment": {\n          "level": "low|medium|high",\n          "factors": ["...", "..."],\n          "mitigation": ["...", "..."]\n        }\n      }\n    `,m=await kv.sendChatMessage({message:l,useRAG:!1});try{return JSON.parse(m.response)}catch(u){return this.getDefaultInsights()}}async saveAnalysisResults(e,a){const{error:l}=await Mo.from("document_analysis").upsert({document_id:e,analysis_data:a,created_at:(new Date).toISOString()});l&&console.error("Failed to save analysis results:",l)}async getAnalysisResults(e){const{data:a,error:l}=await Mo.from("document_analysis").select("analysis_data").eq("document_id",e).order("created_at",{ascending:!1}).limit(1).single();return l||!a?null:a.analysis_data}async compareDocuments(e,a){if(!(await wf.checkUsageLimit("ai_query")).allowed)throw new Error("AI analysis limit exceeded.");const{data:l,error:m}=await Mo.from("uploaded_documents").select("*").in("id",[e,a]);if(m||!l||2!==l.length)throw new Error("Documents not found");const[u,p]=l,f=`\n      Compare the following two legal documents and provide analysis:\n\n      Document 1:\n      Type: ${u.document_type}\n      Text: ${u.ocr_text}\n\n      Document 2:\n      Type: ${p.document_type}\n      Text: ${p.ocr_text}\n\n      Please provide:\n      1. Key similarities between the documents\n      2. Important differences\n      3. Recommendations based on the comparison\n\n      Format as JSON:\n      {\n        "similarities": ["...", "..."],\n        "differences": ["...", "..."],\n        "recommendations": ["...", "..."]\n      }\n    `,g=await kv.sendChatMessage({message:f,useRAG:!1});await wf.incrementUsage("ai_query",void 0,{operation:"document_comparison",document_ids:[e,a]});try{return JSON.parse(g.response)}catch(h){return{similarities:["Unable to parse comparison results"],differences:["Analysis failed"],recommendations:["Please try again"]}}}parseTextSummary(e,a){const l=a.ocr_text?.split(/\s+/).length||0;return{summary:e.substring(0,500)+"...",keyPoints:["Analysis completed","Summary generated"],documentType:a.document_type,confidence:.7,wordCount:l,readingTime:Math.ceil(l/200)}}getDefaultSummary(){return{summary:"Summary not available",keyPoints:[],documentType:"unknown",confidence:0,wordCount:0,readingTime:0}}getDefaultEntities(){return{entities:[],relationships:[]}}getDefaultInsights(){return{documentCategory:"unknown",legalConcepts:[],potentialIssues:[],recommendations:[],complianceChecks:[],riskAssessment:{level:"low",factors:[],mitigation:[]}}}};const Cv=new class DocumentExportService{async downloadDocument(e,a={format:"pdf"}){const l=await wf.checkAndIncrementUsage("document_download",e,{operation:"download",format:a.format,include_analysis:a.includeAnalysis});if(!l.allowed)throw new Error(`Download limit exceeded. You have used ${l.limit?.current}/${l.limit?.limit} document downloads this month.`);const{data:m,error:u}=await Mo.from("uploaded_documents").select("*").eq("id",e).single();if(u||!m)throw new Error("Document not found");const p=this.extractFileNameFromUrl(m.file_url),{data:f,error:g}=await Mo.storage.from("documents").download(p);if(g)throw new Error(`Failed to download document: ${g.message}`);let h=f,y=this.getContentType(a.format),v=this.generateFilename(m.filename,a.format);if(a.includeAnalysis){const l=await Sv.getAnalysisResults(e);l&&(h=await this.createEnhancedDocument(m,l,a),v=this.generateFilename(m.filename,a.format,"enhanced"))}return{blob:h,filename:v,contentType:y,size:h.size}}async generateCustomDocument(e,a={format:"pdf"}){const l=await wf.checkAndIncrementUsage("custom_document",void 0,{operation:"generate",template_type:e.templateType,format:a.format});if(!l.allowed)throw new Error(`Custom document limit exceeded. You have used ${l.limit?.current}/${l.limit?.limit} custom documents this month.`);let m=e.content;"custom"!==e.templateType&&(m=await this.generateTemplateContent(e)),e.variables&&(m=this.applyVariables(m,e.variables));const u=await this.createDocumentBlob(m,e,a);return{blob:u,filename:this.generateCustomFilename(e.title,a.format),contentType:this.getContentType(a.format),size:u.size}}async exportAnalysis(e,a={format:"pdf"}){const l=await Sv.getAnalysisResults(e);if(!l)throw new Error("No analysis found for this document");const{data:m}=await Mo.from("uploaded_documents").select("filename").eq("id",e).single(),u=this.formatAnalysisForExport(l),p=await this.createAnalysisBlob(u,a);return{blob:p,filename:this.generateFilename(m?.filename||"document",a.format,"analysis"),contentType:this.getContentType(a.format),size:p.size}}async bulkExport(e,a={format:"pdf"}){for(const p of e){const e=await wf.checkUsageLimit("document_download");if(!e.allowed)throw new Error(`Download limit would be exceeded. You have ${e.remaining} downloads remaining.`)}const l=new(0,(await ze(async()=>{const{default:e}=await import("./jszip.min-BwzEJ3Q-.js").then(e=>e.j);return{default:e}},__vite__mapDeps([0,1,2]),import.meta.url)).default);for(const p of e)try{const e=await this.downloadDocument(p,a);l.file(e.filename,e.blob)}catch(u){console.error(`Failed to export document ${p}:`,u)}const m=await l.generateAsync({type:"blob"});return{blob:m,filename:`documents-export-${(new Date).toISOString().split("T")[0]}.zip`,contentType:"application/zip",size:m.size}}async generateTemplateContent(e){const a=`\n      Generate a professional ${e.templateType} document with the following specifications:\n      \n      Title: ${e.title}\n      Content Requirements: ${e.content}\n      \n      Please create a well-structured, legally appropriate document that includes:\n      1. Proper formatting and sections\n      2. Professional language\n      3. Placeholder variables where appropriate (use {{variable_name}} format)\n      4. Standard clauses for this type of document\n      \n      Return only the document content without any explanations.\n    `;return(await kv.sendChatMessage({message:a,useRAG:!1})).response}applyVariables(e,a){let l=e;return Object.entries(a).forEach(([e,a])=>{const m=new RegExp(`{{${e}}}`,"g");l=l.replace(m,a)}),l}async createDocumentBlob(e,a,l){switch(l.format){case"txt":default:return new Blob([e],{type:"text/plain"});case"json":const l={title:a.title,content:e,templateType:a.templateType,variables:a.variables,formatting:a.formatting,generatedAt:(new Date).toISOString()};return new Blob([JSON.stringify(l,null,2)],{type:"application/json"});case"pdf":case"docx":const m=this.contentToHtml(e,a);return new Blob([m],{type:"text/html"})}}async createEnhancedDocument(e,a,l){const m=`\n      Document: ${e.filename}\n      \n      ORIGINAL CONTENT:\n      ${e.ocr_text||"Text not available"}\n      \n      ANALYSIS SUMMARY:\n      ${a.summary?.summary||"No summary available"}\n      \n      KEY POINTS:\n      ${a.summary?.keyPoints?.map(e=>` ${e}`).join("\n")||"No key points identified"}\n      \n      LEGAL INSIGHTS:\n      Category: ${a.insights?.documentCategory||"Unknown"}\n      Risk Level: ${a.insights?.riskAssessment?.level||"Unknown"}\n      \n      RECOMMENDATIONS:\n      ${a.insights?.recommendations?.map(e=>` ${e}`).join("\n")||"No recommendations available"}\n    `;return new Blob([m],{type:"text/plain"})}async createAnalysisBlob(e,a){switch(a.format){case"json":return new Blob([e],{type:"application/json"});case"txt":return new Blob([e],{type:"text/plain"});default:return new Blob([`\n          <html>\n            <head><title>Document Analysis Report</title></head>\n            <body>\n              <h1>Document Analysis Report</h1>\n              <pre>${e}</pre>\n            </body>\n          </html>\n        `],{type:"text/html"})}}formatAnalysisForExport(e){return JSON.stringify(e,null,2)}contentToHtml(e,a){const{formatting:l={}}=a;return`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>${a.title}</title>\n          <style>\n            body {\n              font-family: ${l.fontFamily||"Arial, sans-serif"};\n              font-size: ${l.fontSize||12}pt;\n              margin: ${l.margins?.top||1}in ${l.margins?.right||1}in ${l.margins?.bottom||1}in ${l.margins?.left||1}in;\n              line-height: 1.5;\n            }\n            h1 { font-size: 18pt; margin-bottom: 20px; }\n            p { margin-bottom: 12px; }\n          </style>\n        </head>\n        <body>\n          ${l.header?`<header>${l.header}</header>`:""}\n          <h1>${a.title}</h1>\n          <div>${e.replace(/\n/g,"<br>")}</div>\n          ${l.footer?`<footer>${l.footer}</footer>`:""}\n        </body>\n      </html>\n    `}extractFileNameFromUrl(e){const a=e.split("/");return a[a.length-1]}getContentType(e){return{pdf:"application/pdf",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",json:"application/json",html:"text/html"}[e]||"application/octet-stream"}generateFilename(e,a,l){return`${e.replace(/\.[^/.]+$/,"")}${l?`-${l}`:""}.${a}`}generateCustomFilename(e,a){return`${e.replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"-")}.${a}`}},SharedDocument=()=>{const{shareToken:e}=useParams(),a=useNavigate(),{toast:l}=useToast(),[m,u]=Me.useState(!0),[p,f]=Me.useState(null),[g,h]=Me.useState(null),[y,v]=Me.useState(null),[E,x]=Me.useState(null),[w,b]=Me.useState([]),[N,_]=Me.useState(""),[k,S]=Me.useState(!1),[C,R]=Me.useState(!1);Me.useEffect(()=>{e&&loadSharedDocument()},[e]);const loadSharedDocument=async()=>{if(e)try{u(!0),f(null);const a=await _v.accessSharedDocument(e);h(a.document),v(a.permissions),x(a.share),a.permissions.canComment&&await loadComments(a.document.id)}catch(dE){console.error("Failed to load shared document:",dE),f(dE instanceof Error?dE.message:"Failed to load document")}finally{u(!1)}},loadComments=async e=>{try{const a=await _v.getDocumentComments(e);b(a)}catch(dE){console.error("Failed to load comments:",dE)}};return m?je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},je.createElement("div",{className:"text-center"},je.createElement(lr,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),je.createElement("p",null,"Loading shared document..."))),je.createElement(Footer,null)):p?je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20"},je.createElement(ui,null,je.createElement(hi,{className:"pt-6"},je.createElement("div",{className:"text-center space-y-4"},je.createElement(Aa,{className:"h-12 w-12 text-red-500 mx-auto"}),je.createElement("h2",{className:"text-xl font-semibold"},"Access Denied"),je.createElement("p",{className:"text-gray-600"},p),je.createElement(Uo,{onClick:()=>a("/")},"Go Home"))))),je.createElement(Footer,null)):g&&y&&E?je.createElement("div",{className:"min-h-screen bg-white"},je.createElement(Navigation,null),je.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},je.createElement("div",{className:"mb-8"},je.createElement("div",{className:"flex items-center justify-between mb-4"},je.createElement("div",{className:"flex items-center space-x-3"},je.createElement(Tr,{className:"h-6 w-6 text-blue-600"}),je.createElement("h1",{className:"text-2xl font-bold"},"Shared Document")),y.canDownload&&je.createElement(Uo,{onClick:async()=>{if(g&&y?.canDownload)try{R(!0);const e=await Cv.downloadDocument(g.id,{format:"pdf",includeAnalysis:!1}),a=URL.createObjectURL(e.blob),m=g.createElement("a");m.href=a,m.download=e.filename,g.body.appendChild(m),m.click(),g.body.removeChild(m),URL.revokeObjectURL(a),l({title:"Download Started",description:`Downloading ${e.filename}`})}catch(dE){console.error("Download failed:",dE),l({title:"Download Failed",description:dE instanceof Error?dE.message:"Failed to download document",variant:"destructive"})}finally{R(!1)}},disabled:C},C?je.createElement(je.Fragment,null,je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}),"Downloading..."):je.createElement(je.Fragment,null,je.createElement(Ua,{className:"h-4 w-4 mr-2"}),"Download"))),je.createElement("div",{className:"space-y-2"},je.createElement("h2",{className:"text-xl font-semibold"},g.filename),je.createElement("div",{className:"flex items-center space-x-4 text-sm text-gray-600"},je.createElement("span",null,"Shared by ",E.shared_by_user?.email||"Unknown"),je.createElement("span",null,""),je.createElement("span",null,formatDistanceToNow(new Date(E.created_at),{addSuffix:!0})),E.expires_at&&je.createElement(je.Fragment,null,je.createElement("span",null,""),je.createElement("span",{className:"flex items-center"},je.createElement(Fa,{className:"h-4 w-4 mr-1"}),"Expires ",formatDistanceToNow(new Date(E.expires_at),{addSuffix:!0})))),je.createElement("div",{className:"flex items-center space-x-4"},je.createElement("span",{className:"text-sm text-gray-600"},"Your permissions:"),(()=>{if(!y)return null;const e=Object.entries(y).filter(([e,a])=>a&&"expiresAt"!==e).map(([e])=>{switch(e){case"canView":return{icon:je.createElement(qa,{className:"h-3 w-3"}),label:"View"};case"canDownload":return{icon:je.createElement(Ua,{className:"h-3 w-3"}),label:"Download"};case"canComment":return{icon:je.createElement(gr,{className:"h-3 w-3"}),label:"Comment"};case"canEdit":return{icon:je.createElement(Ha,{className:"h-3 w-3"}),label:"Edit"};default:return null}}).filter(Boolean);return je.createElement("div",{className:"flex flex-wrap gap-2"},e.map((e,a)=>je.createElement(Badge,{key:a,variant:"outline",className:"flex items-center space-x-1"},e?.icon,je.createElement("span",null,e?.label))))})()))),je.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-2"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center"},je.createElement(Ha,{className:"h-5 w-5 mr-2"}),"Document Content")),je.createElement(hi,null,g.ocr_text?je.createElement("div",{className:"prose max-w-none"},je.createElement("pre",{className:"whitespace-pre-wrap text-sm leading-relaxed"},g.ocr_text)):je.createElement("div",{className:"text-center py-8 text-gray-500"},je.createElement(Ha,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),je.createElement("p",null,"Document content is not available for preview"),y.canDownload&&je.createElement("p",{className:"text-sm"},"Download the document to view its contents"))))),je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-base"},"Document Information")),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Type:"),je.createElement("span",{className:"text-sm font-medium"},g.document_type)),je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Size:"),je.createElement("span",{className:"text-sm font-medium"},(g.file_size/1024/1024).toFixed(2)," MB")),je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Uploaded:"),je.createElement("span",{className:"text-sm font-medium"},formatDistanceToNow(new Date(g.created_at),{addSuffix:!0}))),je.createElement("div",{className:"flex justify-between"},je.createElement("span",{className:"text-sm text-gray-600"},"Status:"),je.createElement(Badge,{variant:"completed"===g.processing_status?"default":"secondary"},g.processing_status)))),y.canComment&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-base flex items-center"},je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Comments (",w.length,")")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-2"},je.createElement(bi,{placeholder:"Add a comment...",value:N,onChange:e=>_(e.target.value),rows:3}),je.createElement(Uo,{onClick:async()=>{if(g&&N.trim()&&y?.canComment)try{S(!0),await _v.addComment(g.id,N.trim()),_(""),await loadComments(g.id),l({title:"Comment Added",description:"Your comment has been added successfully"})}catch(dE){console.error("Failed to add comment:",dE),l({title:"Comment Failed",description:dE instanceof Error?dE.message:"Failed to add comment",variant:"destructive"})}finally{S(!1)}},disabled:!N.trim()||k,size:"sm",className:"w-full"},k?je.createElement(je.Fragment,null,je.createElement(lr,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."):je.createElement(je.Fragment,null,je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Add Comment"))),je.createElement("div",{className:"space-y-3"},w.map(e=>je.createElement("div",{key:e.id,className:"p-3 border rounded-lg"},je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement(Hr,{className:"h-4 w-4 text-gray-400"}),je.createElement("span",{className:"text-sm font-medium"},e.user?.first_name||e.user?.email||"Anonymous"),je.createElement("span",{className:"text-xs text-gray-500"},formatDistanceToNow(new Date(e.created_at),{addSuffix:!0}))),je.createElement("p",{className:"text-sm text-gray-700"},e.content))))))))),je.createElement(Footer,null)):null};var Rv={exports:{}};function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;Rv.exports=function(){function shim(e,a,l,m,u,p){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==p){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}();const Av=$e(Rv.exports),Tv=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(e,a,l){const m=function withMimeType(e){const{name:a}=e;if(a&&-1!==a.lastIndexOf(".")&&!e.type){const l=a.split(".").pop().toLowerCase(),m=Tv.get(l);m&&Object.defineProperty(e,"type",{value:m,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:u}=e,p="string"==typeof a?a:"string"==typeof u&&u.length>0?u:`./${e.name}`;return"string"!=typeof m.path&&setObjProp(m,"path",p),setObjProp(m,"relativePath",p),m}function setObjProp(e,a,l){Object.defineProperty(e,a,{value:l,writable:!1,configurable:!1,enumerable:!0})}const Pv=[".DS_Store","Thumbs.db"];function isObject(e){return"object"==typeof e&&null!==e}function noIgnoredFiles(e){return e.filter(e=>-1===Pv.indexOf(e.name))}function fromList(e){if(null===e)return[];const a=[];for(let l=0;l<e.length;l++){const m=e[l];a.push(m)}return a}function toFilePromises(e){if("function"!=typeof e.webkitGetAsEntry)return fromDataTransferItem(e);const a=e.webkitGetAsEntry();return a&&a.isDirectory?fromDirEntry(a):fromDataTransferItem(e,a)}function flatten(e){return e.reduce((e,a)=>[...e,...Array.isArray(a)?flatten(a):[a]],[])}function fromDataTransferItem(e,a){return __awaiter(this,void 0,void 0,function*(){var l;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const a=yield e.getAsFileSystemHandle();if(null===a)throw new Error(`${e} is not a File`);if(void 0!==a){const e=yield a.getFile();return e.handle=a,toFileWithPath(e)}}const m=e.getAsFile();if(!m)throw new Error(`${e} is not a File`);return toFileWithPath(m,null!==(l=null==a?void 0:a.fullPath)&&void 0!==l?l:void 0)})}function fromEntry(e){return __awaiter(this,void 0,void 0,function*(){return e.isDirectory?fromDirEntry(e):function fromFileEntry(e){return __awaiter(this,void 0,void 0,function*(){return new Promise((a,l)=>{e.file(l=>{const m=toFileWithPath(l,e.fullPath);a(m)},e=>{l(e)})})})}(e)})}function fromDirEntry(e){const a=e.createReader();return new Promise((e,l)=>{const m=[];!function readEntries(){a.readEntries(a=>__awaiter(this,void 0,void 0,function*(){if(a.length){const e=Promise.all(a.map(fromEntry));m.push(e),readEntries()}else try{const a=yield Promise.all(m);e(a)}catch(dE){l(dE)}}),e=>{l(e)})}()})}var _default=function(e,a){if(e&&a){var l=Array.isArray(a)?a:a.split(",");if(0===l.length)return!0;var m=e.name||"",u=(e.type||"").toLowerCase(),p=u.replace(/\/.*$/,"");return l.some(function(e){var a=e.trim().toLowerCase();return"."===a.charAt(0)?m.toLowerCase().endsWith(a):a.endsWith("/*")?p===a.replace(/\/.*$/,""):u===a})}return!0};function _toConsumableArray$1(e){return function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}(e)||function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray$1(e)||function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys$1(e,a){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);a&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),l.push.apply(l,m)}return l}function _objectSpread$1(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?ownKeys$1(Object(l),!0).forEach(function(a){_defineProperty$1(e,a,l[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):ownKeys$1(Object(l)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(l,a))})}return e}function _defineProperty$1(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}function _slicedToArray$1(e,a){return function _arrayWithHoles$1(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit$1(e,a){var l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==l)return;var m,u,p=[],f=!0,g=!1;try{for(l=l.call(e);!(f=(m=l.next()).done)&&(p.push(m.value),!a||p.length!==a);f=!0);}catch(dE){g=!0,u=dE}finally{try{f||null==l.return||l.return()}finally{if(g)throw u}}return p}(e,a)||_unsupportedIterableToArray$1(e,a)||function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray$1(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,a);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray$1(e,a):void 0}}function _arrayLikeToArray$1(e,a){(null==a||a>e.length)&&(a=e.length);for(var l=0,m=new Array(a);l<a;l++)m[l]=e[l];return m}var Dv=_default,Iv=function getInvalidTypeRejectionErr2(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),a=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(a)}},Fv=function getTooLargeRejectionErr2(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Mv=function getTooSmallRejectionErr2(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},jv={code:"too-many-files",message:"Too many files"};function fileAccepted(e,a){var l="application/x-moz-file"===e.type||Dv(e,a);return[l,l?null:Iv(a)]}function fileMatchSize(e,a,l){if(isDefined(e.size))if(isDefined(a)&&isDefined(l)){if(e.size>l)return[!1,Fv(l)];if(e.size<a)return[!1,Mv(a)]}else{if(isDefined(a)&&e.size<a)return[!1,Mv(a)];if(isDefined(l)&&e.size>l)return[!1,Fv(l)]}return[!0,null]}function isDefined(e){return null!=e}function isPropagationStopped(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function isEvtWithFiles(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function onDocumentDragOver(e){e.preventDefault()}function composeEventHandlers(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return function(e){for(var l=arguments.length,m=new Array(l>1?l-1:0),u=1;u<l;u++)m[u-1]=arguments[u];return a.some(function(a){return!isPropagationStopped(e)&&a&&a.apply(void 0,[e].concat(m)),isPropagationStopped(e)})}}function isMIMEType(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function isExt(e){return/^.*\.[\w]+$/.test(e)}var Ov=["children"],Lv=["open"],$v=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Uv=["refKey","onChange","onClick"];function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(e,a){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,a){var l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==l)return;var m,u,p=[],f=!0,g=!1;try{for(l=l.call(e);!(f=(m=l.next()).done)&&(p.push(m.value),!a||p.length!==a);f=!0);}catch(dE){g=!0,u=dE}finally{try{f||null==l.return||l.return()}finally{if(g)throw u}}return p}(e,a)||_unsupportedIterableToArray(e,a)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(e,a):void 0}}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var l=0,m=new Array(a);l<a;l++)m[l]=e[l];return m}function ownKeys(e,a){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);a&&(m=m.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),l.push.apply(l,m)}return l}function _objectSpread(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(l),!0).forEach(function(a){_defineProperty(e,a,l[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):ownKeys(Object(l)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(l,a))})}return e}function _defineProperty(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}function _objectWithoutProperties(e,a){if(null==e)return{};var l,m,u=function _objectWithoutPropertiesLoose(e,a){if(null==e)return{};var l,m,u={},p=Object.keys(e);for(m=0;m<p.length;m++)l=p[m],a.indexOf(l)>=0||(u[l]=e[l]);return u}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(m=0;m<p.length;m++)l=p[m],a.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(u[l]=e[l])}return u}var zv=Me.forwardRef(function(e,a){var l=e.children,m=useDropzone(_objectWithoutProperties(e,Ov)),u=m.open,p=_objectWithoutProperties(m,Lv);return Me.useImperativeHandle(a,function(){return{open:u}},[u]),je.createElement(Me.Fragment,null,l(_objectSpread(_objectSpread({},p),{},{open:u})))});zv.displayName="Dropzone";var Bv={disabled:!1,getFilesFromEvent:function fromEvent(e){return __awaiter(this,void 0,void 0,function*(){return isObject(e)&&function isDataTransfer(e){return isObject(e)}(e.dataTransfer)?function getDataTransferFiles(e,a){return __awaiter(this,void 0,void 0,function*(){if(e.items){const l=fromList(e.items).filter(e=>"file"===e.kind);if("drop"!==a)return l;return noIgnoredFiles(flatten(yield Promise.all(l.map(toFilePromises))))}return noIgnoredFiles(fromList(e.files).map(e=>toFileWithPath(e)))})}(e.dataTransfer,e.type):function isChangeEvt(e){return isObject(e)&&isObject(e.target)}(e)?function getInputFiles(e){return fromList(e.target.files).map(e=>toFileWithPath(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function getFsHandleFiles(e){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>toFileWithPath(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};zv.defaultProps=Bv,zv.propTypes={children:Av.func,accept:Av.objectOf(Av.arrayOf(Av.string)),multiple:Av.bool,preventDropOnDocument:Av.bool,noClick:Av.bool,noKeyboard:Av.bool,noDrag:Av.bool,noDragEventsBubbling:Av.bool,minSize:Av.number,maxSize:Av.number,maxFiles:Av.number,disabled:Av.bool,getFilesFromEvent:Av.func,onFileDialogCancel:Av.func,onFileDialogOpen:Av.func,useFsAccessApi:Av.bool,autoFocus:Av.bool,onDragEnter:Av.func,onDragLeave:Av.func,onDragOver:Av.func,onDrop:Av.func,onDropAccepted:Av.func,onDropRejected:Av.func,onError:Av.func,validator:Av.func};var qv={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=_objectSpread(_objectSpread({},Bv),e),l=a.accept,m=a.disabled,u=a.getFilesFromEvent,p=a.maxSize,f=a.minSize,g=a.multiple,h=a.maxFiles,y=a.onDragEnter,v=a.onDragLeave,E=a.onDragOver,x=a.onDrop,w=a.onDropAccepted,b=a.onDropRejected,N=a.onFileDialogCancel,_=a.onFileDialogOpen,k=a.useFsAccessApi,S=a.autoFocus,C=a.preventDropOnDocument,R=a.noClick,A=a.noKeyboard,T=a.noDrag,P=a.noDragEventsBubbling,D=a.onError,I=a.validator,F=Me.useMemo(function(){return function acceptPropAsAcceptAttr(e){if(isDefined(e))return Object.entries(e).reduce(function(e,a){var l=_slicedToArray$1(a,2),m=l[0],u=l[1];return[].concat(_toConsumableArray$1(e),[m],_toConsumableArray$1(u))},[]).filter(function(e){return isMIMEType(e)||isExt(e)}).join(",")}(l)},[l]),M=Me.useMemo(function(){return function pickerOptionsFromAccept(e){return isDefined(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var a=_slicedToArray$1(e,2),l=a[0],m=a[1],u=!0;return isMIMEType(l)||(console.warn('Skipped "'.concat(l,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),Array.isArray(m)&&m.every(isExt)||(console.warn('Skipped "'.concat(l,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(e,a){var l=_slicedToArray$1(a,2),m=l[0],u=l[1];return _objectSpread$1(_objectSpread$1({},e),{},_defineProperty$1({},m,u))},{})}]:e}(l)},[l]),j=Me.useMemo(function(){return"function"==typeof _?_:noop},[_]),O=Me.useMemo(function(){return"function"==typeof N?N:noop},[N]),L=Me.useRef(null),$=Me.useRef(null),z=_slicedToArray(Me.useReducer(reducer,qv),2),B=z[0],V=z[1],H=B.isFocused,W=B.isFileDialogActive,Z=Me.useRef("undefined"!=typeof window&&window.isSecureContext&&k&&function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}()),K=function onWindowFocus2(){!Z.current&&W&&setTimeout(function(){$.current&&($.current.files.length||(V({type:"closeDialog"}),O()))},300)};Me.useEffect(function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}},[$,W,O,Z]);var G=Me.useRef([]),Q=function onDocumentDrop2(e){L.current&&L.current.contains(e.target)||(e.preventDefault(),G.current=[])};Me.useEffect(function(){return C&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Q,!1)),function(){C&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Q))}},[L,C]),Me.useEffect(function(){return!m&&S&&L.current&&L.current.focus(),function(){}},[L,S,m]);var Y=Me.useCallback(function(e){D?D(e):console.error(e)},[D]),J=Me.useCallback(function(e){e.preventDefault(),e.persist(),pe(e),G.current=[].concat(_toConsumableArray(G.current),[e.target]),isEvtWithFiles(e)&&Promise.resolve(u(e)).then(function(a){if(!isPropagationStopped(e)||P){var l=a.length,m=l>0&&function allFilesAccepted(e){var a=e.files,l=e.accept,m=e.minSize,u=e.maxSize,p=e.multiple,f=e.maxFiles,g=e.validator;return!(!p&&a.length>1||p&&f>=1&&a.length>f)&&a.every(function(e){var a=_slicedToArray$1(fileAccepted(e,l),1)[0],p=_slicedToArray$1(fileMatchSize(e,m,u),1)[0],f=g?g(e):null;return a&&p&&!f})}({files:a,accept:F,minSize:f,maxSize:p,multiple:g,maxFiles:h,validator:I});V({isDragAccept:m,isDragReject:l>0&&!m,isDragActive:!0,type:"setDraggedFiles"}),y&&y(e)}}).catch(function(e){return Y(e)})},[u,y,Y,P,F,f,p,g,h,I]),X=Me.useCallback(function(e){e.preventDefault(),e.persist(),pe(e);var a=isEvtWithFiles(e);if(a&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(l){}return a&&E&&E(e),!1},[E,P]),ee=Me.useCallback(function(e){e.preventDefault(),e.persist(),pe(e);var a=G.current.filter(function(e){return L.current&&L.current.contains(e)}),l=a.indexOf(e.target);-1!==l&&a.splice(l,1),G.current=a,a.length>0||(V({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(e)&&v&&v(e))},[L,v,P]),te=Me.useCallback(function(e,a){var l=[],m=[];e.forEach(function(e){var a=_slicedToArray(fileAccepted(e,F),2),u=a[0],g=a[1],h=_slicedToArray(fileMatchSize(e,f,p),2),y=h[0],v=h[1],E=I?I(e):null;if(u&&y&&!E)l.push(e);else{var x=[g,v];E&&(x=x.concat(E)),m.push({file:e,errors:x.filter(function(e){return e})})}}),(!g&&l.length>1||g&&h>=1&&l.length>h)&&(l.forEach(function(e){m.push({file:e,errors:[jv]})}),l.splice(0)),V({acceptedFiles:l,fileRejections:m,isDragReject:m.length>0,type:"setFiles"}),x&&x(l,m,a),m.length>0&&b&&b(m,a),l.length>0&&w&&w(l,a)},[V,g,F,f,p,h,x,w,b,I]),ae=Me.useCallback(function(e){e.preventDefault(),e.persist(),pe(e),G.current=[],isEvtWithFiles(e)&&Promise.resolve(u(e)).then(function(a){isPropagationStopped(e)&&!P||te(a,e)}).catch(function(e){return Y(e)}),V({type:"reset"})},[u,te,Y,P]),re=Me.useCallback(function(){if(Z.current){V({type:"openDialog"}),j();var e={multiple:g,types:M};window.showOpenFilePicker(e).then(function(e){return u(e)}).then(function(e){te(e,null),V({type:"closeDialog"})}).catch(function(e){!function isAbort(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function isSecurityError(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?Y(e):(Z.current=!1,$.current?($.current.value=null,$.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(O(e),V({type:"closeDialog"}))})}else $.current&&(V({type:"openDialog"}),j(),$.current.value=null,$.current.click())},[V,j,O,k,te,Y,M,g]),oe=Me.useCallback(function(e){L.current&&L.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),re()))},[L,re]),le=Me.useCallback(function(){V({type:"focus"})},[]),ie=Me.useCallback(function(){V({type:"blur"})},[]),ce=Me.useCallback(function(){R||(!function isIeOrEdge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function isIe(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function isEdge(e){return-1!==e.indexOf("Edge/")}(e)}()?re():setTimeout(re,0))},[R,re]),me=function composeHandler2(e){return m?null:e},de=function composeKeyboardHandler2(e){return A?null:me(e)},ue=function composeDragHandler2(e){return T?null:me(e)},pe=function stopPropagation2(e){P&&e.stopPropagation()},fe=Me.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.refKey,l=void 0===a?"ref":a,u=e.role,p=e.onKeyDown,f=e.onFocus,g=e.onBlur,h=e.onClick,y=e.onDragEnter,v=e.onDragOver,E=e.onDragLeave,x=e.onDrop,w=_objectWithoutProperties(e,$v);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:de(composeEventHandlers(p,oe)),onFocus:de(composeEventHandlers(f,le)),onBlur:de(composeEventHandlers(g,ie)),onClick:me(composeEventHandlers(h,ce)),onDragEnter:ue(composeEventHandlers(y,J)),onDragOver:ue(composeEventHandlers(v,X)),onDragLeave:ue(composeEventHandlers(E,ee)),onDrop:ue(composeEventHandlers(x,ae)),role:"string"==typeof u&&""!==u?u:"presentation"},l,L),m||A?{}:{tabIndex:0}),w)}},[L,oe,le,ie,ce,J,X,ee,ae,A,T,m]),ge=Me.useCallback(function(e){e.stopPropagation()},[]),he=Me.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.refKey,l=void 0===a?"ref":a,m=e.onChange,u=e.onClick,p=_objectWithoutProperties(e,Uv);return _objectSpread(_objectSpread({},_defineProperty({accept:F,multiple:g,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:me(composeEventHandlers(m,ae)),onClick:me(composeEventHandlers(u,ge)),tabIndex:-1},l,$)),p)}},[$,l,g,ae,m]);return _objectSpread(_objectSpread({},B),{},{isFocused:H&&!m,getRootProps:fe,getInputProps:he,rootRef:L,inputRef:$,open:me(re)})}function reducer(e,a){switch(a.type){case"focus":return _objectSpread(_objectSpread({},e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},qv),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},e),{},{isDragActive:a.isDragActive,isDragAccept:a.isDragAccept,isDragReject:a.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},e),{},{acceptedFiles:a.acceptedFiles,fileRejections:a.fileRejections,isDragReject:a.isDragReject});case"reset":return _objectSpread({},qv);default:return e}}function noop(){}function PublicDocumentUpload({onFileUpload:e,disabled:a=!1,maxFileSize:l=10485760,allowedTypes:m=["application/pdf","image/jpeg","image/png","image/webp"]}){const[u,p]=Me.useState(null),[f,g]=Me.useState(null),h=Me.useCallback(e=>{if(e.size>l)return{valid:!1,error:`File size exceeds limit of ${Math.round(l/1048576)}MB`};if(!m.includes(e.type)){return{valid:!1,error:`File type not supported. Allowed types: ${m.map(e=>{switch(e){case"application/pdf":return"PDF";case"image/jpeg":return"JPEG";case"image/png":return"PNG";case"image/webp":return"WebP";default:return e}}).join(", ")}`}}return{valid:!0}},[l,m]),y=Me.useCallback((e,a)=>{if(g(null),a.length>0){const e=a[0];return void("file-too-large"===e.errors?.[0]?.code?g(`File size exceeds limit of ${Math.round(l/1048576)}MB`):"file-invalid-type"===e.errors?.[0]?.code?g("File type not supported"):g("File upload failed"))}if(e.length>0){const a=e[0],l=h(a);if(!l.valid)return void g(l.error||"File validation failed");p(a),g(null)}},[l,h]),{getRootProps:v,getInputProps:E,isDragActive:x}=useDropzone({onDrop:y,accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},maxSize:l,multiple:!1,disabled:a});return je.createElement("div",{className:"space-y-4"},je.createElement(ui,{className:cn("border-2 border-dashed transition-colors",x?"border-blue-500 bg-blue-50":"border-gray-300",a&&"opacity-50 cursor-not-allowed")},je.createElement(hi,{className:"p-8"},je.createElement("div",{...v(),className:cn("text-center cursor-pointer",a&&"cursor-not-allowed")},je.createElement("input",{...E()}),je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"flex justify-center"},je.createElement(Vr,{className:cn("h-12 w-12",x?"text-blue-500":"text-gray-400")})),je.createElement("div",null,je.createElement("h3",{className:"text-lg font-semibold text-gray-900"},x?"Drop your file here":"Upload Document"),je.createElement("p",{className:"text-gray-600 mt-2"},"Drag and drop your file here, or click to browse")),je.createElement("div",{className:"flex justify-center gap-2"},je.createElement(Badge,{variant:"secondary"},"PDF"),je.createElement(Badge,{variant:"secondary"},"JPEG"),je.createElement(Badge,{variant:"secondary"},"PNG"),je.createElement(Badge,{variant:"secondary"},"WebP")),je.createElement("p",{className:"text-sm text-gray-500"},"Maximum file size: ",Math.round(l/1048576),"MB"))))),f&&je.createElement(_i,{className:"border-red-200 bg-red-50"},je.createElement(Aa,{className:"h-4 w-4 text-red-600"}),je.createElement(ki,{className:"text-red-700"},f)),u&&je.createElement(ui,{className:"border-green-200 bg-green-50"},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center gap-3"},"application/pdf"===(w=u.type)?je.createElement(Ha,{className:"h-8 w-8 text-red-500"}):w.startsWith("image/")?je.createElement(Ha,{className:"h-8 w-8 text-blue-500"}):je.createElement(Ha,{className:"h-8 w-8 text-gray-500"}),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},u.name),je.createElement("p",{className:"text-sm text-gray-600"},(e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]})(u.size),"  ",u.type)),je.createElement(Ta,{className:"h-5 w-5 text-green-600"})),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>{p(null),g(null)},className:"text-gray-500 hover:text-gray-700"},je.createElement(Gr,{className:"h-4 w-4"}))))),u&&je.createElement("div",{className:"flex justify-center"},je.createElement(Uo,{onClick:()=>{u&&e(u)},disabled:a,className:"px-8 py-2 bg-blue-600 hover:bg-blue-700"},"Analyze Document")),je.createElement("div",{className:"text-sm text-gray-600 space-y-2"},je.createElement("h4",{className:"font-medium text-gray-900"},"Upload Guidelines:"),je.createElement("ul",{className:"space-y-1 list-disc list-inside"},je.createElement("li",null,"Ensure document text is clear and readable"),je.createElement("li",null,"For best results, use high-resolution scans"),je.createElement("li",null,"Documents are automatically deleted after 24 hours"),je.createElement("li",null,"No personal information is stored permanently"))));var w}const Vv=new class PublicDocumentAnalysisService{constructor(){__publicField(this,"config",ci)}async checkRateLimit(e){try{const{data:a,error:l}=await Mo.functions.invoke("public-rate-limiter",{body:{ipAddress:e,action:"check"}});return l?(console.error("Rate limiter error:",l),{allowed:!1,remaining:{hourly:0,daily:0},resetTime:{hourly:new Date,daily:new Date},message:"Unable to verify rate limit. Please try again."}):{allowed:a.allowed,remaining:a.remaining,resetTime:{hourly:new Date(a.resetTime.hourly),daily:new Date(a.resetTime.daily)},message:a.message}}catch(a){return console.error("Rate limit check failed:",a),{allowed:!1,remaining:{hourly:0,daily:0},resetTime:{hourly:new Date,daily:new Date},message:"Rate limit check failed. Please try again."}}}async getOrCreateSession(e,a){const l=new Date,m=new Date(l.getTime()+this.config.rateLimits.sessionDuration),{data:u}=await Mo.from("public_analysis_sessions").select("*").eq("ip_address",e).gt("expires_at",l.toISOString()).order("created_at",{ascending:!1}).limit(1).single();if(u)return{id:u.id,ipAddress:u.ip_address,userAgent:u.user_agent,documentsAnalyzed:u.documents_analyzed,createdAt:new Date(u.created_at),expiresAt:new Date(u.expires_at),totalStorageUsed:u.total_storage_used};const{data:p,error:f}=await Mo.from("public_analysis_sessions").insert({ip_address:e,user_agent:a,documents_analyzed:0,expires_at:m.toISOString(),total_storage_used:0}).select().single();if(f)throw new Error(`Failed to create session: ${f.message}`);return{id:p.id,ipAddress:p.ip_address,userAgent:p.user_agent,documentsAnalyzed:p.documents_analyzed,createdAt:new Date(p.created_at),expiresAt:new Date(p.expires_at),totalStorageUsed:p.total_storage_used}}validateFile(e){return e.size>this.config.rateLimits.maxFileSize?{valid:!1,error:`File size exceeds limit of ${this.config.rateLimits.maxFileSize/1048576}MB`}:this.config.rateLimits.allowedFileTypes.includes(e.type)?{valid:!0}:{valid:!1,error:`File type ${e.type} is not supported. Allowed types: PDF, JPEG, PNG, WebP`}}async analyzeDocument(e,a,l){const m=this.validateFile(e);if(!m.valid)throw new Error(m.error);const u=await this.checkRateLimit(l);if(!u.allowed)throw new Error(u.message||"Rate limit exceeded");try{const m=await this.fileToBase64(e),{data:u,error:p}=await Mo.functions.invoke("public-document-analysis",{body:{sessionId:a,ipAddress:l,filename:e.name,fileSize:e.size,fileType:e.type,fileContent:m}});if(p)throw new Error(`Analysis service error: ${p.message}`);if(!u.success)throw new Error(u.error??"Analysis failed");const f=await this.getAnalysisResult(u.analysisId);if(!f)throw new Error("Failed to retrieve analysis result");return f}catch(p){throw console.error("Error analyzing document:",p),new Error(`Analysis failed: ${p instanceof Error?p.message:"Unknown error"}`)}}async fileToBase64(e){return new Promise((a,l)=>{const m=new FileReader;m.onload=()=>{const e=m.result.split(",")[1];a(e)},m.onerror=()=>l(new Error("Failed to read file")),m.readAsDataURL(e)})}async getAnalysisResult(e){const{data:a,error:l}=await Mo.from("public_document_analyses").select("*").eq("id",e).gt("expires_at",(new Date).toISOString()).single();return l||!a?null:{id:a.id,sessionId:a.session_id,filename:a.filename,fileSize:a.file_size,fileType:a.file_type,analysisResult:a.analysis_result,createdAt:new Date(a.created_at),expiresAt:new Date(a.expires_at)}}async cleanupExpiredData(){const e=(new Date).toISOString();await Mo.from("public_document_analyses").delete().lt("expires_at",e),await Mo.from("public_analysis_sessions").delete().lt("expires_at",e)}};const Hv=new class PublicAnalyticsService{constructor(){__publicField(this,"sessionId",null),__publicField(this,"sessionStartTime",Date.now())}async initializeSession(){return this.sessionId||(this.sessionId=crypto.randomUUID(),this.sessionStartTime=Date.now(),await this.trackEvent("session_start",{timestamp:(new Date).toISOString(),user_agent:navigator.userAgent,screen_resolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language})),this.sessionId}async trackEvent(e,a={}){try{return void console.log(" Analytics disabled - would track:",e,a)}catch(l){console.error("Failed to track event:",l)}}async trackPageView(e,a={}){await this.trackEvent("page_view",{page_name:e,...a})}async trackDocumentUpload(e,a,l){await this.trackEvent("document_upload",{file_size:e,file_type:a,file_name_length:l.length,file_extension:l.split(".").pop()?.toLowerCase()})}async trackAnalysisComplete(e,a,l,m){await this.trackEvent("analysis_complete",{analysis_id:e,processing_time:a,document_type:l,text_length:m})}async trackConversion(e,a={}){await this.trackEvent("conversion",{conversion_type:e,...a})}async trackInteraction(e,a,l={}){await this.trackEvent("user_interaction",{interaction_type:e,element:a,...l})}async trackError(e,a,l={}){await this.trackEvent("error",{error_type:e,error_message:a,...l})}async trackRateLimit(e,a){await this.trackEvent("rate_limit_hit",{limit_type:e,remaining_quota:a})}async getConversionFunnel(e){try{const{data:a,error:l}=await Mo.rpc("get_conversion_funnel",{start_date:e.start,end_date:e.end});return l?(console.error("Error getting conversion funnel:",l),[]):a||[]}catch(a){return console.error("Failed to get conversion funnel:",a),[]}}async getUsageMetrics(e){try{const{data:a,error:l}=await Mo.rpc("get_usage_metrics",{start_date:e.start,end_date:e.end});return l?(console.error("Error getting usage metrics:",l),null):a}catch(a){return console.error("Failed to get usage metrics:",a),null}}async getClientIP(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch{return"127.0.0.1"}}async sendToExternalAnalytics(e){try{"undefined"!=typeof gtag&&gtag("event",e.event_type,{custom_parameter_1:JSON.stringify(e.event_data),session_id:e.session_id}),"undefined"!=typeof posthog&&posthog.capture(e.event_type,{...e.event_data,session_id:e.session_id,ip_address:e.ip_address}),"undefined"!=typeof mixpanel&&mixpanel.track(e.event_type,{...e.event_data,session_id:e.session_id})}catch(a){console.error("Failed to send to external analytics:",a)}}async trackSessionEnd(){this.sessionId&&await this.trackEvent("session_end",{session_duration:Date.now()-this.sessionStartTime})}getSessionId(){return this.sessionId}resetSession(){this.sessionId=null,this.sessionStartTime=Date.now()}};function PublicAnalysis(){const e=useNavigate(),{analysisState:a,rateLimitStatus:l,analyzeDocument:m}=function usePublicDocumentAnalysis(e={}){const{autoCheckRateLimit:a=!0,rateLimitCheckInterval:l=6e4}=e,m=useQueryClient(),[u,p]=Me.useState({isAnalyzing:!1,progress:0,error:null,currentAnalysis:null}),f=Me.useCallback(async()=>{try{const e=await fetch("https://api.ipify.org?format=json");if(!e?.ok)return console.warn("Failed to get IP address, using fallback"),"127.0.0.1";const a=await e.json();return a?.ip??"127.0.0.1"}catch{return"127.0.0.1"}},[]);Me.useEffect(()=>{Hv.initializeSession(),Hv.trackPageView("public_analysis")},[]);const{data:g,error:h,refetch:y,isLoading:v}=useQuery({queryKey:["publicRateLimit"],queryFn:async()=>{const e=await f(),a=await Vv.checkRateLimit(e);return a.allowed||await Hv.trackRateLimit(0===a.remaining.hourly?"hourly":"daily",a.remaining.hourly+a.remaining.daily),a},enabled:a,refetchInterval:l,staleTime:3e4,retry:2}),E=useMutation({mutationFn:async()=>{const e=await f(),a=navigator.userAgent;return Vv.getOrCreateSession(e,a)},onError:e=>{console.error("Session creation failed:",e),p(e=>({...e,error:"Failed to create analysis session"}))}}),x=useMutation({mutationFn:async({file:e,session:a,startTime:l})=>{const m=await f();await Hv.trackDocumentUpload(e.size,e.type,e.name);const u=await Vv.analyzeDocument(e,a.id,m),p=Date.now()-l;return await Hv.trackAnalysisComplete(u.id,p,u.analysisResult.documentType,u.analysisResult.textLength),u},onSuccess:e=>{p(a=>({...a,currentAnalysis:e,isAnalyzing:!1,progress:100,error:null})),m.invalidateQueries({queryKey:["publicRateLimit"]})},onError:e=>{console.error("Analysis failed:",e),Hv.trackError("analysis_failed",e instanceof Error?e.message:"Unknown error"),p(a=>({...a,isAnalyzing:!1,progress:0,error:e instanceof Error?e.message:"Analysis failed"}))}}),w=Me.useCallback(async e=>{try{return await Vv.getAnalysisResult(e)}catch(a){return console.error("Failed to get analysis result:",a),null}},[]),b=Me.useCallback(async e=>{const a=Date.now();p(e=>({...e,isAnalyzing:!0,progress:0,error:null,currentAnalysis:null}));try{await Hv.trackEvent("analysis_started",{file_size:e.size,file_type:e.type,file_name_length:e.name.length});const l=Vv.validateFile(e);if(!l.valid)throw await Hv.trackError("validation_failed",l.error||"File validation failed"),new Error(l.error);p(e=>({...e,progress:10}));const m=await f(),u=await Vv.checkRateLimit(m);if(!u.allowed)throw await Hv.trackRateLimit(0===u.remaining.hourly?"hourly":"daily",u.remaining.hourly+u.remaining.daily),new Error(u.message||"Rate limit exceeded");p(e=>({...e,progress:20}));const g=await E.mutateAsync();return p(e=>({...e,progress:40})),await x.mutateAsync({file:e,session:g,startTime:a})}catch(l){const e=l instanceof Error?l.message:"Analysis failed";throw p(a=>({...a,isAnalyzing:!1,progress:0,error:e})),l}},[E,x,f]),N=Me.useCallback(()=>{p({isAnalyzing:!1,progress:0,error:null,currentAnalysis:null})},[]),_=Me.useCallback(()=>!!g&&g.allowed&&!u.isAnalyzing,[g,u.isAnalyzing]),k=Me.useCallback(()=>g?g.remaining:{hourly:0,daily:0},[g]);return Me.useEffect(()=>{u.currentAnalysis&&!u.isAnalyzing&&y()},[u.currentAnalysis,u.isAnalyzing,y]),{analysisState:u,rateLimitStatus:g,isCheckingRateLimit:v,rateLimitError:h,analyzeDocument:b,getAnalysisResult:w,resetAnalysis:N,refetchRateLimit:y,canAnalyze:_,getRemainingUsage:k,getUserIP:f,isCreatingSession:E.isPending,isAnalyzing:x.isPending||u.isAnalyzing}}(),u=Me.useCallback(async a=>{try{const l=await m(a);setTimeout(()=>{e(`${ii.publicAnalysisResult}/${l.id}`)},500)}catch(dE){console.error("Analysis error:",dE)}},[m,e]),p=[{icon:Ha,title:"Text Extraction",description:"Extract text from PDFs and images using advanced OCR technology"},{icon:Qr,title:"Quick Analysis",description:"Get document summary and key insights in seconds"},{icon:Ir,title:"Secure & Private",description:"Documents are automatically deleted after 24 hours"},{icon:Fa,title:"No Registration",description:"Start analyzing immediately without creating an account"}],f=["Advanced legal insights and compliance checks","Entity extraction and risk assessment","Unlimited document analysis","Permanent document storage","AI-powered legal Q&A","Custom document templates"];return je.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"text-center mb-12"},je.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Free Document Analysis"),je.createElement("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto"},"Upload your legal documents and get instant analysis with our AI-powered platform. No registration required.")),je.createElement("div",{className:"grid lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-2"},je.createElement(ui,{className:"shadow-lg"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Ha,{className:"h-5 w-5"}),"Upload Document"),je.createElement(gi,null,"Upload a PDF or image file to get started with free document analysis")),je.createElement(hi,null,a.error&&je.createElement(_i,{className:"mb-6 border-red-200 bg-red-50"},je.createElement(ki,{className:"text-red-700"},a.error)),l&&!l.allowed&&je.createElement(_i,{className:"mb-6 border-orange-200 bg-orange-50"},je.createElement(ki,{className:"text-orange-700"},je.createElement("div",{className:"space-y-2"},je.createElement("p",null,l.message),je.createElement("div",{className:"text-sm"},je.createElement("p",null,"Remaining today: ",l.remaining.daily," documents"),je.createElement("p",null,"Remaining this hour: ",l.remaining.hourly," documents"))))),a.isAnalyzing&&je.createElement("div",{className:"mb-6 space-y-3"},je.createElement("div",{className:"flex items-center justify-between text-sm"},je.createElement("span",null,"Analyzing document..."),je.createElement("span",null,a.progress,"%")),je.createElement(sv,{value:a.progress,className:"h-2"})),je.createElement(PublicDocumentUpload,{onFileUpload:u,disabled:a.isAnalyzing||l&&!l.allowed,maxFileSize:ci.rateLimits.maxFileSize,allowedTypes:ci.rateLimits.allowedFileTypes}),l?.allowed&&je.createElement("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg"},je.createElement("div",{className:"text-sm text-blue-700"},je.createElement("p",{className:"font-medium"},"Usage Remaining:"),je.createElement("div",{className:"mt-1 space-y-1"},je.createElement("p",null,"This hour: ",l.remaining.hourly," documents"),je.createElement("p",null,"Today: ",l.remaining.daily," documents")))))),je.createElement("div",{className:"mt-8 grid md:grid-cols-2 gap-4"},p.map(e=>je.createElement(ui,{key:e.title,className:"border-l-4 border-l-blue-500"},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex items-start gap-3"},je.createElement(e.icon,{className:"h-5 w-5 text-blue-600 mt-0.5"}),je.createElement("div",null,je.createElement("h3",{className:"font-semibold text-gray-900"},e.title),je.createElement("p",{className:"text-sm text-gray-600 mt-1"},e.description)))))))),je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"Free Analysis Includes")),je.createElement(hi,{className:"space-y-3"},["Basic text extraction and summary only","Limited to 3 documents per hour, 10 per day","Maximum file size: 10MB","Documents deleted after 24 hours"].map(e=>je.createElement("div",{key:e,className:"flex items-start gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),je.createElement("span",{className:"text-sm text-gray-600"},e))))),je.createElement(ui,{className:"border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100"},je.createElement(pi,null,je.createElement(fi,{className:"text-lg text-blue-900"},"Unlock Advanced Features"),je.createElement(gi,{className:"text-blue-700"},"Get unlimited access and advanced legal insights")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-2"},f.slice(0,4).map(e=>je.createElement("div",{key:e,className:"flex items-start gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),je.createElement("span",{className:"text-sm text-blue-800"},e))),f.length>4&&je.createElement("p",{className:"text-sm text-blue-700 font-medium"},"+",f.length-4," more features")),je.createElement(Wu,null),je.createElement("div",{className:"space-y-3"},je.createElement(Uo,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{Hv.trackInteraction("button_click","view_pricing_from_public_analysis"),e(ii.pricing)}},"View Pricing Plans",je.createElement(ia,{className:"ml-2 h-4 w-4"})),je.createElement(Uo,{variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>{Hv.trackInteraction("button_click","create_account_from_public_analysis"),e(ii.register)}},"Create Free Account")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"File Requirements")),je.createElement(hi,{className:"space-y-3"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Supported Formats"),je.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},je.createElement(Badge,{variant:"secondary"},"PDF"),je.createElement(Badge,{variant:"secondary"},"JPEG"),je.createElement(Badge,{variant:"secondary"},"PNG"),je.createElement(Badge,{variant:"secondary"},"WebP"))),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Size Limit"),je.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Maximum 10MB per file")),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Privacy"),je.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Files are automatically deleted after 24 hours"))))))))}function PublicAnalysisResult(){const{analysisId:e}=useParams(),a=useNavigate(),{data:l,isLoading:m,error:u}=function usePublicAnalysisResult(e){return useQuery({queryKey:["publicAnalysisResult",e],queryFn:()=>{if(!e)throw new Error("Analysis ID is required");return Vv.getAnalysisResult(e)},enabled:!!e,retry:2,staleTime:3e5})}(e),p=[{icon:jr,title:"Advanced Legal Insights",description:"Get detailed legal analysis, risk assessment, and compliance checks"},{icon:Qr,title:"Unlimited Analysis",description:"Analyze unlimited documents without rate limits or file size restrictions"},{icon:Ir,title:"Secure Storage",description:"Permanent document storage with enterprise-grade security"},{icon:Wr,title:"Team Collaboration",description:"Share documents and collaborate with team members"}];if(m)return je.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(hi,{className:"p-8 text-center"},je.createElement("div",{className:"space-y-4"},je.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),je.createElement("h3",{className:"text-lg font-semibold"},"Loading Analysis Results..."),je.createElement("p",{className:"text-gray-600"},"Please wait while we retrieve your document analysis.")))));if(u||!l)return je.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(hi,{className:"p-8 text-center"},je.createElement(Aa,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Analysis Not Found"),je.createElement("p",{className:"text-gray-600 mb-6"},u?.message??"The analysis you're looking for doesn't exist or has expired."),je.createElement(Uo,{onClick:()=>a(ii.publicAnalysis)},"Analyze New Document"))));const f=(e=>{const a=new Date,l=e.getTime()-a.getTime(),m=Math.floor(l/36e5),u=Math.floor(l%36e5/6e4);return m>0?`${m}h ${u}m`:u>0?`${u}m`:"Expired"})(l.expiresAt),g=new Date>l.expiresAt;return je.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"text-center mb-8"},je.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Document Analysis Complete"),je.createElement("p",{className:"text-gray-600"},"Here are the results from your free document analysis")),je.createElement("div",{className:"grid lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-2 space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Ha,{className:"h-5 w-5"}),"Document Information")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid md:grid-cols-2 gap-4"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Filename"),je.createElement("p",{className:"text-gray-600"},l.filename)),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"File Size"),je.createElement("p",{className:"text-gray-600"},(e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]})(l.fileSize))),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Document Type"),je.createElement(Badge,{variant:"secondary"},l.analysisResult.documentType)),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900"},"Text Length"),je.createElement("p",{className:"text-gray-600"},l.analysisResult.textLength.toLocaleString()," characters"))),!g&&je.createElement(_i,{className:"border-orange-200 bg-orange-50"},je.createElement(Fa,{className:"h-4 w-4 text-orange-600"}),je.createElement(ki,{className:"text-orange-700"},"This analysis will expire in ",f,". Results are automatically deleted after 24 hours.")),g&&je.createElement(_i,{className:"border-red-200 bg-red-50"},je.createElement(Aa,{className:"h-4 w-4 text-red-600"}),je.createElement(ki,{className:"text-red-700"},"This analysis has expired and will be deleted soon.")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Document Summary"),je.createElement(gi,null,"AI-generated summary and key insights from your document")),je.createElement(hi,{className:"space-y-6"},je.createElement("div",null,je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("h4",{className:"font-medium text-gray-900"},"Text Extraction Quality"),je.createElement("span",{className:"text-sm text-gray-600"},Math.round(100*l.analysisResult.ocrQuality),"%")),je.createElement(sv,{value:100*l.analysisResult.ocrQuality,className:"h-2"})),je.createElement(Wu,null),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-3"},"Document Summary"),je.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},je.createElement("p",{className:"text-gray-700 leading-relaxed"},l.analysisResult.summary))),je.createElement(Wu,null),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-3"},"Key Terms"),je.createElement("div",{className:"flex flex-wrap gap-2"},l.analysisResult.keyWords.map(e=>je.createElement(Badge,{key:e,variant:"outline"},e)))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Next Steps")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid md:grid-cols-2 gap-4"},je.createElement(Uo,{onClick:()=>a(ii.publicAnalysis),variant:"outline",className:"w-full"},"Analyze Another Document"),je.createElement(Uo,{onClick:()=>a(ii.register),className:"w-full bg-blue-600 hover:bg-blue-700"},"Create Free Account",je.createElement(ia,{className:"ml-2 h-4 w-4"})))))),je.createElement("div",{className:"space-y-6"},je.createElement(ui,{className:"border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100"},je.createElement(pi,null,je.createElement(fi,{className:"text-blue-900"},"Unlock Advanced Analysis"),je.createElement(gi,{className:"text-blue-700"},"Get deeper insights with our premium features")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-3"},p.map(e=>je.createElement("div",{key:e.title,className:"flex items-start gap-3"},je.createElement(e.icon,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-blue-900"},e.title),je.createElement("p",{className:"text-sm text-blue-700"},e.description))))),je.createElement(Wu,null),je.createElement("div",{className:"space-y-3"},je.createElement(Uo,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>a(ii.pricing)},"View Pricing Plans",je.createElement(ia,{className:"ml-2 h-4 w-4"})),je.createElement(Uo,{variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",onClick:()=>a(ii.register)},"Start Free Trial")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"text-lg"},"What You're Missing")),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex items-center gap-2 text-gray-500"},je.createElement(Gr,{className:"h-4 w-4"}),je.createElement("span",{className:"text-sm"},"Legal entity extraction")),je.createElement("div",{className:"flex items-center gap-2 text-gray-500"},je.createElement(Gr,{className:"h-4 w-4"}),je.createElement("span",{className:"text-sm"},"Risk assessment")),je.createElement("div",{className:"flex items-center gap-2 text-gray-500"},je.createElement(Gr,{className:"h-4 w-4"}),je.createElement("span",{className:"text-sm"},"Compliance checking")),je.createElement("div",{className:"flex items-center gap-2 text-gray-500"},je.createElement(Gr,{className:"h-4 w-4"}),je.createElement("span",{className:"text-sm"},"Document comparison")),je.createElement("div",{className:"flex items-center gap-2 text-gray-500"},je.createElement(Gr,{className:"h-4 w-4"}),je.createElement("span",{className:"text-sm"},"Export to Word/PDF")))))))))}function Skeleton({className:e,...a}){return React.createElement("div",{className:cn("animate-pulse rounded-md bg-muted",e),...a})}"undefined"!=typeof window&&(window.addEventListener("beforeunload",()=>{Hv.trackSessionEnd()}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?Hv.trackEvent("page_hidden"):Hv.trackEvent("page_visible")}));const Wv=new class TemplateMarketplaceService{constructor(){__publicField(this,"config",mi)}async getCategories(){const{data:e,error:a}=await Mo.from("template_categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(a)throw new Error(`Failed to fetch categories: ${a.message}`);return this.transformCategories(e||[])}async searchTemplates(e={}){let a=Mo.from("templates").select("\n        *,\n        category:template_categories(id, name, slug, description, icon)\n      ").eq("is_active",!0);switch(e.categoryId&&(a=a.eq("category_id",e.categoryId)),e.subcategory&&(a=a.eq("subcategory",e.subcategory)),e.accessLevel&&(a=a.eq("access_level",e.accessLevel)),e.priceRange&&(a=a.gte("price_sgd",e.priceRange.min).lte("price_sgd",e.priceRange.max)),e.tags&&e.tags.length>0&&(a=a.overlaps("tags",e.tags)),e.legalAreas&&e.legalAreas.length>0&&(a=a.overlaps("legal_areas",e.legalAreas)),e.minRating&&(a=a.gte("rating_average",e.minRating)),e.sortBy){case"popularity":a=a.order("download_count",{ascending:!1});break;case"rating":a=a.order("rating_average",{ascending:!1});break;case"newest":a=a.order("created_at",{ascending:!1});break;case"price_low":a=a.order("price_sgd",{ascending:!0});break;case"price_high":a=a.order("price_sgd",{ascending:!1});break;default:a=a.order("is_featured",{ascending:!1}).order("download_count",{ascending:!1})}const l=e.limit||20,m=e.offset||0;a=a.range(m,m+l-1);const{data:u,error:p,count:f}=await a;if(p)throw new Error(`Failed to search templates: ${p.message}`);const{count:g}=await Mo.from("templates").select("*",{count:"exact",head:!0}).eq("is_active",!0),h=g||0;return{templates:this.transformTemplates(u||[]),total:h,hasMore:m+l<h,filters:await this.getFilterAggregations(e)}}async getTemplate(e){const{data:a,error:l}=await Mo.from("templates").select("\n        *,\n        category:template_categories(id, name, slug, description, icon)\n      ").or(`id.eq.${e},slug.eq.${e}`).eq("is_active",!0).single();if(l){if("PGRST116"===l.code)return null;throw new Error(`Failed to fetch template: ${l.message}`)}return this.transformTemplate(a)}async getTemplateBySlug(e){return this.getTemplate(e)}async getFeaturedTemplates(e=6){const{data:a,error:l}=await Mo.from("templates").select("\n        *,\n        category:template_categories(id, name, slug, description, icon)\n      ").eq("is_active",!0).eq("is_featured",!0).order("download_count",{ascending:!1}).limit(e);if(l)throw new Error(`Failed to fetch featured templates: ${l.message}`);return this.transformTemplates(a||[])}async getPopularTemplates(e,a,l=10){const{data:m,error:u}=await Mo.rpc("get_popular_templates",{limit_count:l,category_filter:e||null,access_level_filter:a||null});if(u)throw new Error(`Failed to fetch popular templates: ${u.message}`);return this.transformPopularTemplates(m||[])}async createCustomization(e,a,l,m){const{data:u,error:p}=await Mo.from("template_customizations").insert({template_id:e,user_id:l,session_id:m,custom_fields:a,status:"draft"}).select().single();if(p)throw new Error(`Failed to create customization: ${p.message}`);return this.transformCustomization(u)}async updateCustomization(e,a){const{data:l,error:m}=await Mo.from("template_customizations").update({custom_fields:a.customFields,generated_content:a.generatedContent,generated_html:a.generatedHtml,generated_pdf_url:a.generatedPdfUrl,status:a.status,error_message:a.errorMessage,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(m)throw new Error(`Failed to update customization: ${m.message}`);return this.transformCustomization(l)}async getUserCustomizations(e){const{data:a,error:l}=await Mo.from("template_customizations").select("\n        *,\n        template:templates(id, title, slug)\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(l)throw new Error(`Failed to fetch customizations: ${l.message}`);return this.transformCustomizations(a||[])}async recordDownload(e,a,l="pdf",m,u){const{error:p}=await Mo.from("template_downloads").insert({template_id:e,customization_id:a,user_id:m,session_id:u,format:l,ip_address:await this.getClientIP(),user_agent:navigator.userAgent});p&&console.error("Failed to record download:",p)}async rateTemplate(e,a,l,m){const{error:u}=await Mo.from("template_ratings").upsert({template_id:e,user_id:a,rating:l,review:m,updated_at:(new Date).toISOString()});if(u)throw new Error(`Failed to rate template: ${u.message}`)}async getTemplateRatings(e){const{data:a,error:l}=await Mo.from("template_ratings").select("\n        *,\n        user:profiles(id, email, first_name, last_name, avatar_url)\n      ").eq("template_id",e).order("created_at",{ascending:!1});if(l)throw new Error(`Failed to fetch template ratings: ${l.message}`);return a||[]}async getUserTemplateRating(e,a){const{data:l,error:m}=await Mo.from("template_ratings").select("*").eq("template_id",e).eq("user_id",a).single();if(m&&"PGRST116"!==m.code)throw new Error(`Failed to fetch user rating: ${m.message}`);return l}async trackEvent(e,a,l={},m,u){const{error:p}=await Mo.from("template_analytics").insert({template_id:e,event_type:a,event_data:l,user_id:m,session_id:u,ip_address:await this.getClientIP(),user_agent:navigator.userAgent});p&&console.error("Failed to track analytics event:",p)}transformCategories(e){return e.map(e=>({id:e.id,name:e.name,slug:e.slug,description:e.description,icon:e.icon,parentId:e.parent_id,sortOrder:e.sort_order,isActive:e.is_active}))}transformTemplates(e){return e.map(e=>this.transformTemplate(e))}transformTemplate(e){return{id:e.id,title:e.title,slug:e.slug,description:e.description,categoryId:e.category_id,subcategory:e.subcategory,content:e.content,fields:e.fields,previewHtml:e.preview_html,previewPdfUrl:e.preview_pdf_url,accessLevel:e.access_level,priceSgd:parseFloat(e.price_sgd||"0"),jurisdiction:e.jurisdiction,legalAreas:e.legal_areas||[],complianceTags:e.compliance_tags||[],downloadCount:e.download_count,ratingAverage:parseFloat(e.rating_average||"0"),ratingCount:e.rating_count,createdBy:e.created_by,isActive:e.is_active,isFeatured:e.is_featured,tags:e.tags||[],language:e.language,version:e.version,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),category:e.category?{id:e.category.id,name:e.category.name,slug:e.category.slug,description:e.category.description,icon:e.category.icon,sortOrder:0,isActive:!0}:void 0}}transformPopularTemplates(e){return e.map(e=>({id:e.template_id,title:e.title,slug:"",description:e.description,categoryId:"",content:{},fields:[],accessLevel:"public",priceSgd:0,jurisdiction:"Singapore",legalAreas:[],complianceTags:[],downloadCount:e.download_count,ratingAverage:parseFloat(e.rating_average||"0"),ratingCount:e.rating_count,isActive:!0,isFeatured:!1,tags:[],language:"en",version:1,createdAt:new Date,updatedAt:new Date,category:{id:"",name:e.category_name,slug:"",sortOrder:0,isActive:!0}}))}transformCustomization(e){return{id:e.id,templateId:e.template_id,userId:e.user_id,sessionId:e.session_id,customFields:e.custom_fields,generatedContent:e.generated_content,generatedHtml:e.generated_html,generatedPdfUrl:e.generated_pdf_url,status:e.status,errorMessage:e.error_message,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}transformCustomizations(e){return e.map(e=>this.transformCustomization(e))}async getFilterAggregations(e){return{categories:[],priceRanges:[],tags:[]}}async getClientIP(){try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch{return"127.0.0.1"}}},Zv={employment:Ea,business:wa,property:er,family:Wr,"intellectual-property":nr,compliance:Ir};function TemplateBrowser(){const e=useNavigate(),[a,l]=useSearchParams(),[m,u]=Me.useState([]),[p,f]=Me.useState([]),[g,h]=Me.useState([]),[y,v]=Me.useState(!0),[E,x]=Me.useState(!1),[w,b]=Me.useState(null),[N,_]=Me.useState("grid"),[k,S]=Me.useState(!1),C=Array.isArray(p)?p:[],[R,A]=Me.useState(a.get("q")||""),[T,P]=Me.useState(a.get("category")||""),[D,I]=Me.useState(a.get("access")||""),[F,M]=Me.useState(a.get("sort")||"popularity"),[j,O]=Me.useState(Number(a.get("rating"))||0),[L,$]=Me.useState(!0),[z,B]=Me.useState(0),[V,H]=Me.useState(0);Me.useEffect(()=>{loadInitialData()},[]),Me.useEffect(()=>{const e={query:R||void 0,categoryId:T||void 0,accessLevel:D||void 0,sortBy:F,minRating:j||void 0,limit:20,offset:0};H(0),searchTemplates(e),updateSearchParams()},[R,T,D,F,j]);const loadInitialData=async()=>{try{v(!0);const[e,a]=await Promise.all([Wv.getCategories(),Wv.getFeaturedTemplates(6)]);f(e),h(a)}catch(dE){b(dE instanceof Error?dE.message:"Failed to load data")}finally{v(!1)}},searchTemplates=async e=>{try{x(!0);const a=await Wv.searchTemplates(e);u(a.templates),B(a.total),$(a.hasMore)}catch(dE){b(dE instanceof Error?dE.message:"Search failed")}finally{x(!1)}},updateSearchParams=()=>{const e=new URLSearchParams;R&&e.set("q",R),T&&e.set("category",T),D&&e.set("access",D),"popularity"!==F&&e.set("sort",F),j>0&&e.set("rating",j.toString()),l(e)},W=Me.useCallback(e=>{A(e)},[]),handleTemplateClick=a=>{Wv.trackEvent(a.id,"template_view",{source:"browser",category:a.category?.name,access_level:a.accessLevel}),e(`${ii.templatePreview}/${a.slug}`)},formatPrice=e=>null==e||isNaN(e)||0===e?"Free":`S$${e.toFixed(2)}`,renderStars=e=>Array.from({length:5},(a,l)=>je.createElement(jr,{key:l,className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")})),getCategoryIcon=e=>{const a=Zv[e];return a?je.createElement(a,{className:"h-5 w-5"}):je.createElement(Ea,{className:"h-5 w-5"})};return y?je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"space-y-8"},je.createElement(Skeleton,{className:"h-12 w-full max-w-md mx-auto"}),je.createElement("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-6"},Array.from({length:8}).map((e,a)=>je.createElement(Skeleton,{key:`loading-${a}`,className:"h-64 w-full"})))))):je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"text-center mb-12"},je.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Legal Document Templates"),je.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Browse our comprehensive collection of Singapore-specific legal document templates. Customize, download, and use with confidence.")),je.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-8"},je.createElement("div",{className:"flex flex-col lg:flex-row gap-4 items-center"},je.createElement("div",{className:"relative flex-1 max-w-md"},je.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),je.createElement(zo,{placeholder:"Search templates...",value:R,onChange:e=>W(e.target.value),className:"pl-10"})),je.createElement(Zc,{value:T||"all",onValueChange:e=>P("all"===e?"":e)},je.createElement(Gc,{className:"w-full lg:w-48"},je.createElement(Kc,{placeholder:"All Categories"})),je.createElement(Jc,null,je.createElement(Xc,{value:"all"},"All Categories"),C.map(e=>e&&e.id&&e.name?je.createElement(Xc,{key:e.id,value:e.id},je.createElement("div",{className:"flex items-center gap-2"},getCategoryIcon(e.slug),e.name)):null))),je.createElement(Zc,{value:D||"all",onValueChange:e=>I("all"===e?"":e)},je.createElement(Gc,{className:"w-full lg:w-32"},je.createElement(Kc,{placeholder:"All"})),je.createElement(Jc,null,je.createElement(Xc,{value:"all"},"All"),je.createElement(Xc,{value:"public"},"Free"),je.createElement(Xc,{value:"premium"},"Premium"),je.createElement(Xc,{value:"enterprise"},"Enterprise"))),je.createElement(Zc,{value:F,onValueChange:M},je.createElement(Gc,{className:"w-full lg:w-40"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"popularity"},"Most Popular"),je.createElement(Xc,{value:"rating"},"Highest Rated"),je.createElement(Xc,{value:"newest"},"Newest"),je.createElement(Xc,{value:"price_low"},"Price: Low to High"),je.createElement(Xc,{value:"price_high"},"Price: High to Low"))),je.createElement("div",{className:"flex border rounded-lg"},je.createElement(Uo,{variant:"grid"===N?"default":"ghost",size:"sm",onClick:()=>_("grid"),className:"rounded-r-none"},je.createElement(Ya,{className:"h-4 w-4"})),je.createElement(Uo,{variant:"list"===N?"default":"ghost",size:"sm",onClick:()=>_("list"),className:"rounded-l-none"},je.createElement(or,{className:"h-4 w-4"})))),je.createElement("div",{className:"mt-4"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>S(!k),className:"text-gray-600"},je.createElement(Fr,{className:"h-4 w-4 mr-2"}),"Advanced Filters",je.createElement(ka,{className:"h-4 w-4 ml-2 transition-transform "+(k?"rotate-180":"")})),k&&je.createElement("div",{className:"mt-4 pt-4 border-t"},je.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4"},je.createElement("div",null,je.createElement("label",{htmlFor:"min-rating-select",className:"block text-sm font-medium text-gray-700 mb-2"},"Minimum Rating"),je.createElement(Zc,{value:j.toString(),onValueChange:e=>O(Number(e))},je.createElement(Gc,{id:"min-rating-select"},je.createElement(Kc,null)),je.createElement(Jc,null,je.createElement(Xc,{value:"0"},"Any Rating"),je.createElement(Xc,{value:"3"},"3+ Stars"),je.createElement(Xc,{value:"4"},"4+ Stars"),je.createElement(Xc,{value:"4.5"},"4.5+ Stars")))))))),g.length>0&&!R&&je.createElement("div",{className:"mb-12"},je.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-6"},"Featured Templates"),je.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},g.map(e=>je.createElement(ui,{key:e.id,className:"cursor-pointer hover:shadow-lg transition-shadow border-2 border-blue-200",onClick:()=>handleTemplateClick(e)},je.createElement(pi,null,je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1"},je.createElement(fi,{className:"text-lg line-clamp-2"},e.title),je.createElement(gi,{className:"mt-2 line-clamp-2"},e.description)),je.createElement(Badge,{variant:"secondary",className:"ml-2 bg-blue-100 text-blue-800"},"Featured"))),je.createElement(hi,null,je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center gap-1"},renderStars(e.ratingAverage),je.createElement("span",{className:"text-sm text-gray-600 ml-1"},"(",e.ratingCount,")")),je.createElement("span",{className:"font-semibold text-blue-600"},formatPrice(e.priceSgd))),je.createElement("div",{className:"flex items-center justify-between text-sm text-gray-600"},je.createElement("div",{className:"flex items-center gap-1"},je.createElement(Ua,{className:"h-4 w-4"}),e.downloadCount.toLocaleString()),je.createElement("div",{className:"flex items-center gap-1"},getCategoryIcon(e.category?.slug||""),e.category?.name))))))),je.createElement(Wu,{className:"mt-12"})),je.createElement("div",{className:"flex items-center justify-between mb-6"},je.createElement("div",null,je.createElement("h2",{className:"text-xl font-semibold text-gray-900"},R?`Search Results for "${R}"`:"All Templates"),je.createElement("p",{className:"text-gray-600 mt-1"},z.toLocaleString()," templates found"))),E?je.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Array.from({length:6}).map((e,a)=>je.createElement(Skeleton,{key:`search-loading-${a}`,className:"h-64 w-full"}))):m.length>0?je.createElement("div",{className:"grid"===N?"grid md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"},m.map(e=>je.createElement(ui,{key:e.id,className:"cursor-pointer hover:shadow-lg transition-shadow "+("list"===N?"flex":""),onClick:()=>handleTemplateClick(e)},je.createElement(pi,{className:"list"===N?"flex-1":""},je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1"},je.createElement(fi,{className:"text-lg line-clamp-2"},e.title),je.createElement(gi,{className:"mt-2 line-clamp-2"},e.description)),je.createElement("div",{className:"ml-4 text-right"},je.createElement("div",{className:"font-semibold text-blue-600"},formatPrice(e.priceSgd)),"public"!==e.accessLevel&&je.createElement(Badge,{variant:"outline",className:"mt-1"},e.accessLevel)))),je.createElement(hi,{className:"list"===N?"flex items-center":""},je.createElement("div",{className:"space-y-3 flex-1"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"flex items-center gap-1"},renderStars(e.ratingAverage),je.createElement("span",{className:"text-sm text-gray-600 ml-1"},"(",e.ratingCount,")"))),je.createElement("div",{className:"flex items-center justify-between text-sm text-gray-600"},je.createElement("div",{className:"flex items-center gap-1"},je.createElement(Ua,{className:"h-4 w-4"}),e.downloadCount.toLocaleString()),je.createElement("div",{className:"flex items-center gap-1"},getCategoryIcon(e.category?.slug||""),e.category?.name)),e.tags.length>0&&je.createElement("div",{className:"flex flex-wrap gap-1"},e.tags.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-xs"},e)),e.tags.length>3&&je.createElement(Badge,{variant:"outline",className:"text-xs"},"+",e.tags.length-3))),"list"===N&&je.createElement("div",{className:"ml-4"},je.createElement(Uo,{size:"sm"},je.createElement(qa,{className:"h-4 w-4 mr-2"}),"Preview")))))):je.createElement("div",{className:"text-center py-12"},je.createElement("div",{className:"text-gray-400 mb-4"},je.createElement(Cr,{className:"h-16 w-16 mx-auto"})),je.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"No templates found"),je.createElement("p",{className:"text-gray-600 mb-6"},"Try adjusting your search criteria or browse all categories."),je.createElement(Uo,{onClick:()=>{A(""),P(""),I(""),O(0)}},"Clear Filters")),L&&m.length>0&&je.createElement("div",{className:"text-center mt-12"},je.createElement(Uo,{variant:"outline",onClick:async()=>{if(!E&&L)try{x(!0);const e=V+20,a={query:R||void 0,categoryId:T||void 0,accessLevel:D||void 0,sortBy:F,minRating:j||void 0,limit:20,offset:e},l=await Wv.searchTemplates(a);u(e=>[...e,...l.templates]),H(e),$(l.hasMore)}catch(dE){b(dE instanceof Error?dE.message:"Failed to load more templates")}finally{x(!1)}},disabled:E},E?"Loading...":"Load More Templates")),w&&je.createElement("div",{className:"text-center py-12"},je.createElement("div",{className:"text-red-400 mb-4"},je.createElement(Aa,{className:"h-16 w-16 mx-auto"})),je.createElement("h3",{className:"text-xl font-semibold text-gray-900 mb-2"},"Something went wrong"),je.createElement("p",{className:"text-gray-600 mb-6"},w),je.createElement(Uo,{onClick:()=>window.location.reload()},"Try Again"))))}const TemplateRating=({template:e,className:a=""})=>{const{user:l}=useAuth(),[m,u]=Me.useState([]),[p,f]=Me.useState(!0),[g,h]=Me.useState(!1),[y,v]=Me.useState(!1),[E,x]=Me.useState(null),[w,b]=Me.useState(0),[N,_]=Me.useState(0),[k,S]=Me.useState("");Me.useEffect(()=>{loadRatings()},[e.id]);const loadRatings=async()=>{try{f(!0);const m=(await Wv.getTemplateRatings(e.id)).map(e=>({id:e.id,templateId:e.template_id,userId:e.user_id,rating:e.rating,review:e.review,isVerified:e.is_verified,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),user:e.user?{id:e.user.id,email:e.user.email,firstName:e.user.first_name,lastName:e.user.last_name,avatar:e.user.avatar_url}:void 0}));if(u(m),l)try{const a=await Wv.getUserTemplateRating(e.id,l.id);if(a){const e={id:a.id,templateId:a.template_id,userId:a.user_id,rating:a.rating,review:a.review,isVerified:a.is_verified,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)};x(e),b(e.rating),S(e.review||"")}}catch(a){console.log("User has not rated this template yet")}}catch(a){console.error("Error loading ratings:",a),An.error("Failed to load ratings")}finally{f(!1)}},renderStars=(e,a=!1,l="h-4 w-4")=>Array.from({length:5},(m,u)=>{const p=u+1,f=p<=(a?N||w:e);return je.createElement("button",{key:u,type:"button",disabled:!a,className:`${a?"cursor-pointer":"cursor-default"} transition-colors ${f?"text-yellow-400":"text-gray-300"} ${a?"hover:text-yellow-300":""}`,onMouseEnter:()=>a&&_(p),onMouseLeave:()=>a&&_(0),onClick:()=>a&&b(p)},je.createElement(jr,{className:`${l} ${f?"fill-current":""}`}))}),C=(()=>{const e={5:0,4:0,3:0,2:0,1:0};return m.forEach(a=>{e[a.rating]++}),e})(),R=m.length;return je.createElement("div",{className:`space-y-6 ${a}`},je.createElement(ui,null,je.createElement(pi,null,je.createElement("div",{className:"flex items-center justify-between"},je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(jr,{className:"h-5 w-5 text-yellow-400"}),"Ratings & Reviews"),l&&!E&&je.createElement(Zu,{open:y,onOpenChange:v},je.createElement(Ku,{asChild:!0},je.createElement(Uo,{size:"sm"},je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Write Review")),je.createElement(Yu,{className:"sm:max-w-md"},je.createElement(DialogHeader,null,je.createElement(Ju,null,"Rate this Template"),je.createElement(Xu,null,"Share your experience with this template to help other users")),je.createElement("div",{className:"space-y-4"},je.createElement("div",null,je.createElement("label",{className:"block text-sm font-medium mb-2"},"Rating"),je.createElement("div",{className:"flex items-center gap-1"},renderStars(w,!0,"h-8 w-8")),w>0&&je.createElement("p",{className:"text-sm text-gray-600 mt-1"},1===w&&"Poor",2===w&&"Fair",3===w&&"Good",4===w&&"Very Good",5===w&&"Excellent")),je.createElement("div",null,je.createElement("label",{className:"block text-sm font-medium mb-2"},"Review (Optional)"),je.createElement(bi,{placeholder:"Share your thoughts about this template...",value:k,onChange:e=>S(e.target.value),rows:4,maxLength:500}),je.createElement("p",{className:"text-xs text-gray-500 mt-1"},k.length,"/500 characters")),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{onClick:async()=>{if(l)if(0!==w)try{h(!0),await Wv.rateTemplate(e.id,l.id,w,k.trim()||void 0),An.success("Rating submitted successfully!"),v(!1),loadRatings(),await Wv.trackEvent(e.id,"template_rated",{rating:w,has_review:!!k.trim()})}catch(a){console.error("Error submitting rating:",a),An.error("Failed to submit rating: "+a.message)}finally{h(!1)}else An.error("Please select a rating");else An.error("Please log in to rate this template")},disabled:g||0===w,className:"flex-1"},g?"Submitting...":"Submit Rating"),je.createElement(Uo,{variant:"outline",onClick:()=>v(!1),className:"flex-1"},"Cancel"))))))),je.createElement(hi,null,je.createElement("div",{className:"grid md:grid-cols-2 gap-6"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"text-4xl font-bold text-gray-900 mb-2"},e.ratingAverage.toFixed(1)),je.createElement("div",{className:"flex items-center justify-center gap-1 mb-2"},renderStars(e.ratingAverage)),je.createElement("p",{className:"text-gray-600"},"Based on ",e.ratingCount," review",1!==e.ratingCount?"s":"")),je.createElement("div",{className:"space-y-2"},[5,4,3,2,1].map(e=>je.createElement("div",{key:e,className:"flex items-center gap-2 text-sm"},je.createElement("span",{className:"w-8"},e),je.createElement(jr,{className:"h-4 w-4 text-yellow-400 fill-current"}),je.createElement("div",{className:"flex-1 bg-gray-200 rounded-full h-2"},je.createElement("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:R>0?C[e]/R*100+"%":"0%"}})),je.createElement("span",{className:"w-8 text-gray-600"},C[e]))))),E&&je.createElement(_i,{className:"mt-4"},je.createElement(Ta,{className:"h-4 w-4"}),je.createElement(ki,null,"You rated this template ",E.rating," star",1!==E.rating?"s":"",".",E.review&&" Thank you for your review!")))),m.length>0&&je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Reviews")),je.createElement(hi,null,je.createElement("div",{className:"space-y-6"},m.map((e,a)=>{return je.createElement("div",{key:e.id},je.createElement("div",{className:"flex items-start gap-4"},je.createElement(hd,{className:"h-10 w-10"},je.createElement(yd,{src:e.user?.avatar}),je.createElement(vd,null,(l=e.user?.firstName,u=e.user?.lastName,p=e.user?.email,l&&u?`${l[0]}${u[0]}`.toUpperCase():p?p.substring(0,2).toUpperCase():"U"))),je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"flex items-center gap-2 mb-2"},je.createElement("span",{className:"font-medium"},e.user?.firstName&&e.user?.lastName?`${e.user.firstName} ${e.user.lastName}`:e.user?.email?.split("@")[0]||"Anonymous"),e.isVerified&&je.createElement(Badge,{variant:"secondary",className:"text-xs"},je.createElement(Ta,{className:"h-3 w-3 mr-1"}),"Verified"),je.createElement("span",{className:"text-sm text-gray-500"},formatDistanceToNow(e.createdAt,{addSuffix:!0}))),je.createElement("div",{className:"flex items-center gap-1 mb-2"},renderStars(e.rating)),e.review&&je.createElement("p",{className:"text-gray-700 leading-relaxed"},e.review))),a<m.length-1&&je.createElement(Wu,{className:"mt-6"}));var l,u,p})))),!p&&0===m.length&&je.createElement(ui,null,je.createElement(hi,{className:"text-center py-8"},je.createElement(gr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No reviews yet"),je.createElement("p",{className:"text-gray-600 mb-4"},"Be the first to review this template and help other users!"),l&&je.createElement(Uo,{onClick:()=>v(!0)},"Write the First Review"))))};const Kv=new class TemplateAccessControlService{async checkTemplateAccess(e,a,l){if("public"===a)return{hasAccess:!0};if(!e)return{hasAccess:!1,reason:"Authentication required for premium templates",upgradeRequired:"premium"};try{const l=await this.getUserSubscription(e);if(!l)return{hasAccess:!1,reason:"No active subscription found",upgradeRequired:"enterprise"===a?"enterprise":"premium"};if("active"!==l.status)return{hasAccess:!1,reason:"Subscription is not active",upgradeRequired:"enterprise"===a?"enterprise":"premium"};if(!this.checkTierAccess(l.tier,a))return{hasAccess:!1,reason:`${a} template requires ${"enterprise"===a?"Enterprise":"Premium"} subscription`,upgradeRequired:"enterprise"===a?"enterprise":"premium"};const m=await this.checkUsageLimits(e,l.tier);return m.hasAccess?{hasAccess:!0,remainingUsage:m.remainingUsage,resetDate:m.resetDate}:m}catch(m){return console.error("Error checking template access:",m),{hasAccess:!1,reason:"Error checking access permissions"}}}async checkCustomizationAccess(e,a){return this.checkTemplateAccess(e,a)}async checkDownloadAccess(e,a,l){const m=await this.checkTemplateAccess(e,a);if(!m.hasAccess)return m;if(!e&&"pdf"!==l)return{hasAccess:!1,reason:"Account required for DOCX and HTML downloads",upgradeRequired:"premium"};if(!e)return{hasAccess:!0};try{const a=await this.getUserSubscription(e);if(!a)return"pdf"===l?{hasAccess:!0}:{hasAccess:!1,reason:"Premium subscription required for DOCX and HTML downloads",upgradeRequired:"premium"};a.tier;return"free"===a.tier&&"pdf"!==l?{hasAccess:!1,reason:"Premium subscription required for DOCX and HTML downloads",upgradeRequired:"premium"}:{hasAccess:!0}}catch(u){return console.error("Error checking download access:",u),{hasAccess:!1,reason:"Error checking download permissions"}}}async getUserSubscription(e){const{data:a,error:l}=await Mo.from("user_subscriptions").select("*").eq("user_id",e).eq("status","active").single();if(l&&"PGRST116"!==l.code)throw new Error(`Failed to fetch subscription: ${l.message}`);return a?{id:a.id,userId:a.user_id,tier:a.tier,status:a.status,currentPeriodStart:new Date(a.current_period_start),currentPeriodEnd:new Date(a.current_period_end),cancelAtPeriodEnd:a.cancel_at_period_end}:null}async getUserUsageStats(e){const{data:a,error:l}=await Mo.from("user_usage").select("*").eq("user_id",e).single();if(l&&"PGRST116"!==l.code)throw new Error(`Failed to fetch usage stats: ${l.message}`);return a?{templatesUsedThisMonth:a.templates_used_this_month||0,templatesUsedToday:a.templates_used_today||0,customizationsThisMonth:a.customizations_this_month||0,downloadsThisMonth:a.downloads_this_month||0,lastResetDate:new Date(a.last_reset_date)}:{templatesUsedThisMonth:0,templatesUsedToday:0,customizationsThisMonth:0,downloadsThisMonth:0,lastResetDate:new Date}}async recordTemplateUsage(e,a){try{const{error:l}=await Mo.rpc("increment_template_usage",{p_user_id:e,p_action:a});l&&console.error("Error recording template usage:",l)}catch(l){console.error("Error recording template usage:",l)}}checkTierAccess(e,a){return{free:0,premium:1,pro:2,enterprise:3}[e]>={public:0,premium:1,enterprise:3}[a]}async checkUsageLimits(e,a){try{const l=await this.getUserUsageStats(e),m=ri[a].limits;if(-1!==m.monthlyDocumentUploads&&l.templatesUsedThisMonth>=m.monthlyDocumentUploads)return{hasAccess:!1,reason:`Monthly template limit reached (${m.monthlyDocumentUploads})`,upgradeRequired:"free"===a?"premium":"premium"===a?"pro":"enterprise",remainingUsage:0,resetDate:this.getNextResetDate(l.lastResetDate)};if(-1!==m.dailyDocumentUploads&&l.templatesUsedToday>=m.dailyDocumentUploads)return{hasAccess:!1,reason:`Daily template limit reached (${m.dailyDocumentUploads})`,remainingUsage:0,resetDate:this.getTomorrowDate()};const u=-1===m.monthlyDocumentUploads?-1:m.monthlyDocumentUploads-l.templatesUsedThisMonth,p=-1===m.dailyDocumentUploads?-1:m.dailyDocumentUploads-l.templatesUsedToday;return{hasAccess:!0,remainingUsage:-1===u?p:Math.min(u,p),resetDate:this.getNextResetDate(l.lastResetDate)}}catch(l){return console.error("Error checking usage limits:",l),{hasAccess:!0}}}getNextResetDate(e){const a=new Date(e);return a.setMonth(a.getMonth()+1),a}getTomorrowDate(){const e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e}};const TemplateAccessGate=({children:e,templateAccessLevel:a,templateId:l,className:m=""})=>{const{user:u}=useAuth(),p=function useTemplateAccess(e,a){const{user:l}=useAuth(),[m,u]=Me.useState(null),[p,f]=Me.useState(null),[g,h]=Me.useState(null),[y,v]=Me.useState(!0),[E,x]=Me.useState(null),checkAccess=async()=>{try{v(!0),x(null);const m=await Kv.checkTemplateAccess(l?.id||null,e,a);if(u(m),l)try{const[e,a]=await Promise.all([Kv.getUserSubscription(l.id),Kv.getUserUsageStats(l.id)]);f(e),h(a)}catch(dE){console.error("Error loading user data:",dE)}}catch(dE){console.error("Error checking template access:",dE),x(dE instanceof Error?dE.message:"Failed to check access"),u({hasAccess:!1,reason:"Error checking access"})}finally{v(!1)}};Me.useEffect(()=>{checkAccess()},[l?.id,e,a]);const w=m?.hasAccess??!1,b=w,N=w,_=w&&(!l||"premium"===p?.tier||"pro"===p?.tier||"enterprise"===p?.tier);return{canViewTemplate:w,canCustomizeTemplate:b,canDownloadPDF:N,canDownloadDOCX:_,canDownloadHTML:_,accessResult:m,subscription:p,usageStats:g,loading:y,error:E,checkAccess:checkAccess,recordUsage:async e=>{if(l)try{await Kv.recordTemplateUsage(l.id,e);const a=await Kv.getUserUsageStats(l.id);h(a)}catch(dE){console.error("Error recording usage:",dE)}}}}(a,l);return p.loading?je.createElement("div",{className:`flex items-center justify-center p-8 ${m}`},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})):p.canViewTemplate?je.createElement("div",{className:m},e,p.usageStats&&p.subscription&&je.createElement(UsageIndicator,{accessData:p})):je.createElement("div",{className:`space-y-6 ${m}`},je.createElement(AccessDeniedCard,{accessData:p,templateAccessLevel:a}),u&&je.createElement(UpgradePrompt,{accessData:p}),!u&&je.createElement(LoginPrompt,null))},AccessDeniedCard=({accessData:e,templateAccessLevel:a})=>je.createElement(ui,{className:"border-2 border-dashed border-gray-300"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"flex justify-center mb-4"},(()=>{switch(a){case"premium":return je.createElement(Oa,{className:"h-8 w-8 text-yellow-500"});case"enterprise":return je.createElement(jr,{className:"h-8 w-8 text-purple-500"});default:return je.createElement(ir,{className:"h-8 w-8 text-gray-500"})}})()),je.createElement(fi,{className:"flex items-center justify-center gap-2"},"Access Restricted",(()=>{switch(a){case"premium":return je.createElement(Badge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800"},"Premium");case"enterprise":return je.createElement(Badge,{variant:"secondary",className:"bg-purple-100 text-purple-800"},"Enterprise");default:return je.createElement(Badge,{variant:"secondary"},"Public")}})()),je.createElement(gi,null,e.accessResult?.reason||"You need a subscription to access this template")),je.createElement(hi,{className:"text-center"},je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,"This template requires a ","enterprise"===a?"Enterprise":"Premium"," subscription to access.")))),UpgradePrompt=({accessData:e})=>{const a=e.accessResult?.upgradeRequired;if(!a)return null;const l=(e=>{switch(e){case"premium":return["Access to Premium templates","DOCX and HTML downloads","Advanced customization options","Priority support"];case"pro":return["Everything in Premium","Unlimited template usage","Advanced AI features","Team collaboration tools"];case"enterprise":return["Everything in Pro","Enterprise templates","Custom branding","Dedicated account manager","SLA guarantee"];default:return[]}})(a);return je.createElement(ui,{className:"border-blue-200 bg-blue-50"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Qr,{className:"h-5 w-5 text-blue-600"}),"Upgrade to ",a.charAt(0).toUpperCase()+a.slice(1)),je.createElement(gi,null,"Unlock this template and many more features")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid gap-2"},l.map((e,a)=>je.createElement("div",{key:a,className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",{className:"text-sm"},e)))),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{asChild:!0,className:"flex-1"},je.createElement(Ro,{to:ii.pricing},je.createElement(Oa,{className:"h-4 w-4 mr-2"}),"Upgrade Now")),je.createElement(Uo,{variant:"outline",asChild:!0},je.createElement(Ro,{to:ii.pricing},"View Plans",je.createElement(ia,{className:"h-4 w-4 ml-2"}))))))},LoginPrompt=()=>je.createElement(ui,{className:"border-green-200 bg-green-50"},je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Wr,{className:"h-5 w-5 text-green-600"}),"Sign In Required"),je.createElement(gi,null,"Create a free account to access this template")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid gap-2"},je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",{className:"text-sm"},"Free account creation")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",{className:"text-sm"},"Access to public templates")),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",{className:"text-sm"},"Save your customizations"))),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{asChild:!0,className:"flex-1"},je.createElement(Ro,{to:ii.register},"Create Account")),je.createElement(Uo,{variant:"outline",asChild:!0},je.createElement(Ro,{to:ii.login},"Sign In",je.createElement(ia,{className:"h-4 w-4 ml-2"})))))),UsageIndicator=({accessData:e})=>{const{subscription:a,usageStats:l,accessResult:m}=e;if(!a||!l||!m?.remainingUsage)return null;if(-1===m.remainingUsage)return null;const u="free"===a.tier?Math.min(l.templatesUsedThisMonth/5*100,100):Math.min(l.templatesUsedThisMonth/50*100,100),p=u>80;return je.createElement(ui,{className:"mt-4 "+(p?"border-orange-200 bg-orange-50":"border-gray-200")},je.createElement(pi,{className:"pb-3"},je.createElement(fi,{className:"text-sm flex items-center gap-2"},je.createElement(Ha,{className:"h-4 w-4"}),"Template Usage",je.createElement(Badge,{variant:p?"destructive":"secondary",className:"ml-auto"},a.tier.charAt(0).toUpperCase()+a.tier.slice(1)))),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"flex justify-between text-sm"},je.createElement("span",null,"This month"),je.createElement("span",null,l.templatesUsedThisMonth," used")),je.createElement(sv,{value:u,className:"h-2"}),m.remainingUsage>0&&je.createElement("p",{className:"text-xs text-gray-600"},m.remainingUsage," templates remaining")),m.resetDate&&je.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-600"},je.createElement(ba,{className:"h-3 w-3"}),"Resets on ",m.resetDate.toLocaleDateString()),p&&je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,{className:"text-xs"},"You're approaching your monthly limit. Consider upgrading for unlimited access."))))};const Gv=new class TemplateVersionManagementService{async getTemplateVersions(e){const{data:a,error:l}=await Mo.from("template_versions").select("\n        *,\n        created_by_user:profiles!template_versions_created_by_fkey(id, email, first_name, last_name),\n        approved_by_user:profiles!template_versions_approved_by_fkey(id, email, first_name, last_name)\n      ").eq("template_id",e).order("major_version",{ascending:!1}).order("minor_version",{ascending:!1}).order("patch_version",{ascending:!1});if(l)throw new Error(`Failed to fetch template versions: ${l.message}`);return a.map(this.transformVersionData)}async getTemplateVersion(e){const{data:a,error:l}=await Mo.from("template_versions").select("\n        *,\n        created_by_user:profiles!template_versions_created_by_fkey(id, email, first_name, last_name),\n        approved_by_user:profiles!template_versions_approved_by_fkey(id, email, first_name, last_name)\n      ").eq("id",e).single();if(l&&"PGRST116"!==l.code)throw new Error(`Failed to fetch template version: ${l.message}`);return a?this.transformVersionData(a):null}async getCurrentVersion(e){const{data:a,error:l}=await Mo.from("template_versions").select("\n        *,\n        created_by_user:profiles!template_versions_created_by_fkey(id, email, first_name, last_name),\n        approved_by_user:profiles!template_versions_approved_by_fkey(id, email, first_name, last_name)\n      ").eq("template_id",e).eq("is_current",!0).single();if(l&&"PGRST116"!==l.code)throw new Error(`Failed to fetch current version: ${l.message}`);return a?this.transformVersionData(a):null}async createVersion(e,a){const{data:l,error:m}=await Mo.rpc("create_template_version",{p_template_id:e.templateId,p_title:e.title,p_description:e.description||null,p_content:e.content,p_fields:JSON.stringify(e.fields),p_change_summary:e.changeSummary,p_change_details:JSON.stringify(e.changeDetails||{}),p_breaking_changes:e.breakingChanges||!1,p_user_id:a,p_version_type:e.versionType||"minor"});if(m)throw new Error(`Failed to create template version: ${m.message}`);return l}async publishVersion(e,a){const{data:l,error:m}=await Mo.rpc("publish_template_version",{p_version_id:e,p_user_id:a});if(m)throw new Error(`Failed to publish template version: ${m.message}`);return l}async rollbackToVersion(e,a,l,m){const{data:u,error:p}=await Mo.rpc("rollback_template_version",{p_template_id:e,p_target_version_id:a,p_user_id:l,p_reason:m||"No reason provided"});if(p)throw new Error(`Failed to rollback template version: ${p.message}`);return u}async getChangeLog(e,a=50){const{data:l,error:m}=await Mo.from("template_change_log").select("\n        *,\n        user:profiles!template_change_log_user_id_fkey(id, email, first_name, last_name),\n        version:template_versions!template_change_log_version_id_fkey(version_number)\n      ").eq("template_id",e).order("created_at",{ascending:!1}).limit(a);if(m)throw new Error(`Failed to fetch change log: ${m.message}`);return l.map(e=>({id:e.id,templateId:e.template_id,versionId:e.version_id,changeType:e.change_type,fieldChanged:e.field_changed,oldValue:e.old_value,newValue:e.new_value,changeReason:e.change_reason,userId:e.user_id,createdAt:new Date(e.created_at),user:e.user?{id:e.user.id,email:e.user.email,firstName:e.user.first_name,lastName:e.user.last_name}:void 0}))}async compareVersions(e,a){const[l,m]=await Promise.all([this.getTemplateVersion(e),this.getTemplateVersion(a)]);if(!l||!m)throw new Error("One or both versions not found");return{version1:l,version2:m,differences:this.calculateDifferences(l,m)}}async getVersionComments(e){const{data:a,error:l}=await Mo.from("template_version_comments").select("\n        *,\n        user:profiles!template_version_comments_user_id_fkey(id, email, first_name, last_name),\n        resolved_by_user:profiles!template_version_comments_resolved_by_fkey(id, email, first_name, last_name)\n      ").eq("version_id",e).order("created_at",{ascending:!0});if(l)throw new Error(`Failed to fetch version comments: ${l.message}`);return a.map(e=>({id:e.id,versionId:e.version_id,userId:e.user_id,commentText:e.comment_text,commentType:e.comment_type,lineNumber:e.line_number,fieldName:e.field_name,isResolved:e.is_resolved,resolvedBy:e.resolved_by,resolvedAt:e.resolved_at?new Date(e.resolved_at):void 0,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),user:e.user?{id:e.user.id,email:e.user.email,firstName:e.user.first_name,lastName:e.user.last_name}:void 0}))}async addVersionComment(e,a,l,m="general",u,p){const{data:f,error:g}=await Mo.from("template_version_comments").insert({version_id:e,user_id:a,comment_text:l,comment_type:m,line_number:u,field_name:p}).select("id").single();if(g)throw new Error(`Failed to add comment: ${g.message}`);return f.id}async resolveComment(e,a){const{error:l}=await Mo.from("template_version_comments").update({is_resolved:!0,resolved_by:a,resolved_at:(new Date).toISOString()}).eq("id",e);if(l)throw new Error(`Failed to resolve comment: ${l.message}`)}transformVersionData(e){return{id:e.id,templateId:e.template_id,versionNumber:e.version_number,majorVersion:e.major_version,minorVersion:e.minor_version,patchVersion:e.patch_version,isCurrent:e.is_current,isPublished:e.is_published,status:e.status,title:e.title,description:e.description,content:e.content,fields:e.fields||[],metadata:e.metadata||{},changeSummary:e.change_summary,changeDetails:e.change_details||{},breakingChanges:e.breaking_changes,migrationNotes:e.migration_notes,createdBy:e.created_by,approvedBy:e.approved_by,approvedAt:e.approved_at?new Date(e.approved_at):void 0,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),publishedAt:e.published_at?new Date(e.published_at):void 0}}calculateDifferences(e,a){const l=[];["title","description","content"].forEach(m=>{const u=e[m],p=a[m];u!==p&&l.push({field:m,type:"modified",oldValue:u,newValue:p})});const m=e.fields||[],u=a.fields||[];return JSON.stringify(m)!==JSON.stringify(u)&&l.push({field:"fields",type:"modified",oldValue:m,newValue:u}),l}},TemplateVersionHistory=({templateId:e,currentVersionId:a,onVersionSelect:l,className:m=""})=>{const{user:u}=useAuth(),[p,f]=Me.useState([]),[g,h]=Me.useState([]),[y,v]=Me.useState(!0),[E,x]=Me.useState(null),[w,b]=Me.useState(!1),[N,_]=Me.useState(""),[k,S]=Me.useState(!1);Me.useEffect(()=>{loadVersionHistory()},[e]);const loadVersionHistory=async()=>{try{v(!0);const[a,l]=await Promise.all([Gv.getTemplateVersions(e),Gv.getChangeLog(e)]);f(a),h(l)}catch(a){console.error("Error loading version history:",a),An.error("Failed to load version history")}finally{v(!1)}};return y?je.createElement("div",{className:`space-y-4 ${m}`},[...Array(3)].map((e,a)=>je.createElement(ui,{key:a,className:"animate-pulse"},je.createElement(hi,{className:"p-4"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",{className:"space-y-2"},je.createElement("div",{className:"h-4 bg-gray-200 rounded w-24"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-32"})),je.createElement("div",{className:"h-6 bg-gray-200 rounded w-16"})))))):je.createElement("div",{className:`space-y-6 ${m}`},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(Xa,{className:"h-5 w-5"}),"Version History"),je.createElement(gi,null,"Track changes and manage different versions of this template")),je.createElement(hi,null,je.createElement("div",{className:"space-y-4"},p.map((e,a)=>je.createElement("div",{key:e.id,className:"relative"},a<p.length-1&&je.createElement("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-gray-200"}),je.createElement("div",{className:"flex items-start gap-4"},je.createElement("div",{className:"flex-shrink-0 mt-1"},(e=>e.breakingChanges?je.createElement(Qr,{className:"h-4 w-4 text-red-500",title:"Breaking Changes"}):e.majorVersion>1?je.createElement(Lr,{className:"h-4 w-4 text-blue-500",title:"Major Version"}):je.createElement(Ka,{className:"h-4 w-4 text-green-500",title:"Minor/Patch Version"}))(e)),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("div",{className:"flex items-center gap-2"},je.createElement("h4",{className:"font-medium text-gray-900"},"v",e.versionNumber),e.isCurrent&&je.createElement(Badge,{variant:"outline",className:"text-xs"},"Current"),(e=>{const a={draft:{variant:"secondary",label:"Draft",icon:Ha},review:{variant:"outline",label:"In Review",icon:qa},published:{variant:"default",label:"Published",icon:Ta},archived:{variant:"secondary",label:"Archived",icon:Xa},deprecated:{variant:"destructive",label:"Deprecated",icon:Br}}[e.status],l=a.icon;return je.createElement(Badge,{variant:a.variant,className:"flex items-center gap-1"},je.createElement(l,{className:"h-3 w-3"}),a.label)})(e)),je.createElement("div",{className:"flex items-center gap-2"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>{x(e),l?.(e)}},je.createElement(qa,{className:"h-4 w-4 mr-1"}),"View"),!e.isCurrent&&e.isPublished&&u&&je.createElement(Uo,{variant:"outline",size:"sm",onClick:()=>{x(e),b(!0)}},je.createElement(_r,{className:"h-4 w-4 mr-1"}),"Rollback"))),e.changeSummary&&je.createElement("p",{className:"text-sm text-gray-600 mb-2"},e.changeSummary),je.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500"},je.createElement("div",{className:"flex items-center gap-1"},je.createElement(ba,{className:"h-3 w-3"}),formatDistanceToNow(e.createdAt,{addSuffix:!0})),je.createElement("div",{className:"flex items-center gap-1"},je.createElement(Hr,{className:"h-3 w-3"}),e.createdBy),e.breakingChanges&&je.createElement("div",{className:"flex items-center gap-1 text-red-600"},je.createElement(Br,{className:"h-3 w-3"}),"Breaking Changes"))))))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center gap-2"},je.createElement(gr,{className:"h-5 w-5"}),"Change Log"),je.createElement(gi,null,"Detailed history of all changes made to this template")),je.createElement(hi,null,je.createElement(Hy,{className:"h-64"},je.createElement("div",{className:"space-y-3"},g.map((e,a)=>{return je.createElement("div",{key:e.id,className:"relative"},a<g.length-1&&je.createElement("div",{className:"absolute left-6 top-8 bottom-0 w-px bg-gray-200"}),je.createElement("div",{className:"flex items-start gap-4"},je.createElement("div",{className:"flex-shrink-0 mt-1"},(l=e.changeType,{created:je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),updated:je.createElement(Ha,{className:"h-4 w-4 text-blue-500"}),published:je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),archived:je.createElement(Xa,{className:"h-4 w-4 text-gray-500"}),restored:je.createElement(_r,{className:"h-4 w-4 text-orange-500"}),deleted:je.createElement(Br,{className:"h-4 w-4 text-red-500"})}[l]||je.createElement(Ha,{className:"h-4 w-4"}))),je.createElement("div",{className:"flex-1 min-w-0"},je.createElement("div",{className:"flex items-center justify-between mb-1"},je.createElement("span",{className:"text-sm font-medium capitalize"},e.changeType),je.createElement("span",{className:"text-xs text-gray-500"},formatDistanceToNow(e.createdAt,{addSuffix:!0}))),e.changeReason&&je.createElement("p",{className:"text-sm text-gray-600 mb-1"},e.changeReason),je.createElement("div",{className:"text-xs text-gray-500"},"by ",e.user?.firstName&&e.user?.lastName?`${e.user.firstName} ${e.user.lastName}`:e.user?.email||"Unknown"))));var l}))))),je.createElement(Zu,{open:w,onOpenChange:b},je.createElement(Yu,null,je.createElement(DialogHeader,null,je.createElement(Ju,null,"Rollback to Version ",E?.versionNumber),je.createElement(Xu,null,"This will create a new version based on the selected version. The current version will remain in history.")),je.createElement("div",{className:"space-y-4"},je.createElement(_i,null,je.createElement(Br,{className:"h-4 w-4"}),je.createElement(ki,null,"Rolling back will create a new version. This action cannot be undone.")),je.createElement("div",null,je.createElement("label",{className:"block text-sm font-medium mb-2"},"Reason for rollback (optional)"),je.createElement("textarea",{className:"w-full p-2 border rounded-md",rows:3,value:N,onChange:e=>_(e.target.value),placeholder:"Explain why you're rolling back to this version..."})),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{onClick:()=>E&&(async a=>{if(u)try{S(!0),await Gv.rollbackToVersion(e,a.id,u.id,N),An.success(`Successfully rolled back to version ${a.versionNumber}`),b(!1),_(""),loadVersionHistory()}catch(l){console.error("Error rolling back version:",l),An.error("Failed to rollback version: "+l.message)}finally{S(!1)}else An.error("Please log in to rollback versions")})(E),disabled:k,className:"flex-1"},k?"Rolling back...":"Confirm Rollback"),je.createElement(Uo,{variant:"outline",onClick:()=>b(!1),className:"flex-1"},"Cancel"))))))};function TemplatePreview(){const{slug:e}=useParams(),a=useNavigate(),[l,m]=Me.useState(null),[u,p]=Me.useState(!0),[f,g]=Me.useState(null),[h,y]=Me.useState("preview"),[v,E]=Me.useState(!1);Me.useEffect(()=>{e&&loadTemplate(e)},[e]);const loadTemplate=async e=>{try{p(!0);const a=await Wv.getTemplate(e);if(!a)return void g("Template not found");m(a),await Wv.trackEvent(a.id,"template_preview",{source:"direct_link",category:a.category?.name,access_level:a.accessLevel})}catch(dE){g(dE instanceof Error?dE.message:"Failed to load template")}finally{p(!1)}},formatPrice=e=>0===e?"Free":`S$${e.toFixed(2)}`;return u?je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"max-w-6xl mx-auto space-y-8"},je.createElement(Skeleton,{className:"h-8 w-32"}),je.createElement("div",{className:"grid lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-2 space-y-6"},je.createElement(Skeleton,{className:"h-64 w-full"}),je.createElement(Skeleton,{className:"h-32 w-full"})),je.createElement("div",{className:"space-y-6"},je.createElement(Skeleton,{className:"h-48 w-full"}),je.createElement(Skeleton,{className:"h-32 w-full"})))))):f||!l?je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(hi,{className:"p-8 text-center"},je.createElement(Aa,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),je.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Template Not Found"),je.createElement("p",{className:"text-gray-600 mb-6"},f||"The template you're looking for doesn't exist or has been removed."),je.createElement(Uo,{onClick:()=>a(ii.templateBrowser)},"Browse Templates")))):je.createElement("div",{className:"min-h-screen bg-gray-50"},je.createElement("div",{className:"container mx-auto px-4 py-8"},je.createElement("div",{className:"max-w-6xl mx-auto"},je.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-6"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>a(ii.templateBrowser),className:"p-0 h-auto"},je.createElement(la,{className:"h-4 w-4 mr-1"}),"Back to Templates"),je.createElement("span",null,"/"),je.createElement("span",null,l.category?.name),je.createElement("span",null,"/"),je.createElement("span",{className:"text-gray-900"},l.title)),je.createElement(TemplateAccessGate,{templateAccessLevel:l.accessLevel,templateId:l.id},je.createElement("div",{className:"grid lg:grid-cols-3 gap-8"},je.createElement("div",{className:"lg:col-span-2"},je.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6"},je.createElement("div",{className:"flex items-start justify-between mb-4"},je.createElement("div",{className:"flex-1"},je.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},l.title),je.createElement("p",{className:"text-lg text-gray-600 mb-4"},l.description),je.createElement("div",{className:"flex items-center gap-4 mb-4"},je.createElement("div",{className:"flex items-center gap-1"},(x=l.ratingAverage,Array.from({length:5},(e,a)=>je.createElement(jr,{key:a,className:"h-4 w-4 "+(a<Math.floor(x)?"text-yellow-400 fill-current":"text-gray-300")}))),je.createElement("span",{className:"text-sm text-gray-600 ml-1"},l.ratingAverage.toFixed(1)," (",l.ratingCount," reviews)")),je.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},je.createElement(Ua,{className:"h-4 w-4"}),l.downloadCount.toLocaleString()," downloads")),je.createElement("div",{className:"flex flex-wrap gap-2"},je.createElement(Badge,{variant:"outline"},l.category?.name),l.subcategory&&je.createElement(Badge,{variant:"outline"},l.subcategory),"public"!==l.accessLevel&&je.createElement(Badge,{variant:"secondary"},l.accessLevel),l.tags.slice(0,3).map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-xs"},e)))),je.createElement("div",{className:"text-right ml-6"},je.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},formatPrice(l.priceSgd)),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>E(!v)},je.createElement(Ja,{className:"h-4 w-4 "+(v?"fill-current text-red-500":"")})),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:async()=>{if(l)try{await navigator.share({title:l.title,text:l.description,url:window.location.href})}catch{await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}}},je.createElement(Tr,{className:"h-4 w-4"})))))),je.createElement(Xm,{value:h,onValueChange:y},je.createElement(ed,{className:"grid w-full grid-cols-5"},je.createElement(td,{value:"preview"},je.createElement(qa,{className:"h-4 w-4 mr-2"}),"Preview"),je.createElement(td,{value:"fields"},je.createElement(Ar,{className:"h-4 w-4 mr-2"}),"Fields"),je.createElement(td,{value:"details"},je.createElement(Ha,{className:"h-4 w-4 mr-2"}),"Details"),je.createElement(td,{value:"reviews"},je.createElement(jr,{className:"h-4 w-4 mr-2"}),"Reviews"),je.createElement(td,{value:"versions"},je.createElement(Xa,{className:"h-4 w-4 mr-2"}),"Versions")),je.createElement(ad,{value:"preview",className:"mt-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Document Preview"),je.createElement(gi,null,"This is how your document will look when generated")),je.createElement(hi,null,l.previewHtml?je.createElement("div",{className:"prose max-w-none border rounded-lg p-6 bg-white",dangerouslySetInnerHTML:{__html:l.previewHtml}}):l.previewPdfUrl?je.createElement("div",{className:"border rounded-lg overflow-hidden"},je.createElement("iframe",{src:l.previewPdfUrl,className:"w-full h-96",title:"Template Preview"})):je.createElement("div",{className:"text-center py-12 text-gray-500"},je.createElement(Ha,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),je.createElement("p",null,"Preview not available for this template"))))),je.createElement(ad,{value:"fields",className:"mt-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Customizable Fields"),je.createElement(gi,null,"These fields can be customized when you use this template")),je.createElement(hi,null,l.fields.length>0?je.createElement("div",{className:"space-y-4"},l.fields.map(e=>je.createElement("div",{key:e.id,className:"border rounded-lg p-4"},je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("h4",{className:"font-medium"},e.label),je.createElement("div",{className:"flex gap-2"},je.createElement(Badge,{variant:"outline",className:"text-xs"},e.type),e.required&&je.createElement(Badge,{variant:"destructive",className:"text-xs"},"Required"))),e.helpText&&je.createElement("p",{className:"text-sm text-gray-600 mb-2"},e.helpText),e.placeholder&&je.createElement("p",{className:"text-xs text-gray-500"},"Placeholder: ",e.placeholder)))):je.createElement("div",{className:"text-center py-8 text-gray-500"},je.createElement(Ar,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),je.createElement("p",null,"This template has no customizable fields"))))),je.createElement(ad,{value:"details",className:"mt-6"},je.createElement("div",{className:"space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Legal Information")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid md:grid-cols-2 gap-4"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-1"},"Jurisdiction"),je.createElement("p",{className:"text-gray-600"},l.jurisdiction)),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-1"},"Language"),je.createElement("p",{className:"text-gray-600"},"en"===l.language?"English":l.language))),l.legalAreas.length>0&&je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Legal Areas"),je.createElement("div",{className:"flex flex-wrap gap-2"},l.legalAreas.map(e=>je.createElement(Badge,{key:e,variant:"outline"},e)))),l.complianceTags.length>0&&je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Compliance"),je.createElement("div",{className:"flex flex-wrap gap-2"},l.complianceTags.map(e=>je.createElement(Badge,{key:e,variant:"outline",className:"text-green-700 border-green-300"},je.createElement(Ir,{className:"h-3 w-3 mr-1"}),e)))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Template Information")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid md:grid-cols-2 gap-4"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-1"},"Version"),je.createElement("p",{className:"text-gray-600"},"v",l.version)),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-gray-900 mb-1"},"Last Updated"),je.createElement("p",{className:"text-gray-600"},l.updatedAt.toLocaleDateString()))))))),je.createElement(ad,{value:"reviews",className:"mt-6"},je.createElement(TemplateRating,{template:l})),je.createElement(ad,{value:"versions",className:"mt-6"},je.createElement(TemplateVersionHistory,{templateId:l.id,currentVersionId:l.id})))),je.createElement("div",{className:"space-y-6"},je.createElement(ui,{className:"sticky top-6"},je.createElement(pi,null,je.createElement(fi,{className:"text-xl"},"Get This Template"),je.createElement(gi,null,"Customize and download this template for your needs")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"text-center"},je.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},formatPrice(l.priceSgd)),"public"===l.accessLevel&&je.createElement("p",{className:"text-sm text-green-600 mb-4"},je.createElement(Ta,{className:"h-4 w-4 inline mr-1"}),"Free to use and customize")),je.createElement("div",{className:"space-y-3"},je.createElement(Uo,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>{l&&(Wv.trackEvent(l.id,"customization_started",{source:"preview_page",access_level:l.accessLevel}),a(`${ii.templateCustomize}/${l.slug}`))}},je.createElement(Ar,{className:"h-4 w-4 mr-2"}),"Customize Template"),je.createElement(Uo,{variant:"outline",className:"w-full",onClick:async()=>{l&&(await Wv.recordDownload(l.id,void 0,"pdf"),alert("Download functionality will be implemented with the generation system"))}},je.createElement(Ua,{className:"h-4 w-4 mr-2"}),"Download Sample")),"public"!==l.accessLevel&&je.createElement(_i,null,je.createElement(Ir,{className:"h-4 w-4"}),je.createElement(ki,null,"This is a ",l.accessLevel," template.","premium"===l.accessLevel?" Upgrade to Premium":" Contact us"," ","to access all features.")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"What's Included")),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",null,"Customizable fields")),je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",null,"PDF download")),je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",null,"Legal compliance checked")),je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-green-500"}),je.createElement("span",null,"Singapore jurisdiction")),"premium"===l.accessLevel&&je.createElement(je.Fragment,null,je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-blue-500"}),je.createElement("span",null,"Word document format")),je.createElement("div",{className:"flex items-center gap-2 text-sm"},je.createElement(Ta,{className:"h-4 w-4 text-blue-500"}),je.createElement("span",null,"Legal review included"))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Need Help?")),je.createElement(hi,{className:"space-y-3"},je.createElement(Uo,{variant:"outline",className:"w-full justify-start"},je.createElement(gr,{className:"h-4 w-4 mr-2"}),"Contact Support"),je.createElement(Uo,{variant:"outline",className:"w-full justify-start"},je.createElement(za,{className:"h-4 w-4 mr-2"}),"View Documentation")))))))));var x}const SearchHistory=()=>{useAuth();const[e,a]=Me.useState([]),[l,m]=Me.useState([]),[u,p]=Me.useState(!0),[f,g]=Me.useState(""),[h,y]=Me.useState("all");Me.useEffect(()=>{const e=[{id:"1",query:"employment contract singapore",type:"legal_qa",timestamp:new Date(Date.now()-72e5),results_count:15,clicked_result:"Employment Act basics"},{id:"2",query:"corporate law firms",type:"law_firms",timestamp:new Date(Date.now()-18e6),results_count:8,clicked_result:"Lee & Associates"},{id:"3",query:"tenancy agreement template",type:"templates",timestamp:new Date(Date.now()-864e5),results_count:12,clicked_result:"Residential Tenancy Agreement"},{id:"4",query:"contract analysis",type:"documents",timestamp:new Date(Date.now()-1728e5),results_count:6},{id:"5",query:"divorce proceedings singapore",type:"legal_qa",timestamp:new Date(Date.now()-2592e5),results_count:22,clicked_result:"Family Court procedures"}];a(e),m(e),p(!1)},[]),Me.useEffect(()=>{let a=e;f.trim()&&(a=a.filter(e=>e.query.toLowerCase().includes(f.toLowerCase())||e.clicked_result?.toLowerCase().includes(f.toLowerCase()))),"all"!==h&&(a=a.filter(e=>e.type===h)),m(a)},[e,f,h]);const getTypeLabel=e=>{switch(e){case"legal_qa":return"Legal Q&A";case"law_firms":return"Law Firms";case"documents":return"Documents";case"templates":return"Templates";default:return"Search"}},getTypeColor=e=>{switch(e){case"legal_qa":return"bg-blue-100 text-blue-800";case"law_firms":return"bg-green-100 text-green-800";case"documents":return"bg-purple-100 text-purple-800";case"templates":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},v=(()=>{const a=e.length,l=e.reduce((e,a)=>(e[a.type]=(e[a.type]||0)+1,e),{}),m=Object.entries(l).reduce((e,a)=>l[e[0]]>l[a[0]]?e:a)?.[0]||"legal_qa";return{totalSearches:a,typeStats:l,mostSearchedType:m}})();return je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Search History"),je.createElement("p",{className:"text-gray-600 mt-1"},"Track and manage your search activity across the platform")),je.createElement(Uo,{variant:"outline",onClick:()=>{a([]),m([])},className:"text-red-600 border-red-600 hover:bg-red-50"},je.createElement(Ur,{className:"h-4 w-4 mr-2"}),"Clear History")),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},je.createElement(ui,null,je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-600"},"Total Searches"),je.createElement("p",{className:"text-2xl font-bold text-gray-900"},v.totalSearches)),je.createElement(Cr,{className:"h-8 w-8 text-blue-600"})))),je.createElement(ui,null,je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-600"},"Most Used"),je.createElement("p",{className:"text-lg font-semibold text-gray-900"},getTypeLabel(v.mostSearchedType))),je.createElement(zr,{className:"h-8 w-8 text-green-600"})))),je.createElement(ui,null,je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-600"},"This Week"),je.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.filter(e=>Date.now()-e.timestamp.getTime()<6048e5).length)),je.createElement(ba,{className:"h-8 w-8 text-purple-600"})))),je.createElement(ui,null,je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("p",{className:"text-sm font-medium text-gray-600"},"Avg Results"),je.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.length>0?Math.round(e.reduce((e,a)=>e+a.results_count,0)/e.length):0)),je.createElement(Na,{className:"h-8 w-8 text-orange-600"}))))),je.createElement(ui,null,je.createElement(hi,{className:"p-6"},je.createElement("div",{className:"flex flex-col md:flex-row gap-4"},je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"relative"},je.createElement(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),je.createElement(zo,{placeholder:"Filter search history...",value:f,onChange:e=>g(e.target.value),className:"pl-10"}))),je.createElement("div",{className:"flex gap-2"},je.createElement(Uo,{variant:"all"===h?"default":"outline",size:"sm",onClick:()=>y("all")},"All"),je.createElement(Uo,{variant:"legal_qa"===h?"default":"outline",size:"sm",onClick:()=>y("legal_qa")},"Q&A"),je.createElement(Uo,{variant:"law_firms"===h?"default":"outline",size:"sm",onClick:()=>y("law_firms")},"Law Firms"),je.createElement(Uo,{variant:"documents"===h?"default":"outline",size:"sm",onClick:()=>y("documents")},"Documents"),je.createElement(Uo,{variant:"templates"===h?"default":"outline",size:"sm",onClick:()=>y("templates")},"Templates"))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Recent Searches"),je.createElement(gi,null,"Your search activity across Legal Q&A, Law Firms, Documents, and Templates")),je.createElement(hi,null,u?je.createElement("div",{className:"space-y-4"},[...Array(5)].map((e,a)=>je.createElement("div",{key:a,className:"animate-pulse"},je.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),je.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"})))):l.length>0?je.createElement("div",{className:"space-y-4"},l.map(l=>je.createElement("div",{key:l.id,className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50"},je.createElement("div",{className:"flex items-center space-x-4 flex-1"},je.createElement("div",{className:"flex items-center space-x-2"},(e=>{switch(e){case"legal_qa":return je.createElement(gr,{className:"h-4 w-4"});case"law_firms":return je.createElement(xa,{className:"h-4 w-4"});case"documents":case"templates":return je.createElement(Ha,{className:"h-4 w-4"});default:return je.createElement(Cr,{className:"h-4 w-4"})}})(l.type),je.createElement(Badge,{className:getTypeColor(l.type)},getTypeLabel(l.type))),je.createElement("div",{className:"flex-1"},je.createElement("p",{className:"font-medium text-gray-900"},'"',l.query,'"'),je.createElement("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1"},je.createElement("span",{className:"flex items-center space-x-1"},je.createElement(Fa,{className:"h-3 w-3"}),je.createElement("span",null,formatDistanceToNow(l.timestamp,{addSuffix:!0}))),je.createElement("span",null,l.results_count," results"),l.clicked_result&&je.createElement("span",{className:"text-blue-600"}," ",l.clicked_result)))),je.createElement(Uo,{variant:"ghost",size:"sm",onClick:()=>(l=>{const m=e.filter(e=>e.id!==l);a(m)})(l.id),className:"text-gray-400 hover:text-red-600"},je.createElement(Ur,{className:"h-4 w-4"}))))):je.createElement("div",{className:"text-center py-8"},je.createElement(Cr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),je.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No search history found"),je.createElement("p",{className:"text-gray-500"},f||"all"!==h?"Try adjusting your filters to see more results.":"Start searching to see your history here."))))))},NotFound=()=>{const e=useLocation();return Me.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),React.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},React.createElement("div",{className:"text-center"},React.createElement("h1",{className:"text-4xl font-bold mb-4"},"404"),React.createElement("p",{className:"text-xl text-gray-600 mb-4"},"Oops! Page not found"),React.createElement("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline"},"Return to Home")))},DebugAuth=()=>{const{user:e,loading:a,profile:l,signOut:m}=useAuth(),[u,p]=Me.useState([]),[f,g]=Me.useState(!1),[h,y]=Me.useState(!1),runTests=async()=>{g(!0);const a=[];a.push({name:"Authentication Status",status:e?"success":"error",message:e?`Authenticated as ${e.email}`:"Not authenticated",details:{user:e?{id:e.id,email:e.email}:null}}),a.push({name:"Profile Loading",status:l?"success":"warning",message:l?`Profile loaded: ${l.email}`:"No profile loaded",details:l});try{const{data:e,error:l}=await Mo.auth.getUser();a.push({name:"Supabase Connection",status:l?"error":"success",message:l?`Connection error: ${l.message}`:"Connected successfully",details:{data:e,error:l}})}catch(m){a.push({name:"Supabase Connection",status:"error",message:`Connection failed: ${m instanceof Error?m.message:"Unknown error"}`,details:m})}try{const e=await Ef.getDocuments();a.push({name:"Documents API",status:"success",message:`Successfully loaded ${e.length} documents`,details:e})}catch(m){a.push({name:"Documents API",status:"error",message:`Failed to load documents: ${m instanceof Error?m.message:"Unknown error"}`,details:m})}try{const{data:e,error:l}=await Mo.from("uploaded_documents").select("count(*)").limit(1);a.push({name:"Database Query",status:l?"error":"success",message:l?`Query failed: ${l.message}`:"Database query successful",details:{data:e,error:l}})}catch(m){a.push({name:"Database Query",status:"error",message:`Query error: ${m instanceof Error?m.message:"Unknown error"}`,details:m})}p(a),g(!1)};Me.useEffect(()=>{a||runTests()},[a]);const getStatusColor=e=>{switch(e){case"success":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800"}};return a?je.createElement("div",{className:"min-h-screen flex items-center justify-center"},je.createElement("div",{className:"text-center"},je.createElement(Nr,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),je.createElement("p",null,"Loading authentication..."))):je.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},je.createElement("div",{className:"container mx-auto px-4 max-w-4xl"},je.createElement("div",{className:"mb-8"},je.createElement("h1",{className:"text-3xl font-bold text-center mb-4"},"Authentication Debug"),je.createElement("p",{className:"text-gray-600 text-center"},"Debugging authentication and document loading issues")),je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement(fi,null,"Debug Tests"),je.createElement(gi,null,"Testing authentication, database connection, and API functionality")),je.createElement(hi,null,je.createElement("div",{className:"flex flex-wrap gap-3 mb-4"},je.createElement(Uo,{onClick:runTests,disabled:f,size:"default"},je.createElement(Nr,{className:"h-4 w-4 mr-2 "+(f?"animate-spin":"")}),f?"Running...":"Run Tests"),je.createElement(Uo,{onClick:async()=>{const e=[];try{const{data:{user:m}}=await Mo.auth.getUser();if(e.push({name:"Authentication Check",status:m?"success":"error",message:m?`Authenticated as ${m.email}`:"Not authenticated"}),!m)return void p(e);const{usageTrackingService:u}=await ze(async()=>{const{usageTrackingService:e}=await Promise.resolve().then(()=>bf);return{usageTrackingService:e}},void 0,import.meta.url),f=await u.checkUsageLimit("document_upload");e.push({name:"Usage Limit Check",status:f.allowed?"success":"error",message:`${f.current}/${f.limit} uploads used (${Math.round(f.percentage)}%)`});const g=`test-${Date.now()}.txt`,h=new File(["test content"],g,{type:"text/plain"});try{const{error:a}=await Mo.storage.from("documents").upload(`${m.id}/${g}`,h);a?e.push({name:"Storage Upload Test",status:"error",message:`Storage upload failed: ${a.message}`}):(e.push({name:"Storage Upload Test",status:"success",message:"Storage upload successful"}),await Mo.storage.from("documents").remove([`${m.id}/${g}`]))}catch(a){e.push({name:"Storage Upload Test",status:"error",message:`Storage test failed: ${a.message}`})}try{const{error:a}=await Mo.from("uploaded_documents").select("id").limit(1);e.push({name:"Database Access Test",status:a?"error":"success",message:a?`Database error: ${a.message}`:"Database access successful"})}catch(l){e.push({name:"Database Access Test",status:"error",message:`Database test failed: ${l.message}`})}}catch(m){e.push({name:"Upload Test Failed",status:"error",message:m.message})}p(e)},disabled:f,size:"default",variant:"outline"},je.createElement(Nr,{className:"h-4 w-4 mr-2 "+(f?"animate-spin":"")}),"Test Upload"),je.createElement(Uo,{onClick:async()=>{y(!0);try{localStorage.setItem("skipSessionRestore","true"),await m(),localStorage.clear(),sessionStorage.clear(),Object.keys(localStorage).forEach(e=>{(e.startsWith("sb-")||e.includes("supabase"))&&localStorage.removeItem(e)}),console.log("All authentication data cleared"),window.location.href="/"}catch(e){console.error("Error clearing auth data:",e)}finally{y(!1)}},disabled:h,size:"default",variant:"destructive"},je.createElement(Da,{className:"h-4 w-4 mr-2 "+(h?"animate-spin":"")}),h?"Clearing...":"Clear Auth")),je.createElement("div",{className:"space-y-4"},u.map((e,a)=>je.createElement("div",{key:a,className:"border rounded-lg p-4"},je.createElement("div",{className:"flex items-center justify-between mb-2"},je.createElement("div",{className:"flex items-center space-x-2"},(e=>{switch(e){case"success":return je.createElement(Ta,{className:"h-5 w-5 text-green-500"});case"error":return je.createElement(Da,{className:"h-5 w-5 text-red-500"});case"warning":return je.createElement(Br,{className:"h-5 w-5 text-yellow-500"})}})(e.status),je.createElement("h3",{className:"font-medium"},e.name)),je.createElement(Badge,{className:getStatusColor(e.status)},e.status)),je.createElement("p",{className:"text-sm text-gray-600 mb-2"},e.message),e.details&&je.createElement("details",{className:"text-xs"},je.createElement("summary",{className:"cursor-pointer text-gray-500 hover:text-gray-700"},"Show details"),je.createElement("pre",{className:"mt-2 p-2 bg-gray-100 rounded overflow-auto"},JSON.stringify(e.details,null,2)))))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Environment Information")),je.createElement(hi,null,je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},je.createElement("div",null,je.createElement("strong",null,"Supabase URL:"),je.createElement("p",{className:"text-gray-600"},"https://kvlaydeyqidlfpfutbmp.supabase.co")),je.createElement("div",null,je.createElement("strong",null,"Environment:"),je.createElement("p",{className:"text-gray-600"},"production")),je.createElement("div",null,je.createElement("strong",null,"User Agent:"),je.createElement("p",{className:"text-gray-600 break-all"},navigator.userAgent)),je.createElement("div",null,je.createElement("strong",null,"Current URL:"),je.createElement("p",{className:"text-gray-600 break-all"},window.location.href)))))))},AuthTest=()=>{const[e,a]=Me.useState("raymond.chai@8atoms.com"),[l,m]=Me.useState(""),[u,p]=Me.useState(""),[f,g]=Me.useState(!1);let h=null,y=!1,v=null,E=null;try{const e=useAuth();h=e.user,y=e.loading,v=e.signIn,E=e.signOut}catch(x){console.error(" AUTH CONTEXT ERROR:",x)}Me.useEffect(()=>{(()=>{let e="Environment Check:\n";e+=" Supabase URL: https://kvlaydeyqidlfpfutbmp.supabase.co\n",e+=" Supabase Key: Present\n",e+=` Current URL: ${window.location.href}\n`,e+=` User Agent: ${navigator.userAgent}\n`,p(e)})()},[]);return je.createElement("div",{style:{padding:"20px",backgroundColor:"#f0f0f0",minHeight:"100vh"}},je.createElement("h1",{style:{fontSize:"48px",color:"#000",textAlign:"center",marginBottom:"30px"}}," EMERGENCY AUTH TEST "),je.createElement("div",{style:{backgroundColor:"#ffff00",padding:"20px",marginBottom:"30px",border:"5px solid #000",fontSize:"24px",fontWeight:"bold"}},je.createElement("p",null,"Loading: ",y?"YES":"NO"),je.createElement("p",null,"User: ",h?h.email:"NOT LOGGED IN")),je.createElement("div",{style:{backgroundColor:"#ff0000",padding:"50px",margin:"30px 0",border:"10px solid #000000"}},je.createElement("h2",{style:{fontSize:"60px",color:"#ffffff",textAlign:"center",marginBottom:"40px",fontWeight:"bold"}}," INPUTS HERE "),je.createElement("div",{style:{marginBottom:"40px"}},je.createElement("label",{style:{display:"block",fontSize:"40px",color:"#ffffff",fontWeight:"bold",marginBottom:"20px"}}," EMAIL:"),je.createElement("input",{type:"email",value:e||"",onChange:e=>a(e.target.value),placeholder:"TYPE EMAIL HERE",style:{display:"block",width:"100%",height:"120px",padding:"30px",fontSize:"36px",border:"10px solid #ffff00",backgroundColor:"#ffffff",color:"#000000",fontWeight:"bold",boxSizing:"border-box"}})),je.createElement("div",{style:{marginBottom:"40px"}},je.createElement("label",{style:{display:"block",fontSize:"40px",color:"#ffffff",fontWeight:"bold",marginBottom:"20px"}}," PASSWORD:"),je.createElement("input",{type:"password",value:l||"",onChange:e=>m(e.target.value),placeholder:"TYPE PASSWORD HERE",style:{display:"block",width:"100%",height:"120px",padding:"30px",fontSize:"36px",border:"10px solid #ffff00",backgroundColor:"#ffffff",color:"#000000",fontWeight:"bold",boxSizing:"border-box"}})),je.createElement("div",null,je.createElement("button",{onClick:async()=>{g(!0),p("Testing direct Supabase authentication...\n");try{p(e=>e+" Supabase client initialized\n");const{data:{session:a},error:m}=await Mo.auth.getSession();if(p(m?e=>e+` Session error: ${m.message}\n`:e=>e+` Current session: ${a?"Logged in as "+a.user.email:"Not logged in"}\n`),l){p(e=>e+"Attempting direct sign in...\n");const{data:a,error:m}=await Mo.auth.signInWithPassword({email:e,password:l});m?(p(e=>e+` Sign in error: ${m.message}\n`),p(e=>e+`Error details: ${JSON.stringify(m,null,2)}\n`)):(p(e=>e+` Sign in successful: ${a.user?.email}\n`),p(e=>e+`Session: ${a.session?"Created":"None"}\n`))}p(e=>e+"Testing database connection...\n");const{data:u,error:f}=await Mo.from("law_firms").select("id, name").limit(1);p(f?e=>e+` Database error: ${f.message}\n`:e=>e+` Database connection: ${u?.length||0} law firms found\n`)}catch(x){p(a=>a+` Unexpected error: ${x.message}\n`),p(a=>a+`Stack trace: ${x.stack}\n`)}finally{g(!1)}},disabled:f,style:{display:"block",width:"100%",height:"150px",padding:"40px",fontSize:"48px",fontWeight:"bold",backgroundColor:f?"#666666":"#00ff00",color:"#000000",border:"10px solid #000000",cursor:f?"not-allowed":"pointer",marginBottom:"30px"}},f?" TESTING...":" LOGIN TEST"),je.createElement("button",{onClick:async()=>{g(!0);try{await E(),p(e=>e+" Sign out successful\n")}catch(x){p(a=>a+` Sign out error: ${x.message}\n`)}finally{g(!1)}},disabled:f,style:{display:"block",width:"100%",height:"150px",padding:"40px",fontSize:"48px",fontWeight:"bold",backgroundColor:f?"#666666":"#ff6600",color:"#000000",border:"10px solid #000000",cursor:f?"not-allowed":"pointer",marginBottom:"30px"}},f?" TESTING...":" LOGOUT TEST"),je.createElement("button",{onClick:()=>{p("")},style:{display:"block",width:"100%",height:"150px",padding:"40px",fontSize:"48px",fontWeight:"bold",backgroundColor:"#cccccc",color:"#000000",border:"10px solid #000000",cursor:"pointer",marginBottom:"30px"}}," CLEAR"))),je.createElement("div",{style:{backgroundColor:"#ffffff",padding:"30px",margin:"30px 0",border:"5px solid #000000"}},je.createElement("h2",{style:{fontSize:"36px",marginBottom:"20px",color:"#000"}}," RESULTS"),je.createElement("textarea",{value:u||"",readOnly:!0,placeholder:"Results will appear here...",style:{width:"100%",height:"300px",padding:"20px",fontSize:"18px",border:"3px solid #000000",backgroundColor:"#f0f0f0",color:"#000000",boxSizing:"border-box"}})))},SimpleAuthTest=()=>{const[e,a]=Me.useState("test@example.com"),[l,m]=Me.useState("");return je.createElement("div",{style:{padding:"50px",backgroundColor:"#ffffff",minHeight:"100vh"}},je.createElement("h1",{style:{fontSize:"48px",color:"red",textAlign:"center",marginBottom:"50px"}}," SIMPLE AUTH TEST "),je.createElement("div",{style:{maxWidth:"600px",margin:"0 auto",backgroundColor:"#ffff00",padding:"50px",border:"10px solid red"}},je.createElement("h2",{style:{fontSize:"32px",color:"blue",marginBottom:"30px"}}," EMAIL INPUT:"),je.createElement("input",{type:"email",value:e,onChange:e=>a(e.target.value),style:{width:"100%",height:"80px",fontSize:"24px",padding:"20px",border:"5px solid blue",backgroundColor:"white",color:"black",marginBottom:"30px"},placeholder:"TYPE EMAIL HERE"}),je.createElement("h2",{style:{fontSize:"32px",color:"blue",marginBottom:"30px"}}," PASSWORD INPUT:"),je.createElement("input",{type:"password",value:l,onChange:e=>m(e.target.value),style:{width:"100%",height:"80px",fontSize:"24px",padding:"20px",border:"5px solid blue",backgroundColor:"white",color:"black",marginBottom:"30px"},placeholder:"TYPE PASSWORD HERE"}),je.createElement("button",{style:{width:"100%",height:"100px",fontSize:"32px",backgroundColor:"green",color:"white",border:"5px solid darkgreen",cursor:"pointer"},onClick:()=>alert(`Email: ${e}, Password: ${l}`)}," CLICK ME TO TEST "),je.createElement("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"lightblue",border:"3px solid blue"}},je.createElement("p",{style:{fontSize:"20px",color:"black"}},"Current Email: ",e),je.createElement("p",{style:{fontSize:"20px",color:"black"}},"Password Length: ",l.length))))},BasicTest=()=>React.createElement("div",{style:{padding:"100px",backgroundColor:"#ff0000",color:"#ffffff",fontSize:"48px",textAlign:"center",minHeight:"100vh"}},React.createElement("h1",null," BASIC TEST PAGE "),React.createElement("p",null,"If you can see this, React is working!"),React.createElement("input",{type:"text",placeholder:"TEST INPUT",style:{width:"500px",height:"100px",fontSize:"32px",padding:"20px",margin:"50px",border:"10px solid yellow",backgroundColor:"white",color:"black"}}),React.createElement("button",{style:{width:"400px",height:"100px",fontSize:"32px",backgroundColor:"green",color:"white",border:"5px solid darkgreen",cursor:"pointer"},onClick:()=>alert("Button clicked!")},"CLICK ME")),ClearAuth=()=>{const[e,a]=Me.useState(!1),[l,m]=Me.useState(!1),clearAllAuthData=async()=>{a(!0);try{console.log("Starting auth data cleanup...");try{await Mo.auth.signOut(),console.log(" Signed out from Supabase")}catch(e){console.log(" Supabase signout error (continuing):",e)}Object.keys(localStorage).forEach(e=>{localStorage.removeItem(e)}),console.log(" Cleared localStorage");Object.keys(sessionStorage).forEach(e=>{sessionStorage.removeItem(e)}),console.log(" Cleared sessionStorage"),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),console.log(" Cleared cookies"),localStorage.setItem("skipSessionRestore","true"),console.log(" Set skip session restore flag"),m(!0),console.log(" All authentication data cleared successfully"),setTimeout(()=>{window.location.href="/"},2e3)}catch(e){console.error(" Error clearing auth data:",e)}finally{a(!1)}};return Me.useEffect(()=>{clearAllAuthData()},[]),je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4"},e?je.createElement(lr,{className:"w-6 h-6 text-red-600 animate-spin"}):l?je.createElement(Ta,{className:"w-6 h-6 text-green-600"}):je.createElement(Ur,{className:"w-6 h-6 text-red-600"})),je.createElement(fi,null,e?"Clearing Authentication Data...":l?"Authentication Data Cleared":"Clear Authentication Data"),je.createElement(gi,null,e?"Please wait while we clear all stored authentication data.":l?"All authentication data has been cleared. Redirecting to home page...":"This will clear all stored authentication data and sign you out.")),je.createElement(hi,{className:"text-center"},!e&&!l&&je.createElement("div",{className:"space-y-4"},je.createElement("p",{className:"text-sm text-gray-600"},"This will clear:"),je.createElement("ul",{className:"text-sm text-gray-600 text-left space-y-1"},je.createElement("li",null," Local storage data"),je.createElement("li",null," Session storage data"),je.createElement("li",null," Authentication cookies"),je.createElement("li",null," Supabase session")),je.createElement(Uo,{onClick:clearAllAuthData,className:"w-full",variant:"destructive"},"Clear All Data")),e&&je.createElement("div",{className:"space-y-2"},je.createElement("p",{className:"text-sm text-gray-600"},"Clearing authentication data..."),je.createElement("div",{className:"text-xs text-gray-500"},"This may take a few seconds")),l&&je.createElement("div",{className:"space-y-2"},je.createElement("p",{className:"text-sm text-green-600"}," Successfully cleared all data"),je.createElement("p",{className:"text-xs text-gray-500"},"Redirecting to home page...")))))},LogoutTest=()=>{const{user:e,signOut:a,loading:l}=useAuth();return je.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},je.createElement("div",{className:"container mx-auto px-4 max-w-2xl"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Logout Test Page"),je.createElement(gi,null,"Test logout functionality and debug authentication issues")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},je.createElement("h3",{className:"font-medium mb-2"},"Current Auth State:"),je.createElement("p",null,je.createElement("strong",null,"User:")," ",e?.email||"Not logged in"),je.createElement("p",null,je.createElement("strong",null,"Loading:")," ",l?"Yes":"No"),je.createElement("p",null,je.createElement("strong",null,"User ID:")," ",e?.id||"None")),je.createElement("div",{className:"space-y-3"},je.createElement(Uo,{onClick:async()=>{console.log("Direct signOut button clicked");try{console.log("Calling signOut..."),await a(),console.log("SignOut completed successfully")}catch(e){console.error("SignOut failed:",e),alert(`SignOut failed: ${e instanceof Error?e.message:"Unknown error"}`)}},className:"w-full",disabled:!e||l},"Test Direct SignOut"),je.createElement(Uo,{onClick:()=>{console.log("Force signOut button clicked"),localStorage.clear(),sessionStorage.clear(),Object.keys(localStorage).forEach(e=>{(e.startsWith("sb-")||e.includes("supabase"))&&localStorage.removeItem(e)}),window.location.href="/"},variant:"destructive",className:"w-full"},"Force Clear All Data & Reload"),je.createElement(Uo,{onClick:()=>window.location.href="/",variant:"outline",className:"w-full"},"Go to Homepage")),je.createElement("div",{className:"p-4 bg-yellow-50 rounded-lg"},je.createElement("h3",{className:"font-medium mb-2"},"Instructions:"),je.createElement("ol",{className:"list-decimal list-inside space-y-1 text-sm"},je.createElement("li",null,"Open browser console (F12) to see debug logs"),je.createElement("li",null,'Click "Test Direct SignOut" to test normal logout'),je.createElement("li",null,'If that fails, use "Force Clear All Data & Reload"'),je.createElement("li",null,"Check console for any error messages")))))))},EmergencyLogout=()=>{useNavigate();return je.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},je.createElement(ui,{className:"w-full max-w-md"},je.createElement(pi,{className:"text-center"},je.createElement("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100"},je.createElement(Br,{className:"h-6 w-6 text-red-600"})),je.createElement(fi,{className:"text-xl font-semibold text-gray-900"},"Emergency Logout"),je.createElement(gi,{className:"text-gray-600"},"Use these options if you're having trouble signing out normally")),je.createElement(hi,{className:"space-y-4"},je.createElement(Uo,{onClick:()=>{console.log(" EMERGENCY LOGOUT ACTIVATED ");try{localStorage.clear(),sessionStorage.clear();["sb-kvlaydeyqidlfpfutbmp-auth-token","supabase.auth.token","auth-token","user-session","auth-state"].forEach(e=>{try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(mE){console.warn("Failed to remove key:",e)}}),console.log(" Emergency storage cleared"),window.location.replace("/")}catch(e){console.error("Emergency logout failed:",e),window.location.reload()}},variant:"destructive",className:"w-full",size:"lg"},je.createElement(cr,{className:"mr-2 h-4 w-4"}),"Emergency Logout"),je.createElement(Uo,{onClick:()=>{console.log(" FORCE RELOAD ACTIVATED"),localStorage.clear(),sessionStorage.clear(),window.location.reload()},variant:"outline",className:"w-full",size:"lg"},je.createElement(Nr,{className:"mr-2 h-4 w-4"}),"Force Reload Page"),je.createElement(Uo,{onClick:()=>{window.location.href="/"},variant:"outline",className:"w-full",size:"lg"},je.createElement(er,{className:"mr-2 h-4 w-4"}),"Go to Homepage"),je.createElement("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg"},je.createElement("h4",{className:"text-sm font-medium text-blue-900 mb-2"},"Console Commands"),je.createElement("p",{className:"text-xs text-blue-700 mb-2"},"You can also run these commands in the browser console:"),je.createElement("div",{className:"space-y-1 text-xs font-mono bg-blue-100 p-2 rounded"},je.createElement("div",null,"emergencyLogout()"),je.createElement("div",null,"localStorage.clear()"),je.createElement("div",null,"window.location.href = '/'"))))))},AuthFixTest=()=>{const{user:e,profile:a,session:l,loading:m,signOut:u}=useSafeAuth(),[p,f]=Me.useState(0),[g,h]=Me.useState([]);Me.useEffect(()=>{let e;return m?e=setInterval(()=>{f(e=>e+.1)},100):f(0),()=>{e&&clearInterval(e)}},[m]),Me.useEffect(()=>{const u=[];m&&p>5?u.push({test:"Loading Timeout",status:"fail",message:`Loading state stuck for ${p.toFixed(1)}s - should clear within 5s`}):m||u.push({test:"Loading Timeout",status:"pass",message:`Loading cleared properly (${p.toFixed(1)}s)`}),m||(e&&l&&a?u.push({test:"Auth State Consistency",status:"pass",message:"User, session, and profile all present"}):e||l||a?u.push({test:"Auth State Consistency",status:"warning",message:`Inconsistent state: user=${!!e}, session=${!!l}, profile=${!!a}`}):u.push({test:"Auth State Consistency",status:"pass",message:"All auth states properly cleared"})),a&&(a.role&&"user"!==a.role?u.push({test:"Profile Role",status:"pass",message:`Role properly loaded: ${a.role}`}):u.push({test:"Profile Role",status:"warning",message:`Default role detected: ${a.role||"undefined"}`})),h(u)},[m,p,e,l,a]);const handleEmergencyLoadingClear=()=>{"undefined"!=typeof window&&window.emergencyLoadingClear?window.emergencyLoadingClear():console.error("Emergency loading clear function not available")},getStatusColor=e=>{switch(e){case"pass":return"bg-green-100 text-green-800";case"fail":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return je.createElement("div",{className:"min-h-screen bg-gray-50 p-4"},je.createElement("div",{className:"max-w-4xl mx-auto space-y-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement("span",null," Authentication Fix Test"),m&&je.createElement(Fa,{className:"h-5 w-5 animate-spin text-blue-500"})),je.createElement(gi,null,"Testing the authentication fixes for infinite loading and sign-out issues")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},je.createElement("span",{className:"font-medium"},"Loading State:"),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Badge,{className:m?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"},m?`Loading (${p.toFixed(1)}s)`:"Ready"),m&&p>3&&je.createElement(Uo,{size:"sm",variant:"outline",onClick:handleEmergencyLoadingClear},"Emergency Clear"))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("div",{className:"font-medium text-sm text-gray-600"},"User"),je.createElement("div",{className:"text-sm"},e?e.email:"Not signed in")),je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("div",{className:"font-medium text-sm text-gray-600"},"Session"),je.createElement("div",{className:"text-sm"},l?"Active":"None")),je.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},je.createElement("div",{className:"font-medium text-sm text-gray-600"},"Profile"),je.createElement("div",{className:"text-sm"},a?`${a.role||"user"}`:"None"))),je.createElement("div",{className:"space-y-2"},je.createElement("h3",{className:"font-medium"},"Test Results:"),g.map((e,a)=>je.createElement("div",{key:a,className:"flex items-center justify-between p-3 border rounded-lg"},je.createElement("div",{className:"flex items-center space-x-2"},(e=>{switch(e){case"pass":return je.createElement(Ta,{className:"h-4 w-4 text-green-500"});case"fail":return je.createElement(Da,{className:"h-4 w-4 text-red-500"});case"warning":return je.createElement(Br,{className:"h-4 w-4 text-yellow-500"});default:return je.createElement(Fa,{className:"h-4 w-4 text-gray-500"})}})(e.status),je.createElement("span",{className:"font-medium"},e.test)),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("span",{className:"text-sm text-gray-600"},e.message),je.createElement(Badge,{className:getStatusColor(e.status)},e.status))))),je.createElement("div",{className:"flex flex-wrap gap-2 pt-4 border-t"},e&&je.createElement(Uo,{onClick:async()=>{try{console.log("Testing sign out..."),await u()}catch(e){console.error("Sign out test failed:",e)}},variant:"outline"},"Test Sign Out"),je.createElement(Uo,{onClick:handleEmergencyLoadingClear,variant:"outline",size:"sm"},"Emergency Loading Clear"),je.createElement(Uo,{onClick:()=>{"undefined"!=typeof window&&window.emergencyLogout?window.emergencyLogout():console.error("Emergency logout function not available")},variant:"outline",size:"sm"},"Emergency Logout"),je.createElement(Uo,{onClick:()=>window.location.reload(),variant:"outline",size:"sm"},"Reload Page")))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null," Emergency Console Commands")),je.createElement(hi,null,je.createElement("div",{className:"space-y-2 text-sm font-mono bg-gray-100 p-3 rounded"},je.createElement("div",null,"window.emergencyLoadingClear() - Clear stuck loading state"),je.createElement("div",null,"window.emergencyLogout() - Force complete logout"))))))},SignOutTest=()=>{const{user:e,profile:a,session:l,loading:m,signOut:u,signIn:p}=useSafeAuth(),[f,g]=Me.useState([]),[h,y]=Me.useState(!1),runAuthStateTest=()=>{const a=[];e||l||m?m?a.push({test:"Initial State",status:"warning",message:"Page is still loading authentication state"}):a.push({test:"Initial State",status:"fail",message:`Page started with user session: ${e?.email||"unknown"}`}):a.push({test:"Initial State",status:"pass",message:"Page correctly starts in signed-out state"});const u=["sb-kvlaydeyqidlfpfutbmp-auth-token","user-profile-cache","supabase.auth.token"].filter(e=>localStorage.getItem(e)||sessionStorage.getItem(e));0===u.length?a.push({test:"Storage Clean",status:"pass",message:"No authentication data found in storage"}):a.push({test:"Storage Clean",status:"fail",message:`Found auth data in storage: ${u.join(", ")}`}),g(a)};je.useEffect(()=>{runAuthStateTest()},[e,l,m]);return je.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},je.createElement("div",{className:"container mx-auto px-4 max-w-4xl"},je.createElement(ui,{className:"mb-6"},je.createElement(pi,null,je.createElement(fi,null,"Sign Out Functionality Test"),je.createElement(gi,null,"Test the authentication sign-out functionality and verify clean state")),je.createElement(hi,{className:"space-y-6"},je.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},je.createElement("h3",{className:"font-medium mb-3"},"Current Authentication State:"),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},je.createElement("div",null,je.createElement("strong",null,"User:")," ",e?.email||"Not signed in"),je.createElement("div",null,je.createElement("strong",null,"Loading:")," ",m?"Yes":"No"),je.createElement("div",null,je.createElement("strong",null,"Profile:")," ",a?.role||"None"))),je.createElement("div",null,je.createElement("h3",{className:"font-medium mb-3"},"Automated Test Results:"),je.createElement("div",{className:"space-y-2"},f.map((e,a)=>je.createElement(_i,{key:a,className:`\n                    ${"pass"===e.status?"border-green-200 bg-green-50":""}\n                    ${"fail"===e.status?"border-red-200 bg-red-50":""}\n                    ${"warning"===e.status?"border-yellow-200 bg-yellow-50":""}\n                  `},je.createElement("div",{className:"flex items-center space-x-2"},(e=>{switch(e){case"pass":return je.createElement(Ta,{className:"h-5 w-5 text-green-600"});case"fail":return je.createElement(Da,{className:"h-5 w-5 text-red-600"});case"warning":return je.createElement(Aa,{className:"h-5 w-5 text-yellow-600"});default:return null}})(e.status),je.createElement(ki,null,je.createElement("strong",null,e.test,":")," ",e.message)))))),je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},je.createElement(Uo,{onClick:runAuthStateTest,variant:"outline",className:"w-full"},"Re-run Tests"),e?je.createElement(Uo,{onClick:async()=>{if(e){y(!0),console.log(" Testing sign out functionality...");try{const a={hasUser:!!e,hasSession:!!l,userEmail:e?.email};console.log(" State before sign out:",a),await u(),console.log(" Sign out completed - checking if redirect happened..."),setTimeout(()=>{"/"===window.location.pathname?console.log(" Sign out successful - redirected to homepage"):console.log(" Sign out may not have redirected properly"),y(!1)},1e3)}catch(a){console.error(" Sign out test failed:",a),y(!1),alert(`Sign out test failed: ${a instanceof Error?a.message:"Unknown error"}`)}}else alert("Please sign in first to test sign out functionality")},disabled:h,className:"w-full bg-red-600 hover:bg-red-700"},h?"Testing...":"Test Sign Out"):je.createElement(Uo,{onClick:async()=>{try{window.location.href="/auth/login"}catch(e){console.error("Sign in test failed:",e),alert(`Sign in test failed: ${e instanceof Error?e.message:"Unknown error"}`)}},className:"w-full bg-blue-600 hover:bg-blue-700"},"Test Sign In"),je.createElement(Uo,{onClick:()=>{try{localStorage.clear(),sessionStorage.clear(),console.log(" All storage cleared"),window.location.reload()}catch(e){console.error("Storage clear failed:",e)}},variant:"destructive",className:"w-full"},"Clear All Storage"),je.createElement(Uo,{onClick:()=>window.location.href="/",variant:"outline",className:"w-full"},"Go to Homepage")),je.createElement("div",{className:"p-4 bg-yellow-50 rounded-lg"},je.createElement("h3",{className:"font-medium mb-2"},"Test Instructions:"),je.createElement("ol",{className:"list-decimal list-inside space-y-1 text-sm"},je.createElement("li",null,"Check that the page starts in a signed-out state (all tests should pass)"),je.createElement("li",null,'Click "Test Sign In" to go to login page and sign in'),je.createElement("li",null,'Return to this page and click "Test Sign Out" to verify sign out works'),je.createElement("li",null,"Verify that after sign out, you're redirected to homepage in signed-out state"),je.createElement("li",null,'Use "Clear All Storage" if you need to reset everything')))))))};const Qv=new class ProductionMonitoringService{constructor(){__publicField(this,"isProduction",!0),__publicField(this,"errorQueue",[]),__publicField(this,"performanceQueue",[]),__publicField(this,"actionQueue",[]),__publicField(this,"flushInterval",null),this.isProduction&&this.startPeriodicFlush()}logError(e,a,l="medium",m){const u={timestamp:(new Date).toISOString(),error:e instanceof Error?e.message:e,context:a,userId:m,userAgent:navigator.userAgent,url:window.location.href,severity:l};this.errorQueue.push(u),this.isProduction||console.error(`[${l.toUpperCase()}] ${a}:`,e),"critical"===l&&this.flushErrors()}logPerformance(e,a,l){const m={timestamp:(new Date).toISOString(),metric:e,value:a,context:l};this.performanceQueue.push(m),this.isProduction||console.log(`[PERF] ${e}: ${a}ms in ${l}`)}logUserAction(e,a,l,m,u){const p={timestamp:(new Date).toISOString(),action:e,context:a,userId:u,success:l,duration:m};this.actionQueue.push(p),this.isProduction||console.log(`[ACTION] ${e} in ${a}: ${l?"SUCCESS":"FAILED"}${m?` (${m}ms)`:""}`)}startPeriodicFlush(){this.flushInterval=window.setInterval(()=>{this.flushAll()},3e4)}async flushAll(){await Promise.all([this.flushErrors(),this.flushPerformance(),this.flushUserActions()])}async flushErrors(){if(0===this.errorQueue.length)return;const e=[...this.errorQueue];this.errorQueue=[];try{this.isProduction&&console.warn("Production errors detected:",e.length)}catch(a){this.errorQueue.unshift(...e),console.error("Failed to flush errors:",a)}}async flushPerformance(){if(0===this.performanceQueue.length)return;const e=[...this.performanceQueue];this.performanceQueue=[];try{this.isProduction}catch(a){this.performanceQueue.unshift(...e),console.error("Failed to flush performance metrics:",a)}}async flushUserActions(){if(0===this.actionQueue.length)return;const e=[...this.actionQueue];this.actionQueue=[];try{this.isProduction}catch(a){this.actionQueue.unshift(...e),console.error("Failed to flush user actions:",a)}}destroy(){this.flushInterval&&(clearInterval(this.flushInterval),this.flushInterval=null),this.flushAll()}},logError=(e,a,l,m)=>{Qv.logError(e,a,l,m)},logPerformance=(e,a,l)=>{Qv.logPerformance(e,a,l)};"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{Qv.destroy()});const Yv=new class RAGKnowledgeBaseService{constructor(){__publicField(this,"CHUNK_SIZE",1e3),__publicField(this,"OVERLAP_SIZE",200),__publicField(this,"DEFAULT_SIMILARITY_THRESHOLD",.7),__publicField(this,"DEFAULT_MAX_RESULTS",5)}async addKnowledge(e,a,l,m,u={}){const p=Date.now();try{const f=this.splitIntoChunks(e),g=[];for(let e=0;e<f.length;e++){const p=f[e],{generateEmbedding:h}=await ze(async()=>{const{generateEmbedding:e}=await import("./openai-DkM2Hj2j.js");return{generateEmbedding:e}},__vite__mapDeps([3,1,4]),import.meta.url),{embedding:y}=await h(p),{data:v,error:E}=await Mo.from("knowledge_base").insert({content:p,title:`${a} (Part ${e+1}/${f.length})`,source:l,category:m,metadata:{...u,chunk_index:e,total_chunks:f.length,chunk_size:p.length},embedding:y}).select("id").single();if(E)throw logError(E,"rag_add_knowledge","high"),new Error(`Failed to store knowledge chunk: ${E.message}`);g.push(v.id)}const h=Date.now()-p;return logPerformance("rag_add_knowledge",h,`Added ${f.length} chunks`),g}catch(f){throw logError(f,"rag_add_knowledge","high"),f}}async searchKnowledge(e){const a=Date.now();try{const{query:l,category:m,practiceArea:u,jurisdiction:p,maxResults:f=this.DEFAULT_MAX_RESULTS,similarityThreshold:g=this.DEFAULT_SIMILARITY_THRESHOLD}=e,{generateEmbedding:h}=await ze(async()=>{const{generateEmbedding:e}=await import("./openai-DkM2Hj2j.js");return{generateEmbedding:e}},__vite__mapDeps([3,1,4]),import.meta.url),{embedding:y}=await h(l),v={query_embedding:y,similarity_threshold:g,match_count:f};m&&(v.category_filter=m),u&&(v.practice_area_filter=u),p&&(v.jurisdiction_filter=p);const{data:E,error:x}=await Mo.rpc("search_knowledge_base",v);if(x)throw logError(x,"rag_search_knowledge","medium"),new Error(`Knowledge search failed: ${x.message}`);const w=Date.now()-a;return logPerformance("rag_search_knowledge",w,`Found ${E?.length||0} results`),E||[]}catch(l){throw logError(l,"rag_search_knowledge","medium"),l}}async generateResponse(e,a={}){const l=Date.now();try{const m=await this.searchKnowledge({query:e,...a});if(0===m.length)return{answer:"I don't have enough information in my knowledge base to answer this question accurately. Please consider adding more relevant legal documents or contact a legal professional.",sources:[],confidence:.1,reasoning:"No relevant knowledge found in the database."};const u=m.map((e,a)=>`[Source ${a+1}: ${e.title}]\n${e.content}`).join("\n\n"),p=await this.generateAIResponse(e,u,m),f=Date.now()-l;return logPerformance("rag_generate_response",f,`Used ${m.length} sources`),p}catch(m){throw logError(m,"rag_generate_response","high"),m}}splitIntoChunks(e){const a=[];let l=0;for(;l<e.length;){let m=l+this.CHUNK_SIZE;if(m<e.length){const a=e.lastIndexOf(".",m),u=e.lastIndexOf("\n",m),p=Math.max(a,u);p>l+.5*this.CHUNK_SIZE&&(m=p+1)}a.push(e.slice(l,m).trim()),l=m-this.OVERLAP_SIZE}return a.filter(e=>e.length>50)}async generateAIResponse(e,a,l){const{openai:m}=await ze(async()=>{const{openai:e}=await import("./openai-DkM2Hj2j.js");return{openai:e}},__vite__mapDeps([3,1,4]),import.meta.url),u=`You are a legal AI assistant for Singapore law. Use the provided context to answer questions accurately and cite your sources.\n\nIMPORTANT GUIDELINES:\n1. Only use information from the provided context\n2. If the context doesn't contain enough information, say so clearly\n3. Always cite which sources you're using\n4. Provide practical, actionable advice when appropriate\n5. Include relevant legal disclaimers\n6. Structure your response clearly with headings if needed\n\nContext:\n${a}`,p=`Question: ${e}\n\nPlease provide a comprehensive answer based on the context provided. Include:\n1. Direct answer to the question\n2. Relevant legal principles\n3. Practical implications\n4. Source citations\n5. Any important disclaimers`;try{const e=await m.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:u},{role:"user",content:p}],temperature:.2,max_tokens:1500}),a=e.choices[0]?.message?.content||"",f=l.reduce((e,a)=>e+(a.similarity||0),0)/l.length;return{answer:a,sources:l,confidence:Math.min(.9,f+.1),reasoning:`Answer generated using ${l.length} relevant sources with average similarity of ${(100*f).toFixed(1)}%`}}catch(f){throw logError(f,"rag_ai_response","high"),new Error("Failed to generate AI response")}}async updateKnowledge(e,a){try{let l={...a};if(a.content){const{generateEmbedding:e}=await ze(async()=>{const{generateEmbedding:e}=await import("./openai-DkM2Hj2j.js");return{generateEmbedding:e}},__vite__mapDeps([3,1,4]),import.meta.url),{embedding:m}=await e(a.content);l.embedding=m}const{error:m}=await Mo.from("knowledge_base").update(l).eq("id",e);if(m)throw logError(m,"rag_update_knowledge","medium"),new Error(`Failed to update knowledge: ${m.message}`)}catch(l){throw logError(l,"rag_update_knowledge","medium"),l}}async deleteKnowledge(e){try{const{error:a}=await Mo.from("knowledge_base").delete().eq("id",e);if(a)throw logError(a,"rag_delete_knowledge","medium"),new Error(`Failed to delete knowledge: ${a.message}`)}catch(a){throw logError(a,"rag_delete_knowledge","medium"),a}}async getKnowledgeStats(){try{const{data:e,error:a}=await Mo.rpc("get_knowledge_base_stats");if(a)throw logError(a,"rag_get_stats","low"),new Error(`Failed to get knowledge stats: ${a.message}`);return e||{totalChunks:0,categoryCounts:{},practiceAreaCounts:{}}}catch(e){throw logError(e,"rag_get_stats","low"),e}}},Jv={legal_document:Ha,case_law:Sr,statute:wa,regulation:fa,faq:Pa,guide:pa},Xv=["Contract Law","Employment Law","Corporate Law","Intellectual Property","Real Estate","Family Law","Criminal Law","Civil Litigation","Data Protection","Immigration Law"],KnowledgeBaseManager=()=>{const[e,a]=Me.useState("add"),[l,m]=Me.useState(!1),[u,p]=Me.useState([]),[f,g]=Me.useState(null),{toast:h}=useToast(),[y,v]=Me.useState({content:"",title:"",source:"",category:"legal_document",practiceArea:"",jurisdiction:"Singapore",tags:""}),[E,x]=Me.useState({query:"",category:"",practiceArea:"",jurisdiction:"Singapore"});Me.useEffect(()=>{loadStats()},[]);const loadStats=async()=>{try{const e=await Yv.getKnowledgeStats();g(e)}catch(e){console.error("Failed to load stats:",e)}};return je.createElement("div",{className:"space-y-6"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement("div",null,je.createElement("h2",{className:"text-2xl font-bold"},"RAG Knowledge Base"),je.createElement("p",{className:"text-gray-600"},"Manage your legal knowledge for AI-powered responses")),f&&je.createElement("div",{className:"flex space-x-4"},je.createElement(Badge,{variant:"secondary"},f.totalChunks," Total Chunks"),je.createElement(Badge,{variant:"outline"},Object.keys(f.categoryCounts||{}).length," Categories"))),je.createElement(Xm,{value:e,onValueChange:a},je.createElement(ed,{className:"grid w-full grid-cols-3"},je.createElement(td,{value:"add"},"Add Knowledge"),je.createElement(td,{value:"search"},"Search & Test"),je.createElement(td,{value:"stats"},"Statistics")),je.createElement(ad,{value:"add",className:"space-y-4"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Add New Knowledge"),je.createElement(gi,null,"Add legal documents, cases, or guides to your RAG knowledge base")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"grid grid-cols-2 gap-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"title"},"Title"),je.createElement(zo,{id:"title",value:y.title,onChange:e=>v(a=>({...a,title:e.target.value})),placeholder:"e.g., Employment Act Overview"})),je.createElement("div",null,je.createElement(Dd,{htmlFor:"source"},"Source"),je.createElement(zo,{id:"source",value:y.source,onChange:e=>v(a=>({...a,source:e.target.value})),placeholder:"e.g., Singapore Statutes Online"}))),je.createElement("div",{className:"grid grid-cols-3 gap-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"category"},"Category"),je.createElement(Zc,{value:y.category,onValueChange:e=>v(a=>({...a,category:e}))},je.createElement(Gc,null,je.createElement(Kc,null)),je.createElement(Jc,null,Object.entries(Jv).map(([e,a])=>je.createElement(Xc,{key:e,value:e},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(a,{className:"h-4 w-4"}),je.createElement("span",null,e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())))))))),je.createElement("div",null,je.createElement(Dd,{htmlFor:"practiceArea"},"Practice Area"),je.createElement(Zc,{value:y.practiceArea,onValueChange:e=>v(a=>({...a,practiceArea:e}))},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"Select practice area"})),je.createElement(Jc,null,Xv.map(e=>je.createElement(Xc,{key:e,value:e},e))))),je.createElement("div",null,je.createElement(Dd,{htmlFor:"jurisdiction"},"Jurisdiction"),je.createElement(zo,{id:"jurisdiction",value:y.jurisdiction,onChange:e=>v(a=>({...a,jurisdiction:e.target.value}))}))),je.createElement("div",null,je.createElement(Dd,{htmlFor:"tags"},"Tags (comma-separated)"),je.createElement(zo,{id:"tags",value:y.tags,onChange:e=>v(a=>({...a,tags:e.target.value})),placeholder:"e.g., overtime, working hours, employment"})),je.createElement("div",null,je.createElement(Dd,{htmlFor:"content"},"Content"),je.createElement(bi,{id:"content",value:y.content,onChange:e=>v(a=>({...a,content:e.target.value})),placeholder:"Enter the legal content, case details, or guidance...",rows:8})),je.createElement(Uo,{onClick:async()=>{if(y.content.trim()&&y.title.trim()&&y.source.trim()){m(!0);try{const e={practice_area:y.practiceArea,jurisdiction:y.jurisdiction,tags:y.tags.split(",").map(e=>e.trim()).filter(Boolean)};await Yv.addKnowledge(y.content,y.title,y.source,y.category,e),h({title:"Knowledge Added",description:"Successfully added knowledge to the RAG system."}),v({content:"",title:"",source:"",category:"legal_document",practiceArea:"",jurisdiction:"Singapore",tags:""}),loadStats()}catch(e){h({title:"Error",description:e.message||"Failed to add knowledge.",variant:"destructive"})}finally{m(!1)}}else h({title:"Missing Information",description:"Please fill in content, title, and source fields.",variant:"destructive"})},disabled:l,className:"w-full"},l?je.createElement(lr,{className:"h-4 w-4 animate-spin mr-2"}):je.createElement(wr,{className:"h-4 w-4 mr-2"}),"Add to Knowledge Base")))),je.createElement(ad,{value:"search",className:"space-y-4"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Search & Test RAG"),je.createElement(gi,null,"Search your knowledge base and test RAG responses")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",null,je.createElement(Dd,{htmlFor:"searchQuery"},"Search Query / Question"),je.createElement(zo,{id:"searchQuery",value:E.query,onChange:e=>x(a=>({...a,query:e.target.value})),placeholder:"e.g., What are the overtime rules in Singapore?"})),je.createElement("div",{className:"grid grid-cols-3 gap-4"},je.createElement("div",null,je.createElement(Dd,null,"Category Filter"),je.createElement(Zc,{value:E.category,onValueChange:e=>x(a=>({...a,category:e}))},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"All categories"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"All Categories"),Object.entries(Jv).map(([e,a])=>je.createElement(Xc,{key:e,value:e},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(a,{className:"h-4 w-4"}),je.createElement("span",null,e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())))))))),je.createElement("div",null,je.createElement(Dd,null,"Practice Area Filter"),je.createElement(Zc,{value:E.practiceArea,onValueChange:e=>x(a=>({...a,practiceArea:e}))},je.createElement(Gc,null,je.createElement(Kc,{placeholder:"All practice areas"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"All Practice Areas"),Xv.map(e=>je.createElement(Xc,{key:e,value:e},e))))),je.createElement("div",null,je.createElement(Dd,null,"Jurisdiction"),je.createElement(zo,{value:E.jurisdiction,onChange:e=>x(a=>({...a,jurisdiction:e.target.value})),placeholder:"Singapore"}))),je.createElement("div",{className:"flex space-x-2"},je.createElement(Uo,{onClick:async()=>{if(E.query.trim()){m(!0);try{const e=await Yv.searchKnowledge({query:E.query,category:E.category||void 0,practiceArea:E.practiceArea||void 0,jurisdiction:E.jurisdiction||void 0,maxResults:10});p(e),0===e.length&&h({title:"No Results",description:"No matching knowledge found. Try adjusting your search criteria."})}catch(e){h({title:"Search Error",description:e.message||"Failed to search knowledge base.",variant:"destructive"})}finally{m(!1)}}else h({title:"Missing Query",description:"Please enter a search query.",variant:"destructive"})},disabled:l,variant:"outline",className:"flex-1"},l?je.createElement(lr,{className:"h-4 w-4 animate-spin mr-2"}):je.createElement(Cr,{className:"h-4 w-4 mr-2"}),"Search Knowledge"),je.createElement(Uo,{onClick:async()=>{if(E.query.trim()){m(!0);try{const e=await Yv.generateResponse(E.query,{category:E.category||void 0,practiceArea:E.practiceArea||void 0,jurisdiction:E.jurisdiction||void 0}),a=window.open("","_blank");a&&a.document.write(`\n          <html>\n            <head><title>RAG Response</title></head>\n            <body style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">\n              <h1>RAG Response</h1>\n              <h2>Question:</h2>\n              <p><strong>${E.query}</strong></p>\n              \n              <h2>Answer:</h2>\n              <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; white-space: pre-wrap;">${e.answer}</div>\n              \n              <h2>Confidence: ${(100*e.confidence).toFixed(1)}%</h2>\n              \n              <h2>Sources Used:</h2>\n              <ul>\n                ${e.sources.map(e=>`\n                  <li>\n                    <strong>${e.title}</strong> (${e.category})\n                    <br><small>Source: ${e.source}</small>\n                    <br><small>Similarity: ${(100*(e.similarity||0)).toFixed(1)}%</small>\n                  </li>\n                `).join("")}\n              </ul>\n              \n              <h2>Reasoning:</h2>\n              <p><em>${e.reasoning}</em></p>\n            </body>\n          </html>\n        `),h({title:"RAG Response Generated",description:"Response opened in new window."})}catch(e){h({title:"RAG Error",description:e.message||"Failed to generate RAG response.",variant:"destructive"})}finally{m(!1)}}else h({title:"Missing Query",description:"Please enter a question to test RAG.",variant:"destructive"})},disabled:l,className:"flex-1"},l?je.createElement(lr,{className:"h-4 w-4 animate-spin mr-2"}):je.createElement(pa,{className:"h-4 w-4 mr-2"}),"Test RAG Response")),u.length>0&&je.createElement("div",{className:"space-y-2"},je.createElement("h3",{className:"font-semibold"},"Search Results (",u.length,")"),u.map((e,a)=>{const l=Jv[e.category];return je.createElement(ui,{key:e.id,className:"p-4"},je.createElement("div",{className:"flex items-start justify-between"},je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"flex items-center space-x-2 mb-2"},je.createElement(l,{className:"h-4 w-4"}),je.createElement("h4",{className:"font-medium"},e.title),je.createElement(Badge,{variant:"outline"},(100*e.similarity).toFixed(1),"% match")),je.createElement("p",{className:"text-sm text-gray-600 mb-2"},e.content.substring(0,200),"..."),je.createElement("div",{className:"flex items-center space-x-2 text-xs text-gray-500"},je.createElement("span",null,"Source: ",e.source),e.metadata.practice_area&&je.createElement(Badge,{variant:"secondary",className:"text-xs"},e.metadata.practice_area)))))}))))),je.createElement(ad,{value:"stats",className:"space-y-4"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Knowledge Base Overview")),je.createElement(hi,null,f?je.createElement("div",{className:"space-y-4"},je.createElement("div",null,je.createElement("div",{className:"text-2xl font-bold"},f.totalChunks),je.createElement("div",{className:"text-sm text-gray-600"},"Total Knowledge Chunks")),je.createElement("div",null,je.createElement("h4",{className:"font-medium mb-2"},"By Category"),je.createElement("div",{className:"space-y-1"},Object.entries(f.categoryCounts||{}).map(([e,a])=>je.createElement("div",{key:e,className:"flex justify-between"},je.createElement("span",{className:"capitalize"},e.replace("_"," ")),je.createElement("span",null,a)))))):je.createElement("div",{className:"flex items-center justify-center py-8"},je.createElement(lr,{className:"h-6 w-6 animate-spin"})))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Practice Areas")),je.createElement(hi,null,f?.practiceAreaCounts?je.createElement("div",{className:"space-y-1"},Object.entries(f.practiceAreaCounts).map(([e,a])=>je.createElement("div",{key:e,className:"flex justify-between"},je.createElement("span",null,e),je.createElement("span",null,a)))):je.createElement("div",{className:"text-center text-gray-500 py-4"},"No practice area data available")))),je.createElement(_i,null,je.createElement(pa,{className:"h-4 w-4"}),je.createElement(ki,null,"Your RAG system is ready! Add more legal knowledge to improve AI responses. The system automatically chunks content and generates embeddings for semantic search.")))))},eE=["Contract Law","Employment Law","Corporate Law","Intellectual Property","Real Estate","Family Law","Criminal Law","Civil Litigation","Data Protection","Immigration Law"],RAGChat=()=>{const[e,a]=Me.useState([]),[l,m]=Me.useState(""),[u,p]=Me.useState(!1),[f,g]=Me.useState(""),h=Me.useRef(null),{toast:y}=useToast();Me.useEffect(()=>{scrollToBottom()},[e]);const scrollToBottom=()=>{h.current?.scrollIntoView({behavior:"smooth"})},handleSendMessage=async()=>{if(!l.trim())return;const e={id:Date.now().toString(),role:"user",content:l.trim(),timestamp:new Date};a(a=>[...a,e]),m(""),p(!0);try{const l=await Yv.generateResponse(e.content,{practiceArea:f||void 0,jurisdiction:"Singapore"}),m={id:(Date.now()+1).toString(),role:"assistant",content:l.answer,timestamp:new Date,ragResponse:l};a(e=>[...e,m])}catch(u){y({title:"Error",description:u.message||"Failed to get AI response",variant:"destructive"});const e={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I encountered an error while processing your question. Please try again or contact support if the issue persists.",timestamp:new Date};a(a=>[...a,e])}finally{p(!1)}},getConfidenceColor=e=>e>=.8?"text-green-600":e>=.5?"text-yellow-600":"text-red-600";return je.createElement("div",{className:"flex flex-col h-[600px] max-w-4xl mx-auto"},je.createElement(ui,{className:"flex-1 flex flex-col"},je.createElement(pi,{className:"pb-3"},je.createElement("div",{className:"flex items-center justify-between"},je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement(va,{className:"h-5 w-5 text-blue-600"}),je.createElement("span",null,"RAG Legal Assistant")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(Zc,{value:f,onValueChange:g},je.createElement(Gc,{className:"w-48"},je.createElement(Kc,{placeholder:"Filter by practice area"})),je.createElement(Jc,null,je.createElement(Xc,{value:""},"All Practice Areas"),eE.map(e=>je.createElement(Xc,{key:e,value:e},e))))))),je.createElement(hi,{className:"flex-1 flex flex-col p-0"},je.createElement(Hy,{className:"flex-1 p-4"},je.createElement("div",{className:"space-y-4"},0===e.length&&je.createElement("div",{className:"text-center py-8 text-gray-500"},je.createElement(pa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),je.createElement("h3",{className:"text-lg font-medium mb-2"},"Welcome to RAG Legal Assistant"),je.createElement("p",{className:"text-sm"},"Ask me any legal question about Singapore law. I'll search through our knowledge base to provide you with accurate, source-backed answers."),je.createElement("div",{className:"mt-4 text-xs space-y-1"},je.createElement("p",null," Employment law questions"),je.createElement("p",null," Contract law guidance"),je.createElement("p",null," Corporate compliance"),je.createElement("p",null," And much more..."))),e.map(e=>{return je.createElement("div",{key:e.id,className:"flex "+("user"===e.role?"justify-end":"justify-start")},je.createElement("div",{className:"max-w-[80%] rounded-lg p-3 "+("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900")},je.createElement("div",{className:"flex items-start space-x-2"},"assistant"===e.role&&je.createElement(ya,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),"user"===e.role&&je.createElement(Hr,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),je.createElement("div",{className:"flex-1"},je.createElement("div",{className:"whitespace-pre-wrap"},e.content),e.ragResponse&&je.createElement("div",{className:"mt-3 space-y-2"},je.createElement("div",{className:"flex items-center space-x-1"},(a=e.ragResponse.confidence)>=.8?je.createElement(nr,{className:"h-3 w-3 text-green-500"}):a>=.5?je.createElement(Br,{className:"h-3 w-3 text-yellow-500"}):je.createElement(Br,{className:"h-3 w-3 text-red-500"}),je.createElement("span",{className:`text-xs ${getConfidenceColor(e.ragResponse.confidence)}`},(e=>e>=.8?"High confidence":e>=.5?"Medium confidence":"Low confidence")(e.ragResponse.confidence),"(",(100*e.ragResponse.confidence).toFixed(1),"%)")),e.ragResponse.sources.length>0&&je.createElement("div",{className:"space-y-1"},je.createElement("div",{className:"text-xs font-medium opacity-75"},"Sources:"),je.createElement("div",{className:"flex flex-wrap gap-1"},e.ragResponse.sources.map((e,a)=>je.createElement(Badge,{key:`${e.id}-${a}`,variant:"secondary",className:"text-xs"},je.createElement(Ha,{className:"h-3 w-3 mr-1"}),e.title,e.similarity&&je.createElement("span",{className:"ml-1 opacity-75"},"(",(100*e.similarity).toFixed(0),"%)"))))),je.createElement("div",{className:"text-xs opacity-75 italic"},e.ragResponse.reasoning)))),je.createElement("div",{className:"text-xs opacity-75 mt-1"},e.timestamp.toLocaleTimeString())));var a}),u&&je.createElement("div",{className:"flex justify-start"},je.createElement("div",{className:"bg-gray-100 rounded-lg p-3 max-w-[80%]"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement(ya,{className:"h-4 w-4"}),je.createElement("div",{className:"flex items-center space-x-1"},je.createElement(lr,{className:"h-4 w-4 animate-spin"}),je.createElement("span",{className:"text-sm"},"Searching knowledge base...")))))),je.createElement("div",{ref:h})),je.createElement("div",{className:"border-t p-4"},je.createElement("div",{className:"flex space-x-2"},je.createElement(zo,{value:l,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},placeholder:"Ask a legal question...",disabled:u,className:"flex-1"}),je.createElement(Uo,{onClick:handleSendMessage,disabled:u||!l.trim(),size:"icon"},u?je.createElement(lr,{className:"h-4 w-4 animate-spin"}):je.createElement(Rr,{className:"h-4 w-4"}))),je.createElement("div",{className:"text-xs text-gray-500 mt-2"},"Powered by RAG (Retrieval-Augmented Generation) with Singapore legal knowledge base")))))},RAGKnowledge=()=>{const{profile:e,loading:a}=useSafeAuth();return a?je.createElement(DashboardLayout,null,je.createElement("div",{className:"flex items-center justify-center min-h-[400px]"},je.createElement("div",{className:"text-center"},je.createElement(va,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),je.createElement("p",{className:"text-gray-600"},"Loading RAG Knowledge System...")))):!e||"super_admin"!==e.role&&"admin"!==e.role?je.createElement(Navigate,{to:"/dashboard",replace:!0}):je.createElement(DashboardLayout,null,je.createElement("div",{className:"space-y-6"},je.createElement("div",null,je.createElement("h1",{className:"text-3xl font-bold"},"RAG Knowledge System"),je.createElement("p",{className:"text-gray-600"},"Manage your legal knowledge base and test AI-powered responses")),je.createElement(_i,null,je.createElement(tr,{className:"h-4 w-4"}),je.createElement(ki,null,je.createElement("strong",null,"What is RAG?")," Retrieval-Augmented Generation combines your knowledge base with AI to provide accurate, source-backed answers. Add legal documents, cases, and guides to improve AI responses.")),je.createElement(Xm,{defaultValue:"chat",className:"space-y-4"},je.createElement(ed,{className:"grid w-full grid-cols-3"},je.createElement(td,{value:"chat",className:"flex items-center space-x-2"},je.createElement(gr,{className:"h-4 w-4"}),je.createElement("span",null,"RAG Chat")),je.createElement(td,{value:"manage",className:"flex items-center space-x-2"},je.createElement(La,{className:"h-4 w-4"}),je.createElement("span",null,"Manage Knowledge")),je.createElement(td,{value:"guide",className:"flex items-center space-x-2"},je.createElement(va,{className:"h-4 w-4"}),je.createElement("span",null,"How It Works"))),je.createElement(ad,{value:"chat",className:"space-y-4"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,{className:"flex items-center space-x-2"},je.createElement(gr,{className:"h-5 w-5"}),je.createElement("span",null,"Test RAG Assistant")),je.createElement(gi,null,"Ask legal questions and get AI responses backed by your knowledge base")),je.createElement(hi,null,je.createElement(RAGChat,null)))),je.createElement(ad,{value:"manage",className:"space-y-4"},je.createElement(KnowledgeBaseManager,null)),je.createElement(ad,{value:"guide",className:"space-y-4"},je.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"How RAG Works")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"bg-blue-100 rounded-full p-2"},je.createElement("span",{className:"text-blue-600 font-bold text-sm"},"1")),je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Add Knowledge"),je.createElement("p",{className:"text-sm text-gray-600"},"Upload legal documents, cases, statutes, and guides to your knowledge base."))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"bg-blue-100 rounded-full p-2"},je.createElement("span",{className:"text-blue-600 font-bold text-sm"},"2")),je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Automatic Processing"),je.createElement("p",{className:"text-sm text-gray-600"},"Content is automatically chunked and converted to embeddings for semantic search."))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"bg-blue-100 rounded-full p-2"},je.createElement("span",{className:"text-blue-600 font-bold text-sm"},"3")),je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"Smart Retrieval"),je.createElement("p",{className:"text-sm text-gray-600"},"When you ask a question, the system finds the most relevant knowledge chunks."))),je.createElement("div",{className:"flex items-start space-x-3"},je.createElement("div",{className:"bg-blue-100 rounded-full p-2"},je.createElement("span",{className:"text-blue-600 font-bold text-sm"},"4")),je.createElement("div",null,je.createElement("h4",{className:"font-medium"},"AI Generation"),je.createElement("p",{className:"text-sm text-gray-600"},"AI generates accurate answers using the retrieved knowledge as context.")))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Best Practices")),je.createElement(hi,{className:"space-y-4"},je.createElement("div",{className:"space-y-3"},je.createElement("div",null,je.createElement("h4",{className:"font-medium text-green-600"}," Do"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1 ml-4"},je.createElement("li",null," Add authoritative legal sources"),je.createElement("li",null," Include case law and statutes"),je.createElement("li",null," Use clear, descriptive titles"),je.createElement("li",null," Tag content with practice areas"),je.createElement("li",null," Keep content up-to-date"))),je.createElement("div",null,je.createElement("h4",{className:"font-medium text-red-600"}," Don't"),je.createElement("ul",{className:"text-sm text-gray-600 space-y-1 ml-4"},je.createElement("li",null," Add outdated or superseded laws"),je.createElement("li",null," Include personal opinions"),je.createElement("li",null," Use vague or unclear titles"),je.createElement("li",null," Forget to specify jurisdiction"),je.createElement("li",null," Add duplicate content")))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Content Types")),je.createElement(hi,null,je.createElement("div",{className:"space-y-3"},je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"Legal Documents:")," Contracts, agreements, forms")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"Case Law:")," Court decisions and precedents")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"Statutes:")," Laws and regulations")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"Regulations:")," Administrative rules")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"FAQs:")," Common questions and answers")),je.createElement("div",{className:"flex items-center space-x-2"},je.createElement("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),je.createElement("span",{className:"text-sm"},je.createElement("strong",null,"Guides:")," How-to and explanatory content"))))),je.createElement(ui,null,je.createElement(pi,null,je.createElement(fi,null,"Technical Details")),je.createElement(hi,{className:"space-y-3"},je.createElement("div",{className:"text-sm space-y-2"},je.createElement("div",null,je.createElement("strong",null,"Embedding Model:")," OpenAI text-embedding-ada-002"),je.createElement("div",null,je.createElement("strong",null,"Chunk Size:")," 1000 characters with 200 character overlap"),je.createElement("div",null,je.createElement("strong",null,"Similarity Threshold:")," 0.7 (70% similarity)"),je.createElement("div",null,je.createElement("strong",null,"Max Results:")," 5 most relevant chunks per query"),je.createElement("div",null,je.createElement("strong",null,"AI Model:")," GPT-4 for response generation")))))))))},tE=Me.lazy(()=>ze(()=>import("./PdfAnnotationsDemo-BfnrZeOF.js"),__vite__mapDeps([5,1,4,6,7,8]),import.meta.url)),aE=Me.lazy(()=>ze(()=>import("./Documents-CnIRxlmU.js"),__vite__mapDeps([9,1,4,3,6,10,11]),import.meta.url)),rE=Me.lazy(()=>ze(()=>import("./AIAssistant-Cs5Dg_Y7.js"),__vite__mapDeps([12,1,3,4,10]),import.meta.url)),nE=Me.lazy(()=>ze(()=>import("./Templates-V61Uo7EA.js"),__vite__mapDeps([13,1,14,3,4]),import.meta.url)),sE=Me.lazy(()=>ze(()=>import("./TemplateCustomize-Ct89Lzuz.js"),__vite__mapDeps([15,1,4]),import.meta.url)),oE=Me.lazy(()=>ze(()=>import("./TemplateVersionManagement-CJXNuXXh.js"),__vite__mapDeps([16,1,14,3,4,17,18]),import.meta.url)),lE=Me.lazy(()=>ze(()=>import("./TemplateAnalytics-DosrAuBM.js"),__vite__mapDeps([19,1,20,18,4]),import.meta.url)),iE=Me.lazy(()=>ze(()=>import("./Admin-IGLByHaD.js"),__vite__mapDeps([21,1,20,18,11,17,4]),import.meta.url)),cE=new Gs,App=()=>(console.log(" APP COMPONENT MOUNTING - DEBUG START "),console.log(" Environment Check:"),console.log(" VITE_SUPABASE_URL:","https://kvlaydeyqidlfpfutbmp.supabase.co"),console.log(" VITE_SUPABASE_ANON_KEY exists:",!0),Me.useEffect(()=>{const handleUnhandledRejection=e=>{console.error(" Unhandled Promise Rejection:",e.reason),e.preventDefault()},handleError=e=>{console.error(" JavaScript Error:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error}),e.preventDefault()};return window.addEventListener("unhandledrejection",handleUnhandledRejection),window.addEventListener("error",handleError),()=>{window.removeEventListener("unhandledrejection",handleUnhandledRejection),window.removeEventListener("error",handleError)}},[]),Me.useEffect(()=>{console.log(" APP DEBUG - useEffect running...");(async()=>{console.log(" APP DEBUG - Starting Supabase connection test..."),console.log(" Environment Variables:"),console.log("VITE_SUPABASE_URL:","https://kvlaydeyqidlfpfutbmp.supabase.co"),console.log("VITE_SUPABASE_ANON_KEY exists:",!0),console.log("VITE_SUPABASE_ANON_KEY length:",208);try{console.log(" Step 1: Importing Supabase...");const{supabase:e}=await ze(async()=>{const{supabase:e}=await Promise.resolve().then(()=>jo);return{supabase:e}},void 0,import.meta.url);console.log(" Step 1 PASSED: Supabase imported successfully"),console.log(" Step 2: Testing auth connection...");const{data:{user:a},error:l}=await e.auth.getUser();if(console.log(" Auth User:",a?{id:a.id,email:a.email}:null),console.log(" Auth Error:",l),l?console.error(" Step 2 FAILED: Auth connection error:",l):console.log(" Step 2 PASSED: Auth connection working"),a){console.log(" Step 3: Testing database query...");const{data:l,error:m}=await e.from("profiles").select("*").eq("id",a.id).single();console.log(" Profile Data:",l),console.log(" Profile Error:",m),m?console.error(" Step 3 FAILED: Database query error:",m):console.log(" Step 3 PASSED: Database query working")}}catch(e){console.error(" CRITICAL ERROR in connection test:",e),console.error(" Error type:",typeof e),console.error(" Error message:",e instanceof Error?e.message:"Unknown error"),console.error(" Error stack:",e instanceof Error?e.stack:"No stack trace")}})()},[]),je.createElement(ErrorBoundary,{level:"page"},je.createElement(QueryClientProvider,{client:cE},je.createElement(Is,null,je.createElement(Toaster$1,null),je.createElement(Toaster,null),je.createElement(BrowserRouter,null,je.createElement(AuthErrorBoundary,null,je.createElement(AuthProvider,null,je.createElement(Routes,null,je.createElement(Route,{path:ii.home,element:je.createElement(Index,null)}),je.createElement(Route,{path:"/law-firms",element:je.createElement(LawFirms$1,null)}),je.createElement(Route,{path:"/law-firms/:id",element:je.createElement(LawFirmProfile,null)}),je.createElement(Route,{path:"/documents",element:je.createElement(AuthenticatedRoute,null,je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(aE,null)))}),je.createElement(Route,{path:"/legal-qa",element:je.createElement(LegalQA,null)}),je.createElement(Route,{path:"/legal-qa/:id",element:je.createElement(QuestionDetail,null)}),je.createElement(Route,{path:ii.pricing,element:je.createElement(Pricing,null)}),je.createElement(Route,{path:ii.login,element:je.createElement(Login,null)}),je.createElement(Route,{path:ii.register,element:je.createElement(Register,null)}),je.createElement(Route,{path:ii.forgotPassword,element:je.createElement(ForgotPassword,null)}),je.createElement(Route,{path:ii.resetPassword,element:je.createElement(ResetPassword,null)}),je.createElement(Route,{path:"/auth/confirm",element:je.createElement(EmailConfirm,null)}),je.createElement(Route,{path:"/debug",element:je.createElement(Debug,null)}),je.createElement(Route,{path:"/debug/upload",element:je.createElement(DebugUpload,null)}),je.createElement(Route,{path:"/debug-auth",element:je.createElement(DebugAuth,null)}),je.createElement(Route,{path:"/auth-test",element:je.createElement(AuthTest,null)}),je.createElement(Route,{path:"/simple-auth-test",element:je.createElement(SimpleAuthTest,null)}),je.createElement(Route,{path:"/basic-test",element:je.createElement(BasicTest,null)}),je.createElement(Route,{path:"/clear-auth",element:je.createElement(ClearAuth,null)}),je.createElement(Route,{path:"/logout-test",element:je.createElement(LogoutTest,null)}),je.createElement(Route,{path:"/emergency-logout",element:je.createElement(EmergencyLogout,null)}),je.createElement(Route,{path:"/auth-fix-test",element:je.createElement(AuthFixTest,null)}),je.createElement(Route,{path:"/signout-test",element:je.createElement(SignOutTest,null)}),je.createElement(Route,{path:ii.dashboard,element:je.createElement(AuthenticatedRoute,null,je.createElement(Dashboard,null))}),je.createElement(Route,{path:ii.documents,element:je.createElement(AuthenticatedRoute,null,je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(aE,null)))}),je.createElement(Route,{path:"/dashboard/ai-assistant",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(rE,null))}),je.createElement(Route,{path:"/dashboard/templates",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(nE,null))}),je.createElement(Route,{path:"/dashboard/law-firms",element:je.createElement(LawFirms,null)}),je.createElement(Route,{path:"/dashboard/admin",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(iE,null))}),je.createElement(Route,{path:"/dashboard/template-analytics",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(lE,null))}),je.createElement(Route,{path:"/dashboard/search-history",element:je.createElement(SearchHistory,null)}),je.createElement(Route,{path:"/dashboard/rag-knowledge",element:je.createElement(AuthenticatedRoute,null,je.createElement(RAGKnowledge,null))}),je.createElement(Route,{path:"/dashboard/subscription",element:je.createElement(Subscription,null)}),je.createElement(Route,{path:"/dashboard/settings",element:je.createElement(Settings,null)}),je.createElement(Route,{path:"/dashboard/security",element:je.createElement(SecuritySettings,null)}),je.createElement(Route,{path:"/subscribe/:tier",element:je.createElement(Subscribe,null)}),je.createElement(Route,{path:"/payment/success",element:je.createElement(PaymentSuccess,null)}),je.createElement(Route,{path:"/payment/failure",element:je.createElement(PaymentFailure,null)}),je.createElement(Route,{path:"/shared/:shareToken",element:je.createElement(SharedDocument,null)}),je.createElement(Route,{path:ii.publicAnalysis,element:je.createElement(PublicAnalysis,null)}),je.createElement(Route,{path:`${ii.publicAnalysisResult}/:analysisId`,element:je.createElement(PublicAnalysisResult,null)}),je.createElement(Route,{path:ii.templateBrowser,element:je.createElement(TemplateBrowser,null)}),je.createElement(Route,{path:ii.templateMarketplace,element:je.createElement(TemplateBrowser,null)}),je.createElement(Route,{path:`${ii.templatePreview}/:slug`,element:je.createElement(TemplatePreview,null)}),je.createElement(Route,{path:`${ii.templateCustomize}/:slug`,element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(sE,null))}),je.createElement(Route,{path:"/templates/:slug/versions",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(oE,null))}),je.createElement(Route,{path:"/pdf-annotations-demo",element:je.createElement(Me.Suspense,{fallback:je.createElement("div",{className:"flex items-center justify-center h-screen"},je.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}))},je.createElement(tE,null))}),je.createElement(Route,{path:"*",element:je.createElement(NotFound,null)})))))))));"undefined"!=typeof window&&(window.React=Le,window.ReactDOM={createRoot:De},window.react=Le);try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");De(e).render(je.createElement(App,null))}catch(uE){console.error("Failed to initialize React application:",uE);const e=document.getElementById("root");e&&(e.innerHTML=`\n      <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">\n        <h1>Application Loading Error</h1>\n        <p>Please refresh the page or contact support if the issue persists.</p>\n        <p style="color: #666; font-size: 12px;">Error: ${uE}</p>\n      </div>\n    `)}export{ad as $,hi as A,Uo as B,ka as C,Oh as D,Tr as E,Za as F,Ur as G,bi as H,zo as I,ba as J,formatDistanceToNow as K,Sa as L,gr as M,pr as N,Fa as O,Er as P,Ua as Q,za as R,Wu as S,Is as T,Hr as U,qa as V,Xm as W,ed as X,td as Y,Ha as Z,Ar as _,constructFrom as a,Da as a$,pi as a0,fi as a1,tr as a2,Vr as a3,Aa as a4,Ta as a5,Mo as a6,useAuth as a7,An as a8,oi as a9,hr as aA,ConnectionStatus as aB,hd as aC,yd as aD,vd as aE,kr as aF,Du as aG,Au as aH,Iu as aI,Tu as aJ,Pu as aK,useForm as aL,Fr as aM,Dd as aN,mm as aO,t as aP,zr as aQ,wf as aR,useQuery as aS,useQueryClient as aT,useToast as aU,useMutation as aV,ji as aW,Na as aX,Ya as aY,or as aZ,Bh as a_,useDropzone as aa,gi as ab,Gr as ac,Zc as ad,Gc as ae,Kc as af,Jc as ag,ni as ah,Xc as ai,sv as aj,va as ak,Qr as al,_i as am,ki as an,Ef as ao,lr as ap,si as aq,Nr as ar,Br as as,Wr as at,$a as au,dr as av,cy as aw,my as ax,dy as ay,Ba as az,getTimezoneOffsetInMilliseconds as b,useSafeAuth as b0,useNavigate as b1,AuthenticatedRoute as b2,ErrorBoundary as b3,er as b4,la as b5,UploadDebug as b6,ProductionDiagnostics as b7,ya as b8,nr as b9,Rr as ba,Yv as bb,DashboardLayout as bc,Ma as bd,jr as be,useParams as bf,Wv as bg,Skeleton as bh,ii as bi,Ku as bj,wr as bk,Ka as bl,Xu as bm,Gv as bn,Lr as bo,ia as bp,Xa as bq,TemplateVersionHistory as br,Ir as bs,zh as bt,dm as bu,La as bv,ai as bw,bf as bx,createLucideIcon as c,Ed as d,Rd as e,clsx as f,getDefaultOptions as g,cn as h,Lh as i,tt as j,$h as k,Uh as l,xd as m,Fs as n,Ms as o,Badge as p,js as q,Cr as r,Hy as s,toDate as t,Ca as u,Zu as v,Yu as w,DialogHeader as x,Ju as y,ui as z};
