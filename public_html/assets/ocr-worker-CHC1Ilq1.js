import"./vendor-DXfpcdns.js";function se(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in e)){const b=Object.getOwnPropertyDescriptor(o,i);b&&Object.defineProperty(e,i,b.get?b:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,i.get?i:{enumerable:!0,get:function(){return e[o]}})}),r}function ie(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const ce=P;let C=0;var F=({id:e,action:t,payload:r={}})=>{let o=e;return typeof o>"u"&&(o=ce("Job",C),C+=1),{id:o,action:t,payload:r}},v={};let M=!1;v.logging=M;v.setLogging=e=>{M=e};v.log=(...e)=>M?console.log.apply(void 0,e):null;const le=F,{log:T}=v,de=P;let D=0;var ue=()=>{const e=de("Scheduler",D),t={},r={};let o=[];D+=1;const i=()=>o.length,b=()=>Object.keys(t).length,w=()=>{if(o.length!==0){const a=Object.keys(t);for(let l=0;l<a.length;l+=1)if(typeof r[a[l]]>"u"){o[0](t[a[l]]);break}}},d=(a,l)=>new Promise((L,A)=>{const O=le({action:a,payload:l});o.push(async S=>{o.shift(),r[S.id]=O;try{L(await S[a].apply(void 0,[...l,O.id]))}catch(h){A(h)}finally{delete r[S.id],w()}}),T(`[${e}]: Add ${O.id} to JobQueue`),T(`[${e}]: JobQueue length=${o.length}`),w()});return{addWorker:a=>(t[a.id]=a,T(`[${e}]: Add ${a.id}`),T(`[${e}]: Number of workers=${b()}`),w(),a.id),addJob:async(a,...l)=>{if(b()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return d(a,l)},terminate:async()=>{Object.keys(t).forEach(async a=>{await t[a].terminate()}),o=[]},getQueueLen:i,getNumWorkers:b}},pe=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof ie=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const fe=pe("type")==="browser",ge=fe?e=>new URL(e,window.location.href).href:e=>e;var me=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=ge(t[r]))}),t},z={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const be="tesseract.js",he="6.0.1",ye="Pure Javascript Multilingual OCR",we="src/index.js",ke="commonjs",ve="src/index.d.ts",Le="dist/tesseract.min.js",Oe="dist/tesseract.min.js",Se={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Ee={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Ae="",Te=["jeromewu"],_e="Apache-2.0",$e={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Re={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},je={"@rollup/pluginutils":"^5.0.2"},Ne={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Pe={url:"https://github.com/naptha/tesseract.js/issues"},Me="https://github.com/naptha/tesseract.js",Ie={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Ce={name:be,version:he,description:ye,main:we,type:ke,types:ve,unpkg:Le,jsdelivr:Oe,scripts:Se,browser:Ee,author:Ae,contributors:Te,license:_e,devDependencies:$e,dependencies:Re,overrides:je,repository:Ne,bugs:Pe,homepage:Me,collective:Ie};var De={workerBlobURL:!0,logger:()=>{}};const Ue=Ce.version,We=De;var Be={...We,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Ue}/dist/worker.min.js`},Fe=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const o=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(o))}else r=new Worker(e);return r},ze=e=>{e.terminate()},Ge=(e,t)=>{e.onmessage=({data:r})=>{t(r)}},Ke=async(e,t)=>{e.postMessage(t)};const j=e=>new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=({target:{error:{code:i}}})=>{r(Error(`File could not be read! Code=${i}`))},o.readAsArrayBuffer(e)}),N=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await N(e.src)),e.tagName==="VIDEO"&&(t=await N(e.poster)),e.tagName==="CANVAS"&&await new Promise(r=>{e.toBlob(async o=>{t=await j(o),r()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();t=await j(r)}else(e instanceof File||e instanceof Blob)&&(t=await j(e));return new Uint8Array(t)};var He=N;const Ye=Be,Je=Fe,xe=ze,qe=Ge,Ve=Ke,Ze=He;var Qe={defaultOptions:Ye,spawnWorker:Je,terminateWorker:xe,onMessage:qe,send:Ve,loadImage:Ze};const Xe=me,m=F,{log:U}=v,et=P,y=z,{defaultOptions:tt,spawnWorker:rt,terminateWorker:ot,onMessage:nt,loadImage:W,send:st}=Qe;let B=0;var G=async(e="eng",t=y.LSTM_ONLY,r={},o={})=>{const i=et("Worker",B),{logger:b,errorHandler:w,...d}=Xe({...tt,...r}),k={},_=typeof e=="string"?e.split("+"):e;let E=t,a=o;const l=[y.DEFAULT,y.LSTM_ONLY].includes(t)&&!d.legacyCore;let L,A;const O=new Promise((n,s)=>{A=n,L=s}),S=n=>{L(n.message)};let h=rt(d);h.onerror=S,B+=1;const f=({id:n,action:s,payload:c})=>new Promise((u,p)=>{U(`[${i}]: Start ${n}, action=${s}`);const g=`${s}-${n}`;k[g]={resolve:u,reject:p},st(h,{workerId:i,jobId:n,action:s,payload:c})}),Y=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=n=>f(m({id:n,action:"load",payload:{options:{lstmOnly:l,corePath:d.corePath,logging:d.logging}}})),x=(n,s,c)=>f(m({id:c,action:"FS",payload:{method:"writeFile",args:[n,s]}})),q=(n,s)=>f(m({id:s,action:"FS",payload:{method:"readFile",args:[n,{encoding:"utf8"}]}})),V=(n,s)=>f(m({id:s,action:"FS",payload:{method:"unlink",args:[n]}})),Z=(n,s,c)=>f(m({id:c,action:"FS",payload:{method:n,args:s}})),I=(n,s)=>f(m({id:s,action:"loadLanguage",payload:{langs:n,options:{langPath:d.langPath,dataPath:d.dataPath,cachePath:d.cachePath,cacheMethod:d.cacheMethod,gzip:d.gzip,lstmOnly:[y.DEFAULT,y.LSTM_ONLY].includes(E)&&!d.legacyLang}}})),$=(n,s,c,u)=>f(m({id:u,action:"initialize",payload:{langs:n,oem:s,config:c}})),Q=(n="eng",s,c,u)=>{if(l&&[y.TESSERACT_ONLY,y.TESSERACT_LSTM_COMBINED].includes(s))throw Error("Legacy model requested but code missing.");const p=s||E;E=p;const g=c||a;a=g;const R=(typeof n=="string"?n.split("+"):n).filter(ne=>!_.includes(ne));return _.push(...R),R.length>0?I(R,u).then(()=>$(n,p,g,u)):$(n,p,g,u)},X=(n={},s)=>f(m({id:s,action:"setParameters",payload:{params:n}})),ee=async(n,s={},c={text:!0},u)=>f(m({id:u,action:"recognize",payload:{image:await W(n),options:s,output:c}})),te=async(n,s)=>{if(l)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return f(m({id:s,action:"detect",payload:{image:await W(n)}}))},re=async()=>(h!==null&&(ot(h),h=null),Promise.resolve());nt(h,({workerId:n,jobId:s,status:c,action:u,data:p})=>{const g=`${u}-${s}`;if(c==="resolve")U(`[${n}]: Complete ${s}`),k[g].resolve({jobId:s,data:p}),delete k[g];else if(c==="reject")if(k[g].reject(p),delete k[g],u==="load"&&L(p),w)w(p);else throw Error(p);else c==="progress"&&b({...p,userJobId:s})});const oe={id:i,worker:h,load:Y,writeText:x,readText:q,removeFile:V,FS:Z,reinitialize:Q,setParameters:X,recognize:ee,detect:te,terminate:re};return J().then(()=>I(e)).then(()=>$(e,t,o)).then(()=>A(oe)).catch(()=>{}),O};const K=G,at=async(e,t,r)=>{const o=await K(t,1,r);return o.recognize(e).finally(async()=>{await o.terminate()})},it=async(e,t)=>{const r=await K("osd",0,t);return r.detect(e).finally(async()=>{await r.terminate()})};var ct={recognize:at,detect:it},lt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},dt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const ut=ue,pt=G,ft=ct,gt=lt,mt=z,bt=dt,{setLogging:ht}=v;var H={languages:gt,OEM:mt,PSM:bt,createScheduler:ut,createWorker:pt,setLogging:ht,...ft};const yt=ae(H),Ot=se({__proto__:null,default:yt},[H]);export{Lt as a,ie as b,vt as c,ae as g,Ot as i};
