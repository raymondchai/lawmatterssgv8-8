import{a as e,R as t}from"./react-vendor-92YuBQvb.js";import{c as a,a8 as l,z as s,A as r,bs as n,B as c,Q as m,ar as i,at as o,r as d,I as u,ad as E,ae as p,af as v,ag as g,ai as x,a0 as y,a1 as N,aO as f,aC as w,aE as h,p as b,K as S,D as A,i as k,k as R,bt as T,a_ as C,l as M,G as _,M as U,Z as j,O as F,W as L,X as D,Y as I,$ as P,ab as O,a5 as $,a$ as z,V,as as Y,bu as G,be as W,bv as H,aX as Q,aQ as q,bk as B,bg as X,bh as J,v as K,bj as Z,w as ee,x as te,y as ae,bm as le,am as se,a4 as re,an as ne,b0 as ce,bc as me,_ as ie}from"./index-DpUelwut.js";import{u as oe,r as de,P as ue,a as Ee,T as pe}from"./usePermissions-BEQPgmcy.js";import{E as ve}from"./ellipsis-DO8wsauv.js";import{S as ge}from"./square-pen-DBgNO8yg.js";import"./supabase-Br4R_luN.js";import"./minus-CJdWo0zX.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=a("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ye=a("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Ne=a("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),fe=a("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),we=a("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),he=a("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),be=a("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Se=[{value:"user",label:"User",color:"bg-gray-100 text-gray-800"},{value:"moderator",label:"Moderator",color:"bg-blue-100 text-blue-800"},{value:"admin",label:"Admin",color:"bg-purple-100 text-purple-800"},{value:"super_admin",label:"Super Admin",color:"bg-red-100 text-red-800"}],UserManagement=({className:a=""})=>{const[U,j]=e.useState([]),[F,L]=e.useState([]),[D,I]=e.useState(!0),[P,O]=e.useState(""),[$,z]=e.useState("all"),[V,Y]=e.useState([]),[G,W]=e.useState(""),{hasPermission:H}=oe();e.useEffect(()=>{loadUsers()},[]),e.useEffect(()=>{filterUsers()},[U,P,$]);const loadUsers=async()=>{try{I(!0);const e=await de.getUsers();j(e)}catch(e){console.error("Error loading users:",e),l.error("Failed to load users")}finally{I(!1)}},filterUsers=()=>{let e=[...U];if(P.trim()){const t=P.toLowerCase();e=e.filter(e=>e.full_name?.toLowerCase().includes(t)||e.email.toLowerCase().includes(t))}"all"!==$&&(e=e.filter(e=>e.role===$)),L(e)},handleUpdateUserRole=async(e,t)=>{try{await de.updateUserRole(e,t),l.success("User role updated successfully"),loadUsers()}catch(a){console.error("Error updating user role:",a),l.error("Failed to update user role")}};return H(ue.USERS_READ)?t.createElement("div",{className:`space-y-6 ${a}`},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"User Management"),t.createElement("p",{className:"text-gray-600"},"Manage user accounts, roles, and permissions")),t.createElement("div",{className:"flex space-x-2"},t.createElement(c,{variant:"outline",onClick:()=>{const e=[["Name","Email","Role","Created At"].join(","),...F.map(e=>[e.full_name||"",e.email,e.role,new Date(e.created_at).toLocaleDateString()].join(","))].join("\n"),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=`users_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}},t.createElement(m,{className:"h-4 w-4 mr-2"}),"Export"),t.createElement(c,{variant:"outline",onClick:loadUsers},t.createElement(i,{className:"h-4 w-4 mr-2"}),"Refresh"))),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},Se.map(e=>{const a=U.filter(t=>t.role===e.value).length;return t.createElement(s,{key:e.value},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.label,"s"),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},a)),t.createElement(o,{className:"h-8 w-8 text-gray-400"}))))})),t.createElement(s,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex flex-col md:flex-row gap-4"},t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"relative"},t.createElement(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.createElement(u,{placeholder:"Search users by name or email...",value:P,onChange:e=>O(e.target.value),className:"pl-10"}))),t.createElement("div",{className:"w-full md:w-48"},t.createElement(E,{value:$,onValueChange:e=>z(e)},t.createElement(p,null,t.createElement(v,{placeholder:"Filter by role"})),t.createElement(g,null,t.createElement(x,{value:"all"},"All Roles"),Se.map(e=>t.createElement(x,{key:e.value,value:e.value},e.label)))))),V.length>0&&H(ue.USERS_MANAGE_ROLES)&&t.createElement("div",{className:"flex items-center space-x-4 mt-4 p-3 bg-blue-50 rounded-lg"},t.createElement("span",{className:"text-sm font-medium text-blue-900"},V.length," user",1===V.length?"":"s"," selected"),t.createElement(E,{value:G,onValueChange:W},t.createElement(p,{className:"w-48"},t.createElement(v,{placeholder:"Bulk actions"})),t.createElement(g,null,t.createElement(x,{value:"promote_moderator"},"Promote to Moderator"),t.createElement(x,{value:"demote_user"},"Demote to User"),t.createElement(x,{value:"delete"},"Delete Users"))),t.createElement(c,{onClick:async()=>{if(0!==V.length&&G)try{switch(G){case"delete":if(!confirm(`Are you sure you want to delete ${V.length} users? This action cannot be undone.`))return;await de.bulkDeleteUsers(V),l.success(`${V.length} users deleted successfully`);break;case"promote_moderator":await de.bulkUpdateUserRoles(V,"moderator"),l.success(`${V.length} users promoted to moderator`);break;case"demote_user":await de.bulkUpdateUserRoles(V,"user"),l.success(`${V.length} users demoted to user`);break;default:return}Y([]),W(""),loadUsers()}catch(e){console.error("Error performing bulk action:",e),l.error("Failed to perform bulk action")}},disabled:!G},"Apply"),t.createElement(c,{variant:"outline",onClick:()=>Y([])},"Clear Selection")))),t.createElement(s,null,t.createElement(y,null,t.createElement("div",{className:"flex items-center justify-between"},t.createElement(N,null,"Users (",F.length,")"),H(ue.USERS_MANAGE_ROLES)&&t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(f,{checked:V.length===F.length&&F.length>0,onCheckedChange:e=>{Y(e?F.map(e=>e.id):[])}}),t.createElement("span",{className:"text-sm text-gray-600"},"Select All")))),t.createElement(r,null,D?t.createElement("div",{className:"space-y-4"},[...Array(5)].map((e,a)=>t.createElement("div",{key:a,className:"flex items-center space-x-4 p-4 animate-pulse"},t.createElement("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.createElement("div",{className:"flex-1 space-y-2"},t.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}))))):F.length>0?t.createElement("div",{className:"space-y-2"},F.map(e=>{const a=(s=e.role,Se.find(e=>e.value===s)||Se[0]);var s;return t.createElement("div",{key:e.id,className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50"},t.createElement("div",{className:"flex items-center space-x-4"},H(ue.USERS_MANAGE_ROLES)&&t.createElement(f,{checked:V.includes(e.id),onCheckedChange:t=>{return a=e.id,void Y(!!t?e=>[...e,a]:e=>e.filter(e=>e!==a));var a}}),t.createElement(w,null,t.createElement(h,null,e.full_name?e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase())),t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("h3",{className:"font-medium text-gray-900"},e.full_name||"Unnamed User"),t.createElement(b,{className:a.color},a.label)),t.createElement("p",{className:"text-sm text-gray-600"},e.email),t.createElement("p",{className:"text-xs text-gray-500"},"Joined ",S(new Date(e.created_at),{addSuffix:!0})))),H(ue.USERS_UPDATE)&&t.createElement(A,null,t.createElement(k,{asChild:!0},t.createElement(c,{variant:"ghost",size:"sm"},t.createElement(ve,{className:"h-4 w-4"}))),t.createElement(R,{align:"end"},t.createElement(T,null,"Actions"),t.createElement(C,null),H(ue.USERS_MANAGE_ROLES)&&t.createElement(t.Fragment,null,t.createElement(M,{onClick:()=>handleUpdateUserRole(e.id,"moderator")},t.createElement(he,{className:"h-4 w-4 mr-2"}),"Promote to Moderator"),t.createElement(M,{onClick:()=>handleUpdateUserRole(e.id,"user")},t.createElement(be,{className:"h-4 w-4 mr-2"}),"Demote to User"),t.createElement(C,null)),H(ue.USERS_DELETE)&&t.createElement(M,{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await de.deleteUser(e),l.success("User deleted successfully"),loadUsers()}catch(t){console.error("Error deleting user:",t),l.error("Failed to delete user")}})(e.id),className:"text-red-600"},t.createElement(_,{className:"h-4 w-4 mr-2"}),"Delete User"))))})):t.createElement("div",{className:"text-center py-8"},t.createElement(o,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No users found"),t.createElement("p",{className:"text-gray-500"},"Try adjusting your search criteria or filters."))))):t.createElement(s,{className:a},t.createElement(r,{className:"text-center py-8"},t.createElement(n,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"Access Denied"),t.createElement("p",{className:"text-gray-500"},"You don't have permission to view user management.")))},ContentModeration=({className:a=""})=>{const[n,m]=e.useState([]),[i,d]=e.useState([]),[u,E]=e.useState({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0}),[p,v]=e.useState(!0),[g,x]=e.useState("reviews"),{hasPermission:f}=oe();e.useEffect(()=>{loadModerationData()},[]);const loadModerationData=async()=>{try{v(!0),m([]),d([]),E({pendingReviews:0,pendingTemplates:0,totalReviews:0,totalTemplates:0})}catch(e){console.error("Error loading moderation data:",e),l.error("Failed to load moderation data")}finally{v(!1)}},handleReviewModeration=async(e,t)=>{try{await G.moderateReview(e,t),l.success(`Review ${t} successfully`),loadModerationData()}catch(a){console.error("Error moderating review:",a),l.error("Failed to moderate review")}},handleTemplateModeration=async(e,t)=>{try{l.success(`Template ${t} successfully`),loadModerationData()}catch(a){console.error("Error moderating template:",a),l.error("Failed to moderate template")}};if(!f(ue.LAW_FIRMS_MODERATE_REVIEWS)&&!f(ue.TEMPLATES_MODERATE))return t.createElement(s,{className:a},t.createElement(r,{className:"text-center py-8"},t.createElement(Ne,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"Access Denied"),t.createElement("p",{className:"text-gray-500"},"You don't have permission to access content moderation.")));const A=[{title:"Pending Reviews",value:u.pendingReviews,total:u.totalReviews,description:"Reviews awaiting moderation",icon:U,color:"text-yellow-600"},{title:"Pending Templates",value:u.pendingTemplates,total:u.totalTemplates,description:"Templates awaiting approval",icon:j,color:"text-blue-600"},{title:"Total Content",value:u.totalReviews+u.totalTemplates,total:null,description:"All moderated content",icon:o,color:"text-green-600"},{title:"Moderation Queue",value:u.pendingReviews+u.pendingTemplates,total:null,description:"Items requiring attention",icon:F,color:"text-red-600"}];return t.createElement("div",{className:`space-y-6 ${a}`},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Content Moderation"),t.createElement("p",{className:"text-gray-600"},"Review and moderate user-generated content")),t.createElement(c,{variant:"outline",onClick:loadModerationData},t.createElement(F,{className:"h-4 w-4 mr-2"}),"Refresh Queue")),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},A.map((e,a)=>t.createElement(s,{key:a},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value,null!==e.total&&t.createElement("span",{className:"text-sm text-gray-500 ml-1"},"/ ",e.total)),t.createElement("p",{className:"text-xs text-gray-500"},e.description)),t.createElement(e.icon,{className:`h-8 w-8 ${e.color}`})))))),t.createElement(L,{value:g,onValueChange:x},t.createElement(D,{className:"grid w-full grid-cols-2"},t.createElement(I,{value:"reviews",className:"flex items-center space-x-2"},t.createElement(U,{className:"h-4 w-4"}),t.createElement("span",null,"Reviews (",u.pendingReviews,")")),t.createElement(I,{value:"templates",className:"flex items-center space-x-2"},t.createElement(j,{className:"h-4 w-4"}),t.createElement("span",null,"Templates (",u.pendingTemplates,")"))),t.createElement(P,{value:"reviews",className:"space-y-4"},t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Pending Reviews"),t.createElement(O,null,"Law firm reviews awaiting moderation approval")),t.createElement(r,null,p?t.createElement("div",{className:"space-y-4"},[...Array(3)].map((e,a)=>t.createElement("div",{key:a,className:"animate-pulse"},t.createElement("div",{className:"flex items-start space-x-3 p-4 border rounded-lg"},t.createElement("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),t.createElement("div",{className:"flex-1 space-y-2"},t.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-full"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-3/4"})))))):n.length>0?t.createElement("div",{className:"space-y-4"},n.map(e=>{return t.createElement("div",{key:e.id,className:"border rounded-lg p-4"},t.createElement("div",{className:"flex items-start justify-between mb-3"},t.createElement("div",{className:"flex items-start space-x-3"},t.createElement(w,null,t.createElement(h,null,e.user?e.user.full_name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")),t.createElement("div",null,t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("h4",{className:"font-medium text-gray-900"},e.user?.full_name||"Anonymous"),t.createElement(b,{variant:"secondary"},"Pending")),t.createElement("div",{className:"flex items-center space-x-2 mt-1"},t.createElement("div",{className:"flex items-center space-x-1"},(a=e.rating,Array.from({length:5},(e,l)=>t.createElement(W,{key:l,className:"h-4 w-4 "+(l<Math.floor(a)?"text-yellow-400 fill-current":"text-gray-300")})))),t.createElement("span",{className:"text-sm text-gray-500"},S(new Date(e.created_at),{addSuffix:!0}))))),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(c,{size:"sm",onClick:()=>handleReviewModeration(e.id,"approved")},t.createElement($,{className:"h-4 w-4 mr-1"}),"Approve"),t.createElement(c,{variant:"destructive",size:"sm",onClick:()=>handleReviewModeration(e.id,"rejected")},t.createElement(z,{className:"h-4 w-4 mr-1"}),"Reject"))),t.createElement("div",{className:"space-y-2"},t.createElement("h5",{className:"font-medium text-gray-900"},e.title),t.createElement("p",{className:"text-gray-700"},e.content)));var a})):t.createElement("div",{className:"text-center py-8"},t.createElement(U,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No pending reviews"),t.createElement("p",{className:"text-gray-500"},"All reviews have been moderated."))))),t.createElement(P,{value:"templates",className:"space-y-4"},t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Pending Templates"),t.createElement(O,null,"Public templates awaiting approval")),t.createElement(r,null,p?t.createElement("div",{className:"space-y-4"},[...Array(3)].map((e,a)=>t.createElement("div",{key:a,className:"animate-pulse"},t.createElement("div",{className:"flex items-start space-x-3 p-4 border rounded-lg"},t.createElement("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),t.createElement("div",{className:"flex-1 space-y-2"},t.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-full"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-2/3"})))))):i.length>0?t.createElement("div",{className:"space-y-4"},i.map(e=>t.createElement("div",{key:e.id,className:"border rounded-lg p-4"},t.createElement("div",{className:"flex items-start justify-between mb-3"},t.createElement("div",{className:"flex items-start space-x-3"},t.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},t.createElement(j,{className:"h-5 w-5 text-blue-600"})),t.createElement("div",null,t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("h4",{className:"font-medium text-gray-900"},e.name),t.createElement(b,{variant:"secondary"},"Pending")),t.createElement("p",{className:"text-sm text-gray-600 mt-1"},e.category),t.createElement("p",{className:"text-xs text-gray-500"},"Created ",S(new Date(e.created_at),{addSuffix:!0})))),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(c,{variant:"outline",size:"sm"},t.createElement(V,{className:"h-4 w-4 mr-1"}),"Preview"),t.createElement(c,{size:"sm",onClick:()=>handleTemplateModeration(e.id,"approved")},t.createElement($,{className:"h-4 w-4 mr-1"}),"Approve"),t.createElement(c,{variant:"destructive",size:"sm",onClick:()=>handleTemplateModeration(e.id,"rejected")},t.createElement(z,{className:"h-4 w-4 mr-1"}),"Reject"))),t.createElement("div",{className:"space-y-2"},t.createElement("p",{className:"text-gray-700"},e.description),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("span",{className:"text-xs text-gray-500"},"Variables:"),t.createElement("div",{className:"flex flex-wrap gap-1"},e.variables.slice(0,3).map((e,a)=>t.createElement(b,{key:a,variant:"outline",className:"text-xs"},e)),e.variables.length>3&&t.createElement(b,{variant:"outline",className:"text-xs"},"+",e.variables.length-3," more"))))))):t.createElement("div",{className:"text-center py-8"},t.createElement(j,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No pending templates"),t.createElement("p",{className:"text-gray-500"},"All templates have been reviewed.")))))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,{className:"flex items-center space-x-2"},t.createElement(Y,{className:"h-5 w-5 text-yellow-500"}),t.createElement("span",null,"Moderation Guidelines"))),t.createElement(r,null,t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},t.createElement("div",null,t.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Review Moderation"),t.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},t.createElement("li",null,"• Check for inappropriate language or content"),t.createElement("li",null,"• Verify reviews are constructive and helpful"),t.createElement("li",null,"• Ensure reviews don't contain personal information"),t.createElement("li",null,"• Look for potential fake or spam reviews"),t.createElement("li",null,"• Approve reviews that provide genuine feedback"))),t.createElement("div",null,t.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Template Moderation"),t.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},t.createElement("li",null,"• Verify legal accuracy and completeness"),t.createElement("li",null,"• Check for proper variable placement"),t.createElement("li",null,"• Ensure templates follow Singapore law"),t.createElement("li",null,"• Review for clarity and usability"),t.createElement("li",null,"• Approve templates that meet quality standards")))))))},SystemMonitoring=({className:a=""})=>{const[n,m]=e.useState({totalUsers:0,activeUsers:0,totalDocuments:0,totalTemplates:0,totalLawFirms:0,systemHealth:"healthy",uptime:"99.9%",responseTime:120}),[d,u]=e.useState({dailyActiveUsers:0,documentsProcessed:0,templatesGenerated:0,searchQueries:0,aiOperations:0}),[E,p]=e.useState([]),[v,g]=e.useState(!0),[x,f]=e.useState("overview"),{hasPermission:w}=oe();e.useEffect(()=>{loadSystemData();const e=setInterval(loadSystemData,3e4);return()=>clearInterval(e)},[]);const loadSystemData=async()=>{try{g(!0);const e=await de.getAuditLogs({date_from:new Date(Date.now()-864e5)});p(e),m({totalUsers:1250,activeUsers:89,totalDocuments:5420,totalTemplates:156,totalLawFirms:89,systemHealth:"healthy",uptime:"99.9%",responseTime:Math.floor(50*Math.random())+100}),u({dailyActiveUsers:89,documentsProcessed:234,templatesGenerated:45,searchQueries:1250,aiOperations:567})}catch(e){console.error("Error loading system data:",e),l.error("Failed to load system data")}finally{g(!1)}};if(!w(ue.SYSTEM_MONITORING))return t.createElement(s,{className:a},t.createElement(r,{className:"text-center py-8"},t.createElement(fe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"Access Denied"),t.createElement("p",{className:"text-gray-500"},"You don't have permission to view system monitoring.")));const h=[{title:"System Health",value:n.systemHealth,description:`${n.uptime} uptime`,icon:(e=>{switch(e){case"healthy":return $;case"warning":case"critical":return Y;default:return xe}})(n.systemHealth),color:(e=>{switch(e){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(n.systemHealth),trend:null},{title:"Active Users",value:n.activeUsers,description:`${n.totalUsers} total users`,icon:o,color:"text-blue-600",trend:"+12%"},{title:"Documents",value:n.totalDocuments,description:`${d.documentsProcessed} processed today`,icon:j,color:"text-green-600",trend:"+8%"},{title:"Response Time",value:`${n.responseTime}ms`,description:"Average response time",icon:xe,color:n.responseTime>200?"text-yellow-600":"text-green-600",trend:n.responseTime>200?"+5%":"-3%"}],A=[{title:"Daily Active Users",value:d.dailyActiveUsers,icon:o,color:"text-blue-600"},{title:"Documents Processed",value:d.documentsProcessed,icon:j,color:"text-green-600"},{title:"Templates Generated",value:d.templatesGenerated,icon:H,color:"text-purple-600"},{title:"Search Queries",value:d.searchQueries,icon:Q,color:"text-orange-600"},{title:"AI Operations",value:d.aiOperations,icon:xe,color:"text-red-600"}];return t.createElement("div",{className:`space-y-6 ${a}`},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"System Monitoring"),t.createElement("p",{className:"text-gray-600"},"Monitor system health, performance, and usage metrics")),t.createElement("div",{className:"flex space-x-2"},t.createElement(c,{variant:"outline",onClick:loadSystemData},t.createElement(i,{className:"h-4 w-4 mr-2"}),"Refresh"))),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},h.map((e,a)=>t.createElement(s,{key:a},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),t.createElement("p",{className:"text-xs text-gray-500"},e.description)),t.createElement("div",{className:"flex flex-col items-end"},t.createElement(e.icon,{className:`h-8 w-8 ${e.color}`}),e.trend&&t.createElement("div",{className:"flex items-center mt-2 "+(e.trend.startsWith("+")?"text-green-600":"text-red-600")},e.trend.startsWith("+")?t.createElement(q,{className:"h-3 w-3 mr-1"}):t.createElement(we,{className:"h-3 w-3 mr-1"}),t.createElement("span",{className:"text-xs"},e.trend)))))))),t.createElement(L,{value:x,onValueChange:f},t.createElement(D,{className:"grid w-full grid-cols-3"},t.createElement(I,{value:"overview"},"Overview"),t.createElement(I,{value:"usage"},"Usage Metrics"),t.createElement(I,{value:"activity"},"Recent Activity")),t.createElement(P,{value:"overview",className:"space-y-6"},t.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"System Status"),t.createElement(O,null,"Current system health and performance")),t.createElement(r,{className:"space-y-4"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm font-medium"},"Database"),t.createElement(b,{className:"bg-green-100 text-green-800"},"Healthy")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm font-medium"},"API Server"),t.createElement(b,{className:"bg-green-100 text-green-800"},"Healthy")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm font-medium"},"File Storage"),t.createElement(b,{className:"bg-green-100 text-green-800"},"Healthy")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm font-medium"},"AI Services"),t.createElement(b,{className:"bg-yellow-100 text-yellow-800"},"Warning")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm font-medium"},"Email Service"),t.createElement(b,{className:"bg-green-100 text-green-800"},"Healthy")))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Resource Usage"),t.createElement(O,null,"Current system resource utilization")),t.createElement(r,{className:"space-y-4"},t.createElement("div",null,t.createElement("div",{className:"flex justify-between text-sm mb-1"},t.createElement("span",null,"CPU Usage"),t.createElement("span",null,"45%")),t.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},t.createElement("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"45%"}}))),t.createElement("div",null,t.createElement("div",{className:"flex justify-between text-sm mb-1"},t.createElement("span",null,"Memory Usage"),t.createElement("span",null,"67%")),t.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},t.createElement("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"67%"}}))),t.createElement("div",null,t.createElement("div",{className:"flex justify-between text-sm mb-1"},t.createElement("span",null,"Storage Usage"),t.createElement("span",null,"23%")),t.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},t.createElement("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"23%"}}))),t.createElement("div",null,t.createElement("div",{className:"flex justify-between text-sm mb-1"},t.createElement("span",null,"Network I/O"),t.createElement("span",null,"12%")),t.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},t.createElement("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:"12%"}}))))))),t.createElement(P,{value:"usage",className:"space-y-6"},t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6"},A.map((e,a)=>t.createElement(s,{key:a},t.createElement(r,{className:"p-6 text-center"},t.createElement(e.icon,{className:`h-8 w-8 ${e.color} mx-auto mb-2`}),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),t.createElement("p",{className:"text-sm text-gray-600"},e.title))))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Usage Trends (Last 7 Days)"),t.createElement(O,null,"Daily usage patterns and trends")),t.createElement(r,null,t.createElement("div",{className:"h-64 flex items-center justify-center text-gray-500"},t.createElement("div",{className:"text-center"},t.createElement(ye,{className:"h-12 w-12 mx-auto mb-2"}),t.createElement("p",null,"Usage charts would be displayed here"),t.createElement("p",{className:"text-sm"},"Integration with charting library needed")))))),t.createElement(P,{value:"activity",className:"space-y-6"},t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Recent System Activity"),t.createElement(O,null,"Latest admin actions and system events")),t.createElement(r,null,v?t.createElement("div",{className:"space-y-4"},[...Array(5)].map((e,a)=>t.createElement("div",{key:a,className:"animate-pulse"},t.createElement("div",{className:"flex items-center space-x-3 p-3 border rounded-lg"},t.createElement("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),t.createElement("div",{className:"flex-1 space-y-2"},t.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/3"}),t.createElement("div",{className:"h-2 bg-gray-200 rounded w-1/2"})))))):E.length>0?t.createElement("div",{className:"space-y-3"},E.map(e=>t.createElement("div",{key:e.id,className:"flex items-center space-x-3 p-3 border rounded-lg"},t.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},t.createElement(xe,{className:"h-4 w-4 text-blue-600"})),t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("span",{className:"font-medium text-gray-900"},e.user?.full_name||"System"),t.createElement("span",{className:"text-gray-600"},e.action.replace(/_/g," ")),t.createElement(b,{variant:"outline",className:"text-xs"},e.resource_type)),t.createElement("p",{className:"text-sm text-gray-500"},S(new Date(e.created_at),{addSuffix:!0})))))):t.createElement("div",{className:"text-center py-8"},t.createElement(F,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No recent activity"),t.createElement("p",{className:"text-gray-500"},"System activity will appear here as it occurs.")))))))},AdminLawFirmManager=({className:a=""})=>{const[n,m]=e.useState([]),[i,d]=e.useState([]),[u,E]=e.useState(!0),[p,v]=e.useState("firms");e.useEffect(()=>{loadData()},[]);const loadData=async()=>{try{E(!0);const e=await G.getLawFirms();m(e)}catch(e){console.error("Error loading admin data:",e),l.error("Failed to load data")}finally{E(!1)}},handleVerifyFirm=async(e,t)=>{try{await G.verifyLawFirm(e,t),l.success(`Law firm ${t?"verified":"unverified"} successfully`),loadData()}catch(a){console.error("Error verifying firm:",a),l.error("Failed to update verification status")}},handleModerateReview=async(e,t)=>{try{await G.moderateReview(e,t),l.success(`Review ${t} successfully`),loadData()}catch(a){console.error("Error moderating review:",a),l.error("Failed to moderate review")}},renderStars=e=>Array.from({length:5},(a,l)=>t.createElement(W,{key:l,className:"h-4 w-4 "+(l<Math.floor(e)?"text-yellow-400 fill-current":"text-gray-300")})),g=[{title:"Total Law Firms",value:n.length,description:"All registered firms",icon:o,color:"text-blue-600"},{title:"Verified Firms",value:n.filter(e=>e.verified).length,description:"Approved and verified",icon:$,color:"text-green-600"},{title:"Pending Verification",value:n.filter(e=>!e.verified).length,description:"Awaiting approval",icon:F,color:"text-yellow-600"},{title:"Pending Reviews",value:i.length,description:"Awaiting moderation",icon:U,color:"text-purple-600"}];return t.createElement("div",{className:`space-y-6 ${a}`},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Law Firm Management"),t.createElement("p",{className:"text-gray-600"},"Manage law firm listings, verifications, and reviews")),t.createElement(c,null,t.createElement(B,{className:"h-4 w-4 mr-2"}),"Add Law Firm")),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},g.map((e,a)=>t.createElement(s,{key:a},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),t.createElement("p",{className:"text-xs text-gray-500"},e.description)),t.createElement(e.icon,{className:`h-8 w-8 ${e.color}`})))))),t.createElement(L,{value:p,onValueChange:v},t.createElement(D,{className:"grid w-full grid-cols-2"},t.createElement(I,{value:"firms"},"Law Firms (",n.length,")"),t.createElement(I,{value:"reviews"},"Pending Reviews (",i.length,")")),t.createElement(P,{value:"firms",className:"space-y-4"},u?t.createElement("div",{className:"space-y-4"},[...Array(5)].map((e,a)=>t.createElement(s,{key:a,className:"animate-pulse"},t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex items-center space-x-4"},t.createElement("div",{className:"w-12 h-12 bg-gray-200 rounded"}),t.createElement("div",{className:"flex-1 space-y-2"},t.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"}))))))):t.createElement("div",{className:"space-y-4"},n.map(e=>t.createElement(s,{key:e.id},t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",{className:"flex items-center space-x-4"},t.createElement("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},t.createElement(o,{className:"h-6 w-6 text-blue-600"})),t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"flex items-center space-x-2"},t.createElement("h3",{className:"font-medium text-gray-900"},e.name),t.createElement(b,{variant:e.verified?"default":"secondary"},e.verified?"Verified":"Pending")),t.createElement("p",{className:"text-sm text-gray-600 mt-1"},e.description),t.createElement("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500"},t.createElement("span",null,e.address),t.createElement("span",null,e.phone),t.createElement("div",{className:"flex items-center space-x-1"},renderStars(e.rating),t.createElement("span",null,e.rating.toFixed(1)))))),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(c,{variant:"outline",size:"sm"},t.createElement(V,{className:"h-4 w-4"})),e.verified?t.createElement(c,{variant:"outline",size:"sm",onClick:()=>handleVerifyFirm(e.id,!1)},t.createElement(z,{className:"h-4 w-4 mr-1"}),"Unverify"):t.createElement(c,{size:"sm",onClick:()=>handleVerifyFirm(e.id,!0)},t.createElement($,{className:"h-4 w-4 mr-1"}),"Verify"),t.createElement(c,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this law firm? This action cannot be undone."))try{await G.deleteLawFirm(e),l.success("Law firm deleted successfully"),loadData()}catch(t){console.error("Error deleting firm:",t),l.error("Failed to delete law firm")}})(e.id)},t.createElement(_,{className:"h-4 w-4"}))))))))),t.createElement(P,{value:"reviews",className:"space-y-4"},0===i.length?t.createElement(s,null,t.createElement(r,{className:"text-center py-8"},t.createElement(U,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No pending reviews"),t.createElement("p",{className:"text-gray-500"},"All reviews have been moderated."))):t.createElement("div",{className:"space-y-4"},i.map(e=>t.createElement(s,{key:e.id},t.createElement(r,{className:"p-4"},t.createElement("div",{className:"space-y-3"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h4",{className:"font-medium text-gray-900"},e.title),t.createElement("div",{className:"flex items-center space-x-2 mt-1"},t.createElement("div",{className:"flex items-center space-x-1"},renderStars(e.rating)),t.createElement("span",{className:"text-sm text-gray-500"},"by ",e.user?.full_name||"Anonymous"))),t.createElement(b,{variant:"secondary"},"Pending")),t.createElement("p",{className:"text-gray-700"},e.content),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(c,{size:"sm",onClick:()=>handleModerateReview(e.id,"approved")},t.createElement($,{className:"h-4 w-4 mr-1"}),"Approve"),t.createElement(c,{variant:"destructive",size:"sm",onClick:()=>handleModerateReview(e.id,"rejected")},t.createElement(z,{className:"h-4 w-4 mr-1"}),"Reject"))))))))))},TemplateManagement=()=>{const[a,n]=e.useState([]),[i,o]=e.useState([]),[y,N]=e.useState(!0),[f,w]=e.useState(""),[h,S]=e.useState(""),[A,k]=e.useState(""),[R,T]=e.useState(!1),C=Array.isArray(i)?i:[];e.useEffect(()=>{loadData()},[]);const loadData=async()=>{try{N(!0);const[e,t]=await Promise.all([X.searchTemplates({limit:100,sortBy:"newest"}),X.getCategories()]);n(e.templates),o(t)}catch(e){console.error("Failed to load data:",e),l.error("Failed to load template data")}finally{N(!1)}},M=a.filter(e=>{const t=!f||e.title.toLowerCase().includes(f.toLowerCase())||e.description.toLowerCase().includes(f.toLowerCase()),a=!h||e.categoryId===h,l=!A||"active"===A&&e.isActive||"inactive"===A&&!e.isActive||"featured"===A&&e.isFeatured;return t&&a&&l});return y?t.createElement("div",{className:"space-y-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement(J,{className:"h-8 w-48"}),t.createElement(J,{className:"h-10 w-32"})),t.createElement("div",{className:"grid gap-4"},Array.from({length:5}).map((e,a)=>t.createElement(J,{key:a,className:"h-24 w-full"})))):t.createElement("div",{className:"space-y-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Template Management"),t.createElement("p",{className:"text-gray-600"},"Manage legal document templates and categories")),t.createElement(K,{open:R,onOpenChange:T},t.createElement(Z,{asChild:!0},t.createElement(c,null,t.createElement(B,{className:"h-4 w-4 mr-2"}),"Create Template")),t.createElement(ee,{className:"max-w-2xl"},t.createElement(te,null,t.createElement(ae,null,"Create New Template"),t.createElement(le,null,"Create a new legal document template for the marketplace.")),t.createElement(se,null,t.createElement(re,{className:"h-4 w-4"}),t.createElement(ne,null,"Template creation interface would be implemented here with form fields for title, description, content, fields, etc."))))),t.createElement(s,null,t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex flex-col lg:flex-row gap-4"},t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"relative"},t.createElement(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.createElement(u,{placeholder:"Search templates...",value:f,onChange:e=>w(e.target.value),className:"pl-10"}))),t.createElement(E,{value:h,onValueChange:S},t.createElement(p,{className:"w-full lg:w-48"},t.createElement(v,{placeholder:"All Categories"})),t.createElement(g,null,t.createElement(x,{value:""},"All Categories"),C.map(e=>e&&e.id&&e.name?t.createElement(x,{key:e.id,value:e.id},e.name):null))),t.createElement(E,{value:A,onValueChange:k},t.createElement(p,{className:"w-full lg:w-32"},t.createElement(v,{placeholder:"All Status"})),t.createElement(g,null,t.createElement(x,{value:""},"All Status"),t.createElement(x,{value:"active"},"Active"),t.createElement(x,{value:"inactive"},"Inactive"),t.createElement(x,{value:"featured"},"Featured")))))),t.createElement("div",{className:"space-y-4"},0===M.length?t.createElement(s,null,t.createElement(r,{className:"text-center py-12"},t.createElement(j,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"No templates found"),t.createElement("p",{className:"text-gray-600"},f||h||A?"Try adjusting your filters to see more templates.":"Get started by creating your first template."))):M.map(e=>{return t.createElement(s,{key:e.id,className:"hover:shadow-md transition-shadow"},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-start justify-between"},t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"flex items-center gap-3 mb-2"},t.createElement("h3",{className:"text-lg font-semibold text-gray-900"},e.title),(e=>e.isActive?e.isFeatured?t.createElement(b,{variant:"default"},t.createElement(W,{className:"h-3 w-3 mr-1"}),"Featured"):t.createElement(b,{variant:"secondary"},t.createElement($,{className:"h-3 w-3 mr-1"}),"Active"):t.createElement(b,{variant:"destructive"},t.createElement(z,{className:"h-3 w-3 mr-1"}),"Inactive"))(e),(a=e.accessLevel,t.createElement(b,{variant:{public:"outline",premium:"secondary",enterprise:"default"}[a]||"outline"},a.charAt(0).toUpperCase()+a.slice(1)))),t.createElement("p",{className:"text-gray-600 mb-3 line-clamp-2"},e.description),t.createElement("div",{className:"flex items-center gap-6 text-sm text-gray-500"},t.createElement("div",{className:"flex items-center gap-1"},t.createElement(m,{className:"h-4 w-4"}),e.downloadCount.toLocaleString()," downloads"),t.createElement("div",{className:"flex items-center gap-1"},t.createElement(W,{className:"h-4 w-4"}),e.ratingAverage.toFixed(1)," (",e.ratingCount," reviews)"),t.createElement("div",{className:"flex items-center gap-1"},t.createElement(F,{className:"h-4 w-4"}),new Date(e.createdAt).toLocaleDateString()),e.priceSgd>0&&t.createElement("div",{className:"font-medium text-green-600"},"S$",e.priceSgd.toFixed(2)))),t.createElement("div",{className:"flex items-center gap-2 ml-4"},t.createElement(c,{variant:"outline",size:"sm"},t.createElement(V,{className:"h-4 w-4 mr-1"}),"Preview"),t.createElement(c,{variant:"outline",size:"sm"},t.createElement(ge,{className:"h-4 w-4 mr-1"}),"Edit"),t.createElement(c,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{try{l.success(`Template ${t?"unfeatured":"featured"} successfully`),loadData()}catch(a){l.error("Failed to update template featured status")}})(e.id,e.isFeatured)},t.createElement(W,{className:"h-4 w-4 mr-1 "+(e.isFeatured?"fill-current":"")}),e.isFeatured?"Unfeature":"Feature"),t.createElement(c,{variant:e.isActive?"destructive":"default",size:"sm",onClick:()=>(async(e,t)=>{try{l.success(`Template ${t?"deactivated":"activated"} successfully`),loadData()}catch(a){l.error("Failed to update template status")}})(e.id,e.isActive)},e.isActive?t.createElement(t.Fragment,null,t.createElement(z,{className:"h-4 w-4 mr-1"}),"Deactivate"):t.createElement(t.Fragment,null,t.createElement($,{className:"h-4 w-4 mr-1"}),"Activate"))))));var a})),t.createElement("div",{className:"grid md:grid-cols-4 gap-4"},t.createElement(s,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"text-2xl font-bold text-blue-600"},a.length),t.createElement("div",{className:"text-sm text-gray-600"},"Total Templates"))),t.createElement(s,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"text-2xl font-bold text-green-600"},a.filter(e=>e.isActive).length),t.createElement("div",{className:"text-sm text-gray-600"},"Active Templates"))),t.createElement(s,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"text-2xl font-bold text-yellow-600"},a.filter(e=>e.isFeatured).length),t.createElement("div",{className:"text-sm text-gray-600"},"Featured Templates"))),t.createElement(s,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"text-2xl font-bold text-purple-600"},a.reduce((e,t)=>e+t.downloadCount,0).toLocaleString()),t.createElement("div",{className:"text-sm text-gray-600"},"Total Downloads")))))},Admin=()=>{const[a,l]=e.useState("overview"),{hasPermission:m}=oe(),{canAccessAdmin:i}=Ee(),{profile:d}=ce();if(!i())return t.createElement(me,null,t.createElement(s,null,t.createElement(r,{className:"text-center py-12"},t.createElement(n,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),t.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Access Denied"),t.createElement("p",{className:"text-gray-600 mb-6"},"You don't have permission to access the admin dashboard."),t.createElement(c,{onClick:()=>window.history.back()},"Go Back"))));const u=[{title:"Total Users",value:"1,250",description:"+12% from last month",icon:o,color:"text-blue-600",permission:ue.USERS_READ},{title:"Pending Reviews",value:"23",description:"Awaiting moderation",icon:U,color:"text-yellow-600",permission:ue.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Health",value:"99.9%",description:"Uptime this month",icon:xe,color:"text-green-600",permission:ue.SYSTEM_MONITORING},{title:"Active Sessions",value:"89",description:"Currently online",icon:Q,color:"text-purple-600",permission:ue.SYSTEM_ANALYTICS}],E=[{title:"Manage Users",description:"Add, edit, or remove user accounts",icon:o,action:()=>l("users"),permission:ue.USERS_READ},{title:"Content Moderation",description:"Review and moderate user content",icon:Ne,action:()=>l("moderation"),permission:ue.LAW_FIRMS_MODERATE_REVIEWS},{title:"System Monitoring",description:"Monitor system health and performance",icon:xe,action:()=>l("monitoring"),permission:ue.SYSTEM_MONITORING},{title:"Law Firm Management",description:"Manage law firm listings and verifications",icon:H,action:()=>l("lawfirms"),permission:ue.LAW_FIRMS_VERIFY},{title:"Template Management",description:"Manage legal document templates",icon:j,action:()=>l("templates"),permission:ue.TEMPLATES_MANAGE},{title:"Analytics Dashboard",description:"View template marketplace analytics",icon:Q,action:()=>l("analytics"),permission:ue.SYSTEM_ANALYTICS}],p=[{id:"overview",label:"Overview",icon:Q,permission:null},{id:"users",label:"Users",icon:o,permission:ue.USERS_READ},{id:"moderation",label:"Moderation",icon:Ne,permission:ue.LAW_FIRMS_MODERATE_REVIEWS},{id:"lawfirms",label:"Law Firms",icon:H,permission:ue.LAW_FIRMS_VERIFY},{id:"templates",label:"Templates",icon:j,permission:ue.TEMPLATES_MANAGE},{id:"analytics",label:"Analytics",icon:Q,permission:ue.SYSTEM_ANALYTICS},{id:"monitoring",label:"Monitoring",icon:xe,permission:ue.SYSTEM_MONITORING}].filter(e=>!e.permission||m(e.permission));return t.createElement(me,null,t.createElement("div",{className:"space-y-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Admin Dashboard"),t.createElement("p",{className:"text-gray-600 mt-1"},"Welcome back, ",d?.full_name||d?.email)),t.createElement("div",{className:"flex space-x-2"},t.createElement(c,{variant:"outline"},t.createElement(ie,{className:"h-4 w-4 mr-2"}),"Settings"))),t.createElement(L,{value:a,onValueChange:l},t.createElement(D,{className:`grid w-full grid-cols-${p.length}`},p.map(e=>t.createElement(I,{key:e.id,value:e.id,className:"flex items-center space-x-2"},t.createElement(e.icon,{className:"h-4 w-4"}),t.createElement("span",null,e.label)))),t.createElement(P,{value:"overview",className:"space-y-6"},t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},u.filter(e=>!e.permission||m(e.permission)).map((e,a)=>t.createElement(s,{key:a},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),t.createElement("p",{className:"text-xs text-gray-500"},e.description)),t.createElement(e.icon,{className:`h-8 w-8 ${e.color}`})))))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Quick Actions"),t.createElement(O,null,"Common administrative tasks and shortcuts")),t.createElement(r,null,t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},E.filter(e=>!e.permission||m(e.permission)).map((e,a)=>t.createElement(c,{key:a,variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:e.action},t.createElement(e.icon,{className:"h-6 w-6"}),t.createElement("div",{className:"text-center"},t.createElement("p",{className:"font-medium"},e.title),t.createElement("p",{className:"text-xs text-gray-500"},e.description))))))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,{className:"flex items-center space-x-2"},t.createElement(Y,{className:"h-5 w-5 text-yellow-500"}),t.createElement("span",null,"System Alerts")),t.createElement(O,null,"Important notifications and system status updates")),t.createElement(r,null,t.createElement("div",{className:"space-y-3"},t.createElement("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},t.createElement(Y,{className:"h-5 w-5 text-yellow-600"}),t.createElement("div",null,t.createElement("p",{className:"font-medium text-yellow-800"},"AI Service Performance"),t.createElement("p",{className:"text-sm text-yellow-700"},"Response times are slightly elevated. Monitoring the situation."))),t.createElement("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},t.createElement(j,{className:"h-5 w-5 text-blue-600"}),t.createElement("div",null,t.createElement("p",{className:"font-medium text-blue-800"},"Content Moderation Queue"),t.createElement("p",{className:"text-sm text-blue-700"},"23 items pending review in the moderation queue."))),t.createElement("div",{className:"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg"},t.createElement(xe,{className:"h-5 w-5 text-green-600"}),t.createElement("div",null,t.createElement("p",{className:"font-medium text-green-800"},"System Update Complete"),t.createElement("p",{className:"text-sm text-green-700"},"Successfully deployed security updates with zero downtime.")))))),t.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"Recent User Activity")),t.createElement(r,null,t.createElement("div",{className:"space-y-3"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"New user registrations"),t.createElement("span",{className:"font-medium"},"+15 today")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"Documents uploaded"),t.createElement("span",{className:"font-medium"},"234 today")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"Templates generated"),t.createElement("span",{className:"font-medium"},"45 today")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"AI chat sessions"),t.createElement("span",{className:"font-medium"},"89 today"))))),t.createElement(s,null,t.createElement(y,null,t.createElement(N,null,"System Performance")),t.createElement(r,null,t.createElement("div",{className:"space-y-3"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"Average response time"),t.createElement("span",{className:"font-medium text-green-600"},"120ms")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"Error rate"),t.createElement("span",{className:"font-medium text-green-600"},"0.02%")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"CPU usage"),t.createElement("span",{className:"font-medium text-yellow-600"},"45%")),t.createElement("div",{className:"flex items-center justify-between"},t.createElement("span",{className:"text-sm"},"Memory usage"),t.createElement("span",{className:"font-medium text-yellow-600"},"67%"))))))),m(ue.USERS_READ)&&t.createElement(P,{value:"users"},t.createElement(UserManagement,null)),m(ue.LAW_FIRMS_MODERATE_REVIEWS)&&t.createElement(P,{value:"moderation"},t.createElement(ContentModeration,null)),m(ue.LAW_FIRMS_VERIFY)&&t.createElement(P,{value:"lawfirms"},t.createElement(AdminLawFirmManager,null)),m(ue.TEMPLATES_MANAGE)&&t.createElement(P,{value:"templates"},t.createElement(TemplateManagement,null)),m(ue.SYSTEM_ANALYTICS)&&t.createElement(P,{value:"analytics"},t.createElement(pe,null)),m(ue.SYSTEM_MONITORING)&&t.createElement(P,{value:"monitoring"},t.createElement(SystemMonitoring,null)))))};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{Admin as default};
