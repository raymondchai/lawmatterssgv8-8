function de(n,o){for(var a=0;a<o.length;a++){const c=o[a];if(typeof c!="string"&&!Array.isArray(c)){for(const p in c)if(p!=="default"&&!(p in n)){const w=Object.getOwnPropertyDescriptor(c,p);w&&Object.defineProperty(n,p,w.get?w:{enumerable:!0,get:()=>c[p]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function pe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Tt(n){if(n.__esModule)return n;var o=n.default;if(typeof o=="function"){var a=function c(){return this instanceof c?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};a.prototype=o.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(c){var p=Object.getOwnPropertyDescriptor(n,c);Object.defineProperty(a,c,p.get?p:{enumerable:!0,get:function(){return n[c]}})}),a}var he={exports:{}};(function(n){var o=function(a){var c=Object.prototype,p=c.hasOwnProperty,w=Object.defineProperty||function(t,e,r){t[e]=r.value},g,m=typeof Symbol=="function"?Symbol:{},S=m.iterator||"@@iterator",W=m.asyncIterator||"@@asyncIterator",j=m.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch{d=function(e,r,s){return e[r]=s}}function v(t,e,r,s){var i=e&&e.prototype instanceof B?e:B,f=Object.create(i.prototype),y=new K(s||[]);return w(f,"_invoke",{value:V(t,r,y)}),f}a.wrap=v;function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(s){return{type:"throw",arg:s}}}var $="suspendedStart",N="suspendedYield",R="executing",b="completed",h={};function B(){}function M(){}function A(){}var F={};d(F,S,function(){return this});var z=Object.getPrototypeOf,C=z&&z(z(l([])));C&&C!==c&&p.call(C,S)&&(F=C);var T=A.prototype=B.prototype=Object.create(F);M.prototype=A,w(T,"constructor",{value:A,configurable:!0}),w(A,"constructor",{value:M,configurable:!0}),M.displayName=d(A,j,"GeneratorFunction");function G(t){["next","throw","return"].forEach(function(e){d(t,e,function(r){return this._invoke(e,r)})})}a.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===M||(e.displayName||e.name)==="GeneratorFunction":!1},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,d(t,j,"GeneratorFunction")),t.prototype=Object.create(T),t},a.awrap=function(t){return{__await:t}};function D(t,e){function r(f,y,L,O){var k=_(t[f],t,y);if(k.type==="throw")O(k.arg);else{var Q=k.arg,H=Q.value;return H&&typeof H=="object"&&p.call(H,"__await")?e.resolve(H.__await).then(function(P){r("next",P,L,O)},function(P){r("throw",P,L,O)}):e.resolve(H).then(function(P){Q.value=P,L(Q)},function(P){return r("throw",P,L,O)})}}var s;function i(f,y){function L(){return new e(function(O,k){r(f,y,O,k)})}return s=s?s.then(L,L):L()}w(this,"_invoke",{value:i})}G(D.prototype),d(D.prototype,W,function(){return this}),a.AsyncIterator=D,a.async=function(t,e,r,s,i){i===void 0&&(i=Promise);var f=new D(v(t,e,r,s),i);return a.isGeneratorFunction(e)?f:f.next().then(function(y){return y.done?y.value:f.next()})};function V(t,e,r){var s=$;return function(f,y){if(s===R)throw new Error("Generator is already running");if(s===b){if(f==="throw")throw y;return u()}for(r.method=f,r.arg=y;;){var L=r.delegate;if(L){var O=J(L,r);if(O){if(O===h)continue;return O}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(s===$)throw s=b,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);s=R;var k=_(t,e,r);if(k.type==="normal"){if(s=r.done?b:N,k.arg===h)continue;return{value:k.arg,done:r.done}}else k.type==="throw"&&(s=b,r.method="throw",r.arg=k.arg)}}}function J(t,e){var r=e.method,s=t.iterator[r];if(s===g)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=g,J(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=_(s,t.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,h;var f=i.arg;if(!f)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h;if(f.done)e[t.resultName]=f.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=g);else return f;return e.delegate=null,h}G(T),d(T,j,"Generator"),d(T,S,function(){return this}),d(T,"toString",function(){return"[object Generator]"});function Z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function K(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Z,this),this.reset(!0)}a.keys=function(t){var e=Object(t),r=[];for(var s in e)r.push(s);return r.reverse(),function i(){for(;r.length;){var f=r.pop();if(f in e)return i.value=f,i.done=!1,i}return i.done=!0,i}};function l(t){if(t){var e=t[S];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(p.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=g,i.done=!0,i};return s.next=s}}return{next:u}}a.values=l;function u(){return{value:g,done:!0}}return K.prototype={constructor:K,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(Y),!t)for(var e in this)e.charAt(0)==="t"&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(O,k){return f.type="throw",f.arg=t,e.next=O,k&&(e.method="next",e.arg=g),!!k}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],f=i.completion;if(i.tryLoc==="root")return r("end");if(i.tryLoc<=this.prev){var y=p.call(i,"catchLoc"),L=p.call(i,"finallyLoc");if(y&&L){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(y){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else if(L){if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&p.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&(t==="break"||t==="continue")&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var f=i?i.completion:{};return f.type=t,f.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(f)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),Y(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var s=r.completion;if(s.type==="throw"){var i=s.arg;Y(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:l(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=g),h}},a}(n.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(he);var ee=(n,o)=>`${n}-${o}-${Math.random().toString(16).slice(3,8)}`;const ge=ee;let re=0;var se=({id:n,action:o,payload:a={}})=>{let c=n;return typeof c>"u"&&(c=ge("Job",re),re+=1),{id:c,action:o,payload:a}},U={};let te=!1;U.logging=te;U.setLogging=n=>{te=n};U.log=(...n)=>te?console.log.apply(void 0,n):null;const me=se,{log:q}=U,ve=ee;let ne=0;var ye=()=>{const n=ve("Scheduler",ne),o={},a={};let c=[];ne+=1;const p=()=>c.length,w=()=>Object.keys(o).length,g=()=>{if(c.length!==0){const d=Object.keys(o);for(let v=0;v<d.length;v+=1)if(typeof a[d[v]]>"u"){c[0](o[d[v]]);break}}},m=(d,v)=>new Promise((_,$)=>{const N=me({action:d,payload:v});c.push(async R=>{c.shift(),a[R.id]=N;try{_(await R[d].apply(void 0,[...v,N.id]))}catch(b){$(b)}finally{delete a[R.id],g()}}),q(`[${n}]: Add ${N.id} to JobQueue`),q(`[${n}]: JobQueue length=${c.length}`),g()});return{addWorker:d=>(o[d.id]=d,q(`[${n}]: Add ${d.id}`),q(`[${n}]: Number of workers=${w()}`),g(),d.id),addJob:async(d,...v)=>{if(w()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return m(d,v)},terminate:async()=>{Object.keys(o).forEach(async d=>{await o[d].terminate()}),c=[]},getQueueLen:p,getNumWorkers:w}};function we(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var be=n=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof we=="function"&&(o.type="node"),typeof n>"u"?o:o[n]};const Le=be("type")==="browser",ke=Le?n=>new URL(n,window.location.href).href:n=>n;var Oe=n=>{const o={...n};return["corePath","workerPath","langPath"].forEach(a=>{n[a]&&(o[a]=ke(o[a]))}),o},ce={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Se="tesseract.js",Ee="6.0.1",_e="Pure Javascript Multilingual OCR",Ae="src/index.js",Te="commonjs",je="src/index.d.ts",Re="dist/tesseract.min.js",$e="dist/tesseract.min.js",Ne={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Pe={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Ie="",Me=["jeromewu"],Ce="Apache-2.0",Ge={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},De={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Ue={"@rollup/pluginutils":"^5.0.2"},We={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Be={url:"https://github.com/naptha/tesseract.js/issues"},Fe="https://github.com/naptha/tesseract.js",ze={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Ye={name:Se,version:Ee,description:_e,main:Ae,type:Te,types:je,unpkg:Re,jsdelivr:$e,scripts:Ne,browser:Pe,author:Ie,contributors:Me,license:Ce,devDependencies:Ge,dependencies:De,overrides:Ue,repository:We,bugs:Be,homepage:Fe,collective:ze};var Ke={workerBlobURL:!0,logger:()=>{}};const He=Ye.version,Je=Ke;var qe={...Je,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${He}/dist/worker.min.js`},Ve=({workerPath:n,workerBlobURL:o})=>{let a;if(Blob&&URL&&o){const c=new Blob([`importScripts("${n}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(c))}else a=new Worker(n);return a},Ze=n=>{n.terminate()},Qe=(n,o)=>{n.onmessage=({data:a})=>{o(a)}},Xe=async(n,o)=>{n.postMessage(o)};const X=n=>new Promise((o,a)=>{const c=new FileReader;c.onload=()=>{o(c.result)},c.onerror=({target:{error:{code:p}}})=>{a(Error(`File could not be read! Code=${p}`))},c.readAsArrayBuffer(n)}),x=async n=>{let o=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?o=atob(n.split(",")[1]).split("").map(a=>a.charCodeAt(0)):o=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(o=await x(n.src)),n.tagName==="VIDEO"&&(o=await x(n.poster)),n.tagName==="CANVAS"&&await new Promise(a=>{n.toBlob(async c=>{o=await X(c),a()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const a=await n.convertToBlob();o=await X(a)}else(n instanceof File||n instanceof Blob)&&(o=await X(n));return new Uint8Array(o)};var xe=x;const et=qe,tt=Ve,rt=Ze,nt=Qe,ot=Xe,at=xe;var it={defaultOptions:et,spawnWorker:tt,terminateWorker:rt,onMessage:nt,send:ot,loadImage:at};const st=Oe,E=se,{log:oe}=U,ct=ee,I=ce,{defaultOptions:lt,spawnWorker:ut,terminateWorker:ft,onMessage:dt,loadImage:ae,send:pt}=it;let ie=0;var le=async(n="eng",o=I.LSTM_ONLY,a={},c={})=>{const p=ct("Worker",ie),{logger:w,errorHandler:g,...m}=st({...lt,...a}),S={},W=typeof n=="string"?n.split("+"):n;let j=o,d=c;const v=[I.DEFAULT,I.LSTM_ONLY].includes(o)&&!m.legacyCore;let _,$;const N=new Promise((l,u)=>{$=l,_=u}),R=l=>{_(l.message)};let b=ut(m);b.onerror=R,ie+=1;const h=({id:l,action:u,payload:t})=>new Promise((e,r)=>{oe(`[${p}]: Start ${l}, action=${u}`);const s=`${u}-${l}`;S[s]={resolve:e,reject:r},pt(b,{workerId:p,jobId:l,action:u,payload:t})}),B=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),M=l=>h(E({id:l,action:"load",payload:{options:{lstmOnly:v,corePath:m.corePath,logging:m.logging}}})),A=(l,u,t)=>h(E({id:t,action:"FS",payload:{method:"writeFile",args:[l,u]}})),F=(l,u)=>h(E({id:u,action:"FS",payload:{method:"readFile",args:[l,{encoding:"utf8"}]}})),z=(l,u)=>h(E({id:u,action:"FS",payload:{method:"unlink",args:[l]}})),C=(l,u,t)=>h(E({id:t,action:"FS",payload:{method:l,args:u}})),T=(l,u)=>h(E({id:u,action:"loadLanguage",payload:{langs:l,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[I.DEFAULT,I.LSTM_ONLY].includes(j)&&!m.legacyLang}}})),G=(l,u,t,e)=>h(E({id:e,action:"initialize",payload:{langs:l,oem:u,config:t}})),D=(l="eng",u,t,e)=>{if(v&&[I.TESSERACT_ONLY,I.TESSERACT_LSTM_COMBINED].includes(u))throw Error("Legacy model requested but code missing.");const r=u||j;j=r;const s=t||d;d=s;const f=(typeof l=="string"?l.split("+"):l).filter(y=>!W.includes(y));return W.push(...f),f.length>0?T(f,e).then(()=>G(l,r,s,e)):G(l,r,s,e)},V=(l={},u)=>h(E({id:u,action:"setParameters",payload:{params:l}})),J=async(l,u={},t={text:!0},e)=>h(E({id:e,action:"recognize",payload:{image:await ae(l),options:u,output:t}})),Z=async(l,u)=>{if(v)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return h(E({id:u,action:"detect",payload:{image:await ae(l)}}))},Y=async()=>(b!==null&&(ft(b),b=null),Promise.resolve());dt(b,({workerId:l,jobId:u,status:t,action:e,data:r})=>{const s=`${e}-${u}`;if(t==="resolve")oe(`[${l}]: Complete ${u}`),S[s].resolve({jobId:u,data:r}),delete S[s];else if(t==="reject")if(S[s].reject(r),delete S[s],e==="load"&&_(r),g)g(r);else throw Error(r);else t==="progress"&&w({...r,userJobId:u})});const K={id:p,worker:b,load:B,writeText:A,readText:F,removeFile:z,FS:C,reinitialize:D,setParameters:V,recognize:J,detect:Z,terminate:Y};return M().then(()=>T(n)).then(()=>G(n,o,c)).then(()=>$(K)).catch(()=>{}),N};const ue=le,ht=async(n,o,a)=>{const c=await ue(o,1,a);return c.recognize(n).finally(async()=>{await c.terminate()})},gt=async(n,o)=>{const a=await ue("osd",0,o);return a.detect(n).finally(async()=>{await a.terminate()})};var mt={recognize:ht,detect:gt},vt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},yt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const wt=ye,bt=le,Lt=mt,kt=vt,Ot=ce,St=yt,{setLogging:Et}=U;var fe={languages:kt,OEM:Ot,PSM:St,createScheduler:wt,createWorker:bt,setLogging:Et,...Lt};const _t=pe(fe),jt=de({__proto__:null,default:_t},[fe]);export{Tt as a,we as b,At as c,pe as g,jt as i};
