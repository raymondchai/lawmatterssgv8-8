import{a as e,R as t}from"./react-vendor-92YuBQvb-1751326256027.js";import{a8 as a,B as l,aY as s,aZ as n,z as c,A as r,r as m,I as o,ad as i,ae as d,af as u,ag as p,ai as E,a0 as g,Z as v,a1 as N,ab as x,p as w,J as f,K as y,U as h,V as b,bd as C,Q as S,az as k,aN as T,S as z,ar as L,aF as _,am as j,as as D,an as A,a5 as $,bc as P,W as R,X as I,Y as F,$ as U,be as V,aQ as B,O}from"./index-Fb_ssaOc-1751326256027.js";import{t as G,W as q,T as W}from"./TemplateGenerator-DPe0PDCC-1751326256027.js";import"./supabase-pyKuvCi6-1751326256027.js";import"./openai-C-whISGC-1751326256027.js";const Y=[{value:"",label:"All Categories"},{value:"contracts",label:"Contracts & Agreements"},{value:"employment",label:"Employment Law"},{value:"corporate",label:"Corporate Documents"},{value:"real-estate",label:"Real Estate"},{value:"intellectual-property",label:"Intellectual Property"},{value:"litigation",label:"Litigation & Court"},{value:"compliance",label:"Compliance & Regulatory"},{value:"personal",label:"Personal Legal"},{value:"other",label:"Other"}],TemplateBrowser=({onTemplateSelect:k,onTemplatePreview:T,className:z=""})=>{const[L,_]=e.useState([]),[j,D]=e.useState([]),[A,$]=e.useState(!0),[P,R]=e.useState(""),[I,F]=e.useState(""),[U,V]=e.useState("grid"),[B,O]=e.useState("newest");e.useEffect(()=>{loadTemplates()},[]),e.useEffect(()=>{filterTemplates()},[L,P,I,B]);const loadTemplates=async()=>{try{$(!0);const e=await G.getPublicTemplates();_(e)}catch(e){console.error("Error loading templates:",e),a.error("Failed to load templates")}finally{$(!1)}},filterTemplates=()=>{let e=[...L];if(P.trim()){const t=P.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}I&&(e=e.filter(e=>e.category===I)),e.sort((e,t)=>{switch(B){case"newest":return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();case"oldest":return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();case"name":return e.name.localeCompare(t.name);default:return 0}}),D(e)},handleTemplateAction=(e,t)=>{switch(t){case"select":k?.(e);break;case"preview":T?.(e);break;case"copy":navigator.clipboard.writeText(e.content),a.success("Template content copied to clipboard")}},getCategoryLabel=e=>{const t=Y.find(t=>t.value===e);return t?.label||e},TemplateCard=({template:e})=>t.createElement(c,{className:"h-full hover:shadow-md transition-shadow"},t.createElement(g,{className:"pb-3"},t.createElement("div",{className:"flex items-start justify-between"},t.createElement("div",{className:"flex-1 min-w-0"},t.createElement(N,{className:"text-lg font-semibold truncate"},e.name),t.createElement(x,{className:"mt-1 line-clamp-2"},e.description)),t.createElement(w,{variant:"secondary",className:"ml-2 flex-shrink-0"},getCategoryLabel(e.category)))),t.createElement(r,{className:"pt-0"},t.createElement("div",{className:"space-y-3"},t.createElement("div",{className:"p-3 bg-gray-50 rounded-lg"},t.createElement("p",{className:"text-sm text-gray-700 line-clamp-3"},e.content.substring(0,150),"...")),e.variables&&e.variables.length>0&&t.createElement("div",null,t.createElement("p",{className:"text-xs font-medium text-gray-600 mb-1"},"Variables:"),t.createElement("div",{className:"flex flex-wrap gap-1"},e.variables.slice(0,3).map((e,a)=>t.createElement(w,{key:a,variant:"outline",className:"text-xs"},e)),e.variables.length>3&&t.createElement(w,{variant:"outline",className:"text-xs"},"+",e.variables.length-3," more"))),t.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},t.createElement("div",{className:"flex items-center space-x-1"},t.createElement(f,{className:"h-3 w-3"}),t.createElement("span",null,y(new Date(e.created_at),{addSuffix:!0}))),t.createElement("div",{className:"flex items-center space-x-1"},t.createElement(h,{className:"h-3 w-3"}),t.createElement("span",null,"Public"))),t.createElement("div",{className:"flex space-x-2"},t.createElement(l,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>handleTemplateAction(e,"preview")},t.createElement(b,{className:"h-4 w-4 mr-1"}),"Preview"),t.createElement(l,{variant:"outline",size:"sm",onClick:()=>handleTemplateAction(e,"copy")},t.createElement(C,{className:"h-4 w-4"})),t.createElement(l,{size:"sm",onClick:()=>handleTemplateAction(e,"select")},t.createElement(S,{className:"h-4 w-4 mr-1"}),"Use"))))),TemplateListItem=({template:e})=>t.createElement(c,{className:"hover:shadow-sm transition-shadow"},t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",{className:"flex-1 min-w-0"},t.createElement("div",{className:"flex items-center space-x-3"},t.createElement(v,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),t.createElement("div",{className:"flex-1 min-w-0"},t.createElement("h3",{className:"text-sm font-medium truncate"},e.name),t.createElement("p",{className:"text-sm text-gray-500 truncate"},e.description)))),t.createElement("div",{className:"flex items-center space-x-3"},t.createElement(w,{variant:"secondary",className:"text-xs"},getCategoryLabel(e.category)),t.createElement("span",{className:"text-xs text-gray-500"},y(new Date(e.created_at),{addSuffix:!0})),t.createElement("div",{className:"flex space-x-1"},t.createElement(l,{variant:"ghost",size:"sm",onClick:()=>handleTemplateAction(e,"preview")},t.createElement(b,{className:"h-4 w-4"})),t.createElement(l,{variant:"ghost",size:"sm",onClick:()=>handleTemplateAction(e,"copy")},t.createElement(C,{className:"h-4 w-4"})),t.createElement(l,{size:"sm",onClick:()=>handleTemplateAction(e,"select")},"Use"))))));return t.createElement("div",{className:`space-y-6 ${z}`},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Legal Templates"),t.createElement("p",{className:"text-gray-600"},"Browse and customize professional legal document templates")),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(l,{variant:"grid"===U?"default":"outline",size:"sm",onClick:()=>V("grid")},t.createElement(s,{className:"h-4 w-4"})),t.createElement(l,{variant:"list"===U?"default":"outline",size:"sm",onClick:()=>V("list")},t.createElement(n,{className:"h-4 w-4"})))),t.createElement(c,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex flex-col md:flex-row gap-4"},t.createElement("div",{className:"flex-1"},t.createElement("div",{className:"relative"},t.createElement(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.createElement(o,{placeholder:"Search templates...",value:P,onChange:e=>R(e.target.value),className:"pl-10"}))),t.createElement("div",{className:"w-full md:w-64"},t.createElement(i,{value:I,onValueChange:F},t.createElement(d,null,t.createElement(u,{placeholder:"Category"})),t.createElement(p,null,Y.map(e=>t.createElement(E,{key:e.value,value:e.value},e.label))))),t.createElement("div",{className:"w-full md:w-48"},t.createElement(i,{value:B,onValueChange:e=>O(e)},t.createElement(d,null,t.createElement(u,{placeholder:"Sort by"})),t.createElement(p,null,t.createElement(E,{value:"newest"},"Newest First"),t.createElement(E,{value:"oldest"},"Oldest First"),t.createElement(E,{value:"name"},"Name A-Z"))))))),t.createElement("div",null,t.createElement("div",{className:"flex items-center justify-between mb-4"},t.createElement("p",{className:"text-sm text-gray-600"},A?"Loading...":`${j.length} template${1===j.length?"":"s"} found`)),A?t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},[...Array(6)].map((e,a)=>t.createElement(c,{key:a,className:"animate-pulse"},t.createElement(g,null,t.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-1/2"})),t.createElement(r,null,t.createElement("div",{className:"space-y-2"},t.createElement("div",{className:"h-3 bg-gray-200 rounded"}),t.createElement("div",{className:"h-3 bg-gray-200 rounded w-5/6"})))))):j.length>0?"grid"===U?t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},j.map(e=>t.createElement(TemplateCard,{key:e.id,template:e}))):t.createElement("div",{className:"space-y-3"},j.map(e=>t.createElement(TemplateListItem,{key:e.id,template:e}))):t.createElement(c,null,t.createElement(r,{className:"text-center py-8"},t.createElement(v,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No templates found"),t.createElement("p",{className:"text-gray-500"},"Try adjusting your search criteria or browse different categories.")))))},TemplateCustomizer=({template:s,onSave:n,onDownload:m,className:i=""})=>{const[d,u]=e.useState(s.content),[p,E]=e.useState({}),[f,y]=e.useState([]),[h,C]=e.useState(!1);e.useState(!1),e.useEffect(()=>{extractVariables()},[s]),e.useEffect(()=>{generateCustomizedContent()},[p,s.content]);const extractVariables=()=>{const e=s.content.match(/\{\{([^}]+)\}\}/g)||[],t=[...new Set(e.map(e=>e.replace(/[{}]/g,"")))].map(e=>{const t=e.trim();return{name:t,value:"",required:!0,type:getVariableType(t),placeholder:getVariablePlaceholder(t),description:getVariableDescription(t)}});y(t);const a={};t.forEach(e=>{a[e.name]=""}),E(a)},getVariableType=e=>{const t=e.toLowerCase();return t.includes("date")||t.includes("time")?"date":t.includes("email")||t.includes("mail")?"email":t.includes("amount")||t.includes("price")||t.includes("cost")?"number":"text"},getVariablePlaceholder=e=>{const t=e.toLowerCase();return t.includes("name")?"Enter full name":t.includes("company")?"Enter company name":t.includes("address")?"Enter address":t.includes("date")?"Select date":t.includes("email")?"Enter email address":t.includes("phone")?"Enter phone number":t.includes("amount")||t.includes("price")?"Enter amount":`Enter ${e.replace(/_/g," ").toLowerCase()}`},getVariableDescription=e=>{const t=e.toLowerCase();return t.includes("party1")||t.includes("first_party")?"First party to the agreement":t.includes("party2")||t.includes("second_party")?"Second party to the agreement":t.includes("effective_date")?"Date when the agreement becomes effective":t.includes("termination_date")?"Date when the agreement terminates":t.includes("governing_law")?"Jurisdiction governing this agreement":`Value for ${e.replace(/_/g," ").toLowerCase()}`},generateCustomizedContent=()=>{let e=s.content;f.forEach(t=>{const a=`{{${t.name}}}`,l=p[t.name]||`[${t.name.toUpperCase()}]`;e=e.replace(new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),l)}),u(e)},handleVariableChange=(e,t)=>{E(a=>({...a,[e]:t}))},{total:P,completed:R}={total:f.length,completed:f.filter(e=>p[e.name]?.trim()).length},I=P>0?Math.round(R/P*100):100;return t.createElement("div",{className:`space-y-6 ${i}`},t.createElement(c,null,t.createElement(g,null,t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement(N,{className:"flex items-center space-x-2"},t.createElement(v,{className:"h-5 w-5"}),t.createElement("span",null,"Customize Template")),t.createElement(x,null,s.name," - Fill in the variables to customize your document")),t.createElement("div",{className:"flex items-center space-x-2"},t.createElement(w,{variant:100===I?"default":"secondary"},R,"/",P," completed"),t.createElement(l,{variant:"outline",size:"sm",onClick:()=>C(!h)},h?t.createElement(k,{className:"h-4 w-4"}):t.createElement(b,{className:"h-4 w-4"}),h?"Hide":"Show"," Preview"))))),t.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.createElement(c,null,t.createElement(g,null,t.createElement(N,{className:"text-lg"},"Template Variables"),t.createElement(x,null,"Fill in the required information to customize your document")),t.createElement(r,{className:"space-y-4"},f.length>0?t.createElement(t.Fragment,null,f.map(e=>t.createElement("div",{key:e.name,className:"space-y-2"},t.createElement(T,{htmlFor:e.name,className:"flex items-center space-x-2"},t.createElement("span",null,e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())),e.required&&t.createElement("span",{className:"text-red-500"},"*")),"date"===e.type?t.createElement(o,{id:e.name,type:"date",value:p[e.name]||"",onChange:t=>handleVariableChange(e.name,t.target.value),className:"w-full"}):"email"===e.type?t.createElement(o,{id:e.name,type:"email",placeholder:e.placeholder,value:p[e.name]||"",onChange:t=>handleVariableChange(e.name,t.target.value),className:"w-full"}):"number"===e.type?t.createElement(o,{id:e.name,type:"number",placeholder:e.placeholder,value:p[e.name]||"",onChange:t=>handleVariableChange(e.name,t.target.value),className:"w-full"}):t.createElement(o,{id:e.name,type:"text",placeholder:e.placeholder,value:p[e.name]||"",onChange:t=>handleVariableChange(e.name,t.target.value),className:"w-full"}),e.description&&t.createElement("p",{className:"text-xs text-gray-500"},e.description))),t.createElement(z,null),t.createElement("div",{className:"flex space-x-2"},t.createElement(l,{variant:"outline",onClick:()=>{const e={};f.forEach(t=>{e[t.name]=""}),E(e),a.success("Variables reset")},className:"flex-1"},t.createElement(L,{className:"h-4 w-4 mr-2"}),"Reset"),t.createElement(l,{onClick:()=>{n?.(d,p),a.success("Template customization saved")},disabled:0===R,className:"flex-1"},t.createElement(_,{className:"h-4 w-4 mr-2"}),"Save"),t.createElement(l,{onClick:()=>{const e=`${s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_customized.docx`;m?.(d,e),a.success("Template downloaded")},disabled:0===R},t.createElement(S,{className:"h-4 w-4 mr-2"}),"Download"))):t.createElement(j,null,t.createElement(D,{className:"h-4 w-4"}),t.createElement(A,null,"No variables found in this template. You can download it as-is or modify the content directly.")))),h&&t.createElement(c,null,t.createElement(g,null,t.createElement(N,{className:"text-lg"},"Document Preview"),t.createElement(x,null,"Live preview of your customized document")),t.createElement(r,null,t.createElement("div",{className:"max-h-96 overflow-y-auto p-4 bg-gray-50 rounded-lg"},t.createElement("div",{className:"prose prose-sm max-w-none"},t.createElement("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono"},d)))))),f.length>0&&t.createElement(c,null,t.createElement(r,{className:"p-4"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",{className:"flex items-center space-x-2"},100===I?t.createElement($,{className:"h-5 w-5 text-green-500"}):t.createElement(D,{className:"h-5 w-5 text-yellow-500"}),t.createElement("span",{className:"text-sm font-medium"},100===I?"All variables completed - ready to download!":`${P-R} variable${P-R===1?"":"s"} remaining`)),t.createElement("div",{className:"text-sm text-gray-500"},I,"% complete")),t.createElement("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2"},t.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})))))},Templates=()=>{const[a,s]=e.useState("browse"),[n,o]=e.useState(null),[i,d]=e.useState(null),u=[{title:"Available Templates",value:"150+",description:"Professional legal templates",icon:v,color:"text-blue-600"},{title:"AI Generated",value:"50+",description:"Custom AI-created templates",icon:q,color:"text-purple-600"},{title:"Most Popular",value:"Service Agreement",description:"This month's top template",icon:B,color:"text-green-600"},{title:"Recently Added",value:"12",description:"New templates this week",icon:O,color:"text-orange-600"}];return t.createElement(P,null,t.createElement("div",{className:"space-y-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Legal Templates"),t.createElement("p",{className:"text-gray-600 mt-1"},"Browse, customize, and generate professional legal document templates")),t.createElement("div",{className:"flex space-x-2"},t.createElement(l,{variant:"outline",onClick:()=>s("generate")},t.createElement(q,{className:"h-4 w-4 mr-2"}),"Generate with AI"),t.createElement(l,{onClick:()=>s("browse")},t.createElement(m,{className:"h-4 w-4 mr-2"}),"Browse Templates"))),t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},u.map((e,a)=>t.createElement(c,{key:a},t.createElement(r,{className:"p-6"},t.createElement("div",{className:"flex items-center justify-between"},t.createElement("div",null,t.createElement("p",{className:"text-sm font-medium text-gray-600"},e.title),t.createElement("p",{className:"text-2xl font-bold text-gray-900"},e.value),t.createElement("p",{className:"text-xs text-gray-500"},e.description)),t.createElement(e.icon,{className:`h-8 w-8 ${e.color}`})))))),t.createElement(R,{value:a,onValueChange:s},t.createElement(I,{className:"grid w-full grid-cols-3"},t.createElement(F,{value:"browse",className:"flex items-center space-x-2"},t.createElement(m,{className:"h-4 w-4"}),t.createElement("span",null,"Browse Templates")),t.createElement(F,{value:"generate",className:"flex items-center space-x-2"},t.createElement(q,{className:"h-4 w-4"}),t.createElement("span",null,"AI Generator")),t.createElement(F,{value:"customize",className:"flex items-center space-x-2"},t.createElement(v,{className:"h-4 w-4"}),t.createElement("span",null,"Customize"))),t.createElement(U,{value:"browse",className:"space-y-6"},t.createElement(c,null,t.createElement(g,null,t.createElement(N,{className:"text-lg"},"Template Categories"),t.createElement(x,null,"Explore templates by category")),t.createElement(r,null,t.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},[{name:"Contracts & Agreements",count:45,description:"Service agreements, NDAs, and general contracts",popular:!0},{name:"Employment Law",count:28,description:"Employment contracts and HR documents",popular:!0},{name:"Corporate Documents",count:32,description:"Partnership agreements and corporate filings",popular:!1},{name:"Real Estate",count:18,description:"Lease agreements and property documents",popular:!1},{name:"Compliance & Regulatory",count:15,description:"Privacy policies and terms of service",popular:!0},{name:"Personal Legal",count:12,description:"Wills, powers of attorney, and personal documents",popular:!1}].map((e,a)=>t.createElement("div",{key:a,className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer"},t.createElement("div",{className:"flex items-center justify-between mb-2"},t.createElement("h3",{className:"font-medium"},e.name),t.createElement("div",{className:"flex items-center space-x-1"},t.createElement(w,{variant:"secondary"},e.count),e.popular&&t.createElement(V,{className:"h-4 w-4 text-yellow-500"}))),t.createElement("p",{className:"text-sm text-gray-600"},e.description)))))),t.createElement(TemplateBrowser,{onTemplateSelect:e=>{o(e),s("customize")},onTemplatePreview:e=>{o(e),s("customize")}})),t.createElement(U,{value:"generate",className:"space-y-6"},t.createElement(W,{onTemplateGenerated:e=>{d(e);const t={id:"generated-"+Date.now(),name:e.name,description:e.description,category:e.category,content:e.content,variables:e.variables,is_public:!1,created_by:"current-user",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};o(t),s("customize")}})),t.createElement(U,{value:"customize",className:"space-y-6"},n?t.createElement(TemplateCustomizer,{template:n,onSave:(e,t)=>{console.log("Template customized:",{content:e,variables:t})},onDownload:(e,t)=>{const a=new Blob([e],{type:"text/plain"}),l=URL.createObjectURL(a),s=document.createElement("a");s.href=l,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}}):t.createElement(c,null,t.createElement(r,{className:"text-center py-12"},t.createElement(v,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),t.createElement("h3",{className:"text-xl font-medium text-gray-900 mb-2"},"No Template Selected"),t.createElement("p",{className:"text-gray-500 mb-6"},"Choose a template from the browser or generate a new one with AI to start customizing."),t.createElement("div",{className:"flex justify-center space-x-4"},t.createElement(l,{variant:"outline",onClick:()=>s("browse")},t.createElement(m,{className:"h-4 w-4 mr-2"}),"Browse Templates"),t.createElement(l,{onClick:()=>s("generate")},t.createElement(q,{className:"h-4 w-4 mr-2"}),"Generate with AI"))))))))};export{Templates as default};
